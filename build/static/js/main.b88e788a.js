/*! For license information please see main.b88e788a.js.LICENSE.txt */
(()=>{var e={25:(e,t,n)=>{"use strict";n.d(t,{createNotification:()=>s});var r=n(428),a=n(220);n(109);const s=async function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"status_update";try{await(0,a.gS)((0,a.rJ)(r.db,"notifications"),{userId:e,title:t,message:n,type:s,read:!1,createdAt:(0,a.serverTimestamp)()})}catch(i){throw console.error("Error creating notification:",i),i}}},49:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,f(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,j={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,a)&&!E.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+_(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(I,"$&/")+"/"),T(i,t,a,"",(function(e){return e}))):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(I,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+_(o=e[c],c);l+=T(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,d=s+_(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},P={transition:null},R={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:P,ReactCurrentOwner:j};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.current.useTransition()},t.version="18.3.1"},109:(e,t,n)=>{"use strict";n.d(t,{J2:()=>r,Ot:()=>l,Pd:()=>s,Z9:()=>i,createApprovalNotification:()=>c,qY:()=>a,triggerAutomaticStatusTransition:()=>o});n(428),n(220);const r={PENDING:"pending",DOCTOR_APPROVED:"doctor-approved",DOCTOR_REJECTED:"doctor-rejected",ADMIN_APPROVED:"admin-approved",ADMIN_REJECTED:"admin-rejected",NEEDS_INFO:"needs-info",PENDING_DOCTOR_REVIEW:"pending-doctor-review",APPEAL_PENDING:"appeal-pending",INITIAL_DOCTOR_APPROVED:"initial-doctor-approved",INITIAL_DOCTOR_REJECTED:"initial-doctor-rejected",PENDING_INITIAL_ADMIN_APPROVAL:"pending-initial-admin-approval",INITIAL_ADMIN_APPROVED:"initial-admin-approved",INITIAL_ADMIN_REJECTED:"initial-admin-rejected",INITIALLY_APPROVED:"initially-approved",MEDICAL_EVALUATION_IN_PROGRESS:"medical-evaluation-in-progress",MEDICAL_EVALUATION_COMPLETED:"medical-evaluation-completed",PENDING_FINAL_ADMIN_REVIEW:"pending-final-admin-review",FINAL_ADMIN_APPROVED:"final-admin-approved",FINAL_ADMIN_REJECTED:"final-admin-rejected"},a=e=>{switch(e){case r.PENDING:return"bg-yellow-100 text-yellow-800";case r.DOCTOR_APPROVED:return"bg-blue-100 text-blue-800";case r.DOCTOR_REJECTED:return"bg-red-100 text-red-800";case r.INITIAL_DOCTOR_APPROVED:return"bg-blue-50 text-blue-800";case r.INITIAL_DOCTOR_REJECTED:return"bg-red-100 text-red-800";case r.PENDING_INITIAL_ADMIN_APPROVAL:return"bg-orange-100 text-orange-800";case r.INITIAL_ADMIN_APPROVED:return"bg-green-50 text-green-800";case r.INITIAL_ADMIN_REJECTED:return"bg-red-200 text-red-800";case r.INITIALLY_APPROVED:return"bg-green-100 text-green-800";case r.MEDICAL_EVALUATION_IN_PROGRESS:return"bg-purple-100 text-purple-800";case r.MEDICAL_EVALUATION_COMPLETED:return"bg-blue-100 text-blue-800";case r.PENDING_FINAL_ADMIN_REVIEW:return"bg-orange-100 text-orange-800";case r.FINAL_ADMIN_APPROVED:return"bg-green-100 text-green-800";case r.FINAL_ADMIN_REJECTED:return"bg-red-100 text-red-800";case"Final Admin Approved":return"bg-green-100 text-green-800";case"Final Admin Rejected":return"bg-red-100 text-red-800";case r.ADMIN_APPROVED:return"bg-green-100 text-green-800";case r.ADMIN_REJECTED:return"bg-red-200 text-red-800";case r.NEEDS_INFO:return"bg-purple-100 text-purple-800";case r.PENDING_DOCTOR_REVIEW:return"bg-blue-100 text-blue-800";case r.APPEAL_PENDING:return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},s=e=>({[r.PENDING]:"Pending Review",[r.DOCTOR_APPROVED]:"Doctor Approved",[r.DOCTOR_REJECTED]:"Doctor Rejected",[r.ADMIN_APPROVED]:"Admin Approved",[r.ADMIN_REJECTED]:"Admin Rejected",[r.NEEDS_INFO]:"Additional Information Needed",[r.PENDING_DOCTOR_REVIEW]:"Pending Doctor Review",[r.APPEAL_PENDING]:"Appeal Pending",[r.INITIAL_DOCTOR_APPROVED]:"Doctor Initially Approved",[r.INITIAL_DOCTOR_REJECTED]:"Doctor Rejected",[r.PENDING_INITIAL_ADMIN_APPROVAL]:"Pending Initial Admin Approval",[r.INITIAL_ADMIN_APPROVED]:"Initial Admin Approved",[r.INITIAL_ADMIN_REJECTED]:"Initial Admin Rejected",[r.INITIALLY_APPROVED]:"Initially Approved",[r.MEDICAL_EVALUATION_IN_PROGRESS]:"Medical Evaluation In Progress",[r.MEDICAL_EVALUATION_COMPLETED]:"Medical Evaluation Completed",[r.PENDING_FINAL_ADMIN_REVIEW]:"Pending Final Admin Review",[r.FINAL_ADMIN_APPROVED]:"Final Admin Approved",[r.FINAL_ADMIN_REJECTED]:"Final Admin Rejected","Final Admin Approved":"Final Admin Approved","Final Admin Rejected":"Final Admin Rejected"}[e]||"Unknown Status"),i=a,o=async(e,t)=>{if(t===r.INITIAL_DOCTOR_APPROVED)try{const{doc:t,updateDoc:a,serverTimestamp:s}=await Promise.resolve().then(n.bind(n,220)),{db:i}=await Promise.resolve().then(n.bind(n,428)),o=t(i,"medicalRecords",e);return await a(o,{requestStatus:r.PENDING_INITIAL_ADMIN_APPROVAL,status:r.PENDING_INITIAL_ADMIN_APPROVAL,updatedAt:s(),autoTransitioned:!0,autoTransitionDate:s()}),r.PENDING_INITIAL_ADMIN_APPROVAL}catch(a){return console.error("Error in automatic status transition:",a),t}return t},l=(e,t)=>"doctor"===t||"donor"===t&&(e===r.INITIALLY_APPROVED||e===r.FINAL_ADMIN_APPROVED||"Final Admin Approved"===e),c=async(e,t)=>{try{const{createNotification:a}=await Promise.resolve().then(n.bind(n,25));let s="",i="";switch(t){case r.INITIALLY_APPROVED:s="Initial Admin Approval",i="You are initially approved by administration. Appointment scheduled by hospital soon stay tuned.";break;case r.INITIAL_ADMIN_REJECTED:s="Application Rejected",i="You are not eligible for donation initially - administration reject you.";break;case r.PENDING_INITIAL_ADMIN_APPROVAL:s="Pending Admin Review",i="Your application is now pending initial administration approval.";break;case r.FINAL_ADMIN_APPROVED:case"Final Admin Approved":s="Final Admin Approval",i="Congratulations! You have been finally approved by the administration after medical evaluation.";break;case r.FINAL_ADMIN_REJECTED:case"Final Admin Rejected":s="Final Admin Rejection",i="Your application has been finally rejected by the administration after medical evaluation.";break;default:return}await a(e,s,i,"approval_update")}catch(a){console.error("Error creating approval notification:",a)}}},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},146:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},170:(e,t,n)=>{"use strict";n.d(t,{cY:()=>m,FA:()=>P,g:()=>k,u:()=>o,Uj:()=>i,Fy:()=>v,tD:()=>q,bD:()=>L,hp:()=>V,T9:()=>h,Tj:()=>d,yU:()=>u,XA:()=>p,mS:()=>l,Ku:()=>J,ZQ:()=>w,sr:()=>A,zJ:()=>f,c1:()=>E,Im:()=>O,lT:()=>I,zW:()=>C,jZ:()=>N,lV:()=>S,nr:()=>_,Ov:()=>T,gE:()=>g,Am:()=>F,I9:()=>U,P1:()=>b,eX:()=>D});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const t=e[a],s=a+1<e.length,i=s?e[a+1]:0,o=a+2<e.length,l=o?e[a+2]:0,c=t>>2,d=(3&t)<<4|i>>4;let u=(15&i)<<2|l>>6,h=63&l;o||(h=64,s||(u=64)),r.push(n[c],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const t=n[e.charAt(a++)],i=a<e.length?n[e.charAt(a)]:0;++a;const o=a<e.length?n[e.charAt(a)]:64;++a;const l=a<e.length?n[e.charAt(a)]:64;if(++a,null==t||null==i||null==o||null==l)throw new s;const c=t<<2|i>>4;if(r.push(c),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(e){return function(e){const t=r(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLOUDINARY_API_KEY:"328386383747649",REACT_APP_CLOUDINARY_API_SECRET:"ogaqBIEbiu9qp-fX1pUo7mppnAg",REACT_APP_CLOUDINARY_CLOUD_NAME:"datajz3sv",REACT_APP_CLOUDINARY_UPLOAD_PRESET:"Hospitals"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},u=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(e){return e.endsWith(".cloudworkstations.dev")}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(s)),""].join(".")}const y={};let x=!1;function b(e,t){if("undefined"===typeof window||"undefined"===typeof document||!f(window.location.host)||y[e]===t||y[e]||x)return;function n(e){return"__firebase__banner__".concat(e)}y[e]=t;const r="__firebase__banner",a=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(y))y[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{x=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function i(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,i,l,n),document.body.appendChild(t)}a?(i.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",i):i()}function w(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function N(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function j(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function E(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function A(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function S(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){const e=w();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!j()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){return!j()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function C(){try{return"object"===typeof indexedDB}catch(e){return!1}}function D(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P.prototype.create)}}class P{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace(R,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new k(n,s,t)}}const R=/\{\$([^}]+)}/g;function O(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const n=e[a],s=t[a];if(M(n)&&M(s)){if(!L(n,s))return!1}else if(n!==s)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){const n=new z(e,t);return n.subscribe.bind(n)}class z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function B(){}function J(e){return e&&e._delegate?e._delegate:e}},220:(e,t,n)=>{"use strict";n.d(t,{Dc:()=>ne,gS:()=>cc,rJ:()=>Xo,kd:()=>lc,doc:()=>Zo,x7:()=>rc,GG:()=>sc,aU:()=>rl,AB:()=>Gl,My:()=>Jl,P:()=>Ul,serverTimestamp:()=>hc,BN:()=>ic,updateDoc:()=>oc,_M:()=>ql});var r,a,s=n(913),i=n(253),o=n(624),l=n(170),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var a=0;16>a;++a)r[a]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(a=0;16>a;++a)r[a]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],a=e.g[2];var s=e.g[3],i=t+(s^n&(a^s))+r[0]+3614090360&4294967295;i=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=n+(i<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^n&(a^s))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^n&(a^s))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^n&(a^s))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^s&(n^a))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(a^s&(n^a))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(a^s&(n^a))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(a^s&(n^a))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^a^s)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^a^s)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^a^s)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^a^s)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(a^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=a+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(s^(a|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(a^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=a+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(s^(a|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(a^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=a+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(s^(a|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((s=(t=n+((i=t+(a^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((a=s+((i=a+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(a+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+a&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,a=e.length-1;0<=a;a--){var s=0|e[a];r&&s==t||(n[a]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return t.prototype[n].apply(e,a)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,a=this.B,s=this.h,i=0;i<t;){if(0==s)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(a[s++]=e.charCodeAt(i++),s==this.blockSize){n(this,a),s=0;break}}else for(;i<t;)if(a[s++]=e[i++],s==this.blockSize){n(this,a),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new s([0|e],0>e?-1:0)})):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return f(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),u=o(1),h=o(16777216);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function f(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(u)}function g(e,t){return e.add(f(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function x(e,t){if(p(t))throw Error("division by zero");if(p(e))return new y(c,c);if(m(e))return t=x(f(e),t),new y(f(t.g),f(t.h));if(m(t))return t=x(e,f(t)),new y(f(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;0>=r.l(e);)n=b(n),r=b(r);var a=w(n,1),s=w(r,1);for(r=w(r,2),n=w(n,2);!p(r);){var i=s.add(r);0>=i.l(e)&&(a=a.add(n),s=i),r=w(r,1),n=w(n,1)}return t=g(e,a.j(t)),new y(a,t)}for(a=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),i=(s=l(n)).j(t);m(i)||0<i.l(e);)i=(s=l(n-=r)).j(t);p(s)&&(s=u),a=a.add(s),e=g(e,i)}return new y(a,e)}function b(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,a=[],i=0;i<r;i++)a[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new s(a,e.h)}(e=s.prototype).m=function(){if(m(this))return-f(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(m(this))return"-"+f(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var a=x(n,t).g,s=((0<(n=g(n,a.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(p(n=a))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return m(this)?f(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,a=0;a<=t;a++){var i=r+(65535&this.i(a))+(65535&e.i(a)),o=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);r=o>>>16,i&=65535,o&=65535,n[a]=o<<16|i}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(m(this))return m(e)?f(this).j(f(e)):f(f(this).j(e));if(m(e))return f(this.j(f(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var a=0;a<e.g.length;a++){var i=this.i(r)>>>16,o=65535&this.i(r),d=e.i(a)>>>16,u=65535&e.i(a);n[2*r+2*a]+=o*u,v(n,2*r+2*a),n[2*r+2*a+1]+=i*u,v(n,2*r+2*a+1),n[2*r+2*a+1]+=o*d,v(n,2*r+2*a+1),n[2*r+2*a+2]+=i*d,v(n,2*r+2*a+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return x(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,a=d.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),a=c,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),n);8>i?(i=l(Math.pow(n,i)),a=a.j(i).add(l(o))):a=(a=a.j(r)).add(l(o))}return a},r=d.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var u,h,p,m,f,g,v,y,x="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof x&&x];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var a=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var i=e[s];if(!(i in a))break e;a=a[i]}(r=r(s=a[e=e[e.length-1]]))!=s&&null!=r&&t(a,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,(function(e,t){return t}))}}));var r=r||{},a=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return t.prototype[n].apply(e,a)}}function N(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function j(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let a=0;a<r;a++)e[n+a]=t[a]}else e.push(t)}}function E(e){return/^[\s\xa0]*$/.test(e)}function A(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function S(e){return S[" "](e),e}S[" "]=function(){};var I=-1!=A().indexOf("Gecko")&&!(-1!=A().toLowerCase().indexOf("webkit")&&-1==A().indexOf("Edge"))&&!(-1!=A().indexOf("Trident")||-1!=A().indexOf("MSIE"))&&-1==A().indexOf("Edge");function _(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function T(e){const t={};for(const n in e)t[n]=e[n];return t}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let n,r;for(let a=1;a<arguments.length;a++){for(n in r=arguments[a],r)e[n]=r[n];for(let t=0;t<C.length;t++)n=C[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function P(e){a.setTimeout((()=>{throw e}),0)}function R(){var e=U;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var O=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new L),(e=>e.reset()));class L{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,U=new class{constructor(){this.h=this.g=null}add(e,t){const n=O.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},V=()=>{const e=a.Promise.resolve(void 0);M=()=>{e.then(q)}};var q=()=>{for(var e;e=R();){try{e.h.call(e.g)}catch(n){P(n)}var t=O;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function z(){this.s=this.s,this.C=this.C}function B(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},B.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function H(e,t){if(B.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(I){e:{try{S(t.nodeName);var a=!0;break e}catch(s){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:G[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.aa.h.call(this)}}w(H,B);var G={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),Y=0;function K(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++Y,this.da=this.fa=!1}function Q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function Z(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],s=Array.prototype.indexOf.call(a,t,void 0);(r=0<=s)&&Array.prototype.splice.call(a,s,1),r&&(Q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var a=0;a<e.length;++a){var s=e[a];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return a}return-1}X.prototype.add=function(e,t,n,r,a){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var i=$(e,t,r,a);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new K(t,this.src,s,!!r,a)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,a){if(r&&r.once)return ae(e,t,n,r,a);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ne(e,t[s],n,r,a);return null}return n=ue(n),e&&e[W]?e.K(t,n,i(r)?!!r.capture:!!r,a):re(e,t,n,!1,r,a)}function re(e,t,n,r,a,s){if(!t)throw Error("Invalid event type");var o=i(a)?!!a.capture:!!a,l=ce(e);if(l||(e[ee]=l=new X(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)J||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ae(e,t,n,r,a){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ae(e,t[s],n,r,a);return null}return n=ue(n),e&&e[W]?e.L(t,n,i(r)?!!r.capture:!!r,a):re(e,t,n,!0,r,a)}function se(e,t,n,r,a){if(Array.isArray(t))for(var s=0;s<t.length;s++)se(e,t[s],n,r,a);else r=i(r)?!!r.capture:!!r,n=ue(n),e&&e[W]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,a))&&(Q(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,a)),(n=-1<e?t[e]:null)&&ie(n))}function ie(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[W])Z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(Z(n,e),0==n.h&&(n.src=null,t[ee]=null)):Q(e)}}}function oe(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new H(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ie(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof X?e:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function ue(e){return"function"===typeof e?e:(e[de]||(e[de]=function(t){return e.handleEvent(t)}),e[de])}function he(){z.call(this),this.i=new X(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new B(t,e);else if(t instanceof B)t.target=t.target||e;else{var a=t;D(t=new B(r,e),a)}if(a=!0,n)for(var s=n.length-1;0<=s;s--){var i=t.g=n[s];a=me(i,r,!0,t)&&a}if(a=me(i=t.g=e,r,!0,t)&&a,a=me(i,r,!1,t)&&a,n)for(s=0;s<n.length;s++)a=me(i=t.g=n[s],r,!1,t)&&a}function me(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,s=0;s<t.length;++s){var i=t[s];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&Z(e.i,i),a=!1!==o.call(l,r)&&a}}return a&&!r.defaultPrevented}function fe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function ge(e){e.g=fe((()=>{e.g=null,e.i&&(e.i=!1,ge(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}w(he,z),he.prototype[W]=!0,he.prototype.removeEventListener=function(e,t,n,r){se(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Q(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ve extends z{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){z.call(this),this.h=e,this.g={}}w(ye,z);var xe=[];function be(e){_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ie(e)}),e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),be(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=a.JSON.stringify,Ne=a.JSON.parse,je=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function Ee(){}function Ae(e){return e.h||(e.h=e.i())}function Se(){}Ee.prototype.h=null;var Ie={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _e(){B.call(this,"d")}function Te(){B.call(this,"c")}w(_e,B),w(Te,B);var Ce={},De=null;function ke(){return De=De||new he}function Pe(e){B.call(this,Ce.La,e)}function Re(e){const t=ke();pe(t,new Pe(t))}function Oe(e,t){B.call(this,Ce.STAT_EVENT,e),this.stat=t}function Le(e){const t=ke();pe(t,new Oe(t,e))}function Me(e,t){B.call(this,Ce.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}function Ue(){this.g=!0}function Ve(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var s=a[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var i=1;i<a.length;i++)a[i]=""}}}return we(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}Ce.La="serverreachability",w(Pe,B),Ce.STAT_EVENT="statevent",w(Oe,B),Ce.Ma="timingevent",w(Me,B),Ue.prototype.xa=function(){this.g=!1},Ue.prototype.info=function(){};var qe,ze={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Je(){}function He(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}w(Je,Ee),Je.prototype.g=function(){return new XMLHttpRequest},Je.prototype.i=function(){return{}},qe=new Je;var We={},Ye={};function Ke(e,t,n){e.L=1,e.v=wt(gt(t)),e.m=n,e.P=!0,Qe(e,null)}function Qe(e,t){e.F=Date.now(),$e(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ot(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ge,e.g=jn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ve(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var a="readystatechange";Array.isArray(a)||(a&&(xe[0]=a.toString()),a=xe);for(var s=0;s<a.length;s++){var i=ne(n,a[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?T(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Re(),function(e,t,n,r,a,s){e.info((function(){if(e.g)if(s)for(var i="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var d=c[0];c=c[1];var u=d.split("_");i=2<=u.length&&"type"==u[1]?i+(d+"=")+c+"&":i+(d+"=redacted&")}}else i=null;else i=s;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+i}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ye:(n=Number(t.substring(n,r)),isNaN(n)?We:(r+=1)+n>t.length?Ye:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(c(e.ba,e),t)}function tt(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||yn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,be(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function at(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(d){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),on(n)}mn(n),Le(18)}}else n.za=a[1],0<n.za-n.T&&37500>a[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(d){}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&vn(n),!E(t))for(a=n.Da.g.parse(t),t=0;t<a.length;t++){let c=a[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const a=c[4];null!=a&&(n.Aa=a,n.j.info("SVER="+n.Aa));const d=c[5];null!=d&&"number"===typeof d&&0<d&&(r=1.5*d,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dt(s,s.h),s.h=null))}if(r.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,bt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=Nn(r,r.J?r.ia:null,r.W),i.K){ut(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(tt(o),$e(o)),r.g=i}else pn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||bn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bn(n,7):sn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Re()}catch(d){}}He.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},He.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Re(),tt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=nn(this.g);e="";var s=r.length,i=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,a,s,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+s+" "+i}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var d=l;break t}}d=null}if(!(n=d)){this.o=!1,this.s=3,Le(12),rt(this),nt(this);break e}Ve(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,at(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ze(this,o),e==Ye){4==h&&(this.s=4,Le(14),n=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}if(e==We){this.s=4,Le(15),Ve(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ve(this.i,this.l,e,null),at(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Le(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),fn(u),u.M=!0,Le(11))}}else Ve(this.i,this.l,o,"[Invalid Chunked Response]"),rt(this),nt(this)}else Ve(this.i,this.l,o,null),at(this,o);4==h&&rt(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=k(e[r]);const a=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[a]||[];t[a]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),rt(this),nt(this)}}}catch(h){}},He.prototype.cancel=function(){this.J=!0,rt(this)},He.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Re(),Le(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var st=class{constructor(e,t){this.g=e,this.map=t}};function it(e){this.l=e||10,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dt(e,t){e.g?e.g.add(t):e.h=t}function ut(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return N(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}it.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ft){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Dt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xt(this,n),this.m=e.m}else e&&(t=String(e).match(mt))?(this.h=!1,vt(this,t[1]||"",!0),this.o=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),yt(this,t[4]),this.l=Nt(t[5]||"",!0),xt(this,t[6]||"",!0),this.m=Nt(t[7]||"")):(this.h=!1,this.i=new Dt(null,this.h))}function gt(e){return new ft(e)}function vt(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function xt(e,t,n){t instanceof Dt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Pt(this,t),Ot(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=jt(t,Tt)),e.i=new Dt(t,e.h))}function bt(e,t,n){e.i.set(t,n)}function wt(e){return bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ft.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jt(t,St,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(jt(t,St,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(jt(n,"/"==n.charAt(0)?_t:It,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",jt(n,Ct)),e.join("")};var At,St=/[#\/\?@]/g,It=/[#\?:]/g,_t=/[#\?]/g,Tt=/[#\?@]/g,Ct=/#/g;function Dt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var s=e[n].substring(0,r);a=e[n].substring(r+1)}else s=e[n];t(s,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Pt(e,t){kt(e),t=Lt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return kt(e),t=Lt(e,t),e.g.has(t)}function Ot(e,t,n){Pt(e,t),0<n.length&&(e.i=null,e.g.set(Lt(e,t),N(n)),e.h+=n.length)}function Lt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,a){try{a&&(a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null),r(n)}catch(s){}}function Ft(){this.g=new je}function Ut(e,t,n){const r=n||"";try{pt(e,(function(e,n){let a=e;i(e)&&(a=we(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function qt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function zt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Jt(e)}function Jt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return _(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bt(e,t,n))}function Wt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Dt.prototype).add=function(e,t){kt(this),this.i=null,e=Lt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const a=e[r];for(let e=0;e<a.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)Rt(this,e)&&(t=t.concat(this.g.get(Lt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,Rt(this,e=Lt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var a=s;""!==i[r]&&(a+="="+encodeURIComponent(String(i[r]))),e.push(a)}}return this.i=e.join("&")},w(Vt,Ee),Vt.prototype.g=function(){return new qt(this.l,this.j)},Vt.prototype.i=(At={},function(){return At}),w(qt,he),(e=qt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Jt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Jt(this)),this.g&&(this.readyState=3,Jt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):Jt(this),3==this.readyState&&zt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Qa=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),w(Wt,he);var Yt=/^https?$/i,Kt=["POST","PUT"];function Qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),$t(e)}function Xt(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function Zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))fe(e.Ea,0,e);else if(pe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var i=String(e.D).match(mt)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),s=!Yt.test(i?i.toLowerCase():"")}n=s}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Xt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){en(e);const r=e.g,a=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=a}catch(n){}}}function en(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function an(e){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new it(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function sn(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(bt(n,"SID",e.K),bt(n,"RID",t),bt(n,"TYPE","terminate"),un(e,n),(t=new He(e,e.j,t)).L=2,t.v=wt(gt(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=jn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}wn(e)}function on(e){e.g&&(fn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(a.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&a.clearTimeout(e.s),e.s=null)}function cn(e){if(!ot(e.h)&&!e.s){e.s=!0;var t=e.Ga;M||V(),F||(M(),F=!0),U.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);bt(r,"SID",e.K),bt(r,"RID",n),bt(r,"AID",e.T),un(e,r),e.m&&e.o&&Gt(r,e.m,e.o),n=new He(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),dt(e.h,n),Ke(n,r,t)}function un(e,t){e.H&&_(e.H,(function(e,n){bt(t,n,e)})),e.l&&pt({},(function(e,n){bt(t,n,e)}))}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var a=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=a[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=a[o].g;const l=a[o].map;if(n-=t,0>n)t=Math.max(0,a[o].g-100),i=!1;else try{Ut(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;M||V(),F||(M(),F=!0),U.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(c(e.Fa,e),xn(e,e.v)),e.v++,!0)}function fn(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new He(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);bt(t,"RID","rpc"),bt(t,"SID",e.K),bt(t,"AID",e.T),bt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&bt(t,"TO",e.ja),bt(t,"TYPE","xmlhttp"),un(e,t),e.m&&e.o&&Gt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=wt(gt(t)),n.m=null,n.P=!0,Qe(n,e)}function vn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),fn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,ut(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var a=e.B;pe(r=ke(),new Me(r,n)),cn(e)}else pn(e);else if(3==(a=t.s)||0==a&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(c(e.Ga,e,t),xn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function xn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ft(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||vt(r,"https"),wt(r),t?function(e,t){const n=new Ue;if(a.Image){const r=new Image;r.onload=d(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=d(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=d(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=d(Mt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ue;const n=new AbortController,r=setTimeout((()=>{n.abort(),Mt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Mt(0,0,!1,t)}))}(r.toString(),n)}else Le(2);e.G=0,e.l&&e.l.sa(t),wn(e),ln(e)}function wn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(j(e.ka,t),j(e.ka,e.i),e.h.i.length=0,N(e.i),e.i.length=0),e.l.ra()}}function Nn(e,t,n){var r=n instanceof ft?gt(n):new ft(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var s=a.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new ft(null);r&&vt(i,r),t&&(i.g=t),s&&yt(i,s),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&bt(r,n,t),bt(r,"VER",e.la),un(e,r),r}function jn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Wt(new Vt({eb:n})):new Wt(e.pa)).Ha(e.J),t}function En(){}function An(){}function Sn(e,t){he.call(this),this.g=new an(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!E(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Tn(this)}function In(e){_e.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){Te.call(this),this.status=1}function Tn(e){this.g=e}(e=Wt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qe.g(),this.v=this.o?Ae(this.o):Ae(qe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Qt(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Kt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(i){Qt(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Wt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Zt(this):this.bb())},e.bb=function(){Zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(At){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(At){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ne(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=an.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Le(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Nn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const a=new He(this,this.j,e);let s=this.o;if(this.S&&(s?(s=T(s),D(s,this.S)):s=this.S),null!==this.m||this.O||(a.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,a,t),bt(n=gt(this.I),"RID",e),bt(n,"CVER",22),this.D&&bt(n,"X-HTTP-Session-Id",this.D),un(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&Gt(n,this.m,s)),dt(this.h,a),this.Ua&&bt(n,"TYPE","init"),this.P?(bt(n,"$req",t),bt(n,"SID","null"),a.T=!0,Ke(a,n,null)):Ke(a,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||ot(this.h)||dn(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),on(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),mn(this),Le(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},An.prototype.g=function(e,t){return new Sn(e,t)},w(Sn,he),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){sn(this.g)},Sn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=we(e),e=n);t.i.push(new st(t.Ya++,e)),3==t.G&&cn(t)},Sn.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,Sn.aa.N.call(this)},w(In,_e),w(_n,Te),w(Tn,En),Tn.prototype.ua=function(){pe(this.g,"a")},Tn.prototype.ta=function(e){pe(this.g,new In(e))},Tn.prototype.sa=function(e){pe(this.g,new _n)},Tn.prototype.ra=function(){pe(this.g,"b")},An.prototype.createWebChannel=An.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,y=b.createWebChannelTransport=function(){return new An},v=b.getStatEventTarget=function(){return ke()},g=b.Event=Ce,f=b.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ze.NO_ERROR=0,ze.TIMEOUT=8,ze.HTTP_ERROR=6,m=b.ErrorCode=ze,Be.COMPLETE="complete",p=b.EventType=Be,Se.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",he.prototype.listen=he.prototype.K,h=b.WebChannel=Se,b.FetchXmlHttpFactory=Vt,Wt.prototype.listenOnce=Wt.prototype.L,Wt.prototype.getLastError=Wt.prototype.Ka,Wt.prototype.getLastErrorCode=Wt.prototype.Ba,Wt.prototype.getStatus=Wt.prototype.Z,Wt.prototype.getResponseJson=Wt.prototype.Oa,Wt.prototype.getResponseText=Wt.prototype.oa,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Ha,u=b.XhrIo=Wt}).apply("undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore",N="4.7.16";class j{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}j.UNAUTHENTICATED=new j(null),j.GOOGLE_CREDENTIALS=new j("google-credentials-uid"),j.FIRST_PARTY=new j("first-party-uid"),j.MOCK_USER=new j("mock-user");let E="11.8.1";const A=new o.Vy("@firebase/firestore");function S(){return A.logLevel}function I(e){if(A.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(C);A.debug("Firestore (".concat(E,"): ").concat(e),...a)}}function _(e){if(A.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(C);A.error("Firestore (".concat(E,"): ").concat(e),...a)}}function T(e){if(A.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(C);A.warn("Firestore (".concat(E,"): ").concat(e),...a)}}function C(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function D(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,k(e,r,n)}function k(e,t,n){let r="FIRESTORE (".concat(E,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw _(r),new Error(r)}function P(e,t,n,r){let a="Unexpected state";"string"==typeof n?a=n:r=n,e||k(t,a,r)}function R(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class M{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(j.UNAUTHENTICATED)))}shutdown(){}}class V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class q{constructor(e){this.t=e,this.currentUser=j.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){P(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let a=new M;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new M,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=a;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new M)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(P("string"==typeof t.accessToken,31837,{l:t}),new F(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return P(null===e||"string"==typeof e,2055,{h:e}),new j(e)}}class z{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=j.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new z(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(j.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,s.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){P(void 0===this.o,3512);const n=e=>{null!=e.error&&I("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,I("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(P("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new J(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function W(){return new TextEncoder}class Y{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=G(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function K(e,t){return e<t?-1:e>t?1:0}function Q(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return K(r,a);{const s=W(),i=Z(s.encode(X(e,n)),s.encode(X(t,n)));return 0!==i?i:K(r,a)}}n+=r>65535?2:1}return K(e.length,t.length)}function X(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Z(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return K(e[n],t[n]);return K(e.length,t.length)}function $(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const ee=-62135596800,te=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(e){return ne.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*te);return new ne(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ee)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/te}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ee;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new ne(0,0))}static max(){return new re(new ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ae="__name__";class se{constructor(e,t,n){void 0===t?t=0:t>e.length&&D(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&D(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===se.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof se?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=se.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return K(e.length,t.length)}static compareSegments(e,t){const n=se.isNumericId(e),r=se.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?se.extractNumericId(e).compare(se.extractNumericId(t)):Q(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ie extends se{construct(e,t,n){return new ie(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n){if(a.indexOf("//")>=0)throw new L(O.INVALID_ARGUMENT,"Invalid segment (".concat(a,"). Paths must not contain // in them."));e.push(...a.split("/").filter((e=>e.length>0)))}return new ie(e)}static emptyPath(){return new ie([])}}const oe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends se{construct(e,t,n){return new le(e,t,n)}static isValidIdentifier(e){return oe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ae}static keyField(){return new le([ae])}static fromServerFormat(e){const t=[];let n="",r=0;const a=()=>{if(0===n.length)throw new L(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new L(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new L(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(a(),r++)}if(a(),s)throw new L(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new le(t)}static emptyPath(){return new le([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(ie.fromString(e))}static fromName(e){return new ce(ie.fromString(e).popFirst(5))}static empty(){return new ce(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ie.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new ie(e.slice()))}}const de=-1;class ue{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ue.UNKNOWN_ID=-1;function he(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=re.fromTimestamp(1e9===r?new ne(n+1,0):new ne(n,r));return new me(a,ce.empty(),t)}function pe(e){return new me(e.readTime,e.key,de)}class me{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new me(re.min(),ce.empty(),de)}static max(){return new me(re.max(),ce.empty(),de)}}function fe(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ce.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const ge="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ve{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ye(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==ge)throw e;I("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&D(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(e){return xe.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,n)=>{t(e)}))}static reject(e){return new xe(((t,n)=>{n(e)}))}static waitFor(e){return new xe(((t,n)=>{let r=0,a=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++a,s&&a===r&&t()}),(e=>n(e)))})),s=!0,a===r&&t()}))}static or(e){let t=xe.resolve(!1);for(const n of e)t=t.next((e=>e?xe.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new xe(((n,r)=>{const a=e.length,s=new Array(a);let i=0;for(let o=0;o<a;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++i,i===a&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new xe(((n,r)=>{const a=()=>{!0===e()?t().next((()=>{a()}),r):n()};a()}))}}function be(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function we(e){return"IndexedDbTransactionError"===e.name}class Ne{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ne.le=-1;const je=-1;function Ee(e){return null==e}function Ae(e){return 0===e&&1/e==-1/0}function Se(e){return"number"==typeof e&&Number.isInteger(e)&&!Ae(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ie="\x01";function _e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ce(t)),t=Te(e.get(n),t);return Ce(t)}function Te(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const t=e.charAt(a);switch(t){case"\0":n+="\x01\x10";break;case Ie:n+="\x01\x11";break;default:n+=t}}return n}function Ce(e){return e+Ie+"\x01"}const De="remoteDocuments",ke="owner",Pe="mutationQueues",Re="mutations";const Oe="documentMutations",Le="remoteDocumentsV14",Me="remoteDocumentGlobal",Fe="targets",Ue="targetDocuments",Ve="targetGlobal",qe="collectionParents",ze="clientMetadata",Be="bundles",Je="namedQueries",He="indexConfiguration",Ge="indexState",We="indexEntries",Ye="documentOverlays",Ke="globals",Qe=[Pe,Re,Oe,De,Fe,ke,Ve,Ue,ze,Me,qe,Be,Je],Xe=[Pe,Re,Oe,Le,Fe,ke,Ve,Ue,ze,Me,qe,Be,Je,Ye],Ze=Xe,$e=[...Ze,He,Ge,We];function et(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rt{constructor(e,t){this.comparator=e,this.root=t||st.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new at(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new at(this.root,e,this.comparator,!1)}getReverseIterator(){return new at(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new at(this.root,e,this.comparator,!0)}}class at{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,t,n,r,a){this.key=e,this.value=t,this.color=null!=n?n:st.RED,this.left=null!=r?r:st.EMPTY,this.right=null!=a?a:st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,a){return new st(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const a=n(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return st.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw D(43730,{key:this.key,value:this.value});if(this.right.isRed())throw D(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw D(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1,st.EMPTY=new class{constructor(){this.size=0}get key(){throw D(57766)}get value(){throw D(16141)}get color(){throw D(16727)}get left(){throw D(29726)}get right(){throw D(36894)}copy(e,t,n,r,a){return this}insert(e,t,n){return new st(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ot(this.data.getIterator())}getIteratorFrom(e){return new ot(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof it))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class ot{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lt{constructor(e){this.fields=e,e.sort(le.comparator)}static empty(){return new lt([])}unionWith(e){let t=new it(le.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new lt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ct extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ct("Invalid base64 string: "+e):e}}(e);return new dt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const ut=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ht(e){if(P(!!e,39018),"string"==typeof e){let t=0;const n=ut.exec(e);if(P(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pt(e.seconds),nanos:pt(e.nanos)}}function pt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mt(e){return"string"==typeof e?dt.fromBase64String(e):dt.fromUint8Array(e)}const ft="server_timestamp",gt="__type__",vt="__previous_value__",yt="__local_write_time__";function xt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[gt])||void 0===n?void 0:n.stringValue)===ft}function bt(e){const t=e.mapValue.fields[vt];return xt(t)?bt(t):t}function wt(e){const t=ht(e.mapValue.fields[yt].timestampValue);return new ne(t.seconds,t.nanos)}class Nt{constructor(e,t,n,r,a,s,i,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const jt="(default)";class Et{constructor(e,t){this.projectId=e,this.database=t||jt}static empty(){return new Et("","")}get isDefaultDatabase(){return this.database===jt}isEqual(e){return e instanceof Et&&e.projectId===this.projectId&&e.database===this.database}}const At="__type__",St="__max__",It={mapValue:{fields:{__type__:{stringValue:St}}}},_t="__vector__",Tt="value";function Ct(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xt(e)?4:Wt(e)?9007199254740991:Ht(e)?10:11:D(28295,{value:e})}function Dt(e,t){if(e===t)return!0;const n=Ct(e);if(n!==Ct(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wt(e).isEqual(wt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ht(e.timestampValue),r=ht(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mt(e.bytesValue).isEqual(mt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return pt(e.geoPointValue.latitude)===pt(t.geoPointValue.latitude)&&pt(e.geoPointValue.longitude)===pt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return pt(e.integerValue)===pt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=pt(e.doubleValue),r=pt(t.doubleValue);return n===r?Ae(n)===Ae(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $(e.arrayValue.values||[],t.arrayValue.values||[],Dt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(et(n)!==et(r))return!1;for(const a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!Dt(n[a],r[a])))return!1;return!0}(e,t);default:return D(52216,{left:e})}}function kt(e,t){return void 0!==(e.values||[]).find((e=>Dt(e,t)))}function Pt(e,t){if(e===t)return 0;const n=Ct(e),r=Ct(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=pt(e.integerValue||e.doubleValue),r=pt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Rt(e.timestampValue,t.timestampValue);case 4:return Rt(wt(e),wt(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){const n=mt(e),r=mt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let a=0;a<n.length&&a<r.length;a++){const e=K(n[a],r[a]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(pt(e.latitude),pt(t.latitude));return 0!==n?n:K(pt(e.longitude),pt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ot(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,a,s;const i=e.fields||{},o=t.fields||{},l=null===(n=i[Tt])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Tt])||void 0===r?void 0:r.arrayValue,d=K((null===(a=null==l?void 0:l.values)||void 0===a?void 0:a.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==d?d:Ot(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===It.mapValue&&t===It.mapValue)return 0;if(e===It.mapValue)return 1;if(t===It.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),a=t.fields||{},s=Object.keys(a);r.sort(),s.sort();for(let i=0;i<r.length&&i<s.length;++i){const e=Q(r[i],s[i]);if(0!==e)return e;const t=Pt(n[r[i]],a[s[i]]);if(0!==t)return t}return K(r.length,s.length)}(e.mapValue,t.mapValue);default:throw D(23264,{Pe:n})}}function Rt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=ht(e),r=ht(t),a=K(n.seconds,r.seconds);return 0!==a?a:K(n.nanos,r.nanos)}function Ot(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const e=Pt(n[a],r[a]);if(e)return e}return K(n.length,r.length)}function Lt(e){return Mt(e)}function Mt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ht(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return mt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ce.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Mt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const a of t)r?r=!1:n+=",",n+="".concat(a,":").concat(Mt(e.fields[a]));return n+"}"}(e.mapValue):D(61005,{value:e})}function Ft(e){switch(Ct(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bt(e);return t?16+Ft(t):16;case 5:return 2*e.stringValue.length;case 6:return mt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ft(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return tt(e.fields,((e,n)=>{t+=e.length+Ft(n)})),t}(e.mapValue);default:throw D(13486,{value:e})}}function Ut(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vt(e){return!!e&&"integerValue"in e}function qt(e){return!!e&&"arrayValue"in e}function zt(e){return!!e&&"nullValue"in e}function Bt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jt(e){return!!e&&"mapValue"in e}function Ht(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[At])||void 0===n?void 0:n.stringValue)===_t}function Gt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tt(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gt(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Wt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===St}class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gt(t)}setAll(e){let t=le.emptyPath(),n={},r=[];e.forEach(((e,a)=>{if(!t.isImmediateParentOf(a)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=a.popLast()}e?n[a.lastSegment()]=Gt(e):r.push(a.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,r)}delete(e){const t=this.field(e.popLast());Jt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tt(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Yt(Gt(this.value))}}function Kt(e){const t=[];return tt(e.fields,((e,n)=>{const r=new le([e]);if(Jt(n)){const e=Kt(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new lt(t)}class Qt{constructor(e,t,n,r,a,s,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=a,this.data=s,this.documentState=i}static newInvalidDocument(e){return new Qt(e,0,re.min(),re.min(),re.min(),Yt.empty(),0)}static newFoundDocument(e,t,n,r){return new Qt(e,1,t,re.min(),n,r,0)}static newNoDocument(e,t){return new Qt(e,2,t,re.min(),re.min(),Yt.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,re.min(),re.min(),Yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Xt{constructor(e,t){this.position=e,this.inclusive=t}}function Zt(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(r=s.field.isKeyField()?ce.comparator(ce.fromName(i.referenceValue),n.key):Pt(i,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $t(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dt(e.position[n],t.position[n]))return!1;return!0}class en{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function tn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nn{}class rn extends nn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new hn(e,t,n):"array-contains"===t?new gn(e,n):"in"===t?new vn(e,n):"not-in"===t?new yn(e,n):"array-contains-any"===t?new xn(e,n):new rn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new pn(e,n):new mn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Pt(t,this.value)):null!==t&&Ct(this.value)===Ct(t)&&this.matchesComparison(Pt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return D(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends nn{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new an(e,t)}matches(e){return sn(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sn(e){return"and"===e.op}function on(e){return ln(e)&&sn(e)}function ln(e){for(const t of e.filters)if(t instanceof an)return!1;return!0}function cn(e){if(e instanceof rn)return e.field.canonicalString()+e.op.toString()+Lt(e.value);if(on(e))return e.filters.map((e=>cn(e))).join(",");{const t=e.filters.map((e=>cn(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function dn(e,t){return e instanceof rn?function(e,t){return t instanceof rn&&e.op===t.op&&e.field.isEqual(t.field)&&Dt(e.value,t.value)}(e,t):e instanceof an?function(e,t){return t instanceof an&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&dn(n,t.filters[r])),!0)}(e,t):void D(19439)}function un(e){return e instanceof rn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Lt(e.value))}(e):e instanceof an?function(e){return e.op.toString()+" {"+e.getFilters().map(un).join(" ,")+"}"}(e):"Filter"}class hn extends rn{constructor(e,t,n){super(e,t,n),this.key=ce.fromName(n.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class pn extends rn{constructor(e,t){super(e,"in",t),this.keys=fn("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mn extends rn{constructor(e,t){super(e,"not-in",t),this.keys=fn("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ce.fromName(e.referenceValue)))}class gn extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qt(t)&&kt(t.arrayValue,this.value)}}class vn extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kt(this.value.arrayValue,t)}}class yn extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!kt(this.value.arrayValue,t)}}class xn extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qt(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>kt(this.value.arrayValue,e)))}}class bn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=a,this.startAt=s,this.endAt=i,this.Ie=null}}function wn(e){return new bn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nn(e){const t=R(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>cn(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ee(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Lt(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Lt(e))).join(",")),t.Ie=e}return t.Ie}function jn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$t(e.startAt,t.startAt)&&$t(e.endAt,t.endAt)}function En(e){return ce.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class An{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=a,this.limitType=s,this.startAt=i,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Sn(e,t,n,r,a,s,i,o){return new An(e,t,n,r,a,s,i,o)}function In(e){return new An(e)}function _n(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Tn(e){return null!==e.collectionGroup}function Cn(e){const t=R(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ee.push(a),e.add(a.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new it(le.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new en(r,n))})),e.has(le.keyField().canonicalString())||t.Ee.push(new en(le.keyField(),n))}return t.Ee}function Dn(e){const t=R(e);return t.de||(t.de=kn(t,Cn(e))),t.de}function kn(e,t){if("F"===e.limitType)return wn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new en(e.field,t)}));const n=e.endAt?new Xt(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Xt(e.startAt.position,e.startAt.inclusive):null;return wn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Pn(e,t){const n=e.filters.concat([t]);return new An(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Rn(e,t,n){return new An(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function On(e,t){return jn(Dn(e),Dn(t))&&e.limitType===t.limitType}function Ln(e){return"".concat(Nn(Dn(e)),"|lt:").concat(e.limitType)}function Mn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>un(e))).join(", "),"]")),Ee(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Lt(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Lt(e))).join(",")),"Target(".concat(t,")")}(Dn(e)),"; limitType=").concat(e.limitType,")")}function Fn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ce.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Cn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Cn(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Cn(e),t))}(e,t)}function Un(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vn(e){return(t,n)=>{let r=!1;for(const a of Cn(e)){const e=qn(a,t,n);if(0!==e)return e;r=r||a.field.isKeyField()}return 0}}function qn(e,t,n){const r=e.field.isKeyField()?ce.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?Pt(r,a):D(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return D(19790,{direction:e.dir})}}class zn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,a]of n)if(this.equalsFn(r,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tt(this.inner,((t,n)=>{for(const[r,a]of n)e(r,a)}))}isEmpty(){return nt(this.inner)}size(){return this.innerSize}}const Bn=new rt(ce.comparator);function Jn(){return Bn}const Hn=new rt(ce.comparator);function Gn(){let e=Hn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.insert(a.key,a);return e}function Wn(e){let t=Hn;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Yn(){return Qn()}function Kn(){return Qn()}function Qn(){return new zn((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Xn=new rt(ce.comparator),Zn=new it(ce.comparator);function $n(){let e=Zn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.add(a);return e}const er=new it(K);function tr(){return er}function nr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ae(t)?"-0":t}}function rr(e){return{integerValue:""+e}}function ar(e,t){return Se(t)?rr(t):nr(e,t)}class sr{constructor(){this._=void 0}}function ir(e,t,n){return e instanceof cr?function(e,t){const n={fields:{[gt]:{stringValue:ft},[yt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&xt(t)&&(t=bt(t)),t&&(n.fields[vt]=t),{mapValue:n}}(n,t):e instanceof dr?ur(e,t):e instanceof hr?pr(e,t):function(e,t){const n=lr(e,t),r=fr(n)+fr(e.Re);return Vt(n)&&Vt(e.Re)?rr(r):nr(e.serializer,r)}(e,t)}function or(e,t,n){return e instanceof dr?ur(e,t):e instanceof hr?pr(e,t):n}function lr(e,t){return e instanceof mr?function(e){return Vt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class cr extends sr{}class dr extends sr{constructor(e){super(),this.elements=e}}function ur(e,t){const n=gr(t);for(const r of e.elements)n.some((e=>Dt(e,r)))||n.push(r);return{arrayValue:{values:n}}}class hr extends sr{constructor(e){super(),this.elements=e}}function pr(e,t){let n=gr(t);for(const r of e.elements)n=n.filter((e=>!Dt(e,r)));return{arrayValue:{values:n}}}class mr extends sr{constructor(e,t){super(),this.serializer=e,this.Re=t}}function fr(e){return pt(e.integerValue||e.doubleValue)}function gr(e){return qt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class vr{constructor(e,t){this.field=e,this.transform=t}}class yr{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function br(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class wr{}function Nr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kr(e.key,xr.none()):new Ir(e.key,e.data,xr.none());{const n=e.data,r=Yt.empty();let a=new it(le.comparator);for(let e of t.fields)if(!a.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),a=a.add(e)}return new _r(e.key,r,new lt(a.toArray()),xr.none())}}function jr(e,t,n){e instanceof Ir?function(e,t,n){const r=e.value.clone(),a=Cr(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _r?function(e,t,n){if(!br(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cr(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(Tr(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Er(e,t,n,r){return e instanceof Ir?function(e,t,n,r){if(!br(e.precondition,t))return n;const a=e.value.clone(),s=Dr(e.fieldTransforms,r,t);return a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof _r?function(e,t,n,r){if(!br(e.precondition,t))return n;const a=Dr(e.fieldTransforms,r,t),s=t.data;return s.setAll(Tr(e)),s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return br(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ar(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),a=lr(r.transform,e||null);null!=a&&(null===n&&(n=Yt.empty()),n.set(r.field,a))}return n||null}function Sr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dr&&t instanceof dr||e instanceof hr&&t instanceof hr?$(e.elements,t.elements,Dt):e instanceof mr&&t instanceof mr?Dt(e.Re,t.Re):e instanceof cr&&t instanceof cr}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ir extends wr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _r extends wr{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Tr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cr(e,t,n){const r=new Map;P(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);r.set(s.field,or(i,o,n[a]))}return r}function Dr(e,t,n){const r=new Map;for(const a of e){const e=a.transform,s=n.data.field(a.field);r.set(a.field,ir(e,s,t))}return r}class kr extends wr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pr extends wr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&jr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Er(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Er(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Kn();return this.mutations.forEach((r=>{const a=e.get(r.key),s=a.overlayedDocument;let i=this.applyToLocalView(s,a.mutatedFields);i=t.has(r.key)?null:i;const o=Nr(s,i);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(re.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$n())}isEqual(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations,((e,t)=>Sr(e,t)))&&$(this.baseMutations,e.baseMutations,((e,t)=>Sr(e,t)))}}class Or{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){P(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Xn;const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,n[s].version);return new Or(e,t,n,r)}}class Lr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Mr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fr,Ur;function Vr(e){switch(e){case O.OK:return D(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return D(15467,{code:e})}}function qr(e){if(void 0===e)return _("GRPC error has no .code"),O.UNKNOWN;switch(e){case Fr.OK:return O.OK;case Fr.CANCELLED:return O.CANCELLED;case Fr.UNKNOWN:return O.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return O.INTERNAL;case Fr.UNAVAILABLE:return O.UNAVAILABLE;case Fr.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Fr.NOT_FOUND:return O.NOT_FOUND;case Fr.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Fr.ABORTED:return O.ABORTED;case Fr.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Fr.DATA_LOSS:return O.DATA_LOSS;default:return D(39323,{code:e})}}(Ur=Fr||(Fr={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";let zr=null;const Br=new r([4294967295,4294967295],0);function Jr(e){const t=W().encode(e),n=new a;return n.update(t),new Uint8Array(n.digest())}function Hr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),a=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new r([n,a],0),new r([s,i],0)]}class Gr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Wr("Invalid padding: ".concat(t));if(n<0)throw new Wr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Wr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Wr("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=r.fromNumber(this.pe)}we(e,t,n){let a=e.add(t.multiply(r.fromNumber(n)));return 1===a.compare(Br)&&(a=new r([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Jr(e),[n,r]=Hr(t);for(let a=0;a<this.hashCount;a++){const e=this.we(n,r,a);if(!this.Se(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new Gr(a,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=Jr(e),[n,r]=Hr(t);for(let a=0;a<this.hashCount;a++){const e=this.we(n,r,a);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Wr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yr{constructor(e,t,n,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Yr(re.min(),r,new rt(K),Jn(),$n())}}class Kr{constructor(e,t,n,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kr(n,t,$n(),$n(),$n())}}class Qr{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Xr{constructor(e,t){this.targetId=e,this.Ce=t}}class Zr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class $r{constructor(){this.Fe=0,this.Me=na(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=$n(),t=$n(),n=$n();return this.Me.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:D(38017,{changeType:a})}})),new Kr(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=na()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,P(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ea{constructor(e){this.ze=e,this.je=new Map,this.He=Jn(),this.Je=ta(),this.Ye=ta(),this.Ze=new rt(K)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:D(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const a=r.target;if(En(a))if(0===n){const e=new ce(a.path);this.tt(t,e,Qt.newNoDocument(e,re.min()))}else P(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),a=n?this.lt(n,e,r):1;if(0!==a){this.st(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==zr||zr.ht(function(e,t,n,r,a){var s,i,o,l,c,d;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===a,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(i=null==h?void 0:h.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(d=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==d?d:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.ze.Pt(),n,a))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:a=0}=t;let s,i;try{s=mt(n).toUint8Array()}catch(e){if(e instanceof ct)return T("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Gr(s,r,a)}catch(e){return T(e instanceof Wr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.pe?null:i}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const a=this.ze.Pt(),s="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const a=this._t(r);if(a){if(n.current&&En(a.target)){const t=new ce(a.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Qt.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=$n();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Yr(e,t,this.Ze,this.He,n);return this.He=Jn(),this.Je=ta(),this.Ye=ta(),this.Ze=new rt(K),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new $r,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new it(K),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new it(K),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||I("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new $r),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ta(){return new rt(ce.comparator)}function na(){return new rt(ce.comparator)}const ra={asc:"ASCENDING",desc:"DESCENDING"},aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sa={and:"AND",or:"OR"};class ia{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function oa(e,t){return e.useProto3Json||Ee(t)?t:{value:t}}function la(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ca(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function da(e,t){return la(e,t.toTimestamp())}function ua(e){return P(!!e,49232),re.fromTimestamp(function(e){const t=ht(e);return new ne(t.seconds,t.nanos)}(e))}function ha(e,t){return pa(e,t).canonicalString()}function pa(e,t){const n=function(e){return new ie(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ma(e){const t=ie.fromString(e);return P(Ra(t),10190,{key:t.toString()}),t}function fa(e,t){return ha(e.databaseId,t.path)}function ga(e,t){const n=ma(t);if(n.get(1)!==e.databaseId.projectId)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ce(ba(n))}function va(e,t){return ha(e.databaseId,t)}function ya(e){const t=ma(e);return 4===t.length?ie.emptyPath():ba(t)}function xa(e){return new ie(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ba(e){return P(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function wa(e,t,n){return{name:fa(e,t),fields:n.value.mapValue.fields}}function Na(e,t){let n;if(t instanceof Ir)n={update:wa(e,t.key,t.value)};else if(t instanceof kr)n={delete:fa(e,t.key)};else if(t instanceof _r)n={update:wa(e,t.key,t.data),updateMask:Pa(t.fieldMask)};else{if(!(t instanceof Pr))return D(16599,{ft:t.type});n={verify:fa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof cr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof dr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mr)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw D(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:da(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:D(27497)}(e,t.precondition)),n}function ja(e,t){return{documents:[va(e,t.path)]}}function Ea(e,t){const n={structuredQuery:{}},r=t.path;let a;null!==t.collectionGroup?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=va(e,a);const s=function(e){if(0!==e.length)return ka(an.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ca(e.field),direction:Ia(e.dir)}}(e)))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=oa(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:a}}function Aa(e){let t=ya(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){P(1===r,65062);const e=n.from[0];e.allDescendants?a=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Sa(e);return t instanceof an&&on(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map((e=>function(e){return new en(Da(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ee(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Xt(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Xt(n,t)}(n.endAt)),Sn(t,a,i,s,o,"F",l,c)}function Sa(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Da(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Da(e.unaryFilter.field);return rn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Da(e.unaryFilter.field);return rn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Da(e.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return D(61313);default:return D(60726)}}(e):void 0!==e.fieldFilter?function(e){return rn.create(Da(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return D(58110);default:return D(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return an.create(e.compositeFilter.filters.map((e=>Sa(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return D(1026)}}(e.compositeFilter.op))}(e):D(30097,{filter:e})}function Ia(e){return ra[e]}function _a(e){return aa[e]}function Ta(e){return sa[e]}function Ca(e){return{fieldPath:e.canonicalString()}}function Da(e){return le.fromServerFormat(e.fieldPath)}function ka(e){return e instanceof rn?function(e){if("=="===e.op){if(Bt(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NAN"}};if(zt(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bt(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NOT_NAN"}};if(zt(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(e.field),op:_a(e.op),value:e.value}}}(e):e instanceof an?function(e){const t=e.getFilters().map((e=>ka(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ta(e.op),filters:t}}}(e):D(54877,{filter:e})}function Pa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ra(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Oa{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:re.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:re.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new Oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class La{constructor(e){this.wt=e}}function Ma(e){const t=Aa({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Rn(t,t.limit,"L"):t}class Fa{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(pt(e.integerValue));else if("doubleValue"in e){const n=pt(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Ae(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=ht(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(mt(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Wt(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Ht(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):D(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const a=e.fields||{};this.Mt(t,53);const s=Tt,i=(null===(r=null===(n=a[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(pt(i)),this.Nt(s,t),this.Ct(a[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),ce.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Fa.Wt=new Fa;class Ua{constructor(){this.Cn=new Va}addToCollectionParentIndex(e,t){return this.Cn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(me.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(me.min())}updateCollectionGroup(e,t,n){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class Va{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new it(ie.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new it(ie.comparator)).toArray()}}new Uint8Array(0);const qa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},za=41943040;class Ba{static withCacheSize(e){return new Ba(e,Ba.DEFAULT_COLLECTION_PERCENTILE,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ba.DEFAULT_COLLECTION_PERCENTILE=10,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ba.DEFAULT=new Ba(za,Ba.DEFAULT_COLLECTION_PERCENTILE,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ba.DISABLED=new Ba(-1,0,0);class Ja{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ja(0)}static lr(){return new Ja(-1)}}const Ha="LruGarbageCollector",Ga=1048576;function Wa(e,t){let[n,r]=e,[a,s]=t;const i=K(n,a);return 0===i?K(r,s):i}class Ya{constructor(e){this.Er=e,this.buffer=new it(Wa),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Wa(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ka{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){I(Ha,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){we(e)?I(Ha,"Ignoring IndexedDB error during garbage collection: ",e):await ye(e)}await this.mr(3e5)}))}}class Qa{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return xe.resolve(Ne.le);const n=new Ya(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(qa)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),qa):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,a,s,i,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,i=Date.now(),this.removeTargets(e,n,t)))).next((t=>(a=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),S()<=o.$b.DEBUG&&I("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-d,"ms\n\tDetermined least recently used ").concat(r," in ")+(i-s)+"ms\n"+"\tRemoved ".concat(a," targets in ")+(l-i)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-d,"ms")),xe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e}))))}}function Xa(e,t){return new Qa(e,t)}class Za{constructor(){this.changes=new zn((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $a{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class es{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Er(n.mutation,e,lt.empty(),ne.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,$n()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$n();const r=Yn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Gn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Yn();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,$n())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let a=Jn();const s=Qn(),i=Qn();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof _r)?a=a.insert(t.key,t):void 0!==i?(s.set(t.key,i.mutation.getFieldMask()),Er(i.mutation,t,i.mutation.getFieldMask(),ne.now())):s.set(t.key,lt.empty())})),this.recalculateAndSaveOverlays(e,a).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new $a(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=Qn();let r=new rt(((e,t)=>e-t)),a=$n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const a of e)a.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let i=n.get(e)||lt.empty();i=a.applyToLocalView(s,i),n.set(e,i);const o=(r.get(a.batchId)||$n()).add(e);r=r.insert(a.batchId,o)}))})).next((()=>{const s=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=Kn();l.forEach((e=>{if(!a.has(e)){const r=Nr(t.get(e),n.get(e));null!==r&&c.set(e,r),a=a.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return xe.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ce.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):xe.resolve(Yn());let i=de,o=a;return s.next((t=>xe.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),a.get(t)?xe.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,a))).next((()=>this.computeViews(e,o,t,$n()))).next((e=>({batchId:i,changes:Wn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((e=>{let t=Gn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const a=t.collectionGroup;let s=Gn();return this.indexManager.getCollectionParents(e,a).next((i=>xe.forEach(i,(i=>{const o=function(e,t){return new An(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(a));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,r)))).next((e=>{a.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Qt.newInvalidDocument(r)))}));let n=Gn();return e.forEach(((e,r)=>{const s=a.get(e);void 0!==s&&Er(s.mutation,r,lt.empty(),ne.now()),Fn(t,r)&&(n=n.insert(e,r))})),n}))}}class ts{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return xe.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ua(e.createTime)}}(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:Ma(e.bundledQuery),readTime:ua(e.readTime)}}(t)),xe.resolve()}}class ns{constructor(){this.overlays=new rt(ce.comparator),this.Qr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Yn();return xe.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),xe.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),xe.resolve()}getOverlaysForCollection(e,t,n){const r=Yn(),a=t.length+1,s=new ce(t.child("")),i=this.overlays.getIteratorFrom(s);for(;i.hasNext();){const e=i.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===a&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xe.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let a=new rt(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=a.get(e.largestBatchId);null===t&&(t=Yn(),a=a.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Yn(),o=a.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return xe.resolve(i)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Lr(t,n));let a=this.Qr.get(t);void 0===a&&(a=$n(),this.Qr.set(t,a)),this.Qr.set(t,a.add(n.key))}}class rs{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}class as{constructor(){this.$r=new it(ss.Ur),this.Kr=new it(ss.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new ss(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new ss(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new ce(new ie([])),n=new ss(t,e),r=new ss(t,e+1),a=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),a.push(e.key)})),a}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ce(new ie([])),n=new ss(t,e),r=new ss(t,e+1);let a=$n();return this.Kr.forEachInRange([n,r],(e=>{a=a.add(e.key)})),a}containsKey(e){const t=new ss(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ss{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ce.comparator(e.key,t.key)||K(e.Zr,t.Zr)}static Wr(e,t){return K(e.Zr,t.Zr)||ce.comparator(e.key,t.key)}}class is{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new it(ss.Ur)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Rr(a,t,n,r);this.mutationQueue.push(s);for(const i of r)this.Xr=this.Xr.add(new ss(i.key,a)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return xe.resolve(s)}lookupMutationBatch(e,t){return xe.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),a=r<0?0:r;return xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?je:this.nr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ss(t,0),r=new ss(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);a.push(t)})),xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new it(K);return t.forEach((e=>{const t=new ss(e,0),r=new ss(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),xe.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let a=n;ce.isDocumentKey(a)||(a=a.child(""));const s=new ss(new ce(a),0);let i=new it(K);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.Zr)),!0)}),s),xe.resolve(this.ni(i))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){P(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return xe.forEach(t.mutations,(r=>{const a=new ss(r.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new ss(t,0),r=this.Xr.firstAfterOrEqual(n);return xe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class os{constructor(e){this.ii=e,this.docs=new rt(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),a=r?r.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xe.resolve(n?n.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let n=Jn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qt.newInvalidDocument(e))})),xe.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let a=Jn();const s=t.path,i=new ce(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fe(pe(i),n)<=0||(r.has(i.key)||Fn(t,i))&&(a=a.insert(i.key,i.mutableCopy()))}return xe.resolve(a)}getAllFromCollectionGroup(e,t,n,r){D(9500)}si(e,t){return xe.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ls(this)}getSize(e){return xe.resolve(this.size)}}class ls extends Za{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),xe.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class cs{constructor(e){this.persistence=e,this.oi=new zn((e=>Nn(e)),jn),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this._i=0,this.ai=new as,this.targetCount=0,this.ui=Ja.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),xe.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ja(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Tr(t),xe.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,n){let r=0;const a=[];return this.oi.forEach(((s,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.oi.delete(s),a.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),xe.waitFor(a).next((()=>r))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return xe.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),xe.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((t=>{a.push(r.markPotentiallyOrphaned(e,t))})),xe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return xe.resolve(n)}containsKey(e,t){return xe.resolve(this.ai.containsKey(t))}}class ds{constructor(e,t){this.ci={},this.overlays={},this.li=new Ne(0),this.hi=!1,this.hi=!0,this.Pi=new rs,this.referenceDelegate=e(this),this.Ti=new cs(this),this.indexManager=new Ua,this.remoteDocumentCache=function(e){return new os(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new La(t),this.Ei=new ts(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ns,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new is(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){I("MemoryPersistence","Starting transaction:",e);const r=new us(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return xe.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class us extends ve{constructor(e){super(),this.currentSequenceNumber=e}}class hs{constructor(e){this.persistence=e,this.Vi=new as,this.mi=null}static fi(e){return new hs(e)}get gi(){if(this.mi)return this.mi;throw D(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),xe.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.gi,(n=>{const r=ce.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,re.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return xe.or([()=>xe.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class ps{constructor(e,t){this.persistence=e,this.yi=new zn((e=>_e(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Xa(this,t)}static fi(e,t){return new ps(e,t)}di(){}Ai(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Sr(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return xe.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?xe.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,a.removeEntry(r,re.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),xe.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ft(e.data.value)),t}Dr(e,t,n){return xe.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return xe.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ms{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=$n(),r=$n();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new ms(e,t.fromCache,n,r)}}class fs{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gs{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=(0,l.nr)()?8:be((0,l.ZQ)())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const a={result:null};return this.ws(e,t).next((e=>{a.result=e})).next((()=>{if(!a.result)return this.Ss(e,t,r,n).next((e=>{a.result=e}))})).next((()=>{if(a.result)return;const n=new fs;return this.bs(e,t,n).next((r=>{if(a.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>a.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(S()<=o.$b.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",Mn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),xe.resolve()):(S()<=o.$b.DEBUG&&I("QueryEngine","Query:",Mn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(S()<=o.$b.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",Mn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):xe.resolve())}ws(e,t){if(_n(t))return xe.resolve(null);let n=Dn(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Rn(t,null,"F"),n=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const a=$n(...r);return this.ys.getDocuments(e,a).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.vs(t,r);return this.Cs(t,s,a,n.readTime)?this.ws(e,Rn(t,null,"F")):this.Fs(e,s,t,n)}))))})))))}Ss(e,t,n,r){return _n(t)||r.isEqual(re.min())?xe.resolve(null):this.ys.getDocuments(e,n).next((a=>{const s=this.vs(t,a);return this.Cs(t,s,n,r)?xe.resolve(null):(S()<=o.$b.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mn(t)),this.Fs(e,s,t,he(r,de)).next((e=>e)))}))}vs(e,t){let n=new it(Vn(e));return t.forEach(((t,r)=>{Fn(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}bs(e,t,n){return S()<=o.$b.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Mn(t)),this.ys.getDocumentsMatchingQuery(e,t,me.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const vs="LocalStore",ys=3e8;class xs{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new rt(K),this.Os=new zn((e=>Nn(e)),jn),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new es(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function bs(e,t,n,r){return new xs(e,t,n,r)}async function ws(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((a=>(r=a,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const a=[],s=[];let i=$n();for(const e of r){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({ks:e,removedBatchIds:a,addedBatchIds:s})))}))}))}function Ns(e){const t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function js(e,t,n){let r=$n(),a=$n();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Jn();return n.forEach(((n,s)=>{const i=e.get(n);s.isFoundDocument()!==i.isFoundDocument()&&(a=a.add(n)),s.isNoDocument()&&s.version.isEqual(re.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!i.isValidDocument()||s.version.compareTo(i.version)>0||0===s.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):I(vs,"Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",s.version)})),{qs:r,Qs:a}}))}function Es(e,t){const n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=je),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function As(e,t){const n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((a=>a?(r=a,xe.resolve(r)):n.Ti.allocateTargetId(e).next((a=>(r=new Oa(t,a,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function Ss(e,t,n){const r=R(e),a=r.xs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,a)))}catch(e){if(!we(e))throw e;I(vs,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function Is(e,t,n){const r=R(e);let a=re.min(),s=$n();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=R(e),a=r.Os.get(n);return void 0!==a?xe.resolve(r.xs.get(a)):r.Ti.getTargetData(t,n)}(r,e,Dn(t)).next((t=>{if(t)return a=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?a:re.min(),n?s:$n()))).next((e=>(_s(r,Un(t),e),{documents:e,$s:s})))))}function _s(e,t,n){let r=e.Ns.get(t)||re.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}class Ts{constructor(){this.activeTargetIds=tr()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cs{constructor(){this.xo=new Ts,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ts,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ds{No(e){}shutdown(){}}const ks="ConnectivityMonitor";class Ps{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){I(ks,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){I(ks,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Rs=null;function Os(){return null===Rs?Rs=268435456+Math.round(2147483648*Math.random()):Rs++,"0x"+Rs.toString(16)}const Ls="RestConnection",Ms={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fs{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===jt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,a){const s=Os(),i=this.jo(e,t.toUriEncodedString());I(Ls,"Sending RPC '".concat(e,"' ").concat(s,":"),i,n);const o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,a);const{host:c}=new URL(i),d=(0,l.zJ)(c);return this.Jo(e,i,o,n,d).then((t=>(I(Ls,"Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw T(Ls,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",i,"request:",n),t}))}Yo(e,t,n,r,a,s){return this.zo(e,t,n,r,a)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=Ms[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class Us{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const Vs="WebChannelConnection";class qs extends Fs{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,a){const s=Os();return new Promise(((a,i)=>{const o=new u;o.setWithCredentials(!0),o.listenOnce(p.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const t=o.getResponseJson();I(Vs,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),a(t);break;case m.TIMEOUT:I(Vs,"RPC '".concat(e,"' ").concat(s," timed out")),i(new L(O.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const n=o.getStatus();if(I(Vs,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(t.status);i(new L(e,t.message))}else i(new L(O.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new L(O.UNAVAILABLE,"Connection failed."));break;default:D(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{I(Vs,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);I(Vs,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)}))}T_(e,t,n){const r=Os(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y(),i=v(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=a.join("");I(Vs,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const d=s.createWebChannel(c,o);let u=!1,p=!1;const m=new Us({Zo:t=>{p?I(Vs,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(I(Vs,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),d.open(),u=!0),I(Vs,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),d.send(t))},Xo:()=>d.close()}),x=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return x(d,h.EventType.OPEN,(()=>{p||(I(Vs,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.__())})),x(d,h.EventType.CLOSE,(()=>{p||(p=!0,I(Vs,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.u_())})),x(d,h.EventType.ERROR,(t=>{p||(p=!0,T(Vs,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.u_(new L(O.UNAVAILABLE,"The operation could not be completed")))})),x(d,h.EventType.MESSAGE,(t=>{var n;if(!p){const a=t.data[0];P(!!a,16349);const s=a,i=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(i){I(Vs,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=Fr[e];if(void 0!==t)return qr(t)}(t),a=i.message;void 0===n&&(n=O.INTERNAL,a="Unknown error status: "+t+" with message "+i.message),p=!0,m.u_(new L(n,a)),d.close()}else I(Vs,"RPC '".concat(e,"' stream ").concat(r," received:"),a),m.c_(a)}})),x(i,g.STAT_EVENT,(t=>{t.stat===f.PROXY?I(Vs,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===f.NOPROXY&&I(Vs,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{m.a_()}),0),m}}function zs(){return"undefined"!=typeof document?document:null}function Bs(e){return new ia(e,!0)}class Js{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.I_=n,this.E_=r,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),n=Math.max(0,Date.now()-this.V_),r=Math.max(0,t-n);r>0&&I("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.A_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.V_=Date.now(),e()))),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){null!==this.R_&&(this.R_.skipDelay(),this.R_=null)}cancel(){null!==this.R_&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}const Hs="PersistentStream";class Gs{constructor(e,t,n,r,a,s,i,o){this.xi=e,this.y_=n,this.w_=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Js(e,t)}F_(){return 1===this.state||5===this.state||this.M_()}M_(){return 2===this.state||3===this.state}start(){this.v_=0,4!==this.state?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&null===this.b_&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,(()=>this.B_())))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,4!==e?this.C_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(_(t.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.S_===t&&this.K_(n,r)}),(t=>{e((()=>{const e=new L(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.W_(e)}))}))}K_(e,t){const n=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,(()=>(this.M_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.W_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.v_?this.z_(e):this.onNext(e)))}))}x_(){this.state=5,this.C_.f_((async()=>{this.state=0,this.start()}))}W_(e){return I(Hs,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget((()=>this.S_===e?t():(I(Hs,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ws extends Gs{constructor(e,t,n,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:D(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(P(void 0===t||"string"==typeof t,58123),dt.fromBase64String(t||"")):(P(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),dt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?O.UNKNOWN:qr(e.code);return new L(t,e.message||"")}(i);n=new Zr(r,a,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=ga(e,r.document.name),s=ua(r.document.updateTime),i=r.document.createTime?ua(r.document.createTime):re.min(),o=new Yt({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(a,s,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Qr(c,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=ga(e,r.document),s=r.readTime?ua(r.readTime):re.min(),i=Qt.newNoDocument(a,s),o=r.removedTargetIds||[];n=new Qr([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=ga(e,r.document),s=r.removedTargetIds||[];n=new Qr([],s,a,null)}else{if(!("filter"in t))return D(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:a}=e,s=new Mr(r,a),i=e.targetId;n=new Xr(i,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return re.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?re.min():t.readTime?ua(t.readTime):re.min()}(e);return this.listener.j_(t,n)}H_(e){const t={};t.database=xa(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=En(r)?{documents:ja(e,r)}:{query:Ea(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ca(e,t.resumeToken);const r=oa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(re.min())>0){n.readTime=la(e,t.snapshotVersion.toTimestamp());const r=oa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return D(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.L_(t)}J_(e){const t={};t.database=xa(this.serializer),t.removeTarget=e,this.L_(t)}}class Ys extends Gs{constructor(e,t,n,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return P(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,P(!e.writeResults||0===e.writeResults.length,55816),this.listener.X_()}onNext(e){P(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=function(e,t){return e&&e.length>0?(P(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?ua(e.updateTime):ua(t);return n.isEqual(re.min())&&(n=ua(t)),new yr(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ua(e.commitTime);return this.listener.ea(n,t)}ta(){const e={};e.database=xa(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Na(this.serializer,e)))};this.L_(t)}}class Ks{}class Qs extends Ks{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.na=!1}ra(){if(this.na)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((a=>{let[s,i]=a;return this.connection.zo(e,pa(t,n),r,s,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())}))}Yo(e,t,n,r,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[i,o]=s;return this.connection.Yo(e,pa(t,n),r,i,o,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())}))}terminate(){this.na=!0,this.connection.terminate()}}class Xs{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){0===this.ia&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve()))))}ca(e){"Online"===this.state?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.aa("Offline")))}set(e){this.la(),this.ia=0,"Online"===e&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.oa?(_(t),this.oa=!1):I("OnlineStateTracker",t)}la(){null!==this.sa&&(this.sa.cancel(),this.sa=null)}}const Zs="RemoteStore";class $s{constructor(e,t,n,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No((e=>{n.enqueueAndForget((async()=>{li(this)&&(I(Zs,"Restarting streams for network reachability change."),await async function(e){const t=R(e);t.Ta.add(4),await ti(t),t.da.set("Unknown"),t.Ta.delete(4),await ei(t)}(this))}))})),this.da=new Xs(n,r)}}async function ei(e){if(li(e))for(const t of e.Ia)await t(!0)}async function ti(e){for(const t of e.Ia)await t(!1)}function ni(e,t){const n=R(e);n.Pa.has(t.targetId)||(n.Pa.set(t.targetId,t),oi(n)?ii(n):Ii(n).M_()&&ai(n,t))}function ri(e,t){const n=R(e),r=Ii(n);n.Pa.delete(t),r.M_()&&si(n,t),0===n.Pa.size&&(r.M_()?r.N_():li(n)&&n.da.set("Unknown"))}function ai(e,t){if(e.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(re.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ii(e).H_(t)}function si(e,t){e.Aa.Ke(t),Ii(e).J_(t)}function ii(e){e.Aa=new ea({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Pa.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Ii(e).start(),e.da._a()}function oi(e){return li(e)&&!Ii(e).F_()&&e.Pa.size>0}function li(e){return 0===R(e).Ta.size}function ci(e){e.Aa=void 0}async function di(e){e.da.set("Online")}async function ui(e){e.Pa.forEach(((t,n)=>{ai(e,t)}))}async function hi(e,t){ci(e),oi(e)?(e.da.ca(t),ii(e)):e.da.set("Unknown")}async function pi(e,t,n){if(e.da.set("Online"),t instanceof Zr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Pa.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Pa.delete(r),e.Aa.removeTarget(r))}(e,t)}catch(n){I(Zs,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await mi(e,n)}else if(t instanceof Qr?e.Aa.Xe(t):t instanceof Xr?e.Aa.ot(t):e.Aa.nt(t),!n.isEqual(re.min()))try{const t=await Ns(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Aa.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const a=e.Pa.get(r);a&&e.Pa.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Pa.get(t);if(!r)return;e.Pa.set(t,r.withResumeToken(dt.EMPTY_BYTE_STRING,r.snapshotVersion)),si(e,t);const a=new Oa(r.target,t,n,r.sequenceNumber);ai(e,a)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){I(Zs,"Failed to raise snapshot:",t),await mi(e,t)}}async function mi(e,t,n){if(!we(t))throw t;e.Ta.add(1),await ti(e),e.da.set("Offline"),n||(n=()=>Ns(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{I(Zs,"Retrying IndexedDB access"),await n(),e.Ta.delete(1),await ei(e)}))}function fi(e,t){return t().catch((n=>mi(e,n,t)))}async function gi(e){const t=R(e),n=_i(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:je;for(;vi(t);)try{const e=await Es(t.localStore,r);if(null===e){0===t.ha.length&&n.N_();break}r=e.batchId,yi(t,e)}catch(e){await mi(t,e)}xi(t)&&bi(t)}function vi(e){return li(e)&&e.ha.length<10}function yi(e,t){e.ha.push(t);const n=_i(e);n.M_()&&n.Y_&&n.Z_(t.mutations)}function xi(e){return li(e)&&!_i(e).F_()&&e.ha.length>0}function bi(e){_i(e).start()}async function wi(e){_i(e).ta()}async function Ni(e){const t=_i(e);for(const n of e.ha)t.Z_(n.mutations)}async function ji(e,t,n){const r=e.ha.shift(),a=Or.from(r,t,n);await fi(e,(()=>e.remoteSyncer.applySuccessfulWrite(a))),await gi(e)}async function Ei(e,t){t&&_i(e).Y_&&await async function(e,t){if(function(e){return Vr(e)&&e!==O.ABORTED}(t.code)){const n=e.ha.shift();_i(e).O_(),await fi(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await gi(e)}}(e,t),xi(e)&&bi(e)}async function Ai(e,t){const n=R(e);n.asyncQueue.verifyOperationInProgress(),I(Zs,"RemoteStore received new credentials");const r=li(n);n.Ta.add(3),await ti(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ta.delete(3),await ei(n)}async function Si(e,t){const n=R(e);t?(n.Ta.delete(2),await ei(n)):t||(n.Ta.add(2),await ti(n),n.da.set("Unknown"))}function Ii(e){return e.Ra||(e.Ra=function(e,t,n){const r=R(e);return r.ra(),new Ws(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:di.bind(null,e),n_:ui.bind(null,e),i_:hi.bind(null,e),j_:pi.bind(null,e)}),e.Ia.push((async t=>{t?(e.Ra.O_(),oi(e)?ii(e):e.da.set("Unknown")):(await e.Ra.stop(),ci(e))}))),e.Ra}function _i(e){return e.Va||(e.Va=function(e,t,n){const r=R(e);return r.ra(),new Ys(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:wi.bind(null,e),i_:Ei.bind(null,e),X_:Ni.bind(null,e),ea:ji.bind(null,e)}),e.Ia.push((async t=>{t?(e.Va.O_(),await gi(e)):(await e.Va.stop(),e.ha.length>0&&(I(Zs,"Stopping write stream with ".concat(e.ha.length," pending writes")),e.ha=[]))}))),e.Va}class Ti{constructor(e,t,n,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=a,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,a){const s=Date.now()+n,i=new Ti(e,t,s,r,a);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ci(e,t){if(_("AsyncQueue","".concat(t,": ").concat(e)),we(e))return new L(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Di{static emptySet(e){return new Di(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ce.comparator(t.key,n.key):(e,t)=>ce.comparator(e.key,t.key),this.keyedMap=Gn(),this.sortedSet=new rt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Di))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Di;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ki{constructor(){this.ma=new rt(ce.comparator)}track(e){const t=e.doc.key,n=this.ma.get(t);n?0!==e.type&&3===n.type?this.ma=this.ma.insert(t,e):3===e.type&&1!==n.type?this.ma=this.ma.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ma=this.ma.remove(t):1===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):D(63341,{Vt:e,fa:n}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Pi{constructor(e,t,n,r,a,s,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,a){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Pi(e,t,Di.emptySet(t),s,n,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&On(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ri{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some((e=>e.Sa()))}}class Oi{constructor(){this.queries=Li(),this.onlineState="Unknown",this.ba=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=Li(),r.forEach(((e,n)=>{for(const r of n.ya)r.onError(t)}))}(this,new L(O.ABORTED,"Firestore shutting down"))}}function Li(){return new zn((e=>Ln(e)),On)}async function Mi(e,t){const n=R(e);let r=3;const a=t.query;let s=n.queries.get(a);s?!s.wa()&&t.Sa()&&(r=2):(s=new Ri,r=t.Sa()?0:1);try{switch(r){case 0:s.pa=await n.onListen(a,!0);break;case 1:s.pa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(e){const n=Ci(e,"Initialization of query '".concat(Mn(t.query),"' failed"));return void t.onError(n)}n.queries.set(a,s),s.ya.push(t),t.Da(n.onlineState),s.pa&&t.va(s.pa)&&qi(n)}async function Fi(e,t){const n=R(e),r=t.query;let a=3;const s=n.queries.get(r);if(s){const e=s.ya.indexOf(t);e>=0&&(s.ya.splice(e,1),0===s.ya.length?a=t.Sa()?0:1:!s.wa()&&t.Sa()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ui(e,t){const n=R(e);let r=!1;for(const a of t){const e=a.query,t=n.queries.get(e);if(t){for(const e of t.ya)e.va(a)&&(r=!0);t.pa=a}}r&&qi(n)}function Vi(e,t,n){const r=R(e),a=r.queries.get(t);if(a)for(const s of a.ya)s.onError(n);r.queries.delete(t)}function qi(e){e.ba.forEach((e=>{e.next()}))}var zi,Bi;(Bi=zi||(zi={})).Ca="default",Bi.Cache="cache";class Ji{constructor(e,t,n){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=n||{}}va(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Pi(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache)return!0;if(!this.Sa())return!0;const n="Offline"!==t;return(!this.options.La||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ba(e){e=Pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==zi.Cache}}class Hi{constructor(e){this.key=e}}class Gi{constructor(e){this.key=e}}class Wi{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=$n(),this.mutatedKeys=$n(),this.Ha=Vn(e),this.Ja=new Di(this.Ha)}get Ya(){return this.Ga}Za(e,t){const n=t?t.Xa:new ki,r=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,s=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),d=Fn(this.query,t)?t:null,u=!!c&&this.mutatedKeys.has(c.key),h=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let p=!1;c&&d?c.data.isEqual(d.data)?u!==h&&(n.track({type:3,doc:d}),p=!0):this.eu(c,d)||(n.track({type:2,doc:d}),p=!0,(o&&this.Ha(d,o)>0||l&&this.Ha(d,l)<0)&&(i=!0)):!c&&d?(n.track({type:0,doc:d}),p=!0):c&&!d&&(n.track({type:1,doc:c}),p=!0,(o||l)&&(i=!0)),p&&(d?(s=s.add(d),a=h?a.add(e):a.delete(e)):(s=s.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),a=a.delete(e.key),n.track({type:1,doc:e})}return{Ja:s,Xa:n,Cs:i,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const s=e.Xa.ga();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return D(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ha(e.doc,t.doc))),this.tu(n),r=null!=r&&r;const i=t&&!r?this.nu():[],o=0===this.ja.size&&this.current&&!r?1:0,l=o!==this.za;return this.za=o,0!==s.length||l?{snapshot:new Pi(this.query,e.Ja,a,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ru:i}:{ru:i}}Da(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new ki,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach((e=>this.Ga=this.Ga.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ga=this.Ga.delete(e))),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=$n(),this.Ja.forEach((e=>{this.iu(e.key)&&(this.ja=this.ja.add(e.key))}));const t=[];return e.forEach((e=>{this.ja.has(e)||t.push(new Gi(e))})),this.ja.forEach((n=>{e.has(n)||t.push(new Hi(n))})),t}su(e){this.Ga=e.$s,this.ja=$n();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Pi.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,0===this.za,this.hasCachedResults)}}const Yi="SyncEngine";class Ki{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Qi{constructor(e){this.key=e,this._u=!1}}class Xi{constructor(e,t,n,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new zn((e=>Ln(e)),On),this.cu=new Map,this.lu=new Set,this.hu=new rt(ce.comparator),this.Pu=new Map,this.Tu=new as,this.Iu={},this.Eu=new Map,this.du=Ja.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return!0===this.Au}}async function Zi(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=bo(e);let a;const s=r.uu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.ou()):a=await eo(r,t,n,!0),a}async function $i(e,t){const n=bo(e);await eo(n,t,!0,!1)}async function eo(e,t,n,r){const a=await As(e.localStore,Dn(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await to(e,t,s,"current"===i,a.resumeToken)),e.isPrimaryClient&&n&&ni(e.remoteStore,a),o}async function to(e,t,n,r,a){e.Ru=(t,n,r)=>async function(e,t,n,r){let a=t.view.Za(n);a.Cs&&(a=await Is(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Za(n,a)})));const s=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(a,e.isPrimaryClient,s,i);return mo(e,t.targetId,o.ru),o.snapshot}(e,t,n,r);const s=await Is(e.localStore,t,!0),i=new Wi(t,s.$s),o=i.Za(s.documents),l=Kr.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,a),c=i.applyChanges(o,e.isPrimaryClient,l);mo(e,n,c.ru);const d=new Ki(t,n,i);return e.uu.set(t,d),e.cu.has(n)?e.cu.get(n).push(t):e.cu.set(n,[t]),c.snapshot}async function no(e,t,n){const r=R(e),a=r.uu.get(t),s=r.cu.get(a.targetId);if(s.length>1)return r.cu.set(a.targetId,s.filter((e=>!On(e,t)))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ss(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&ri(r.remoteStore,a.targetId),ho(r,a.targetId)})).catch(ye)):(ho(r,a.targetId),await Ss(r.localStore,a.targetId,!0))}async function ro(e,t){const n=R(e),r=n.uu.get(t),a=n.cu.get(r.targetId);n.isPrimaryClient&&1===a.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ri(n.remoteStore,r.targetId))}async function ao(e,t){const n=R(e);try{const e=await function(e,t){const n=R(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const i=[];t.targetChanges.forEach(((s,o)=>{const l=a.get(o);if(!l)return;i.push(n.Ti.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ti.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(dt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),a=a.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=ys||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&i.push(n.Ti.updateTargetData(e,c))}));let o=Jn(),l=$n();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(js(e,s,t.documentUpdates).next((e=>{o=e.qs,l=e.Qs}))),!r.isEqual(re.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return xe.waitFor(i).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.xs=a,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Pu.get(t);r&&(P(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r._u=!0:e.modifiedDocuments.size>0?P(r._u,14607):e.removedDocuments.size>0&&(P(r._u,42227),r._u=!1))})),await vo(n,e,t)}catch(e){await ye(e)}}function so(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.uu.forEach(((n,r)=>{const a=r.view.Da(t);a.snapshot&&e.push(a.snapshot)})),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const a of n.ya)a.Da(t)&&(r=!0)})),r&&qi(n)}(r.eventManager,t),e.length&&r.au.j_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function io(e,t,n){const r=R(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Pu.get(t),s=a&&a.key;if(s){let e=new rt(ce.comparator);e=e.insert(s,Qt.newNoDocument(s,re.min()));const n=$n().add(s),a=new Yr(re.min(),new Map,new rt(K),e,n);await ao(r,a),r.hu=r.hu.remove(s),r.Pu.delete(t),go(r)}else await Ss(r.localStore,t,!1).then((()=>ho(r,t,n))).catch(ye)}async function oo(e,t){const n=R(e),r=t.batch.batchId;try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),a=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const a=n.batch,s=a.keys();let i=xe.resolve();return s.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);P(null!==s,48541),t.version.compareTo(s)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,a)))}(n,e,t,a).next((()=>a.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=$n();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);uo(n,r,null),co(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vo(n,e)}catch(e){await ye(e)}}async function lo(e,t,n){const r=R(e);try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(P(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);uo(r,t,n),co(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await vo(r,e)}catch(n){await ye(n)}}function co(e,t){(e.Eu.get(t)||[]).forEach((e=>{e.resolve()})),e.Eu.delete(t)}function uo(e,t,n){const r=R(e);let a=r.Iu[r.currentUser.toKey()];if(a){const e=a.get(t);e&&(n?e.reject(n):e.resolve(),a=a.remove(t)),r.Iu[r.currentUser.toKey()]=a}}function ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.cu.get(t))e.uu.delete(r),n&&e.au.Vu(r,n);e.cu.delete(t),e.isPrimaryClient&&e.Tu.Hr(t).forEach((t=>{e.Tu.containsKey(t)||po(e,t)}))}function po(e,t){e.lu.delete(t.path.canonicalString());const n=e.hu.get(t);null!==n&&(ri(e.remoteStore,n),e.hu=e.hu.remove(t),e.Pu.delete(n),go(e))}function mo(e,t,n){for(const r of n)r instanceof Hi?(e.Tu.addReference(r.key,t),fo(e,r)):r instanceof Gi?(I(Yi,"Document no longer in limbo: "+r.key),e.Tu.removeReference(r.key,t),e.Tu.containsKey(r.key)||po(e,r.key)):D(19791,{mu:r})}function fo(e,t){const n=t.key,r=n.path.canonicalString();e.hu.get(n)||e.lu.has(r)||(I(Yi,"New document in limbo: "+n),e.lu.add(r),go(e))}function go(e){for(;e.lu.size>0&&e.hu.size<e.maxConcurrentLimboResolutions;){const t=e.lu.values().next().value;e.lu.delete(t);const n=new ce(ie.fromString(t)),r=e.du.next();e.Pu.set(r,new Qi(n)),e.hu=e.hu.insert(n,r),ni(e.remoteStore,new Oa(Dn(In(n.path)),r,"TargetPurposeLimboResolution",Ne.le))}}async function vo(e,t,n){const r=R(e),a=[],s=[],i=[];r.uu.isEmpty()||(r.uu.forEach(((e,o)=>{i.push(r.Ru(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const a=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,a?"current":"not-current")}if(e){a.push(e);const t=ms.Rs(o.targetId,e);s.push(t)}})))})),await Promise.all(i),r.au.j_(a),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>xe.forEach(t,(t=>xe.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>xe.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!we(e))throw e;I(vs,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,a=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,a)}}}(r.localStore,s))}async function yo(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){I(Yi,"User change. New user:",t.toKey());const e=await ws(n.localStore,t);n.currentUser=t,function(e,t){e.Eu.forEach((e=>{e.forEach((e=>{e.reject(new L(O.CANCELLED,t))}))})),e.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vo(n,e.ks)}}function xo(e,t){const n=R(e),r=n.Pu.get(t);if(r&&r._u)return $n().add(r.key);{let e=$n();const r=n.cu.get(t);if(!r)return e;for(const t of r){const r=n.uu.get(t);e=e.unionWith(r.view.Ya)}return e}}function bo(e){const t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ao.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=io.bind(null,t),t.au.j_=Ui.bind(null,t.eventManager),t.au.Vu=Vi.bind(null,t.eventManager),t}function wo(e){const t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lo.bind(null,t),t}class No{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bs(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return bs(this.persistence,new gs,e.initialUser,this.serializer)}yu(e){return new ds(hs.fi,this.serializer)}pu(e){return new Cs}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}No.provider={build:()=>new No};class jo extends No{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){P(this.persistence.referenceDelegate instanceof ps,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Ka(n,e.asyncQueue,t)}yu(e){const t=void 0!==this.cacheSizeBytes?Ba.withCacheSize(this.cacheSizeBytes):Ba.DEFAULT;return new ds((e=>ps.fi(e,t)),this.serializer)}}class Eo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>so(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yo.bind(null,this.syncEngine),await Si(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Oi}createDatastore(e){const t=Bs(e.databaseInfo.databaseId),n=function(e){return new qs(e)}(e.databaseInfo);return function(e,t,n,r){return new Qs(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,a){return new $s(e,t,n,r,a)}(this.localStore,this.datastore,e.asyncQueue,(e=>so(this.syncEngine,e,0)),Ps.C()?new Ps:new Ds)}createSyncEngine(e,t){return function(e,t,n,r,a,s,i){const o=new Xi(e,t,n,r,a,s);return i&&(o.Au=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=R(e);I(Zs,"RemoteStore shutting down."),t.Ta.add(5),await ti(t),t.Ea.shutdown(),t.da.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Eo.provider={build:()=>new Eo};class Ao{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):_("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const So="FirestoreClient";class Io{constructor(e,t,n,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=j.UNAUTHENTICATED,this.clientId=Y.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async e=>{I(So,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(I(So,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ci(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function _o(e,t){e.asyncQueue.verifyOperationInProgress(),I(So,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ws(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function To(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Co(e);I(So,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Ai(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ai(t.remoteStore,n))),e._onlineComponents=t}async function Co(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){I(So,"Using user provided OfflineComponentProvider");try{await _o(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;T("Error using user provided cache. Falling back to memory cache: "+n),await _o(e,new No)}}else I(So,"Using default OfflineComponentProvider"),await _o(e,new jo(void 0));return e._offlineComponents}async function Do(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(I(So,"Using user provided OnlineComponentProvider"),await To(e,e._uninitializedComponentsProvider._online)):(I(So,"Using default OnlineComponentProvider"),await To(e,new Eo))),e._onlineComponents}function ko(e){return Do(e).then((e=>e.syncEngine))}async function Po(e){const t=await Do(e),n=t.eventManager;return n.onListen=Zi.bind(null,t.syncEngine),n.onUnlisten=no.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$i.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ro.bind(null,t.syncEngine),n}function Ro(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,a){const s=new Ao({next:o=>{s.Cu(),t.enqueueAndForget((()=>Fi(e,i)));const l=o.docs.has(n);!l&&o.fromCache?a.reject(new L(O.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?a.reject(new L(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(o)},error:e=>a.reject(e)}),i=new Ji(In(n.path),s,{includeMetadataChanges:!0,La:!0});return Mi(e,i)}(await Po(e),e.asyncQueue,t,n,r))),r.promise}function Oo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,a){const s=new Ao({next:n=>{s.Cu(),t.enqueueAndForget((()=>Fi(e,i))),n.fromCache&&"server"===r.source?a.reject(new L(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:e=>a.reject(e)}),i=new Ji(n,s,{includeMetadataChanges:!0,La:!0});return Mi(e,i)}(await Po(e),e.asyncQueue,t,n,r))),r.promise}function Lo(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Mo=new Map;function Fo(e,t,n){if(!n)throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Uo(e){if(!ce.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Vo(e){if(ce.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function qo(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":D(12329,{type:typeof e})}function zo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qo(e);throw new L(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Bo(e,t){if(t<=0)throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const Jo="firestore.googleapis.com",Ho=!0;class Go{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new L(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jo,this.ssl=Ho}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Ho;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=za;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ga)throw new L(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new L(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lo(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Go({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Go(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"firstParty":return new B(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mo.get(e);t&&(I("ComponentProvider","Removing Datastore"),Mo.delete(e),t.terminate())}(this),Promise.resolve()}}class Yo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yo(this.firestore,e,this._query)}}class Ko{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ko(this.firestore,e,this._key)}}class Qo extends Yo{constructor(e,t,n){super(e,t,In(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ko(this.firestore,null,new ce(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function Xo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=(0,l.Ku)(e),Fo("collection","path",t),e instanceof Wo){const n=ie.fromString(t,...r);return Vo(n),new Qo(e,null,n)}{if(!(e instanceof Ko||e instanceof Qo))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ie.fromString(t,...r));return Vo(n),new Qo(e.firestore,null,n)}}function Zo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=(0,l.Ku)(e),1===arguments.length&&(t=Y.newId()),Fo("doc","path",t),e instanceof Wo){const n=ie.fromString(t,...r);return Uo(n),new Ko(e,null,new ce(n))}{if(!(e instanceof Ko||e instanceof Qo))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ie.fromString(t,...r));return Uo(n),new Ko(e.firestore,e instanceof Qo?e.converter:null,new ce(n))}}const $o="AsyncQueue";class el{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Js(this,"async_queue_retry"),this.ec=()=>{const e=zs();e&&I($o,"Visibility state changed to "+e.visibilityState),this.C_.p_()},this.tc=e;const t=zs();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=zs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise((()=>{}));const t=new M;return this.rc((()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.zu.push(e),this.sc())))}async sc(){if(0!==this.zu.length){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!we(e))throw e;I($o,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_((()=>this.sc()))}}rc(e){const t=this.tc.then((()=>(this.Yu=!0,e().catch((e=>{throw this.Ju=e,this.Yu=!1,_("INTERNAL UNHANDLED ERROR: ",tl(e)),e})).then((e=>(this.Yu=!1,e))))));return this.tc=t,t}enqueueAfterDelay(e,t,n){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const r=Ti.createAndSchedule(this,e,t,n,(e=>this.oc(e)));return this.Hu.push(r),r}nc(){this.Ju&&D(47125,{_c:tl(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do{e=this.tc,await e}while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then((()=>{this.Hu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Hu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ac()}))}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function tl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class nl extends Wo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new el,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new el(e),this._firestoreClient=void 0,await e}}}function rl(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||jt,a=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var a;e=zo(e,Wo);const s=(0,l.zJ)(t),i=e._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);s&&((0,l.gE)("https://".concat(c)),(0,l.P1)("Firestore",!0)),i.host!==Jo&&i.host!==c&&T("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},i),{host:c,ssl:s,emulatorOptions:r});if(!(0,l.bD)(d,o)&&(e._setSettings(d),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=j.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(a=e._app)||void 0===a?void 0:a.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new L(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new j(s)}e._authCredentials=new V(new F(t,n))}}(a,...e)}return a}function al(e){if(e._terminated)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||sl(e),e._firestoreClient}function sl(e){var t,n,r;const a=e._freezeSettings(),s=function(e,t,n,r){return new Nt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Lo(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||(null===(n=a.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=a.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new Io(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(dt.fromBase64String(e))}catch(e){throw new L(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new il(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ol{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new L(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ll{constructor(e){this._methodName=e}}class cl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}}class dl{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const ul=/^__.*__$/;class hl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ir(e,this.data,t,this.fieldTransforms)}}class pl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _r(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ml(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D(40011,{hc:e})}}class fl{constructor(e,t,n,r,a,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===a&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new fl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.dc(e),r}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Dl(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(0===e.length)throw this.Vc("Document fields must not be empty");if(ml(this.hc)&&ul.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class gl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bs(e)}gc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fl({hc:e,methodName:t,fc:n,path:le.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(e){const t=e._freezeSettings(),n=Bs(e._databaseId);return new gl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yl(e,t,n,r,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.gc(s.merge||s.mergeFields?2:0,t,n,a);Il("Data must be an object, but it was:",i,r);const o=Al(r,i);let l,c;if(s.merge)l=new lt(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const a=_l(t,r,n);if(!i.contains(a))throw new L(O.INVALID_ARGUMENT,"Field '".concat(a,"' is specified in your field mask but missing from your input data."));kl(e,a)||e.push(a)}l=new lt(e),c=i.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=i.fieldTransforms;return new hl(new Yt(o),l,c)}class xl extends ll{_toFieldTransform(e){if(2!==e.hc)throw 1===e.hc?e.Vc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Vc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xl}}class bl extends ll{_toFieldTransform(e){return new vr(e.path,new cr)}isEqual(e){return e instanceof bl}}function wl(e,t,n,r){const a=e.gc(1,t,n);Il("Data must be an object, but it was:",a,r);const s=[],i=Yt.empty();tt(r,((e,r)=>{const o=Cl(t,e,n);r=(0,l.Ku)(r);const c=a.Ac(o);if(r instanceof xl)s.push(o);else{const e=El(r,c);null!=e&&(s.push(o),i.set(o,e))}}));const o=new lt(s);return new pl(i,o,a.fieldTransforms)}function Nl(e,t,n,r,a,s){const i=e.gc(1,t,n),o=[_l(t,r,n)],c=[a];if(s.length%2!=0)throw new L(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<s.length;l+=2)o.push(_l(t,s[l])),c.push(s[l+1]);const d=[],u=Yt.empty();for(let p=o.length-1;p>=0;--p)if(!kl(d,o[p])){const e=o[p];let t=c[p];t=(0,l.Ku)(t);const n=i.Ac(e);if(t instanceof xl)d.push(e);else{const r=El(t,n);null!=r&&(d.push(e),u.set(e,r))}}const h=new lt(d);return new pl(u,h,i.fieldTransforms)}function jl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return El(n,e.gc(r?4:3,t))}function El(e,t){if(Sl(e=(0,l.Ku)(e)))return Il("Unsupported field value:",t,e),Al(e,t);if(e instanceof ll)return function(e,t){if(!ml(t.hc))throw t.Vc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Vc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ec&&4!==t.hc)throw t.Vc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const a of e){let e=El(a,t.Rc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ar(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ne.fromDate(e);return{timestampValue:la(t.serializer,n)}}if(e instanceof ne){const n=new ne(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:la(t.serializer,n)}}if(e instanceof cl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof il)return{bytesValue:ca(t.serializer,e._byteString)};if(e instanceof Ko){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Vc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ha(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof dl)return function(e,t){return{mapValue:{fields:{[At]:{stringValue:_t},[Tt]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Vc("VectorValues must only contain numeric values.");return nr(t.serializer,e)}))}}}}}}(e,t);throw t.Vc("Unsupported field value: ".concat(qo(e)))}(e,t)}function Al(e,t){const n={};return nt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tt(e,((e,r)=>{const a=El(r,t.Ic(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function Sl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ne||e instanceof cl||e instanceof il||e instanceof Ko||e instanceof ll||e instanceof dl)}function Il(e,t,n){if(!Sl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=qo(n);throw"an object"===r?t.Vc(e+" a custom object"):t.Vc(e+" "+r)}}function _l(e,t,n){if((t=(0,l.Ku)(t))instanceof ol)return t._internalPath;if("string"==typeof t)return Cl(e,t);throw Dl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Tl=new RegExp("[~\\*/\\[\\]]");function Cl(e,t,n){if(t.search(Tl)>=0)throw Dl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ol(...t.split("."))._internalPath}catch(r){throw Dl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Dl(e,t,n,r,a){const s=r&&!r.isEmpty(),i=void 0!==a;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(a)),l+=")"),new L(O.INVALID_ARGUMENT,o+e+l)}function kl(e,t){return e.some((e=>e.isEqual(t)))}class Pl{constructor(e,t,n,r,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ko(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Rl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ol("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Rl extends Pl{data(){return super.data()}}function Ol(e,t){return"string"==typeof t?Cl(e,t):t instanceof ol?t._internalPath:t._delegate._internalPath}function Ll(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ml{}class Fl extends Ml{}function Ul(e,t){let n=[];for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];t instanceof Ml&&n.push(t),n=n.concat(a),function(e){const t=e.filter((e=>e instanceof zl)).length,n=e.filter((e=>e instanceof Vl)).length;if(t>1||t>0&&n>0)throw new L(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class Vl extends Fl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vl(e,t,n)}_apply(e){const t=this._parse(e);return Kl(e._query,t),new Yo(e.firestore,e.converter,Pn(e._query,t))}_parse(e){const t=vl(e.firestore),n=function(e,t,n,r,a,s,i){let o;if(a.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new L(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Yl(i,s);const t=[];for(const n of i)t.push(Wl(r,e,n));o={arrayValue:{values:t}}}else o=Wl(r,e,i)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Yl(i,s),o=jl(n,t,i,"in"===s||"not-in"===s);return rn.create(a,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ql(e,t,n){const r=t,a=Ol("where",e);return Vl._create(a,r,n)}class zl extends Ml{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zl(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:an.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const a of r)Kl(n,a),n=Pn(n,a)}(e._query,t),new Yo(e.firestore,e.converter,Pn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bl extends Fl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new en(t,n)}(e._query,this._field,this._direction);return new Yo(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new An(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Jl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ol("orderBy",e);return Bl._create(n,t)}class Hl extends Fl{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Hl(e,t,n)}_apply(e){return new Yo(e.firestore,e.converter,Rn(e._query,this._limit,this._limitType))}}function Gl(e){return Bo("limit",e),Hl._create("limit",e,"F")}function Wl(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tn(t)&&-1!==n.indexOf("/"))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ie.fromString(n));if(!ce.isDocumentKey(r))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ut(e,new ce(r))}if(n instanceof Ko)return Ut(e,n._key);throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(qo(n),"."))}function Yl(e,t){if(!Array.isArray(e)||0===e.length)throw new L(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Kl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ql{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ct(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw D(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return tt(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const a=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Tt].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>pt(e.doubleValue)));return new dl(a)}convertGeoPoint(e){return new cl(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=bt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(wt(e));default:return null}}convertTimestamp(e){const t=ht(e);return new ne(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ie.fromString(e);P(Ra(n),9688,{name:e});const r=new Et(n.get(1),n.get(3)),a=new ce(n.popFirst(5));return r.isEqual(t)||_("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}function Xl(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $l extends Pl{constructor(e,t,n,r,a,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ec extends $l{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class tc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ec(this._firestore,this._userDataWriter,n.key,n,new Zl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new ec(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Zl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new ec(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Zl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let a=-1,s=-1;return 0!==t.type&&(a=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:nc(t.type),doc:r,oldIndex:a,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function nc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return D(61501,{type:e})}}function rc(e){e=zo(e,Ko);const t=zo(e.firestore,nl);return Ro(al(t),e._key).then((n=>uc(t,e,n)))}class ac extends Ql{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ko(this.firestore,null,t)}}function sc(e){e=zo(e,Yo);const t=zo(e.firestore,nl),n=al(t),r=new ac(t);return Ll(e._query),Oo(n,e._query).then((n=>new tc(t,r,e,n)))}function ic(e,t,n){e=zo(e,Ko);const r=zo(e.firestore,nl),a=Xl(e.converter,t,n);return dc(r,[yl(vl(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,xr.none())])}function oc(e,t,n){e=zo(e,Ko);const r=zo(e.firestore,nl),a=vl(r);let s;for(var i=arguments.length,o=new Array(i>3?i-3:0),c=3;c<i;c++)o[c-3]=arguments[c];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof ol?Nl(a,"updateDoc",e._key,t,n,o):wl(a,"updateDoc",e._key,t),dc(r,[s.toMutation(e._key,xr.exists(!0))])}function lc(e){return dc(zo(e.firestore,nl),[new kr(e._key,xr.none())])}function cc(e,t){const n=zo(e.firestore,nl),r=Zo(e),a=Xl(e.converter,t);return dc(n,[yl(vl(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,xr.exists(!1))]).then((()=>r))}function dc(e,t){return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=wo(e);try{const e=await function(e,t){const n=R(e),r=ne.now(),a=t.reduce(((e,t)=>e.add(t.key)),$n());let s,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Jn(),l=$n();return n.Bs.getEntries(e,a).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((a=>{s=a;const i=[];for(const e of t){const t=Ar(e,s.get(e.key).overlayedDocument);null!=t&&i.push(new _r(e.key,t,Kt(t.value.mapValue),xr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:Wn(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Iu[e.currentUser.toKey()];r||(r=new rt(K)),r=r.insert(t,n),e.Iu[e.currentUser.toKey()]=r}(r,e.batchId,n),await vo(r,e.changes),await gi(r.remoteStore)}catch(e){const t=Ci(e,"Failed to persist write");n.reject(t)}}(await ko(e),t,n))),n.promise}(al(e),t)}function uc(e,t,n){const r=n.docs.get(t._key),a=new ac(e);return new $l(e,a,t._key,r,new Zl(n.hasPendingWrites,n.fromCache),t.converter)}function hc(){return new bl("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){E=e}(s.MF),(0,s.om)(new i.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:a}=n;const s=e.getProvider("app").getImmediate(),i=new nl(new q(e.getProvider("auth-internal")),new H(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Et(e.options.projectId,t)}(s,r),s);return a=Object.assign({useFetchStreams:t},a),i._setSettings(a),i}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(w,N,e),(0,s.KO)(w,N,"esm2017")}()},253:(e,t,n)=>{"use strict";n.d(t,{h1:()=>o,uA:()=>a});var r=n(170);class a{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class i{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(a)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(a=t,a===s?void 0:a),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var a;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},318:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createAppointment:()=>o,getAllAppointmentsByType:()=>d,getAppointmentsForUser:()=>i,moveAppointment:()=>c,updateAppointmentData:()=>l});var r=n(555),a=n(428),s=n(220);const i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recipient";if(!e)return console.error("No userId provided to getAppointmentsForUser"),[];console.log("Getting ".concat(t," appointments for user ").concat(e));let n=[];"doctor"===t?n=["recipientAppointments","donorAppointments","appointments","doctorScheduledAppointments"]:(n=["".concat(t,"Appointments"),"appointments","doctorScheduledAppointments"],"recipient"===t?n.push("donorAppointments"):n.push("recipientAppointments"));const i="doctor"===t?["doctorId"]:["".concat(t,"Id"),"patientId","userId","patientUid"];let o=[];for(const u of n)try{for(const t of i){const n=(0,s.P)((0,s.rJ)(a.db,u),(0,s._M)(t,"==",e)),i=await(0,s.GG)(n);i.empty||i.forEach((e=>{o.push((0,r.A)((0,r.A)({id:e.id},e.data()),{},{_sourceCollection:u}))}))}}catch(d){console.error("Error fetching from ".concat(u,":"),d)}const l=await Promise.all(o.map((async t=>{let n=new Date;if(t.date)try{"function"===typeof t.date.toDate?n=t.date.toDate():t.date instanceof Date?n=t.date:"string"===typeof t.date?n=new Date(t.date):"number"===typeof t.date.seconds?n=new Date(1e3*t.date.seconds):t.date._seconds&&(n=new Date(1e3*t.date._seconds))}catch(d){console.warn("Date conversion error:",d)}let i=t.doctorName||"Unknown Doctor",o=t.hospitalName||"Unknown Hospital";if(t.doctorId&&!t.doctorName)try{const e=(0,s.doc)(a.db,"users",t.doctorId),n=await(0,s.x7)(e);if(n.exists()){const e=n.data();i="Dr. ".concat(e.firstName||""," ").concat(e.lastName||"").trim(),"Dr. "===i&&(i="Dr. "+(e.displayName||"Unknown"));const r=(0,s.rJ)(a.db,"hospitals"),l=(0,s.P)(r,(0,s._M)("userId","==",t.doctorId)),c=await(0,s.GG)(l);c.empty||(o=c.docs[0].data().name||"Unknown Hospital")}}catch(u){console.error("Error fetching doctor info:",u)}const l=t.type||t.appointmentType||t.patientType||("recipient"===t.appointmentFor||"recipient"===t.forPatientType||t.recipientId?"recipient":"donor"),c=t.purpose||t.description||t.reason||(t.organType?"".concat(t.organType," Transplant Consultation"):"Medical Checkup");return(0,r.A)((0,r.A)({},t),{},{date:n,doctorName:i,hospitalName:o,status:t.status||"scheduled",type:l,appointmentType:c,recipientId:t.recipientId||("recipient"===l?e:null),donorId:t.donorId||("donor"===l?e:null),patientId:t.patientId||e,userId:t.userId||e})}))),c=new Set;return l.filter((e=>!(!(e&&e.date instanceof Date)||isNaN(e.date)||c.has(e.id))&&(c.add(e.id),!0))).sort(((e,t)=>t.date-e.date))},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recipient";try{if(!e)throw new Error("Appointment data is required");if(!e.doctorId)throw new Error("Doctor ID is required for appointments");const o="donor"===t?"donorAppointments":"recipientAppointments",l=(0,r.A)((0,r.A)({},e),{},{type:t,patientType:t,appointmentType:e.appointmentType||t,appointmentFor:t,createdAt:s.Dc.now()}),c=await(0,s.gS)((0,s.rJ)(a.db,o),l),d=e.patientId||e["".concat(t,"Id")];if(d){const n="donor"===t?"medicalRecords":"recipients",r=(0,s.doc)(a.db,n,d),i=await(0,s.x7)(r);if(i.exists()){const t=i.data().appointmentIds||[];await(0,s.updateDoc)(r,{appointmentIds:[...t,c.id],appointmentScheduled:!0,appointmentDate:e.date,appointmentTime:e.time,updatedAt:s.Dc.now()})}}if("donor"===t&&d)try{const e=(0,s.doc)(a.db,"donors",d),t=await(0,s.x7)(e);if(t.exists()){const e=t.data(),r=e.requestStatus||e.status;if("initially-approved"===r||"INITIALLY_APPROVED"===r){const{startMedicalEvaluation:e}=await Promise.resolve().then(n.bind(n,865));await e(d,c.id),console.log("Started medical evaluation for initially approved donor ".concat(d))}}}catch(i){console.error("Error starting medical evaluation:",i)}return console.log("Successfully created ".concat(t," appointment with ID: ").concat(c.id)),{success:!0,appointmentId:c.id}}catch(o){return console.error("Error creating ".concat(t," appointment:"),o),{success:!1,error:o.message}}},l=async(e,t,n)=>{try{return e&&t?(await(0,s.updateDoc)((0,s.doc)(a.db,t,e),n),{success:!0,message:"Successfully updated appointment"}):{success:!1,error:"Missing required data"}}catch(r){return console.error("Error updating appointment:",r),{success:!1,error:r.message}}},c=async(e,t,n)=>{try{if(!e||!t||!n)return{success:!1,error:"Missing required data"};const r=(0,s.doc)(a.db,t,e),i=await(0,s.x7)(r);if(!i.exists())return{success:!1,error:"Appointment not found"};const o=i.data(),l=await(0,s.gS)((0,s.rJ)(a.db,n),o);return await(0,s.kd)(r),{success:!0,oldId:e,newId:l.id,message:"Successfully moved appointment from ".concat(t," to ").concat(n)}}catch(r){return console.error("Error moving appointment:",r),{success:!1,error:r.message}}},d=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"recipient";try{console.log("Getting all appointments for type: ".concat(e));const t="".concat(e,"Appointments"),n=(0,s.rJ)(a.db,t),i=await(0,s.GG)(n),o=[];for(const a of i.docs){const t=a.data();let n=t.date;t.date&&"function"===typeof t.date.toDate&&(n=t.date.toDate()),o.push((0,r.A)((0,r.A)({id:a.id},t),{},{date:n,doctorName:t.doctorName||"Unknown Doctor",hospitalName:t.hospitalName||"Unknown Hospital",status:t.status||"scheduled",type:e}))}return o}catch(t){return console.error("Error fetching ".concat(e," appointments:"),t),[]}}},340:(e,t,n)=>{"use strict";e.exports=n(761)},345:(e,t,n)=>{"use strict";var r=n(950),a=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case N:return"Portal";case A:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function J(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function se(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,je=null,Ee=null;function Ae(e){if(e=xa(e)){if("function"!==typeof Ne)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),Ne(e.stateNode,e.type,t))}}function Se(e){je?Ee?Ee.push(e):Ee=[e]:je=e}function Ie(){if(je){var e=je,t=Ee;if(Ee=je=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function _e(e,t){return e(t)}function Te(){}var Ce=!1;function De(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return _e(e,t,n)}finally{Ce=!1,(null!==je||null!==Ee)&&(Te(),Ie())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Pe=!1}function Oe(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function qe(e,t,n,r,a,s,i,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Xe=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=ut(o):0!==(s&=i)&&(r=ut(s))}else 0!==(i=n&~a)?r=ut(i):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,jt,Et,At,St=!1,It=[],_t=null,Tt=null,Ct=null,Dt=new Map,kt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Lt(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ya(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void At(e.priority,(function(){jt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xa(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),Dt.forEach(Ut),kt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return qt(t,e)}if(0<It.length){qt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&qt(_t,e),null!==Tt&&qt(Tt,e),null!==Ct&&qt(Ct,e),Dt.forEach(t),kt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Bt=b.ReactCurrentBatchConfig,Jt=!0;function Ht(e,t,n,r){var a=xt,s=Bt.transition;Bt.transition=null;try{xt=1,Wt(e,t,n,r)}finally{xt=a,Bt.transition=s}}function Gt(e,t,n,r){var a=xt,s=Bt.transition;Bt.transition=null;try{xt=4,Wt(e,t,n,r)}finally{xt=a,Bt.transition=s}}function Wt(e,t,n,r){if(Jt){var a=Kt(e,t,n,r);if(null===a)Jr(e,t,r,Yt,n),Ot(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return _t=Lt(_t,e,t,n,r,a),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,a),!0;case"mouseover":return Ct=Lt(Ct,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,kt.set(s,Lt(kt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var s=xa(a);if(null!==s&&wt(s),null===(s=Kt(e,t,n,r))&&Jr(e,t,r,Yt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Jr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=ya(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=M({},cn,{view:0,detail:0}),hn=an(un),pn=M({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=an(pn),fn=an(M({},pn,{dataTransfer:0})),gn=an(M({},un,{relatedTarget:0})),vn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(yn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function An(){return En}var Sn=M({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Sn),_n=an(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(M({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Cn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=an(Dn),Pn=[9,13,27,32],Rn=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var Ln=d&&"TextEvent"in window&&!On,Mn=d&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Yn(e){Fr(e,0)}function Kn(e){if(W(ba(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Kn(Wn)){var t=[];Hn(t,Wn,e,we(e)),De(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Wn)}function sr(e,t){if("click"===e)return Kn(t)}function ir(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!u.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=dr(n,s);var i=dr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},Er={};function Ar(e){if(jr[e])return jr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return jr[e]=n[t];return e}d&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Sr=Ar("animationend"),Ir=Ar("animationiteration"),_r=Ar("animationstart"),Tr=Ar("transitionend"),Cr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Cr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Rr=Dr[Pr];kr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}kr(Sr,"onAnimationEnd"),kr(Ir,"onAnimationIteration"),kr(_r,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(s(198));var d=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[fa];void 0===n&&(n=t[fa]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Qt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=Wt}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Jr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}De((function(){var r=s,a=we(n),i=[];e:{var o=Cr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Sr:case Ir:case _r:l=vn;break;case Tr:l=Cn;break;case"scroll":l=hn;break;case"wheel":l=kn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=ke(m,h))&&d.push(Hr(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=_n,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:ba(l),p=null==c?o:ba(c),(o=new d(f,m+"leave",l,n,a)).target=u,o.relatedTarget=p,f=null,ya(a)===r&&((d=new d(h,m+"enter",c,n,a)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Wr(p))m++;for(p=0,f=h;f;f=Wr(f))p++;for(;0<m-p;)d=Wr(d),m--;for(;0<p-m;)h=Wr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Wr(d),h=Wr(h)}d=null}else d=null;null!==l&&Yr(i,o,l,d,!1),null!==c&&null!==u&&Yr(i,u,c,d,!0)}if("select"===(l=(o=r?ba(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Jn(o))if(Xn)g=ir;else{g=ar;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(i,g,n,a):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?ba(r):window,e){case"focusin":(Jn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(i,n,a);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(i,n,a)}var y;if(Rn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else zn?Vn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==x?"onCompositionEnd"===x&&zn&&(y=en()):(Zt="value"in(Xt=a)?Xt.value:Xt.textContent,zn=!0)),0<(v=Gr(r,x)).length&&(x=new bn(x,e,null,n,a),i.push({event:x,listeners:v}),y?x.data=y:null!==(y=qn(n))&&(x.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),$t=Zt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Fr(i,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=ke(e,n))&&r.unshift(Hr(e,s,a)),null!=(s=ke(e,t))&&r.push(Hr(e,s,a))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=ke(n,s))&&i.unshift(Hr(n,l,o)):a||null!=(l=ke(n,s))&&i.push(Hr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Kr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Qr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,pa="__reactProps$"+ua,ma="__reactContainer$"+ua,fa="__reactEvents$"+ua,ga="__reactListeners$"+ua,va="__reactHandles$"+ua;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[ha])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function xa(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[pa]||null}var Na=[],ja=-1;function Ea(e){return{current:e}}function Aa(e){0>ja||(e.current=Na[ja],Na[ja]=null,ja--)}function Sa(e,t){ja++,Na[ja]=e.current,e.current=t}var Ia={},_a=Ea(Ia),Ta=Ea(!1),Ca=Ia;function Da(e,t){var n=e.type.contextTypes;if(!n)return Ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ka(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){Aa(Ta),Aa(_a)}function Ra(e,t,n){if(_a.current!==Ia)throw Error(s(168));Sa(_a,t),Sa(Ta,n)}function Oa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,B(e)||"Unknown",a));return M({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Ca=_a.current,Sa(_a,e),Sa(Ta,Ta.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oa(e,t,Ca),r.__reactInternalMemoizedMergedChildContext=e,Aa(Ta),Aa(_a),Sa(_a,e)):Aa(Ta),Sa(Ta,n)}var Fa=null,Ua=!1,Va=!1;function qa(e){null===Fa?Fa=[e]:Fa.push(e)}function za(){if(!Va&&null!==Fa){Va=!0;var e=0,t=xt;try{var n=Fa;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ua=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),We($e,za),a}finally{xt=t,Va=!1}}return null}var Ba=[],Ja=0,Ha=null,Ga=0,Wa=[],Ya=0,Ka=null,Qa=1,Xa="";function Za(e,t){Ba[Ja++]=Ga,Ba[Ja++]=Ha,Ha=e,Ga=t}function $a(e,t,n){Wa[Ya++]=Qa,Wa[Ya++]=Xa,Wa[Ya++]=Ka,Ka=e;var r=Qa;e=Xa;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Qa=1<<32-it(t)+a|n<<a|r,Xa=s+e}else Qa=1<<s|n<<a|r,Xa=e}function es(e){null!==e.return&&(Za(e,1),$a(e,1,0))}function ts(e){for(;e===Ha;)Ha=Ba[--Ja],Ba[Ja]=null,Ga=Ba[--Ja],Ba[Ja]=null;for(;e===Ka;)Ka=Wa[--Ya],Wa[Ya]=null,Xa=Wa[--Ya],Wa[Ya]=null,Qa=Wa[--Ya],Wa[Ya]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Qa,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ca(e.nextSibling)}function ps(){rs=ns=null,as=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===j?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===k&&ys(s)===t.type)?((r=a(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case N:return(t=Fc(t,e.mode,n)).return=e,t;case k:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case N:return n.key===a?d(e,t,n,r):null;case k:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||O(n))return null!==a?null:u(e,t,n,r,null);vs(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case N:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||O(r))return u(t,e=e.get(n)||null,r,a,null);vs(t,r)}return null}function f(a,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=p(a,u,o[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(a,u),s=i(v,s,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===o.length)return n(a,u),as&&Za(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(a,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return as&&Za(a,f),c}for(u=r(a,u);f<o.length;f++)null!==(g=m(u,a,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(a,e)})),as&&Za(a,f),c}function g(a,o,l,c){var d=O(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var x=p(a,f,y.value,c);if(null===x){null===f&&(f=v);break}e&&f&&null===x.alternate&&t(a,f),o=i(x,o,g),null===u?d=x:u.sibling=x,u=x,f=v}if(y.done)return n(a,f),as&&Za(a,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return as&&Za(a,g),d}for(f=r(a,f);!y.done;g++,y=l.next())null!==(y=m(f,a,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach((function(e){return t(a,e)})),as&&Za(a,g),d}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===j){if(7===d.tag){n(r,d.sibling),(s=a(d,i.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===k&&ys(c)===d.type){n(r,d.sibling),(s=a(d,i.props)).ref=gs(r,d,i),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===j?((s=Oc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Rc(i.type,i.key,i.props,null,r.mode,l)).ref=gs(r,s,i),l.return=r,r=l)}return o(r);case N:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(i,r.mode,l)).return=r,r=s}return o(r);case k:return e(r,s,(d=i._init)(i._payload),l)}if(te(i))return f(r,s,i,l);if(O(i))return g(r,s,i,l);vs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Mc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=xs(!0),ws=xs(!1),Ns=Ea(null),js=null,Es=null,As=null;function Ss(){As=Es=js=null}function Is(e){var t=Ns.current;Aa(Ns),e._currentValue=t}function _s(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){js=e,As=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===js)throw Error(s(308));Es=e,js.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ds=null;function ks(e){null===Ds?Ds=[e]:Ds.push(e)}function Ps(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,ks(t)):(n.next=a.next,a.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Rs(e,n)}return null===(a=r.interleaved)?(t.next=t,ks(r)):(t.next=a.next,a.next=t),r.interleaved=t,Rs(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var a=e.updateQueue;Os=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=M({},u,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=u}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Js={},Hs=Ea(Js),Gs=Ea(Js),Ws=Ea(Js);function Ys(e){if(e===Js)throw Error(s(174));return e}function Ks(e,t){switch(Sa(Ws,t),Sa(Gs,e),Sa(Hs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Aa(Hs),Sa(Hs,t)}function Qs(){Aa(Hs),Aa(Gs),Aa(Ws)}function Xs(e){Ys(Ws.current);var t=Ys(Hs.current),n=le(t,e.type);t!==n&&(Sa(Gs,e),Sa(Hs,n))}function Zs(e){Gs.current===e&&(Aa(Hs),Aa(Gs))}var $s=Ea(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function pi(){throw Error(s(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fi(e,t,n,r,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:$i,e=n(r,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,a)}while(di)}if(ri.current=Xi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function xi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(xo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ni(){}function ji(e,t){var n=ii,r=yi(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,xo=!0),r=r.queue,Oi(Si.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ci(9,Ai.bind(null,n,r,a,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&si)||Ei(n,t,a)}return a}function Ei(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ai(e,t,n,r){t.value=n,t.getSnapshot=r,Ii(t)&&_i(e)}function Si(e,t,n){return n((function(){Ii(t)&&_i(e)}))}function Ii(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function _i(e){var t=Rs(e,1);null!==t&&nc(t,e,1,-1)}function Ti(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Wi.bind(null,ii,e),[t.memoizedState,e]}function Ci(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Di(){return yi().memoizedState}function ki(e,t,n,r){var a=vi();ii.flags|=e,a.memoizedState=Ci(1|t,n,void 0,void 0===r?null:r)}function Pi(e,t,n,r){var a=yi();r=void 0===r?null:r;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=Ci(t,n,s,r))}ii.flags|=e,a.memoizedState=Ci(1|t,n,s,r)}function Ri(e,t){return ki(8390656,8,e,t)}function Oi(e,t){return Pi(2048,8,e,t)}function Li(e,t){return Pi(4,2,e,t)}function Mi(e,t){return Pi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4,4,Fi.bind(null,t,e),n)}function Vi(){}function qi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),ii.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ji(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{xt=n,ai.transition=r}}function Hi(){return yi().memoizedState}function Gi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ki(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Qi(n,t,r)}}function Wi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ki(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,ks(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ps(e,t,a,r))&&(nc(n,e,r,a=ec()),Qi(n,t,r))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ki(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xi={readContext:Cs,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Cs,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:Ri,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ki(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ki(4194308,4,e,t)},useInsertionEffect:function(e,t){return ki(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ti,useDebugValue:Vi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Ji.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,a=vi();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&si)||Ei(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ri(Si.bind(null,r,i,e),[e]),r.flags|=2048,Ci(9,Ai.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=Tl.identifierPrefix;if(as){var n=Xa;t=":"+t+"R"+(n=(Qa&~(1<<32-it(Qa)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:Cs,useCallback:qi,useContext:Cs,useEffect:Oi,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:zi,useReducer:bi,useRef:Di,useState:function(){return bi(xi)},useDebugValue:Vi,useDeferredValue:function(e){return Bi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(xi)[0],yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:ji,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Cs,useCallback:qi,useContext:Cs,useEffect:Oi,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:zi,useReducer:wi,useRef:Di,useState:function(){return wi(xi)},useDebugValue:Vi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Bi(t,oi.memoizedState,e)},useTransition:function(){return[wi(xi)[0],yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:ji,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Fs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(nc(t,e,a,r),Vs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Fs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(nc(t,e,a,r),Vs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Fs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Us(e,a,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function ao(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function so(e,t,n){var r=!1,a=Ia,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(a=ka(t)?Ca:_a.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Ia),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Cs(s):(s=ka(t)?Ca:_a.current,a.context=Da(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),zs(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jl||(Jl=!0,Hl=r),uo(0,t)},n}function mo(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wo(e,t,n,r,a){n=n.render;var s=t.ref;return Ts(t,a),r=fi(e,t,n,r,s,a),n=gi(),null===e||xo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Jo(e,t,a))}function No(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||kc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Jo(e,t,a)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Jo(e,t,a);0!==(131072&e.flags)&&(xo=!0)}}return So(e,t,n,r,a)}function Eo(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Pl,kl),kl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Pl,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Sa(Pl,kl),kl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Sa(Pl,kl),kl|=r;return bo(e,t,a,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,a){var s=ka(n)?Ca:_a.current;return s=Da(t,s),Ts(t,a),n=fi(e,t,n,r,s,a),r=gi(),null===e||xo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Jo(e,t,a))}function Io(e,t,n,r,a){if(ka(n)){var s=!0;La(t)}else s=!1;if(Ts(t,a),null===t.stateNode)Bo(e,t),so(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Cs(c):c=Da(t,c=ka(n)?Ca:_a.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Os=!1;var h=t.memoizedState;i.state=h,zs(t,r,i,a),l=t.memoizedState,o!==r||h!==l||Ta.current||Os?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Os||ao(t,n,o,r,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Cs(l):l=Da(t,l=ka(n)?Ca:_a.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,r,l),Os=!1,h=t.memoizedState,i.state=h,zs(t,r,i,a);var m=t.memoizedState;o!==u||h!==m||Ta.current||Os?("function"===typeof p&&(no(t,n,p,r),m=t.memoizedState),(c=Os||ao(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _o(e,t,n,r,s,a)}function _o(e,t,n,r,a,s){Ao(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ma(t,n,!1),Jo(e,t,s);r=t.stateNode,yo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Ks(e,t.containerInfo)}function Co(e,t,n,r,a){return ps(),ms(a),t.flags|=256,bo(e,t,n,r),t.child}var Do,ko,Po,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,a=t.pendingProps,i=$s.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa($s,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),e=Oc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(i=Oc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,i);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Rs(e,a),nc(r,e,a,-1))}return fc(),Uo(e,t,o,r=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Wa[Ya++]=Qa,Wa[Ya++]=Xa,Wa[Ya++]=Ka,Qa=e.id,Xa=e.overflow,Ka=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Pc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,a}return e=(o=e.child).sibling,a=Pc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ms(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_s(e.return,t,n)}function qo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function zo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=$s.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa($s,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),qo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}qo(t,!0,n,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return ka(t.type)&&Pa(),Go(t),null;case 3:return r=t.stateNode,Qs(),Aa(Ta),Aa(_a),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),ko(e,t),Go(t),null;case 5:Zs(t);var a=Ys(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Ys(Hs.current),us(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ha]=t,r[pa]=i,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<Or.length;a++)Ur(Or[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,i),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ur("invalid",r);break;case"textarea":ae(r,i),Ur("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),$(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[pa]=r,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<Or.length;a++)Ur(Or[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":Q(e,r),a=K(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Ur("scroll",e):null!=d&&x(e,i,d,l))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ys(Ws.current),Ys(Hs.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Go(t),null;case 13:if(Aa($s),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,i=!1;else if(i=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Qs(),ko(e,t),null===e&&zr(t.stateNode.containerInfo),Go(t),null;case 10:return Is(t.type._context),Go(t),null;case 19:if(Aa($s),null===(i=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ho(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sa($s,1&$s.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>zl&&(t.flags|=128,r=!0,Ho(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Go(t),null}else 2*Xe()-i.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=$s.current,Sa($s,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&kl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return ka(t.type)&&Pa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Aa(Ta),Aa(_a),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Aa($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Aa($s),null;case 4:return Qs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ko=function(){},Po=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ys(Hs.current);var s,i=null;switch(n){case"input":a=K(e,a),r=K(e,r),i=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in ye(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ur("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Qo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[fa],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Qo||$o(n,t);case 6:var r=dl,a=ul;dl=null,hl(e,t,n),ul=a,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),zt(e)):la(dl,n.stateNode));break;case 4:r=dl,a=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Qo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){Ec(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(fl(t,e),vl(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),xe(l,o);var d=xe(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):x(a,u,h,d)}switch(l){case"input":Z(a,i);break;case"textarea":se(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[pa]=i}catch(g){Ec(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ec(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(ql=Xe())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),vl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zo=e,u=e.child;null!==u;){for(h=Zo=u;null!==Zo;){switch(m=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$o(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:$o(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Zo=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var a=Zo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ko;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Ko;var c=Qo;if(Ko=i,(Qo=l)&&!c)for(Zo=a;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?Nl(a):null!==l?(l.return=i,Zo=l):Nl(a);for(;null!==s;)Zo=s,xl(s,t,n),s=s.sibling;Zo=a,Ko=o,Qo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Zo=s):bl(e)}}function bl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Bs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&al(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Nl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Ec(t,a,l)}}var s=t.return;try{al(t)}catch(l){Ec(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Ec(t,i,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var jl,El=Math.ceil,Al=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,_l=0,Tl=null,Cl=null,Dl=0,kl=0,Pl=Ea(0),Rl=0,Ol=null,Ll=0,Ml=0,Fl=0,Ul=null,Vl=null,ql=0,zl=1/0,Bl=null,Jl=!1,Hl=null,Gl=null,Wl=!1,Yl=null,Kl=0,Ql=0,Xl=null,Zl=-1,$l=0;function ec(){return 0!==(6&_l)?Xe():-1!==Zl?Zl:Zl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Dl?Dl&-Dl:null!==fs.transition?(0===$l&&($l=ft()),$l):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&_l)&&e===Tl||(e===Tl&&(0===(2&_l)&&(Ml|=n),4===Rl&&oc(e,Dl)),rc(e,r),1===n&&0===_l&&0===(1&t.mode)&&(zl=Xe()+500,Ua&&za()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Tl?Dl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ua=!0,qa(e)}(lc.bind(null,e)):qa(lc.bind(null,e)),ia((function(){0===(6&_l)&&za()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zl=-1,$l=0,0!==(6&_l))throw Error(s(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=_l;_l|=2;var i=mc();for(Tl===e&&Dl===t||(Bl=null,zl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ss(),Al.current=i,_l=a,null!==Cl?t=0:(Tl=null,Dl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=ql+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Vl,Bl),t);break}wc(e,Vl,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Vl,Bl),r);break}wc(e,Vl,Bl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ic(t)),e}function ic(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&_l))throw Error(s(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Bl),rc(e,Xe()),null}function cc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(zl=Xe()+500,Ua&&za())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&_l)&&Nc();var t=_l;_l|=1;var n=Il.transition,r=xt;try{if(Il.transition=null,xt=1,e)return e()}finally{xt=r,Il.transition=n,0===(6&(_l=t))&&za()}}function uc(){kl=Pl.current,Aa(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:Qs(),Aa(Ta),Aa(_a),ni();break;case 5:Zs(r);break;case 4:Qs();break;case 13:case 19:Aa($s);break;case 10:Is(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Tl=e,Cl=e=Pc(e.current,null),Dl=kl=t,Rl=0,Ol=null,Fl=Ml=Ll=0,Vl=Ul=null,null!==Ds){for(t=0;t<Ds.length;t++)if(null!==(r=(n=Ds[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Ds=null}return e}function pc(e,t){for(;;){var n=Cl;try{if(Ss(),ri.current=Xi,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===n||null===n.return){Rl=1,Ol=t,Cl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&fo(i,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ms(lo(c,l));break e}}i=c=lo(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[i]:Ul.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,qs(i,po(0,c,t));break e;case 1:l=c;var y=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Gl||!Gl.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,qs(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function mc(){var e=Al.current;return Al.current=Xi,null===e?Xi:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Tl,Dl)}function gc(e,t){var n=_l;_l|=2;var r=mc();for(Tl===e&&Dl===t||(Bl=null,hc(e,t));;)try{vc();break}catch(a){pc(e,a)}if(Ss(),_l=n,Al.current=r,null!==Cl)throw Error(s(261));return Tl=null,Dl=0,Rl}function vc(){for(;null!==Cl;)xc(Cl)}function yc(){for(;null!==Cl&&!Ke();)xc(Cl)}function xc(e){var t=jl(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?bc(e):Cl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wo(n,t,kl)))return void(Cl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Rl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=xt,a=Il.transition;try{Il.transition=null,xt=1,function(e,t,n,r){do{Nc()}while(null!==Yl);if(0!==(6&_l))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Tl&&(Cl=Tl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Tc(tt,(function(){return Nc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Il.transition,Il.transition=null;var o=xt;xt=1;var l=_l;_l|=4,Sl.current=null,function(e,t){if(ea=Jt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===a&&(l=o),p===i&&++u===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Jt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ta),Jt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Qe(),_l=l,xt=o,Il.transition=i}else e.current=n;if(Wl&&(Wl=!1,Yl=e,Kl=a),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Jl)throw Jl=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,za()}(e,t,n,r)}finally{Il.transition=a,xt=r}return null}function Nc(){if(null!==Yl){var e=bt(Kl),t=Il.transition,n=xt;try{if(Il.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&_l))throw Error(s(331));var a=_l;for(_l|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var u=Zo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Zo=h;else for(;null!==Zo;){var p=(u=Zo).sibling,m=u.return;if(sl(u),u===d){Zo=null;break}if(null!==p){p.return=m,Zo=p;break}Zo=m}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Zo=y;break e}Zo=i.return}}var x=e.current;for(Zo=x;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=x;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){Ec(l,l.return,N)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(_l=a,za(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(N){}r=!0}return r}finally{xt=n,Il.transition=t}}return!1}function jc(e,t,n){e=Us(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Us(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Dl&n)===n&&(4===Rl||3===Rl&&(130023424&Dl)===Dl&&500>Xe()-ql?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Rs(e,t))&&(vt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Tc(e,t){return We(e,t)}function Cc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Cc(e,t,n,r)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)kc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Oc(n.children,a,i,t);case E:o=8,a|=8;break;case A:return(e=Dc(12,n,t,2|a)).elementType=A,e.lanes=i,e;case T:return(e=Dc(13,n,t,a)).elementType=T,e.lanes=i,e;case C:return(e=Dc(19,n,t,a)).elementType=C,e.lanes=i,e;case P:return Lc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case I:o=9;break e;case _:o=11;break e;case D:o=14;break e;case k:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Oc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,a,s,i,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function qc(e){if(!e)return Ia;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ka(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ka(n))return Oa(e,n,t)}return t}function zc(e,t,n,r,a,s,i,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=qc(null),n=e.current,(s=Fs(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function Bc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(a,t,i))&&(nc(e,a,i,s),Vs(e,a,i)),i}function Jc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:To(t),ps();break;case 5:Xs(t);break;case 1:ka(t.type)&&La(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sa(Ns,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Sa($s,1&$s.current),null!==(e=Jo(e,t,n))?e.sibling:null);Sa($s,1&$s.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa($s,$s.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Jo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,as&&0!==(1048576&t.flags)&&$a(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var a=Da(t,_a.current);Ts(t,n),a=fi(null,t,r,e,a,n);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ka(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ls(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=_o(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),bo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return kc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===D)return 14}return 2}(r),e=to(r,e),a){case 0:t=So(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,So(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,Io(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ms(e,t),zs(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Co(e,t,r,n,a=lo(Error(s(423)),t));break e}if(r!==a){t=Co(e,t,r,n,a=lo(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===a){t=Jo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),Ao(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,wo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Sa(Ns,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Ta.current){t=Jo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Fs(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),_s(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_s(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ts(t,n),r=r(a=Cs(a)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),No(e,t,r,a=to(r.type,a),n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),Bo(e,t),t.tag=1,ka(r)?(e=!0,La(t)):e=!1,Ts(t,n),so(t,r,a),oo(t,r,a,n),_o(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Jc(i);o.call(e)}}Bc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Jc(i);s.call(e)}}var i=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[ma]=i.current,zr(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Jc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ma]=l.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Bc(t,l,n,r)})),l}(n,t,e,a,r);return Jc(i)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Bc(null,e,null,null)})),t[ma]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&_l)&&(zl=Xe()+500,za()))}break;case 13:dc((function(){var t=Rs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},Nt=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Rs(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Et=function(){return xt},At=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Ne=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(s(90));W(r),Z(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[xa,ba,wa,Se,Ie,cc]},td={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{at=rd.inject(nd),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",a=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,a),e[ma]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,a,0,i,o),e[ma]=t.current,zr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{"use strict";var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},414:(e,t,n)=>{"use strict";e.exports=n(654)},428:(e,t,n)=>{"use strict";n.d(t,{j2:()=>L,db:()=>M});var r=n(913);(0,r.KO)("firebase","11.8.1","app");var a=n(634),s=n(220),i=n(170),o=n(253);const l="firebasestorage.googleapis.com",c="storageBucket";class d extends i.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(p(e),"Firebase Storage: ".concat(t," (").concat(p(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,d.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var u,h;function p(e){return"storage/"+e}function m(){return new d(u.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(){return new d(u.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g(){return new d(u.CANCELED,"User canceled the upload/download.")}function v(e){return new d(u.INVALID_ARGUMENT,e)}function y(){return new d(u.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(u||(u={}));class x{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=x.makeFromUrl(e,t)}catch(a){return new x(e,"")}if(""===n.path)return n;throw r=e,new d(u.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const a=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,"\\."),o=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(i,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===l?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let a=r[t.indices.path];a||(a=""),n=new x(e,a),t.postModify(n);break}}if(null==n)throw function(e){return new d(u.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class b{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function w(e,t,n,r){if(r<t)throw v("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw v("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function N(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function j(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),a=-1!==t.indexOf(e);return n||r||a}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(h||(h={}));class E{constructor(e,t,n,r,a,s,i,o,l,c,d){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=i,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=u,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new A(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===h.NO_ERROR,a=n.getStatus();if(!t||j(a,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===h.ABORT;return void e(!1,new A(!1,null,t))}const s=-1!==this.successCodes_.indexOf(a);e(!0,new A(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,a=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(a,a.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==a){const e=m();e.serverResponse=a.getErrorText(),this.errorCallback_?r(this.errorCallback_(a,e)):r(e)}else if(t.canceled){r(this.appDelete_?y():g())}else{r(f())}};this.canceled_?t(0,new A(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,a=null,s=null,i=!1,o=0;function l(){return 2===o}let c=!1;function d(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function u(t){a=setTimeout((()=>{a=null,e(p,l())}),t)}function h(){s&&clearTimeout(s)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(e)return h(),void d.call(null,e,...n);if(l()||i)return h(),void d.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),u(s)}let m=!1;function f(e){m||(m=!0,h(),c||(null!==a?(e||(o=2),clearTimeout(a),u(0)):e||(o=1)))}return u(0),s=setTimeout((()=>{i=!0,f(!0)}),n),f}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class A{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function S(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class I{constructor(e,t){this._service=e,this._location=t instanceof x?t:x.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new I(e,t)}get root(){const e=new x(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new x(this._location.bucket,e);return new I(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new d(u.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function _(e,t){const n=null===t||void 0===t?void 0:t[c];return null==n?null:x.makeFromBucketSpec(n,e)}class T{constructor(e,t,n,r,a){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=l,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?x.makeFromBucketSpec(r,this._host):_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=x.makeFromBucketSpec(this._url,e):this._bucket=_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new I(this,e)}_makeRequest(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new b(y());{const s=function(e,t,n,r,a,s){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=N(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(d,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(d,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(d,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(d,r),new E(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const C="@firebase/storage",D="0.13.12",k="storage";function P(e,t){let{instanceIdentifier:n}=t;const a=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new T(a,s,i,n,r.MF)}(0,r.om)(new o.uA(k,P,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(C,D,""),(0,r.KO)(C,D,"esm2017");const R={apiKey:"AIzaSyABcrKZpDvuAXG70cEH18GkDFjmP8EcJvg",authDomain:"organdonor-82109.firebaseapp.com",projectId:"organdonor-82109",storageBucket:"organdonor-82109.appspot.com",messagingSenderId:"165856902258",appId:"1:165856902258:web:b6ffc2759baccd4f03d6eb",measurementId:"G-MP513N5BP3"};let O,L,M,F;try{console.log("\ud83d\udd25 Initializing Firebase..."),O=(0,r.Wp)(R),L=(0,a.xI)(O),M=(0,s.aU)(O),F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,i.Ku)(e);const n=(0,r.j6)(e,k).getImmediate({identifier:t}),a=(0,i.yU)("storage");return a&&function(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const a=(0,i.zJ)(t);a&&((0,i.gE)("https://".concat(e.host)),(0,i.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:(0,i.Fy)(s,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}(n,...a),n}(O),console.log("\u2705 Firebase initialized successfully"),L.authStateReady().then((()=>{console.log("\u2705 Firebase Auth is ready")})).catch((e=>{console.error("\u26a0\ufe0f Firebase Auth readiness issue:",e)}))}catch(V){throw console.error("\u274c Firebase initialization failed:",V),new Error("Firebase setup failed: ".concat(V.message))}const U=async()=>{const e={initialized:!!O,authReady:!1,firestoreReady:!1,errors:[]};if(L)try{await L.authStateReady(),e.authReady=!0}catch(V){e.errors.push("Auth: ".concat(V.message))}if(M)try{e.firestoreReady=!0}catch(V){e.errors.push("Firestore: ".concat(V.message))}return e};"undefined"!==typeof window&&(window.firebaseDebug={config:R,app:O,auth:L,db:M,storage:F,checkConnection:U},console.log("\ud83d\udee0\ufe0f Firebase debug info available at window.firebaseDebug"))},488:(e,t,n)=>{"use strict";var r=n(959);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,s,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return n.PropTypes=n,n}},555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{A:()=>o})},624:(e,t,n)=>{"use strict";n.d(t,{$b:()=>a,Vy:()=>c});const r=[];var a;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(a||(a={}));const s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},i=a.INFO,o={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=i,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...t),this._logHandler(this,a.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...t),this._logHandler(this,a.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,a.INFO,...t),this._logHandler(this,a.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,a.WARN,...t),this._logHandler(this,a.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,a.ERROR,...t),this._logHandler(this,a.ERROR,...t)}}},634:(e,t,n)=>{"use strict";n.d(t,{eJ:()=>lt,xI:()=>Pn,hg:()=>dt,x9:()=>ct});var r=n(913),a=n(170),s=n(624);function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=n(253);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,d=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new s.Vy("@firebase/auth");function h(e){if(u.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];u.error("Auth (".concat(r.MF,"): ").concat(e),...n)}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw v(e,...n)}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e,...n)}function f(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return f(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return d.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw v(t,...r)}}function x(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function b(e,t){e||x(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function N(){return"http:"===j()||"https:"===j()}function j(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class E{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(N()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T=new E(3e4,6e4);function C(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function D(e,t,n,r){return k(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const o=(0,a.Am)(Object.assign({key:e.config.apiKey},i)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},s);return(0,a.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),S.fetch()(await R(e,e.config.apiHost,n,o),c)}))}async function k(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},I),t);try{const t=new L(e),a=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw M(e,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const t=a.ok?s.errorMessage:s.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw M(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw M(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw M(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw f(e,o,i);p(e,o)}}catch(s){if(s instanceof a.g)throw s;p(e,"network-request-failed",{message:String(s)})}}async function P(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await D(e,t,n,r,a);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function R(e,t,n,r){const a="".concat(t).concat(n,"?").concat(r),s=e,i=s.config.emulator?A(e.config,a):"".concat(e.config.apiScheme,"://").concat(a);if(_.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(i).toString()}return i}function O(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(m(this.auth,"network-request-failed"))),T.get())}))}}function M(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=m(e,t,r);return a.customData._tokenResponse=n,a}function F(e){return void 0!==e&&void 0!==e.enterprise}class U{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return O(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V(e,t){return D(e,"GET","/v2/recaptchaConfig",C(e,t))}async function q(e,t){return D(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function B(e){return 1e3*Number(e)}function J(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(s){return h("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function H(e){const t=J(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function G(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function K(e){var t;const n=e.auth,r=await e.getIdToken(),a=await G(e,q(n,{idToken:r}));y(null===a||void 0===a?void 0:a.users.length,n,"internal-error");const s=a.users[0];e._notifyReloadListener(s);const i=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Q(s.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const d=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!d&&u,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Y(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function Q(e){return e.map((e=>{var{providerId:t}=e,n=i(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):H(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=H(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await k(e,{},(async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await R(e,r,"/v1/token","key=".concat(s)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",S.fetch()(i,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,s=new X;return n&&(y("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),a&&(y("number"===typeof a,"internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return x("not implemented")}}function Z(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ${constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,a=i(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Y(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await G(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),s=J(r);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,o=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:z(B(s.auth_time)),issuedAtTime:z(B(s.iat)),expirationTime:z(B(s.exp)),signInProvider:o||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await K(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await K(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await G(this,async function(e,t){return D(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,a,s,i,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(i=t.tenantId)&&void 0!==i?i:void 0,f=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:N,stsTokenManager:j}=t;y(x&&j,e,"internal-error");const E=X.fromJSON(this.name,j);y("string"===typeof x,e,"internal-error"),Z(d,e.name),Z(u,e.name),y("boolean"===typeof b,e,"internal-error"),y("boolean"===typeof w,e,"internal-error"),Z(h,e.name),Z(p,e.name),Z(m,e.name),Z(f,e.name),Z(g,e.name),Z(v,e.name);const A=new $({uid:x,auth:e,email:u,emailVerified:b,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:g,lastLoginAt:v});return N&&Array.isArray(N)&&(A.providerData=N.map((e=>Object.assign({},e)))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new X;r.updateFromServerResponse(t);const a=new $({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await K(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const a=void 0!==r.providerUserInfo?Q(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length),i=new X;i.updateFromIdToken(n);const o=new $({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Y(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length)};return Object.assign(o,l),o}}const ee=new Map;function te(e){b(e instanceof Function,"Expected a class definition");let t=ee.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ee.set(e,t),t)}class ne{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ne.type="NONE";const re=ne;function ae(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=ae(this.userKey,r.apiKey,a),this.fullPersistenceKey=ae("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await q(this.auth,{idToken:e}).catch((()=>{}));return t?$._fromGetAccountInfoResponse(this.auth,t,e):null}return $._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(te(re),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let a=r[0]||te(re);const s=ae(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await q(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await $._fromGetAccountInfoResponse(e,r,t)}else n=$._fromJSON(e,t);c!==a&&(i=n),a=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return a._shouldAllowMigration&&o.length?(a=o[0],i&&await a._set(s,i.toJSON()),await Promise.all(t.map((async e=>{if(e!==a)try{await e._remove(s)}catch(l){}}))),new se(a,e,n)):new se(a,e,n)}}function ie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(de(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(he(t))return"Blackberry";if(pe(t))return"Webos";if(le(t))return"Safari";if((t.includes("chrome/")||ce(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function le(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return me(e)||ue(e)||pe(e)||he(e)||/windows phone/i.test(e)||de(e)}function ge(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ie((0,a.ZQ)());break;case"Worker":t="".concat(ie((0,a.ZQ)()),"-").concat(e);break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(r.MF,"/").concat(s)}class ve{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(a){r(a)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ye{constructor(e){var t,n,r,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,a,s,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(a=o.containsUppercaseLetter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class xe{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=te(t)),this._initializationPromise=this.queue((async()=>{var n,r,a;if(!this._deleted&&(this.persistenceManager=await se.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(a=this.currentUser)||void 0===a?void 0:a.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await q(this,{idToken:e}),n=await $._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===a||void 0===a?void 0:a._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==r||!(null===i||void 0===i?void 0:i.user)||(a=i.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(i)))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await K(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,a.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(te(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return D(e,"GET","/v2/passwordPolicy",C(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return D(e,"POST","/v2/accounts:revokeToken",C(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&te(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[te(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a="function"===typeof t?t:t.next.bind(t);let s=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(i,this,"internal-error"),i.then((()=>{s||a(this.currentUser)})),"function"===typeof t){const a=e.addObserver(t,n,r);return()=>{s=!0,a()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(u.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];u.warn("Auth (".concat(r.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function be(e){return(0,a.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)((e=>this.observer=e))}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ne={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function je(e){return Ne.loadJS(e)}function Ee(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ae{constructor(){this.enterprise=new Se}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Se{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ie="NO_RECAPTCHA";class _e{constructor(e){this.type="recaptcha-enterprise",this.auth=be(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const a=window.grecaptcha;F(a)?a.enterprise.ready((()=>{a.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Ie)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ae).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{V(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new U(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((a=>{if(!t&&F(window.grecaptcha))n(a,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ne.recaptchaEnterpriseScript;0!==t.length&&(t+=a),je(t).then((()=>{n(a,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Te(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new _e(e);let i;if(a)i=Ie;else try{i=await s.verify(n)}catch(l){i=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ce(e,t,n,r,a){var s,i;if("EMAIL_PASSWORD_PROVIDER"===a){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Te(e,t,n,"getOobCode"===n);return r(e,a)}return r(e,t).catch((async a=>{if(a.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const a=await Te(e,t,n,"getOobCode"===n);return r(e,a)}return Promise.reject(a)}))}if("PHONE_PROVIDER"===a){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("PHONE_PROVIDER")){const a=await Te(e,t,n);return r(e,a).catch((async a=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(a.code==="auth/".concat("missing-recaptcha-token")||a.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const a=await Te(e,t,n,!1,!0);return r(e,a)}return Promise.reject(a)}))}{const a=await Te(e,t,n,!1,!0);return r(e,a)}}return Promise.reject(a+" provider is not supported.")}async function De(e){const t=be(e),n=await V(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new U(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new _e(t).verify()}}function ke(e,t,n){const r=be(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Pe(t),{host:o,port:l}=function(e){const t=Pe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const e=a[1];return{host:e,port:Re(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Re(t)}}}(t),c=null===l?"":":".concat(l),d={url:"".concat(i,"//").concat(o).concat(c,"/")},u=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,a.bD)(d,r.config.emulator)&&(0,a.bD)(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=d,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(o)?((0,a.gE)("".concat(i,"//").concat(o).concat(c)),(0,a.P1)("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Re(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,t){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}}async function Le(e,t){return D(e,"POST","/v1/accounts:signUp",t)}async function Me(e,t){return P(e,"POST","/v1/accounts:signInWithPassword",C(e,t))}class Fe extends Oe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Fe(e,t,"password")}static _fromEmailAndCode(e,t){return new Fe(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ce(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Me,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ce(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Le,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ue(e,t){return P(e,"POST","/v1/accounts:signInWithIdp",C(e,t))}class Ve extends Oe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ve(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,a=i(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ve(n,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){return Ue(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ue(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ue(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function qe(e,t){return D(e,"POST","/v1/accounts:sendVerificationCode",C(e,t))}const ze={USER_NOT_FOUND:"user-not-found"};class Be extends Oe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Be({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Be({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await P(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t));if(n.temporaryProof)throw M(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ze)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}=e;return n||t||r||a?new Be({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}):null}}class Je{constructor(e){var t,n,r,s,i,o;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,d=null!==(n=l.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);y(c&&d&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=d,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=l.lang)&&void 0!==i?i:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Je(t)}catch(n){return null}}}class He{constructor(){this.providerId=He.PROVIDER_ID}static credential(e,t){return Fe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Je.parseLink(t);return y(n,"argument-error"),Fe._fromEmailAndCode(e,n.code,n.tenantId)}}He.PROVIDER_ID="password",He.EMAIL_PASSWORD_SIGN_IN_METHOD="password",He.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ge{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class We extends Ge{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ye extends We{constructor(){super("facebook.com")}static credential(e){return Ve._fromParams({providerId:Ye.PROVIDER_ID,signInMethod:Ye.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ye.credentialFromTaggedObject(e)}static credentialFromError(e){return Ye.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ye.credential(t.oauthAccessToken)}catch(n){return null}}}Ye.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ye.PROVIDER_ID="facebook.com";class Ke extends We{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ve._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ke.credential(n,r)}catch(a){return null}}}Ke.GOOGLE_SIGN_IN_METHOD="google.com",Ke.PROVIDER_ID="google.com";class Qe extends We{constructor(){super("github.com")}static credential(e){return Ve._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qe.credential(t.oauthAccessToken)}catch(n){return null}}}Qe.GITHUB_SIGN_IN_METHOD="github.com",Qe.PROVIDER_ID="github.com";class Xe extends We{constructor(){super("twitter.com")}static credential(e,t){return Ve._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xe.credential(n,r)}catch(a){return null}}}async function Ze(e,t){return P(e,"POST","/v1/accounts:signUp",C(e,t))}Xe.TWITTER_SIGN_IN_METHOD="twitter.com",Xe.PROVIDER_ID="twitter.com";class $e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=await $._fromIdTokenResponse(e,n,r),s=et(n);return new $e({user:a,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=et(n);return new $e({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function et(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class tt extends a.g{constructor(e,t,n,r){var a;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,tt.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new tt(e,t,n,r)}}function nt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw tt._fromErrorAndOperation(e,n,t,r);throw n}))}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await G(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $e._forOperation(e,"link",r)}async function at(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:a}=e;if((0,r.xZ)(a.app))return Promise.reject(g(a));const s="reauthenticate";try{const r=await G(e,nt(a,s,t,e),n);y(r.idToken,a,"internal-error");const i=J(r.idToken);y(i,a,"internal-error");const{sub:o}=i;return y(e.uid===o,a,"user-mismatch"),$e._forOperation(e,s,r)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&p(a,"user-mismatch"),i}}async function st(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const a="signIn",s=await nt(e,a,t),i=await $e._fromIdTokenResponse(e,a,s);return n||await e._updateCurrentUser(i.user),i}async function it(e,t){return st(be(e),t)}async function ot(e){const t=be(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function lt(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(g(e));const a=be(e),s=Ce(a,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ze,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ot(e),t})),o=await $e._fromIdTokenResponse(a,"signIn",i);return await a._updateCurrentUser(o.user),o}function ct(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):it((0,a.Ku)(e),He.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ot(e),t}))}function dt(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function ut(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:start",C(e,t))}new WeakMap;const ht="__sak";class pt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class mt extends pt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mt.type="LOCAL";const ft=mt;function gt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),a=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(a))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function vt(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class yt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=vt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return gt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=vt(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=vt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=gt(n);const a=setInterval((()=>{const e=gt(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(a)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}yt.type="COOKIE";class xt extends pt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xt.type="SESSION";const bt=xt;class wt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new wt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(s).map((async e=>e(t.origin,a))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wt.receivers=[];class jt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise(((i,o)=>{const l=Nt("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),a=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),i(t.data.response);break;default:clearTimeout(c),clearTimeout(a),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Et(){return window}function At(){return"undefined"!==typeof Et().WorkerGlobalScope&&"function"===typeof Et().importScripts}const St="firebaseLocalStorageDb",It="firebaseLocalStorage",_t="fbase_key";class Tt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ct(e,t){return e.transaction([It],t?"readwrite":"readonly").objectStore(It)}function Dt(){const e=indexedDB.open(St,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(It,{keyPath:_t})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(It)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(St);return new Tt(e).toPromise()}(),t(await Dt()))}))}))}async function kt(e,t,n){const r=Ct(e,!0).put({[_t]:t,value:n});return new Tt(r).toPromise()}function Pt(e,t){const n=Ct(e,!0).delete(t);return new Tt(n).toPromise()}class Rt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Dt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return At()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wt._getInstance(At()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new jt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dt();return await kt(e,ht,"1"),await Pt(e,ht),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>kt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ct(e,!1).get(t),r=await new Tt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Pt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ct(e,!1).getAll();return new Tt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rt.type="LOCAL";const Ot=Rt;function Lt(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:start",C(e,t))}Ee("rcb"),new E(3e4,6e4);const Mt="recaptcha";async function Ft(e,t,n){var r;if(!e._getRecaptchaConfig())try{await De(e)}catch(a){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(a="string"===typeof t?{phoneNumber:t}:t,"session"in a){const t=a.session;if("phoneNumber"in a){y("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ce(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ie){y((null===n||void 0===n?void 0:n.type)===Mt,e,"argument-error");return ut(e,await Ut(e,t,n))}return ut(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const s=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;y(s,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ce(e,i,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ie){y((null===n||void 0===n?void 0:n.type)===Mt,e,"argument-error");return Lt(e,await Ut(e,t,n))}return Lt(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ce(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Ie){y((null===n||void 0===n?void 0:n.type)===Mt,e,"argument-error");return qe(e,await Ut(e,t,n))}return qe(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ut(e,t,n){y(n.type===Mt,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const a=Object.assign({},t);if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.captchaResponse,n=a.phoneEnrollmentInfo.clientType,s=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),a}if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.captchaResponse,t=a.phoneSignInInfo.clientType,n=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),a}return Object.assign(a,{recaptchaToken:r}),a}class Vt{constructor(e){this.providerId=Vt.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return Ft(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Be._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Vt.credentialFromTaggedObject(t)}static credentialFromError(e){return Vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Be._fromTokenResponse(n,r):null}}function qt(e,t){return t?te(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vt.PROVIDER_ID="phone",Vt.PHONE_SIGN_IN_METHOD="phone";class zt extends Oe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ue(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ue(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ue(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bt(e){return st(e.auth,new zt(e),e.bypassAuthState)}function Jt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),at(n,new zt(e),e.bypassAuthState)}async function Ht(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),rt(n,new zt(e),e.bypassAuthState)}class Gt{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:s,type:i}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bt;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return Jt;default:p(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wt=new E(2e3,1e4);class Yt extends Gt{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,Yt.currentPopupAction&&Yt.currentPopupAction.cancel(),Yt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=Nt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(m(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Wt.get())};e()}}Yt.currentPopupAction=null;const Kt=new Map;class Qt extends Gt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Kt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=$t(t),r=Zt(e);if(!await r._isAvailable())return!1;const a="true"===await r._get(n);return await r._remove(n),a}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Kt.set(this.auth._key(),e)}return this.bypassAuthState||Kt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Xt(e,t){Kt.set(e._key(),t)}function Zt(e){return te(e._redirectPersistence)}function $t(e){return ae("pendingRedirect",e.config.apiKey,e.name)}async function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const a=be(e),s=qt(a,t),i=new Qt(a,s,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}class tn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!rn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nn(e))}saveEventToCache(e){this.cachedEventUids.add(nn(e)),this.lastProcessedEventTime=Date.now()}}function nn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function rn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const an=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sn=/^https?/;async function on(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return D(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ln(r))return}catch(n){}p(e,"unauthorized-domain")}function ln(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&a.hostname===r}if(!sn.test(n))return!1;if(an.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const cn=new E(3e4,6e4);function dn(){const e=Et().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function un(e){return new Promise(((t,n)=>{var r,a,s;function i(){dn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dn(),n(m(e,"network-request-failed"))},timeout:cn.get()})}if(null===(a=null===(r=Et().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Et().gapi)||void 0===s?void 0:s.load)){const t=Ee("iframefcb");return Et()[t]=()=>{gapi.load?i():n(m(e,"network-request-failed"))},je("".concat(Ne.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}i()}})).catch((e=>{throw hn=null,e}))}let hn=null;const pn=new E(5e3,15e3),mn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),s={apiKey:t.apiKey,appName:e.name,v:r.MF},i=fn.get(e.config.apiHost);i&&(s.eid=i);const o=e._getFrameworks();return o.length&&(s.fw=o.join(",")),"".concat(n,"?").concat((0,a.Am)(s).slice(1))}async function vn(e){const t=await function(e){return hn=hn||un(e),hn}(e),n=Et().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:gn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mn,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const a=m(e,"network-request-failed"),s=Et().setTimeout((()=>{r(a)}),pn.get());function i(){Et().clearTimeout(s),n(t)}t.ping(i).then(i,(()=>{r(a)}))}))))}const yn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function bn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},yn),{width:r.toString(),height:s.toString(),top:i,left:o}),d=(0,a.ZQ)().toLowerCase();n&&(l=ce(d)?"_blank":n),oe(d)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(d)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new xn(null);const h=window.open(t||"",l,u);y(h,e,"popup-blocked");try{h.focus()}catch(p){}return new xn(h)}const wn="__/auth/handler",Nn="emulator/auth/handler",jn=encodeURIComponent("fac");async function En(e,t,n,s,i,o){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:i};if(t instanceof Ge){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof We){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const d=await e._getAppCheckToken(),u=d?"#".concat(jn,"=").concat(encodeURIComponent(d)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(wn);return A(t,Nn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(u)}const An="webStorageSupport";const Sn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bt,this._completeRedirectFn=en,this._overrideRedirectResult=Xt}async _openPopup(e,t,n,r){var a;b(null===(a=this.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");return bn(e,await En(e,t,n,w(),r),Nt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Et().location.href=e}(await En(e,t,n,w(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await vn(e),n=new tn(e);return t.register("authEvent",(t=>{y(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(An,{type:An},(n=>{var r;const a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[An];void 0!==a&&t(!!a),p(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=on(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fe()||le()||me()}};var In="@firebase/auth",_n="1.10.6";class Tn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Cn=(0,a.XA)("authIdTokenMaxAge")||300;let Dn=null;const kn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Cn)return;const a=null===n||void 0===n?void 0:n.token;Dn!==a&&(Dn=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}}))};function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Sn,persistence:[Ot,ft,bt]}),s=(0,a.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=kn(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const i=(0,a.Tj)("auth");return i&&ke(n,"http://".concat(i)),n}var Rn;Ne={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Rn="Browser",(0,r.om)(new o.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;y(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:Rn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge(Rn)},c=new xe(r,a,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(te);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,r.om)(new o.uA("auth-internal",(e=>(e=>new Tn(e))(be(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(In,_n,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Rn)),(0,r.KO)(In,_n,"esm2017")},654:(e,t,n)=>{"use strict";var r=n(950),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},738:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<a&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,P(N);else{var t=r(d);null!==t&&R(w,t.startTime-e)}}function N(e,n){f=!1,g&&(g=!1,y(S),S=-1),m=!0;var s=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),b(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&R(w,u.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,E=!1,A=null,S=-1,I=5,_=-1;function T(){return!(t.unstable_now()-_<I)}function C(){if(null!==A){var e=t.unstable_now();_=e;var n=!0;try{n=A(!0,e)}finally{n?j():(E=!1,A=null)}}else E=!1}if("function"===typeof x)j=function(){x(C)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,k=D.port2;D.port1.onmessage=C,j=function(){k.postMessage(null)}}else j=function(){v(C,0)};function P(e){A=e,E||(E=!0,j())}function R(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,P(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(g?(y(S),S=-1):g=!0,R(w,s-i))):(e.sortIndex=o,n(c,e),f||m||(f=!0,P(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},865:(e,t,n)=>{"use strict";n.d(t,{Cb:()=>o,ar:()=>l,hW:()=>d,l0:()=>u,ol:()=>h,pb:()=>p,startMedicalEvaluation:()=>m,yK:()=>c});var r=n(555),a=n(428),s=n(220),i=n(109);const o=async e=>{try{if(!e)throw console.error("No doctor ID provided"),new Error("Doctor ID is required. Please check your login status.");const d=[],u=[];let h=null,p="Unknown Hospital";try{const t=(0,s.doc)(a.db,"users",e),n=await(0,s.x7)(t);if(n.exists()){h=n.data();const t=(0,s.rJ)(a.db,"hospitals"),r=(0,s.P)(t,(0,s._M)("userId","==",e)),i=await(0,s.GG)(r);i.empty||(p=i.docs[0].data().name)}}catch(t){console.error("Error fetching doctor or hospital info:",t)}const m=h?"Dr. ".concat(h.firstName||""," ").concat(h.lastName||"").trim():"Unknown Doctor";try{try{const t=(0,s.P)((0,s.rJ)(a.db,"donorAppointments"),(0,s._M)("doctorId","==",e),(0,s.My)("date","desc")),o=await(0,s.GG)(t);for(const e of o.docs)try{const t=e.data();let a;try{a=t.date.toDate()}catch(n){console.warn("Error converting date:",n),a=new Date}d.push((0,r.A)((0,r.A)({id:e.id,type:"donor"},t),{},{date:a,doctorName:m,hospitalName:p,status:t.status||"scheduled"}))}catch(i){console.error("Error processing donor appointment:",i)}}catch(o){if(console.warn("Index error, falling back to simple query:",o.message),!o.message||!o.message.includes("requires an index"))throw o;{console.warn("Missing index detected. You need to create a composite index for the donorAppointments collection on doctorId and date fields."),console.warn("Please follow the link in the error message to create the index in the Firebase console.");const t=(0,s.P)((0,s.rJ)(a.db,"donorAppointments"),(0,s._M)("doctorId","==",e)),o=await(0,s.GG)(t),l=[];for(const e of o.docs)try{const t=e.data();let a;try{a=t.date.toDate()}catch(n){console.warn("Error converting date:",n),a=new Date}l.push((0,r.A)((0,r.A)({id:e.id,type:"donor"},t),{},{date:a,doctorName:m,hospitalName:p,status:t.status||"scheduled"}))}catch(i){console.error("Error processing donor appointment:",i)}l.sort(((e,t)=>t.date-e.date)),d.push(...l)}}}catch(l){console.error("Error fetching donor appointments:",l)}try{try{const t=(0,s.P)((0,s.rJ)(a.db,"recipientAppointments"),(0,s._M)("doctorId","==",e),(0,s.My)("date","desc")),o=await(0,s.GG)(t);for(const e of o.docs)try{const t=e.data();let a;try{a=t.date.toDate()}catch(n){console.warn("Error converting date:",n),a=new Date}u.push((0,r.A)((0,r.A)({id:e.id,type:"recipient"},t),{},{date:a,doctorName:m,hospitalName:p,status:t.status||"scheduled"}))}catch(i){console.error("Error processing recipient appointment:",i)}}catch(o){if(console.warn("Index error, falling back to simple query:",o.message),!o.message||!o.message.includes("requires an index"))throw o;{console.warn("Missing index detected. You need to create a composite index for the recipientAppointments collection on doctorId and date fields."),console.warn("Please follow the link in the error message to create the index in the Firebase console.");const t=(0,s.P)((0,s.rJ)(a.db,"recipientAppointments"),(0,s._M)("doctorId","==",e)),o=await(0,s.GG)(t),l=[];for(const e of o.docs)try{const t=e.data();let a;try{a=t.date.toDate()}catch(n){console.warn("Error converting date:",n),a=new Date}l.push((0,r.A)((0,r.A)({id:e.id,type:"recipient"},t),{},{date:a,doctorName:m,hospitalName:p,status:t.status||"scheduled"}))}catch(i){console.error("Error processing recipient appointment:",i)}l.sort(((e,t)=>t.date-e.date)),u.push(...l)}}}catch(c){console.error("Error fetching recipient appointments:",c)}return[...d,...u]}catch(d){throw console.error("Error in getDoctorAppointments:",d),d}},l=async()=>{try{const e=(0,s.P)((0,s.rJ)(a.db,"users"),(0,s._M)("role","==","doctor")),t=await(0,s.GG)(e),n=[];for(const i of t.docs){const e=i.data();let t="Independent";const o=(0,s.rJ)(a.db,"hospitals"),l=(0,s.P)(o,(0,s._M)("userId","==",i.id)),c=await(0,s.GG)(l);if(!c.empty){const e=c.docs[0].data();t=e.hospitalName||e.name||"Unknown Hospital",console.log("Found hospital with fields:",Object.keys(e)),console.log("Hospital name resolved to:",t)}n.push((0,r.A)((0,r.A)({id:i.id},e),{},{hospitalName:t}))}return n}catch(e){throw console.error("Error fetching doctors:",e),e}},c=async e=>{try{const i=s.Dc.fromDate(new Date(e.date));let o=e.doctorName,l=e.hospitalName;if(!o&&e.doctorId)try{const t=(0,s.doc)(a.db,"users",e.doctorId),n=await(0,s.x7)(t);if(n.exists()){const t=n.data();if(o="Dr. ".concat(t.firstName||""," ").concat(t.lastName||"").trim(),"Dr. "===o&&(o="Dr. "+(t.displayName||"Unknown")),!l)if(t.hospitalId){const e=(0,s.doc)(a.db,"hospitals",t.hospitalId),n=await(0,s.x7)(e);n.exists()&&(l=n.data().name||"Unknown Hospital")}else{const t=(0,s.rJ)(a.db,"hospitals"),n=(0,s.P)(t,(0,s._M)("userId","==",e.doctorId)),r=await(0,s.GG)(n);r.empty||(l=r.docs[0].data().name||"Unknown Hospital")}}}catch(t){console.error("Error fetching doctor or hospital info:",t)}const c=await(0,s.gS)((0,s.rJ)(a.db,"donorAppointments"),(0,r.A)((0,r.A)({},e),{},{date:i,status:"scheduled",createdAt:s.Dc.now(),type:"donor",doctorName:o||e.doctorName||"Unknown Doctor",hospitalName:l||e.hospitalName||"Unknown Hospital"})),d=(0,s.doc)(a.db,"users",e.donorId),u=await(0,s.x7)(d);if(u.exists()){const e=u.data().appointmentIds||[];await(0,s.updateDoc)(d,{appointmentIds:[...e,c.id]})}try{await m(e.donorId,c.id),console.log("Medical evaluation started for donor ".concat(e.donorId))}catch(n){console.error("Error starting medical evaluation:",n)}return c.id}catch(n){throw console.error("Error creating donor appointment:",n),n}},d=async e=>{try{const o=s.Dc.fromDate(new Date(e.date));let l=e.doctorName,c=e.hospitalName;if(!l&&e.doctorId)try{const t=(0,s.doc)(a.db,"users",e.doctorId),n=await(0,s.x7)(t);if(n.exists()){const t=n.data();if(l="Dr. ".concat(t.firstName||""," ").concat(t.lastName||"").trim(),"Dr. "===l&&(l="Dr. "+(t.displayName||"Unknown")),!c)if(t.hospitalId){const e=(0,s.doc)(a.db,"hospitals",t.hospitalId),n=await(0,s.x7)(e);n.exists()&&(c=n.data().name||"Unknown Hospital")}else{const t=(0,s.rJ)(a.db,"hospitals"),n=(0,s.P)(t,(0,s._M)("userId","==",e.doctorId)),r=await(0,s.GG)(n);r.empty||(c=r.docs[0].data().name||"Unknown Hospital")}}}catch(t){console.error("Error fetching doctor or hospital info:",t)}const d=String(e.recipientId||"").trim();let u=null,h=d;try{if(d){console.log("Looking up recipient document with ID: ".concat(d));const t=(0,s.doc)(a.db,"recipients",d),n=await(0,s.x7)(t);if(n.exists()?console.log("Direct lookup successful - document data keys:",Object.keys(n.data())):console.log("Direct lookup failed - document doesn't exist"),n.exists()){const e=n.data();console.log("Retrieved recipient document data:",e),e.userId?(console.log("Found userId: ".concat(e.userId," for recipient document ID ").concat(d)),u=e.userId):console.warn("Recipient document found but has no userId field. Document ID: ".concat(d))}else{console.log("No recipient document found with ID: ".concat(d,", will try querying by field values"));const t=(0,s.rJ)(a.db,"recipients"),n=(0,s.P)(t,(0,s._M)("id","==",d)),r=await(0,s.GG)(n);if(r.empty){if(e.patientName){console.log("Trying to find recipient by name: ".concat(e.patientName));const t=(0,s.rJ)(a.db,"recipients"),n=(0,s.P)(t,(0,s._M)("fullName","==",e.patientName)),r=await(0,s.GG)(n);if(r.empty)console.warn("No recipient found by name ".concat(e.patientName));else{const t=r.docs[0].data();t.userId&&(console.log("Found userId: ".concat(t.userId," by matching recipient name ").concat(e.patientName)),u=t.userId)}}}else{const e=r.docs[0].data();e.userId&&(console.log("Found userId: ".concat(e.userId," for recipient with id field=").concat(d)),u=e.userId)}}}}catch(n){console.error("Error fetching userId from recipient:",n)}if(!u){console.log("No userId found through direct methods, attempting a broader query for recipient document ID: ".concat(d));try{const e=(0,s.rJ)(a.db,"recipients"),t=await(0,s.GG)(e);console.log("Found ".concat(t.size," total recipients in the collection")),t.forEach((e=>{const t=e.data();console.log("Recipient ".concat(e.id,": fullName=").concat(t.fullName,", userId=").concat(t.userId||"not set"))}));const n=t.docs.find((e=>e.id===d));if(n){const e=n.data();e.userId&&(u=e.userId,console.log("Found userId ".concat(u," from complete collection lookup by document ID")))}if(!u)for(const r of t.docs){if(r.data().userId===d){console.log("Found a recipient where userId matches our originalRecipientId. Using originalRecipientId as userId"),u=d;break}}}catch(n){console.error("Error during broader recipient lookup:",n)}}u?(h=u,console.log("FINAL DECISION: Using userId: ".concat(u," as recipientId for the appointment"))):console.log("FINAL DECISION: No userId found for recipient ".concat(d,", using original ID as fallback"));const p=d;if(!u&&d)try{console.log("CRITICAL FIX: Making one final attempt to find the correct userId");const e=(0,s.rJ)(a.db,"recipients"),t=await(0,s.GG)(e);console.log("All recipients with their userIds:"),t.docs.forEach((e=>{console.log("Recipient ID: ".concat(e.id,", userId: ").concat(e.data().userId||"NO USER ID"))}));const n=t.docs.find((e=>e.id===d));n&&n.data().userId?(u=n.data().userId,h=u,console.log("FINAL FIX: Found userId ".concat(u," for recipient document ").concat(d))):console.log("FAILED TO FIX: Could not find userId for recipient document ".concat(d))}catch(n){console.error("Error in final userId lookup:",n)}const m=(0,r.A)((0,r.A)({},e),{},{recipientId:u||h,recipientDocId:p,patientId:u||h,userId:u||h,date:o,status:"scheduled",createdAt:s.Dc.now(),type:"recipient",doctorName:l||e.doctorName||"Unknown Doctor",hospitalName:c||e.hospitalName||"Unknown Hospital",fromStaffDashboard:!0});console.log("Creating standardized recipient appointment with IDs:",{originalRecipientDocId:d,fetchedUserId:u||"Not found",finalRecipientId:m.recipientId,recipientDocId:m.recipientDocId,patientId:m.patientId,userId:m.userId}),u||(console.warn("\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f WARNING: COULD NOT FIND USER ID FOR RECIPIENT \u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f"),console.warn("    Using document ID instead of user ID for recipientId"),console.warn("    This may cause issues with appointment visibility"),console.warn("    Recipient document ID:",d));const f=await(0,s.gS)((0,s.rJ)(a.db,"recipientAppointments"),m);if(h){const e=(0,s.doc)(a.db,"users",h),t=await(0,s.x7)(e);if(t.exists()){const n=t.data().appointmentIds||[];await(0,s.updateDoc)(e,{appointmentIds:[...n,f.id]}),console.log("Updated user document ".concat(h," with new appointment ID: ").concat(f.id))}else console.log("User document ".concat(h," not found, could not update user's appointmentIds array"));if(d)try{const e=(0,s.doc)(a.db,"recipients",d),t=await(0,s.x7)(e);if(t.exists()){const n=t.data().appointmentIds||[];await(0,s.updateDoc)(e,{appointmentIds:[...n,f.id]}),console.log("Also updated recipient document ".concat(d," with new appointment ID: ").concat(f.id))}else console.log("Recipient document ".concat(d," not found, could not update recipient's appointmentIds array"))}catch(n){console.error("Error updating recipient document ".concat(d,":"),n)}}else console.log("No recipientId provided, skipping user appointmentIds update");console.log("APPOINTMENT SAVED TO DATABASE: ",{collection:"recipientAppointments",documentId:f.id,data:{recipientId:m.recipientId,userId:m.userId,patientId:m.patientId,recipientDocId:m.recipientDocId},originalValues:{originalRecipientId:d,fetchedUserId:u||"Not found"}});try{const e=(0,s.doc)(a.db,"recipientAppointments",f.id),t=await(0,s.x7)(e);if(t.exists()){const e=t.data();console.log("VERIFICATION - Saved appointment data:",{recipientId:e.recipientId,userId:e.userId,patientId:e.patientId}),u&&e.recipientId!==u?(console.error("\u26a0\ufe0f CRITICAL ERROR: Saved recipientId does not match the userId we found"),console.error("Expected: ".concat(u,", Got: ").concat(e.recipientId))):console.log("\u2705 Appointment successfully saved with correct recipientId")}}catch(i){console.error("Error verifying saved appointment data:",i)}return f.id}catch(n){throw console.error("Error creating recipient appointment:",n),n}},u=async(e,t,n)=>{try{const o="donor"===t?"donorAppointments":"recipientAppointments";n.date&&(n.date=s.Dc.fromDate(new Date(n.date)));const l=(0,s.doc)(a.db,o,e),c=await(0,s.x7)(l);if(c.exists()){const e=c.data();if(!n.doctorName&&e.doctorName&&(n.doctorName=e.doctorName),!n.hospitalName&&e.hospitalName&&(n.hospitalName=e.hospitalName),n.doctorId&&n.doctorId!==e.doctorId&&!n.doctorName)try{const e=(0,s.doc)(a.db,"users",n.doctorId),t=await(0,s.x7)(e);if(t.exists()){const e=t.data();if(n.doctorName="Dr. ".concat(e.firstName||""," ").concat(e.lastName||"").trim(),"Dr. "===n.doctorName&&(n.doctorName="Dr. "+(e.displayName||"Unknown")),!n.hospitalName||"Unknown Hospital"===n.hospitalName)if(e.hospitalId){const t=(0,s.doc)(a.db,"hospitals",e.hospitalId),r=await(0,s.x7)(t);r.exists()&&(n.hospitalName=r.data().name||"Unknown Hospital")}else{const e=(0,s.rJ)(a.db,"hospitals"),t=(0,s.P)(e,(0,s._M)("userId","==",n.doctorId)),r=await(0,s.GG)(t);r.empty||(n.hospitalName=r.docs[0].data().name||"Unknown Hospital")}}}catch(i){console.error("Error fetching updated doctor info:",i)}}return await(0,s.updateDoc)(l,(0,r.A)((0,r.A)({},n),{},{updatedAt:s.Dc.now()})),e}catch(o){throw console.error("Error updating ".concat(t," appointment:"),o),o}},h=async(e,t)=>{try{const n="donor"===t?"donorAppointments":"recipientAppointments",r=(0,s.doc)(a.db,n,e);return await(0,s.updateDoc)(r,{status:"cancelled",updatedAt:s.Dc.now()}),e}catch(n){throw console.error("Error cancelling ".concat(t," appointment:"),n),n}},p=async function(e,t){return f(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")},m=async(e,t)=>{try{const n=(0,s.doc)(a.db,"users",e),r=(0,s.doc)(a.db,"medicalRecords",e),o={requestStatus:i.J2.MEDICAL_EVALUATION_IN_PROGRESS,status:"medical-evaluation-in-progress",medicalEvaluationStarted:s.Dc.now(),currentAppointmentId:t,statusNotes:"Your appointment has been scheduled. Medical evaluation is now in progress.",evaluationMessage:"Your appointment is scheduled - View your appointments",updatedAt:s.Dc.now()};return await Promise.all([(0,s.updateDoc)(n,o),(0,s.updateDoc)(r,o)]),console.log("Started medical evaluation for donor ".concat(e)),!0}catch(n){throw console.error("Error starting medical evaluation:",n),n}},f=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r="donor"===t?"donorAppointments":"recipientAppointments",o=(0,s.doc)(a.db,r,e),l=await(0,s.x7)(o);if(!l.exists())throw new Error("Appointment not found");const c=l.data();return await(0,s.updateDoc)(o,{status:"completed",completedAt:s.Dc.now(),evaluationNotes:n,updatedAt:s.Dc.now()}),"donor"===t&&c.donorId?await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=(0,s.doc)(a.db,"users",e),o=(0,s.doc)(a.db,"medicalRecords",e),l={requestStatus:i.J2.MEDICAL_EVALUATION_COMPLETED,status:"medical-evaluation-completed",medicalEvaluationCompleted:s.Dc.now(),evaluationNotes:n||"Medical evaluation completed successfully",statusNotes:"Your appointment/evaluation process has been completed successfully.",evaluationMessage:"Your appointment or evaluation process completed",completedAppointmentId:t,updatedAt:s.Dc.now()};return await Promise.all([(0,s.updateDoc)(r,l),(0,s.updateDoc)(o,l)]),console.log("Completed medical evaluation for donor ".concat(e)),!0}catch(r){throw console.error("Error completing medical evaluation:",r),r}}(c.donorId,e,n):"recipient"===t&&c.recipientId&&await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=(0,s.doc)(a.db,"users",e),o=(0,s.doc)(a.db,"medicalRecords",e),l={requestStatus:i.J2.MEDICAL_EVALUATION_COMPLETED,status:"medical-evaluation-completed",medicalEvaluationStatus:"completed",medicalEvaluationCompleted:s.Dc.now(),evaluationNotes:n||"Medical evaluation completed successfully",statusNotes:"Your appointment/evaluation process has been completed successfully.",evaluationMessage:"Your appointment or evaluation process completed",completedAppointmentId:t,updatedAt:s.Dc.now()};return await Promise.all([(0,s.updateDoc)(r,l),(0,s.updateDoc)(o,l)]),console.log("Completed medical evaluation for recipient ".concat(e)),!0}catch(r){throw console.error("Error completing recipient medical evaluation:",r),r}}(c.recipientId,e,n),e}catch(r){throw console.error("Error completing ".concat(t," appointment with evaluation:"),r),r}}},913:(e,t,n)=>{"use strict";n.d(t,{MF:()=>ue,j6:()=>ie,xZ:()=>oe,om:()=>se,Sx:()=>pe,Wp:()=>he,KO:()=>me});var r=n(253),a=n(624),s=n(170),i=n(555);let o,l;const c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap;let m={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const s=e.call(y(this),t,...r);return u.set(s,t.sort?t.sort():[t]),v(s)}}function g(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(d.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)}));d.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,m):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(v(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&c.set(t,e)})).catch((()=>{})),p.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),p.set(t,e)),t}const y=e=>p.get(e);const x=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function N(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!x.includes(n))return;const s=async function(e){const t=this.transaction(e,a?"readwrite":"readonly");let s=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),a&&t.done]))[0]};return w.set(t,s),s}m=(e=>(0,i.A)((0,i.A)({},e),{},{get:(t,n,r)=>N(t,n)||e.get(t,n,r),has:(t,n)=>!!N(t,n)||e.has(t,n)}))(m);class j{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const E="@firebase/app",A="0.13.0",S=new a.Vy("@firebase/app"),I="@firebase/app-compat",_="@firebase/analytics-compat",T="@firebase/analytics",C="@firebase/app-check-compat",D="@firebase/app-check",k="@firebase/auth",P="@firebase/auth-compat",R="@firebase/database",O="@firebase/data-connect",L="@firebase/database-compat",M="@firebase/functions",F="@firebase/functions-compat",U="@firebase/installations",V="@firebase/installations-compat",q="@firebase/messaging",z="@firebase/messaging-compat",B="@firebase/performance",J="@firebase/performance-compat",H="@firebase/remote-config",G="@firebase/remote-config-compat",W="@firebase/storage",Y="@firebase/storage-compat",K="@firebase/firestore",Q="@firebase/ai",X="@firebase/firestore-compat",Z="firebase",$="[DEFAULT]",ee={[E]:"fire-core",[I]:"fire-core-compat",[T]:"fire-analytics",[_]:"fire-analytics-compat",[D]:"fire-app-check",[C]:"fire-app-check-compat",[k]:"fire-auth",[P]:"fire-auth-compat",[R]:"fire-rtdb",[O]:"fire-data-connect",[L]:"fire-rtdb-compat",[M]:"fire-fn",[F]:"fire-fn-compat",[U]:"fire-iid",[V]:"fire-iid-compat",[q]:"fire-fcm",[z]:"fire-fcm-compat",[B]:"fire-perf",[J]:"fire-perf-compat",[H]:"fire-rc",[G]:"fire-rc-compat",[W]:"fire-gcs",[Y]:"fire-gcs-compat",[K]:"fire-fst",[X]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[Z]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function ae(e,t){try{e.container.addComponent(t)}catch(n){S.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function se(e){const t=e.name;if(re.has(t))return S.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())ae(n,e);for(const n of ne.values())ae(n,e);return!0}function ie(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new s.FA("app","Firebase",le);class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const ue="11.8.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const a=Object.assign({name:$,automaticDataCollectionEnabled:!0},t),i=a.name;if("string"!==typeof i||!i)throw ce.create("bad-app-name",{appName:String(i)});if(n||(n=(0,s.T9)()),!n)throw ce.create("no-options");const o=te.get(i);if(o){if((0,s.bD)(n,o.options)&&(0,s.bD)(a,o.config))return o;throw ce.create("duplicate-app",{appName:i})}const l=new r.h1(i);for(const r of re.values())l.addComponent(r);const c=new de(n,a,l);return te.set(i,c),c}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;const t=te.get(e);if(!t&&e===$&&(0,s.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function me(e,t,n){var a;let s=null!==(a=ee[e])&&void 0!==a?a:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void S.warn(e.join(" "))}se(new r.uA("".concat(s,"-version"),(()=>({library:s,version:t})),"VERSION"))}const fe="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:a,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=v(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(v(i.result),e.oldVersion,e.newVersion,v(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),a&&e.addEventListener("versionchange",(e=>a(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(fe)}catch(n){console.warn(n)}}}).catch((e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})}))),ge}async function ye(e,t){try{const n=(await ve()).transaction(fe,"readwrite"),r=n.objectStore(fe);await r.put(t,xe(e)),await n.done}catch(n){if(n instanceof s.g)S.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});S.warn(e.message)}}}function xe(e){return"".concat(e.name,"!").concat(e.options.appId)}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ne(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=we();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){S.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const a of e){const e=n.find((e=>e.agent===a.agent));if(e){if(e.dates.push(a.date),je(n)>t){e.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),je(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),a=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return S.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class Ne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(fe),n=await t.objectStore(fe).get(xe(e));return await t.done,n}catch(t){if(t instanceof s.g)S.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});S.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function je(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Ee;Ee="",se(new r.uA("platform-logger",(e=>new j(e)),"PRIVATE")),se(new r.uA("heartbeat",(e=>new be(e)),"PRIVATE")),me(E,A,Ee),me(E,A,"esm2017"),me("fire-js","")},942:(e,t,n)=>{e.exports=n(488)()},949:e=>{"use strict";e.exports=function(e,t,n,r,a,s,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,s,i,o],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},950:(e,t,n)=>{"use strict";e.exports=n(49)},959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},988:function(e){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=(r(n(1)),n(6)),i=r(s),o=r(n(7)),l=r(n(8)),c=r(n(9)),d=r(n(10)),u=r(n(11)),h=r(n(14)),p=[],m=!1,f={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},g=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(m=!0),m)return p=(0,u.default)(p,f),(0,d.default)(p,f.once),p},v=function(){p=(0,h.default)(),g()},y=function(){p.forEach((function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay")}))},x=function(e){return!0===e||"mobile"===e&&c.default.mobile()||"phone"===e&&c.default.phone()||"tablet"===e&&c.default.tablet()||"function"==typeof e&&!0===e()},b=function(e){f=a(f,e),p=(0,h.default)();var t=document.all&&!window.atob;return x(f.disable)||t?y():(f.disableMutationObserver||l.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),f.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",f.easing),document.querySelector("body").setAttribute("data-aos-duration",f.duration),document.querySelector("body").setAttribute("data-aos-delay",f.delay),"DOMContentLoaded"===f.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?g(!0):"load"===f.startEvent?window.addEventListener(f.startEvent,(function(){g(!0)})):document.addEventListener(f.startEvent,(function(){g(!0)})),window.addEventListener("resize",(0,o.default)(g,f.debounceDelay,!0)),window.addEventListener("orientationchange",(0,o.default)(g,f.debounceDelay,!0)),window.addEventListener("scroll",(0,i.default)((function(){(0,d.default)(p,f.once)}),f.throttleDelay)),f.disableMutationObserver||l.default.ready("[data-aos]",v),p)};e.exports={init:b,refresh:g,refreshHard:v}},function(e,t){},,,,,function(e,t){(function(t){"use strict";function n(e,t,n){function r(t){var n=f,r=g;return f=g=void 0,E=t,y=e.apply(r,n)}function s(e){return E=e,x=setTimeout(d,t),A?r(e):y}function i(e){var n=t-(e-b);return S?N(n,v-(e-E)):n}function l(e){var n=e-b;return void 0===b||n>=t||n<0||S&&e-E>=v}function d(){var e=j();return l(e)?u(e):void(x=setTimeout(d,i(e)))}function u(e){return x=void 0,I&&f?r(e):(f=g=void 0,y)}function h(){void 0!==x&&clearTimeout(x),E=0,f=b=g=x=void 0}function p(){return void 0===x?y:u(j())}function m(){var e=j(),n=l(e);if(f=arguments,g=this,b=e,n){if(void 0===x)return s(b);if(S)return x=setTimeout(d,t),r(b)}return void 0===x&&(x=setTimeout(d,t)),y}var f,g,v,y,x,b,E=0,A=!1,S=!1,I=!0;if("function"!=typeof e)throw new TypeError(c);return t=o(t)||0,a(n)&&(A=!!n.leading,v=(S="maxWait"in n)?w(o(n.maxWait)||0,t):v,I="trailing"in n?!!n.trailing:I),m.cancel=h,m.flush=p,m}function r(e,t,r){var s=!0,i=!0;if("function"!=typeof e)throw new TypeError(c);return a(r)&&(s="leading"in r?!!r.leading:s,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:s,maxWait:t,trailing:i})}function a(e){var t="undefined"==typeof e?"undefined":l(e);return!!e&&("object"==t||"function"==t)}function s(e){return!!e&&"object"==("undefined"==typeof e?"undefined":l(e))}function i(e){return"symbol"==("undefined"==typeof e?"undefined":l(e))||s(e)&&b.call(e)==u}function o(e){if("number"==typeof e)return e;if(i(e))return d;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var n=m.test(e);return n||f.test(e)?g(e.slice(2),n?2:8):p.test(e)?d:+e}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="Expected a function",d=NaN,u="[object Symbol]",h=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,f=/^0o[0-7]+$/i,g=parseInt,v="object"==("undefined"==typeof t?"undefined":l(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":l(self))&&self&&self.Object===Object&&self,x=v||y||Function("return this")(),b=Object.prototype.toString,w=Math.max,N=Math.min,j=function(){return x.Date.now()};e.exports=r}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=f,r=g;return f=g=void 0,E=t,y=e.apply(r,n)}function s(e){return E=e,x=setTimeout(d,t),A?a(e):y}function o(e){var n=t-(e-j);return S?w(n,v-(e-E)):n}function c(e){var n=e-j;return void 0===j||n>=t||n<0||S&&e-E>=v}function d(){var e=N();return c(e)?u(e):void(x=setTimeout(d,o(e)))}function u(e){return x=void 0,I&&f?a(e):(f=g=void 0,y)}function h(){void 0!==x&&clearTimeout(x),E=0,f=j=g=x=void 0}function p(){return void 0===x?y:u(N())}function m(){var e=N(),n=c(e);if(f=arguments,g=this,j=e,n){if(void 0===x)return s(j);if(S)return x=setTimeout(d,t),a(j)}return void 0===x&&(x=setTimeout(d,t)),y}var f,g,v,y,x,j,E=0,A=!1,S=!1,I=!0;if("function"!=typeof e)throw new TypeError(l);return t=i(t)||0,r(n)&&(A=!!n.leading,v=(S="maxWait"in n)?b(i(n.maxWait)||0,t):v,I="trailing"in n?!!n.trailing:I),m.cancel=h,m.flush=p,m}function r(e){var t="undefined"==typeof e?"undefined":o(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==("undefined"==typeof e?"undefined":o(e))}function s(e){return"symbol"==("undefined"==typeof e?"undefined":o(e))||a(e)&&x.call(e)==d}function i(e){if("number"==typeof e)return e;if(s(e))return c;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=p.test(e);return n||m.test(e)?f(e.slice(2),n?2:8):h.test(e)?c:+e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="Expected a function",c=NaN,d="[object Symbol]",u=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,f=parseInt,g="object"==("undefined"==typeof t?"undefined":o(t))&&t&&t.Object===Object&&t,v="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,y=g||v||Function("return this")(),x=Object.prototype.toString,b=Math.max,w=Math.min,N=function(){return y.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=void 0,r=void 0;for(t=0;t<e.length;t+=1){if((r=e[t]).dataset&&r.dataset.aos)return!0;if(r.children&&n(r.children))return!0}return!1}function r(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function a(){return!!r()}function s(e,t){var n=window.document,a=new(r())(i);o=t,a.observe(n.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function i(e){e&&e.forEach((function(e){var t=Array.prototype.slice.call(e.addedNodes),r=Array.prototype.slice.call(e.removedNodes);if(n(t.concat(r)))return o()}))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){};t.default={isSupported:a,ready:s}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,i=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=function(){function e(){n(this,e)}return a(e,[{key:"phone",value:function(){var e=r();return!(!s.test(e)&&!i.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=r();return!(!o.test(e)&&!l.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),e}();t.default=new c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,n){var r=e.node.getAttribute("data-aos-once");t>e.position?e.node.classList.add("aos-animate"):"undefined"!=typeof r&&("false"===r||!n&&"true"!==r)&&e.node.classList.remove("aos-animate")},r=function(e,t){var r=window.pageYOffset,a=window.innerHeight;e.forEach((function(e,s){n(e,a+r,t)}))};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(12)),s=function(e,t){return e.forEach((function(e,n){e.node.classList.add("aos-init"),e.position=(0,a.default)(e.node,t.offset)})),e};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(13)),s=function(e,t){var n=0,r=0,s=window.innerHeight,i={offset:e.getAttribute("data-aos-offset"),anchor:e.getAttribute("data-aos-anchor"),anchorPlacement:e.getAttribute("data-aos-anchor-placement")};switch(i.offset&&!isNaN(i.offset)&&(r=parseInt(i.offset)),i.anchor&&document.querySelectorAll(i.anchor)&&(e=document.querySelectorAll(i.anchor)[0]),n=(0,a.default)(e).top,i.anchorPlacement){case"top-bottom":break;case"center-bottom":n+=e.offsetHeight/2;break;case"bottom-bottom":n+=e.offsetHeight;break;case"top-center":n+=s/2;break;case"bottom-center":n+=s/2+e.offsetHeight;break;case"center-center":n+=s/2+e.offsetHeight/2;break;case"top-top":n+=s;break;case"bottom-top":n+=e.offsetHeight+s;break;case"center-top":n+=e.offsetHeight/2+s}return i.anchorPlacement||i.offset||isNaN(t)||(r=t),n+r};t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),n+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:n,left:t}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e=e||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(e,(function(e){return{node:e}}))};t.default=n}])}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".d1798165.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="organsystem:";n.l=(r,a,s,i)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[a];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,s,i=r[0],o=r[1],l=r[2],c=0;if(i.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkorgansystem=self.webpackChunkorgansystem||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>ca,hasStandardBrowserEnv:()=>ua,hasStandardBrowserWebWorkerEnv:()=>ha,navigator:()=>da,origin:()=>pa});var t=n(950),r=n(352);function a(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function s(e,t){if(null==e)return{};var n,r,s=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var i=n(555);n(146);const o=["sri"],l=["page"],c=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var p="popstate";function m(){return w((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return y("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:x(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(du){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,i.A)((0,i.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?b(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function x(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function b(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function w(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l="POP",c=null,d=u();function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let e=u(),t=null==e?null:e-d;d=e,c&&c({action:l,location:f.location,delta:t})}function m(e){return N(e)}null==d&&(d=0,o.replaceState((0,i.A)((0,i.A)({},o.state),{},{idx:d}),""));let f={get action(){return l},get location(){return e(a,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(p,h),c=e,()=>{a.removeEventListener(p,h),c=null}},createHref:e=>t(a,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=y(f.location,e,t);n&&n(r,e),d=u()+1;let i=v(r,d),h=f.createHref(r);try{o.pushState(i,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(h)}s&&c&&c({action:l,location:f.location,delta:1})},replace:function(e,t){l="REPLACE";let r=y(f.location,e,t);n&&n(r,e),d=u();let a=v(r,d),i=f.createHref(r);o.replaceState(a,"",i),s&&c&&c({action:l,location:f.location,delta:0})},go:e=>o.go(e)};return f}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),f(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:x(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function j(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,r){let a=U(("string"===typeof t?b(t):t).pathname||"/",n);if(null==a)return null;let s=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=F(a);i=O(s[o],e,r)}return i}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(f(i.relativePath.startsWith(r),'Absolute route path "'.concat(i.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),i.relativePath=i.relativePath.slice(r.length));let o=J([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),A(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:R(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of S(e.path))a(e,t,r);else a(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=S(r.join("/")),o=[];return o.push(...i.map((e=>""===e?s:[s,e].join("/")))),a&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var I=/^:[\w-]+$/,_=3,T=2,C=1,D=10,k=-2,P=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(P)&&(r+=k),t&&(r+=T),n.filter((e=>!P(e))).reduce(((e,t)=>e+(I.test(t)?_:""===t?C:D)),r)}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:J([s,d.pathname]),pathnameBase:H(J([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=J([s,d.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=M(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:i,pattern:e}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function F(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return g(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function V(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function q(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function z(e){let t=q(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function B(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=b(e):(r=(0,i.A)({},e),f(!r.pathname||!r.pathname.includes("?"),V("?","pathname","search",r)),f(!r.pathname||!r.pathname.includes("#"),V("#","pathname","hash",r)),f(!r.search||!r.search.includes("#"),V("#","search","hash",r)));let s,o=""===e||""===r.pathname,l=o?"/":r.pathname;if(null==l)s=n;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:a=""}="string"===typeof e?b(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:G(r),hash:W(a)}}(r,s),d=l&&"/"!==l&&l.endsWith("/"),u=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var J=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var K=["POST","PUT","PATCH","DELETE"],Q=(new Set(K),["GET",...K]);new Set(Q),Symbol("ResetLoaderData");var X=t.createContext(null);X.displayName="DataRouter";var Z=t.createContext(null);Z.displayName="DataRouterState";var $=t.createContext({isTransitioning:!1});$.displayName="ViewTransition";var ee=t.createContext(new Map);ee.displayName="Fetchers";var te=t.createContext(null);te.displayName="Await";var ne=t.createContext(null);ne.displayName="Navigation";var re=t.createContext(null);re.displayName="Location";var ae=t.createContext({outlet:null,matches:[],isDataRoute:!1});ae.displayName="Route";var se=t.createContext(null);se.displayName="RouteError";function ie(){return null!=t.useContext(re)}function oe(){return f(ie(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(re).location}var le="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ce(e){t.useContext(ne).static||t.useLayoutEffect(e)}function de(){let{isDataRoute:e}=t.useContext(ae);return e?function(){let{router:e}=xe("useNavigate"),n=we("useNavigate"),r=t.useRef(!1);ce((()=>{r.current=!0}));let a=t.useCallback((async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(r.current,le),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,(0,i.A)({fromRouteId:n},a)))}),[e,n]);return a}():function(){f(ie(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(X),{basename:n,navigator:r}=t.useContext(ne),{matches:a}=t.useContext(ae),{pathname:s}=oe(),i=JSON.stringify(z(a)),o=t.useRef(!1);ce((()=>{o.current=!0}));let l=t.useCallback((function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(o.current,le),!o.current)return;if("number"===typeof t)return void r.go(t);let l=B(t,JSON.parse(i),s,"path"===a.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:J([n,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)}),[n,r,i,s,e]);return l}()}t.createContext(null);function ue(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(ae),{pathname:a}=oe(),s=JSON.stringify(z(r));return t.useMemo((()=>B(e,JSON.parse(s),a,"path"===n)),[e,s,a,n])}function he(e,n,r,a){f(ie(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=t.useContext(ne),{matches:l}=t.useContext(ae),c=l[l.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";Ee(u,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,v=oe();if(n){var y;let e="string"===typeof n?b(n):n;f("/"===h||(null===(y=e.pathname)||void 0===y?void 0:y.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=v;let x=m.pathname||"/",w=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let N=!o&&r&&r.matches&&r.matches.length>0?r.matches:j(e,{pathname:w});g(p||null!=N,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),g(null==N||void 0!==N[N.length-1].route.element||void 0!==N[N.length-1].route.Component||void 0!==N[N.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=ve(N&&N.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:J([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:J([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,r,a);return n&&E?t.createElement(re.Provider,{value:{location:(0,i.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},E):E}function pe(){let e=Ne(),n=Y(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:i},"ErrorBoundary")," or"," ",t.createElement("code",{style:i},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,o)}var me=t.createElement(pe,null),fe=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(ae.Provider,{value:this.props.routeContext},t.createElement(se.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ge(e){let{routeContext:n,match:r,children:a}=e,s=t.useContext(X);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(ae.Provider,{value:n},a)}function ve(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let a=e,s=null===r||void 0===r?void 0:r.errors;if(null!=s){let e=a.findIndex((e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id])));f(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let i=!1,o=-1;if(r)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){i=!0,a=o>=0?a.slice(0,o+1):[a[0]];break}}}return a.reduceRight(((e,l,c)=>{let d,u=!1,h=null,p=null;r&&(d=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||me,i&&(o<0&&0===c?(Ee("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):o===c&&(u=!0,p=l.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,c+1)),f=()=>{let n;return n=d?h:u?p:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(ge,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(fe,{location:r.location,revalidation:r.revalidation,component:h,error:d,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()}),null)}function ye(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xe(e){let n=t.useContext(X);return f(n,ye(e)),n}function be(e){let n=t.useContext(Z);return f(n,ye(e)),n}function we(e){let n=function(e){let n=t.useContext(ae);return f(n,ye(e)),n}(e),r=n.matches[n.matches.length-1];return f(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Ne(){var e;let n=t.useContext(se),r=be("useRouteError"),a=we("useRouteError");return void 0!==n?n:null===(e=r.errors)||void 0===e?void 0:e[a]}var je={};function Ee(e,t,n){t||je[e]||(je[e]=!0,g(!1,n))}t.memo((function(e){let{routes:t,future:n,state:r}=e;return he(t,void 0,r,n)}));function Ae(e){let{to:n,replace:r,state:a,relative:s}=e;f(ie(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=t.useContext(ne);g(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(ae),{pathname:l}=oe(),c=de(),d=B(n,z(o),l,"path"===s),u=JSON.stringify(d);return t.useEffect((()=>{c(JSON.parse(u),{replace:r,state:a,relative:s})}),[c,u,s,r,a]),null}function Se(e){f(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ie(e){let{basename:n="/",children:r=null,location:a,navigationType:s="POP",navigator:i,static:o=!1}=e;f(!ie(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo((()=>({basename:l,navigator:i,static:o,future:{}})),[l,i,o]);"string"===typeof a&&(a=b(a));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:m="default"}=a,v=t.useMemo((()=>{let e=U(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:p,key:m},navigationType:s}}),[l,d,u,h,p,m,s]);return g(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:t.createElement(ne.Provider,{value:c},t.createElement(re.Provider,{children:r,value:v}))}function _e(e){let{children:t,location:n}=e;return he(Te(t),n)}t.Component;function Te(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,((e,a)=>{if(!t.isValidElement(e))return;let s=[...n,a];if(e.type===t.Fragment)return void r.push.apply(r,Te(e.props.children,s));f(e.type===Se,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),f(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Te(e.props.children,s)),r.push(i)})),r}var Ce="get",De="application/x-www-form-urlencoded";function ke(e){return null!=e&&"string"===typeof e.tagName}var Pe=null;var Re=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oe(e){return null==e||Re.has(e)?e:(g(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(De,'"')),null)}function Le(e,t){let n,r,a,s,i;if(ke(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?U(i,t):null,n=e.getAttribute("method")||Ce,a=Oe(e.getAttribute("enctype"))||De,s=new FormData(e)}else if(function(e){return ke(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ke(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?U(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Ce,a=Oe(e.getAttribute("formenctype"))||Oe(i.getAttribute("enctype"))||De,s=new FormData(i,e),!function(){if(null===Pe)try{new FormData(document.createElement("form"),0),Pe=!1}catch(du){Pe=!0}return Pe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(ke(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ce,r=null,a=De,i=e}var o;return s&&"text/plain"===a&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:i}}function Me(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Fe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Ue(e){return null!=e&&"string"===typeof e.page}function Ve(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function qe(e,t,n,r,a,s){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter(((e,t)=>i(e,t)||o(e,t))):"data"===s?t.filter(((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function ze(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a})).flat(1),[...new Set(r)];var r}function Be(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,a)=>{if(t&&!Ue(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(s)||(n.add(s),e.push({key:s,link:a})),e}),[])}function Je(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var He=new Set([100,101,204,205]);function Ge(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===U(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}t.Component;function We(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let a,s=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Y(n))return t.createElement(Ye,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(Ye,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function Ye(e){var n;let{title:r,renderScripts:a,isOutsideRemixApp:s,children:i}=e,{routeModules:o}=$e();return null!==o.root&&void 0!==n&&n.Layout&&!s?i:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,a?t.createElement(it,null):null)))}function Ke(e,t){return"lazy"===e.mode&&!0===t}function Qe(){let e=t.useContext(X);return Me(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Xe(){let e=t.useContext(Z);return Me(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ze=t.createContext(void 0);function $e(){let e=t.useContext(Ze);return Me(e,"You must render this element inside a <HydratedRouter> element"),e}function et(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function tt(e,t,n){if(n&&!st)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function nt(e){let{page:n}=e,r=s(e,l),{router:a}=Qe(),o=t.useMemo((()=>j(a.routes,n,a.basename)),[a.routes,n,a.basename]);return o?t.createElement(at,(0,i.A)({page:n,matches:o},r)):null}function rt(e){let{manifest:n,routeModules:r}=$e(),[a,s]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,n){let r=await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Fe(r,n);return e.links?e.links():[]}return[]})));return Be(r.flat(1).filter(Ve).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?(0,i.A)((0,i.A)({},e),{},{rel:"prefetch",as:"style"}):(0,i.A)((0,i.A)({},e),{},{rel:"prefetch"}))))}(e,n,r).then((e=>{t||s(e)})),()=>{t=!0}}),[e,n,r]),a}function at(e){let{page:n,matches:r}=e,a=s(e,c),o=oe(),{manifest:l,routeModules:d}=$e(),{basename:u}=Qe(),{loaderData:h,matches:p}=Xe(),m=t.useMemo((()=>qe(n,r,p,l,o,"data")),[n,r,p,l,o]),f=t.useMemo((()=>qe(n,r,p,l,o,"assets")),[n,r,p,l,o]),g=t.useMemo((()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach((n=>{var r;let a=l.routes[n.route.id];a&&a.hasLoader&&(!m.some((e=>e.route.id===n.route.id))&&n.route.id in h&&null!==(r=d[n.route.id])&&void 0!==r&&r.shouldRevalidate||a.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let a=Ge(n,u);return t&&e.size>0&&a.searchParams.set("_routes",r.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[a.pathname+a.search]}),[u,h,o,l,m,r,n,d]),v=t.useMemo((()=>ze(f,l)),[f,l]),y=rt(f);return t.createElement(t.Fragment,null,g.map((e=>t.createElement("link",(0,i.A)({key:e,rel:"prefetch",as:"fetch",href:e},a)))),v.map((e=>t.createElement("link",(0,i.A)({key:e,rel:"modulepreload",href:e},a)))),y.map((e=>{let{key:n,link:r}=e;return t.createElement("link",(0,i.A)({key:n},r))})))}Ze.displayName="FrameworkContext";var st=!1;function it(e){let{manifest:n,serverHandoffString:r,isSpaMode:a,renderMeta:l,routeDiscovery:c,ssr:d}=$e(),{router:u,static:h,staticContext:p}=Qe(),{matches:m}=Xe(),f=Ke(c,d);l&&(l.didRenderScripts=!0);let g=tt(m,null,a);t.useEffect((()=>{0}),[]);let v=t.useMemo((()=>{var a;let l=p?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(g.map(((e,t)=>{let r="route".concat(t),a=n.routes[e.route.id];Me(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,d=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===d.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[d.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(r," = {").concat(d.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=s(e,o),a=new Set(t.state.matches.map((e=>e.route.id))),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach((e=>{let n=j(t.routes,e,t.basename);n&&n.forEach((e=>a.add(e.route.id)))}));let d=[...a].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return(0,i.A)((0,i.A)({},r),{},{routes:d,sri:!!n||void 0})}(n,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",(0,i.A)((0,i.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Je(l),type:void 0})),t.createElement("script",(0,i.A)((0,i.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Je(c),type:"module",async:!0})))}),[]),y=st?[]:(n.entry.imports.concat(ze(g,n,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let b="object"===typeof n.sri?n.sri:{};return st?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,f?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:b[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:b[n.entry.module],suppressHydrationWarning:!0}),y.map((n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:b[n],suppressHydrationWarning:!0}))),v)}function ot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var lt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{lt&&(window.__reactRouterVersion="7.6.0")}catch(du){}function ct(e){let{basename:n,children:r,window:a}=e,s=t.useRef();null==s.current&&(s.current=m({window:a,v5Compat:!0}));let i=s.current,[o,l]=t.useState({action:i.action,location:i.location}),c=t.useCallback((e=>{t.startTransition((()=>l(e)))}),[l]);return t.useLayoutEffect((()=>i.listen(c)),[i,c]),t.createElement(Ie,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:i})}var dt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ut=t.forwardRef((function(e,n){let r,{onClick:a,discover:o="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:p,target:m,to:v,preventScrollReset:y,viewTransition:b}=e,w=s(e,d),{basename:N}=t.useContext(ne),j="string"===typeof v&&dt.test(v),E=!1;if("string"===typeof v&&j&&(r=v,lt))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),n=U(t.pathname,N);t.origin===e.origin&&null!=n?v=n+t.search+t.hash:E=!0}catch(du){g(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let A=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(ie(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=t.useContext(ne),{hash:s,pathname:i,search:o}=ue(e,{relative:n}),l=i;return"/"!==r&&(l="/"===i?r:J([r,i])),a.createHref({pathname:l,search:o,hash:s})}(v,{relative:c}),[S,I,_]=function(e,n){let r=t.useContext(Ze),[a,s]=t.useState(!1),[i,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=n,p=t.useRef(null);t.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(a){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[a]);let m=()=>{s(!0)},f=()=>{s(!1),o(!1)};return r?"intent"!==e?[i,p,{}]:[i,p,{onFocus:et(l,m),onBlur:et(c,f),onMouseEnter:et(d,m),onMouseLeave:et(u,f),onTouchStart:et(h,m)}]:[!1,p,{}]}(l,w),T=function(e){let{target:n,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=de(),c=oe(),d=ue(e,{relative:i});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:x(c)===x(d);l(e,{replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:o})}}),[c,l,d,r,a,n,e,s,i,o])}(v,{replace:h,state:p,target:m,preventScrollReset:y,relative:c,viewTransition:b});let C=t.createElement("a",(0,i.A)((0,i.A)((0,i.A)({},w),_),{},{href:r||A,onClick:E||u?a:function(e){a&&a(e),e.defaultPrevented||T(e)},ref:ot(n,I),target:m,"data-discover":j||"render"!==o?void 0:"true"}));return S&&!j?t.createElement(t.Fragment,null,C,t.createElement(nt,{page:A})):C}));ut.displayName="Link";var ht=t.forwardRef((function(e,n){let{"aria-current":r="page",caseSensitive:a=!1,className:o="",end:l=!1,style:c,to:d,viewTransition:h,children:p}=e,m=s(e,u),g=ue(d,{relative:m.relative}),v=oe(),y=t.useContext(Z),{navigator:x,basename:b}=t.useContext(ne),w=null!=y&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext($);f(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=ft("useViewTransitionState"),s=ue(e,{relative:n.relative});if(!r.isTransitioning)return!1;let i=U(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=U(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=L(s.pathname,o)||null!=L(s.pathname,i)}(g)&&!0===h,N=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,j=v.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(j=j.toLowerCase(),E=E?E.toLowerCase():null,N=N.toLowerCase()),E&&b&&(E=U(E,b)||E);const A="/"!==N&&N.endsWith("/")?N.length-1:N.length;let S,I=j===N||!l&&j.startsWith(N)&&"/"===j.charAt(A),_=null!=E&&(E===N||!l&&E.startsWith(N)&&"/"===E.charAt(N.length)),T={isActive:I,isPending:_,isTransitioning:w},C=I?r:void 0;S="function"===typeof o?o(T):[o,I?"active":null,_?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D="function"===typeof c?c(T):c;return t.createElement(ut,(0,i.A)((0,i.A)({},m),{},{"aria-current":C,className:S,ref:n,style:D,to:d,viewTransition:h}),"function"===typeof p?p(T):p)}));ht.displayName="NavLink";var pt=t.forwardRef(((e,n)=>{let{discover:r="render",fetcherKey:a,navigate:o,reloadDocument:l,replace:c,state:d,method:u=Ce,action:p,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:y}=e,b=s(e,h),w=yt(),N=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(ne),a=t.useContext(ae);f(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),o=(0,i.A)({},ue(e||".",{relative:n})),l=oe();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(o.pathname="/"===o.pathname?r:J([r,o.pathname]));return x(o)}(p,{relative:g}),j="get"===u.toLowerCase()?"get":"post",E="string"===typeof p&&dt.test(p);return t.createElement("form",(0,i.A)((0,i.A)({ref:n,method:j,action:N,onSubmit:l?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;w(t||e.currentTarget,{fetcherKey:a,method:n,navigate:o,replace:c,state:d,relative:g,preventScrollReset:v,viewTransition:y})}},b),{},{"data-discover":E||"render"!==r?void 0:"true"}))}));function mt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ft(e){let n=t.useContext(X);return f(n,mt(e)),n}pt.displayName="Form";var gt=0,vt=()=>"__".concat(String(++gt),"__");function yt(){let{router:e}=ft("useSubmit"),{basename:n}=t.useContext(ne),r=we("useRouteId");return t.useCallback((async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:i,encType:o,formData:l,body:c}=Le(t,n);if(!1===a.navigate){let t=a.fetcherKey||vt();await e.fetch(t,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,n,r])}var xt=n(428),bt=n(220),wt=n(414);const Nt=(0,t.createContext)(),jt=e=>{let{children:n}=e;const[r,a]=(0,t.useState)(null),[s,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const e=xt.j2.onAuthStateChanged((async e=>{try{if(u(null),o(!0),e){console.log("\ud83d\udd10 User authenticated:",e.uid);const n=(0,bt.doc)(xt.db,"users",e.uid),r=await(0,bt.x7)(n);if(r.exists()){const n=r.data();if(console.log("\ud83d\udccb User data loaded:",n.role),a((0,i.A)((0,i.A)({},e),n)),"doctor"===n.role)try{const t=(0,bt.rJ)(xt.db,"hospitals"),n=(0,bt.P)(t,(0,bt._M)("userId","==",e.uid)),r=await(0,bt.GG)(n);if(r.empty)console.log("\u26a0\ufe0f No hospital found for doctor"),c(null);else{const e=r.docs[0].data();c(e.verificationStatus),console.log("\ud83c\udfe5 Hospital status:",e.verificationStatus)}}catch(t){console.warn("\u26a0\ufe0f Error fetching hospital data:",t),c(null)}}else console.warn("\u26a0\ufe0f User document not found in Firestore"),u("User profile not found. Please contact support."),a(null)}else console.log("\ud83d\udeaa User signed out"),a(null),c(null)}catch(d){console.error("\u274c Authentication error:",d),u("Authentication failed: ".concat(d.message)),a(null),c(null)}finally{o(!1)}}));return e}),[]),(0,wt.jsxs)(Nt.Provider,{value:{user:r,loading:s,hospitalStatus:l,error:d},children:[!s&&n,d&&(0,wt.jsx)("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg z-50",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"mr-2",children:"\u26a0\ufe0f"}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("strong",{children:"Authentication Error:"}),(0,wt.jsx)("br",{}),d]})]})})]})},Et=e=>{let{children:n,role:r}=e;const{user:a,loading:s}=(0,t.useContext)(Nt),i=oe();if((0,t.useEffect)((()=>{console.log("PrivateRoute - User:",a),console.log("PrivateRoute - Loading:",s),console.log("PrivateRoute - Required Role:",r),console.log("PrivateRoute - Current Location:",i.pathname)}),[a,s,r,i]),s)return(0,wt.jsx)("div",{children:"Loading..."});if(!a)return console.log("Not authenticated, redirecting to login"),(0,wt.jsx)(Ae,{to:"/login",state:{from:i},replace:!0});if(r&&!["donor","doctor","admin","recipient"].includes(r))return console.error("Invalid role specified: ".concat(r)),(0,wt.jsx)(Ae,{to:"/",replace:!0});if(r&&a.role!==r)switch(console.log("Role mismatch: User role is ".concat(a.role,", required role is ").concat(r)),a.role){case"donor":return(0,wt.jsx)(Ae,{to:"/donor/dashboard",replace:!0});case"doctor":return(0,wt.jsx)(Ae,{to:"/doctor/dashboard",replace:!0});case"admin":return(0,wt.jsx)(Ae,{to:"/admin/dashboard",replace:!0});case"recipient":return(0,wt.jsx)(Ae,{to:"/recipient/dashboard",replace:!0});default:return(0,wt.jsx)(Ae,{to:"/",replace:!0})}return(0,wt.jsx)(wt.Fragment,{children:n})};var At={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},St=t.createContext&&t.createContext(At),It=["attr","size","title"];function _t(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e){return e&&e.map(((e,n)=>t.createElement(e.tag,Dt({key:n},e.attr),Pt(e.child))))}function Rt(e){return n=>t.createElement(Ot,Tt({attr:Dt({},e.attr)},n),Pt(e.child))}function Ot(e){var n=n=>{var r,{attr:a,size:s,title:i}=e,o=_t(e,It),l=s||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Tt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:r,style:Dt(Dt({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&t.createElement("title",null,i),e.children)};return void 0!==St?t.createElement(St.Consumer,null,(e=>n(e))):n(At)}function Lt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(e)}function Mt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}function Ft(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function Ut(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function Vt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function qt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function zt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Bt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function Jt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Ht(e){return Rt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 121.941V128H256V0h6.059a24 24 0 0 1 16.97 7.029l97.941 97.941a24.002 24.002 0 0 1 7.03 16.971zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zm-135.455 16c26.51 0 48 21.49 48 48s-21.49 48-48 48-48-21.49-48-48 21.491-48 48-48zm208 240h-256l.485-48.485L104.545 328c4.686-4.686 11.799-4.201 16.485.485L160.545 368 264.06 264.485c4.686-4.686 12.284-4.686 16.971 0L320.545 304v112z"},child:[]}]})(e)}function Gt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 160v48c0 4.4-3.6 8-8 8h-56v56c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-56h-56c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h56v-56c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v56h56c4.4 0 8 3.6 8 8z"},child:[]}]})(e)}function Wt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(e)}function Yt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function Kt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function Qt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function Xt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Zt(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(e)}function $t(e){return Rt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function en(e){return Rt({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}function tn(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function nn(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},child:[]}]})(e)}const rn=n.p+"static/media/Green Natural Organic Logo.649c2f2ae96df79246c4.png";const an=function(){const{user:e}=(0,t.useContext)(Nt),[n,r]=(0,t.useState)(""),[a,s]=(0,t.useState)(""),[i,o]=(0,t.useState)(!1),l=de();(0,t.useEffect)((()=>{(async()=>{if(e)try{const t=(0,bt.doc)(xt.db,"users",e.uid),n=await(0,bt.x7)(t);if(n.exists()){const e=n.data();r(e.email||"User"),s(e.role||"donor")}else console.warn("No user profile found.")}catch(t){console.error("Error fetching user profile:",t)}})()}),[e]);const c=async()=>{try{await xt.j2.signOut(),o(!1),l("/login")}catch(e){console.error("Error logging out:",e)}},d=()=>{o(!i)},u=()=>(0,wt.jsx)(wt.Fragment,{children:e?(0,wt.jsxs)(wt.Fragment,{children:["donor"===a&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(ut,{to:"/donor/dashboard",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Dashboard"}),(0,wt.jsx)(ut,{to:"/donor/profile",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Profile"}),"              ",(0,wt.jsx)(ut,{to:"/donor/appointments",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Appointments"})]}),"doctor"===a&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(ut,{to:"/doctor/dashboard",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Dashboard"}),(0,wt.jsx)(ut,{to:"/doctor/applications",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Application Status"}),"              ",(0,wt.jsx)(ut,{to:"/doctor/appointments",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Appointments"})]}),"          ","admin"===a&&(0,wt.jsxs)(wt.Fragment,{children:["              ",(0,wt.jsx)(ut,{to:"/admin/dashboard",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Dashboard"}),(0,wt.jsx)(ut,{to:"/admin/donor-management",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Donor Management"}),(0,wt.jsx)(ut,{to:"/admin/recipient-management",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Recipient Management"}),"              ",(0,wt.jsx)(ut,{to:"/admin/doctor-management",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Doctor Management"})]}),"recipient"===a&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(ut,{to:"/recipient/dashboard",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Dashboard"}),(0,wt.jsx)(ut,{to:"/recipient/profile",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Medical Form"}),"              ",(0,wt.jsx)(ut,{to:"/recipient/appointments",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Appointments"}),(0,wt.jsx)(ut,{to:"/recipient/test-results",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Test Results"}),(0,wt.jsx)(ut,{to:"/recipient/waiting-list",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Waiting List"})]}),(0,wt.jsx)("button",{onClick:c,className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors text-light",children:"Logout"}),(0,wt.jsxs)("div",{className:"flex items-center space-x-2 text-[#973131] py-2",children:["doctor"===a?(0,wt.jsx)(nn,{size:24,style:{background:"#973131",color:"white",borderRadius:"50%",padding:"2px"}}):(0,wt.jsx)(en,{size:24}),(0,wt.jsxs)("span",{className:"font-medium",children:[n.split("@")[0]," (",a,")"]})]})]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(ut,{to:"/login",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Login"}),(0,wt.jsx)(ut,{to:"/register",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Register"}),(0,wt.jsx)(ut,{to:"/register-as-hospital",className:"text-[#973131] block py-2 hover:text-opacity-80 transition-colors",onClick:()=>o(!1),children:"Register as a Hospital"})]})});return(0,wt.jsx)("nav",{className:"bg-transparent p-3 px-0 border-b relative",children:(0,wt.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,wt.jsx)(ut,{to:"/",className:"text-white font-bold text-xl",children:(0,wt.jsx)("img",{src:rn,alt:"Logo",width:120})}),(0,wt.jsx)("button",{className:"block md:hidden bg-transparent border-0 text-[#973131] focus:outline-none",onClick:d,"aria-label":"Toggle menu",children:(0,wt.jsx)(Mt,{size:24})}),i&&(0,wt.jsx)("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:d}),(0,wt.jsxs)("div",{className:"\n          md:hidden fixed top-0 right-0 h-full w-64 bg-white shadow-lg\n          transform transition-transform duration-300 ease-in-out z-40\n          ".concat(i?"translate-x-0":"translate-x-full","\n        "),children:[(0,wt.jsx)("button",{className:"absolute top-4 right-4 bg-transparent border-0 text-[#973131] focus:outline-none",onClick:d,"aria-label":"Close menu",children:(0,wt.jsx)($t,{size:24})}),(0,wt.jsx)("div",{className:"mt-16 px-4",children:(0,wt.jsx)(u,{})})]}),"        ",(0,wt.jsx)("div",{className:"hidden md:flex items-center space-x-6",children:(0,wt.jsx)(u,{})})]})})};var sn=n(634);const on=function(){const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),u=de();return(0,wt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:(0,wt.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Login to OrgLink"}),s&&(0,wt.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:s}),(0,wt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(""),l(!0);try{const t=(await(0,sn.x9)(xt.j2,e,r)).user,n=(0,bt.doc)(xt.db,"users",t.uid),a=await(0,bt.x7)(n);if(console.log("User Snapshot Exists:",a.exists()),a.exists()){const e=a.data();console.log("Full User Data:",e);const t=e.role;if(console.log("User Role:",t),!t)return i("User role not found. Please contact support."),void await xt.j2.signOut();switch(t){case"admin":u("/admin/dashboard");break;case"donor":u("/donor/dashboard");break;case"recipient":u("/recipient/dashboard");break;case"doctor":u("/doctor/dashboard");break;default:u("/")}}else console.error("\u274c User document not found in Firestore for UID:",t.uid),await xt.j2.signOut(),i("User profile not found in database. Please contact support or try registering again.")}catch(s){console.error("\u274c Login error:",s),console.error("\u274c Login error details:",{code:s.code,message:s.message,stack:s.stack});let t="Failed to log in";"auth/user-not-found"===s.code?t="No account found with this email address.":"auth/wrong-password"===s.code?t="Incorrect password.":"auth/invalid-email"===s.code?t="Invalid email address.":"auth/too-many-requests"===s.code?t="Too many failed attempts. Please try again later.":"permission-denied"===s.code?t="Access denied. Please check your account permissions.":s.message&&(t="Login failed: ".concat(s.message)),i(t)}finally{l(!1)}},className:"space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,wt.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,autoComplete:"email"})]}),(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)("input",{id:"password",type:c?"text":"password",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10",required:!0,autoComplete:"current-password"}),(0,wt.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!c),children:c?(0,wt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-500 hover:text-gray-700",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):(0,wt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-500 hover:text-gray-700",children:[(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),(0,wt.jsx)("button",{type:"submit",disabled:o,className:"w-full py-2 px-4 rounded-md text-white font-semibold transition-colors ".concat(o?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"),children:o?"Logging in...":"Login"})]}),(0,wt.jsx)("div",{className:"mt-4 text-center",children:(0,wt.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?",(0,wt.jsx)("a",{href:"/register",className:"text-blue-500 hover:underline ml-1",children:"Register here"})]})})]})})};const ln=function(){const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,i]=(0,t.useState)("donor"),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),u=de();return(0,wt.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register"}),o&&(0,wt.jsx)("p",{className:"text-red-500 mb-4",children:o}),(0,wt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await(0,sn.eJ)(xt.j2,e,r);await(0,bt.BN)((0,bt.doc)(xt.db,"users",t.user.uid),{email:e,role:s,createdAt:new Date}),u("/")}catch(o){l("Failed to register: "+o.message)}},className:"space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-1",children:"Email"}),(0,wt.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-1",children:"Password"}),(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)("input",{type:c?"text":"password",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10",required:!0}),(0,wt.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!c),children:c?(0,wt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-500 hover:text-gray-700",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):(0,wt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-500 hover:text-gray-700",children:[(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-1",children:"Role"}),(0,wt.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded",children:[(0,wt.jsx)("option",{value:"donor",children:"Donor"}),(0,wt.jsx)("option",{value:"recipient",children:"recipient"})]})]}),(0,wt.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:"Register"})]})]})};var cn=n(109);const dn="waiting-list",un="match-found";const hn=function(){const{user:e}=(0,t.useContext)(Nt),[n,r]=(0,t.useState)(null),[a,s]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{if(e)try{l(!0);const t=(0,bt.doc)(xt.db,"medicalRecords",e.uid),n=await(0,bt.x7)(t);n.exists()&&r(n.data());const a=(0,bt.rJ)(xt.db,"medicalRecords"),o=(0,bt.P)(a,(0,bt._M)("donorId","==",e.uid)),c=await(0,bt.GG)(o),d=[];c.forEach((e=>{d.push((0,i.A)({id:e.id},e.data()))})),s(d)}catch(t){console.error("Error fetching data:",t)}finally{l(!1)}})()}),[e]);const c=e=>{if(!e)return"N/A";try{return e.toDate?new Date(e.toDate()).toLocaleDateString():e instanceof Date?e.toLocaleDateString():new Date(e).toLocaleDateString()}catch(t){return console.error("Error formatting date:",t),"Invalid Date"}},d=e=>{if(!e)return!1;return Math.floor((new Date-new Date(e.toDate()))/864e5)>=15},u=e=>{switch(e){case"pending":case cn.J2.PENDING:return"Pending Review";case"doctor-approved":case cn.J2.DOCTOR_APPROVED:return"Doctor Approved";case"initial-doctor-approved":case cn.J2.INITIAL_DOCTOR_APPROVED:return"Doctor Initially Approved";case"pending-initial-admin-approval":case cn.J2.PENDING_INITIAL_ADMIN_APPROVAL:return"Pending Initial Admin Approval";case"initially-approved":case cn.J2.INITIALLY_APPROVED:return"Initial Admin Approved";case"medical-evaluation-in-progress":case cn.J2.MEDICAL_EVALUATION_IN_PROGRESS:return"Medical Evaluation In Progress";case"medical-evaluation-completed":case cn.J2.MEDICAL_EVALUATION_COMPLETED:return"Medical Evaluation Completed";case cn.J2.PENDING_FINAL_ADMIN_REVIEW:case"pending-final-admin-review":return"Pending Final Admin Review";case cn.J2.FINAL_ADMIN_APPROVED:case"final-admin-approved":case"Final Admin Approved":return"\ud83c\udf89 Final Admin Approved!";case dn:case"waiting-list":return"\u23f1\ufe0f On Waiting List";case un:case"match-found":return"\u2728 Match Found!";case cn.J2.FINAL_ADMIN_REJECTED:case"final-admin-rejected":case"Final Admin Rejected":return"\u274c Final Admin Rejected";case"admin-approved":case cn.J2.ADMIN_APPROVED:return"Admin Approved";case"admin-rejected":case cn.J2.ADMIN_REJECTED:return"Admin Rejected";case"initial-admin-rejected":case cn.J2.INITIAL_ADMIN_REJECTED:return"Rejected Admin Initial";case"initial-doctor-rejected":case cn.J2.INITIAL_DOCTOR_REJECTED:return"Doctor Rejected";default:return e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"}},h=e=>{switch(e){case"pending":case cn.J2.PENDING:return"bg-yellow-100 text-yellow-800";case"doctor-approved":case cn.J2.DOCTOR_APPROVED:return"bg-blue-100 text-blue-800";case"initial-doctor-approved":case cn.J2.INITIAL_DOCTOR_APPROVED:return"bg-blue-50 text-blue-800";case"pending-initial-admin-approval":case cn.J2.PENDING_INITIAL_ADMIN_APPROVAL:return"bg-orange-100 text-orange-800";case"initially-approved":case cn.J2.INITIALLY_APPROVED:return"bg-green-100 text-green-800";case"medical-evaluation-in-progress":case cn.J2.MEDICAL_EVALUATION_IN_PROGRESS:case"medical-evaluation-completed":case cn.J2.MEDICAL_EVALUATION_COMPLETED:return"bg-purple-100 text-purple-800";case cn.J2.PENDING_FINAL_ADMIN_REVIEW:case"pending-final-admin-review":return"bg-orange-100 text-orange-800";case cn.J2.FINAL_ADMIN_APPROVED:case"final-admin-approved":case"Final Admin Approved":return"bg-green-100 text-green-800";case dn:case"waiting-list":return"bg-indigo-100 text-indigo-800";case un:case"match-found":return"bg-pink-100 text-pink-800";case cn.J2.FINAL_ADMIN_REJECTED:case"final-admin-rejected":case"Final Admin Rejected":return"bg-red-100 text-red-800";case"admin-approved":case cn.J2.ADMIN_APPROVED:return"bg-green-100 text-green-800";case"admin-rejected":case cn.J2.ADMIN_REJECTED:return"bg-red-100 text-red-800";case"initial-admin-rejected":case cn.J2.INITIAL_ADMIN_REJECTED:return"bg-red-200 text-red-800";case"initial-doctor-rejected":case cn.J2.INITIAL_DOCTOR_REJECTED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=e=>{switch(e){case cn.J2.PENDING:case"pending":return"0%";case cn.J2.INITIAL_DOCTOR_APPROVED:case"initial-doctor-approved":return"25%";case cn.J2.INITIALLY_APPROVED:case"initially-approved":return"40%";case cn.J2.MEDICAL_EVALUATION_IN_PROGRESS:case"medical-evaluation-in-progress":return"65%";case cn.J2.MEDICAL_EVALUATION_COMPLETED:case"medical-evaluation-completed":return"75%";case cn.J2.PENDING_FINAL_ADMIN_REVIEW:case"pending-final-admin-review":return"85%";case cn.J2.DOCTOR_APPROVED:case"doctor-approved":return"80%";case cn.J2.ADMIN_APPROVED:case"admin-approved":case cn.J2.FINAL_ADMIN_APPROVED:case"final-admin-approved":case"Final Admin Approved":case"approved":return"70%";case dn:case"waiting-list":return"85%";case un:case"match-found":return"100%";case cn.J2.ADMIN_REJECTED:case cn.J2.INITIAL_ADMIN_REJECTED:case cn.J2.FINAL_ADMIN_REJECTED:default:return"0%"}};return o?(0,wt.jsx)("p",{className:"text-center p-4",children:"Loading your information..."}):e?(0,wt.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Donor Dashboard"}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Actions"}),(0,wt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:(0,wt.jsxs)(ut,{to:"/donor/appointments",className:"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,wt.jsx)("div",{className:"rounded-full bg-blue-100 p-3 mr-4",children:(0,wt.jsx)("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"font-medium",children:"My Appointments"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600",children:"View your scheduled appointments"})]})]})})]}),n?(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Application Status"}),"          ",(0,wt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,wt.jsx)("span",{className:"font-medium text-gray-700 mr-2",children:"Status:"}),(0,wt.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(h(n.requestStatus||n.status)),children:u(n.requestStatus||n.status)})]}),(n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status)&&(0,wt.jsx)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg mb-4",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"\ud83c\udf89 Congratulations! You are eligible for appointments"}),(0,wt.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Administration initially approved your request. You can now schedule appointments with doctors."})]})]})}),(n.requestStatus===cn.J2.INITIAL_ADMIN_REJECTED||"initial-admin-rejected"===n.status)&&(0,wt.jsx)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg mb-4",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"text-sm font-medium text-red-800",children:"Application Initially Rejected"}),(0,wt.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"You are not eligible and rejected by administration initially. Please contact support for more information."})]})]})}),"          ",(n.requestStatus===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL||"pending-initial-admin-approval"===n.status)&&(0,wt.jsx)("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg mb-4",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("svg",{className:"w-5 h-5 text-orange-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"text-sm font-medium text-orange-800",children:"Pending Initial Admin Approval"}),(0,wt.jsx)("p",{className:"text-sm text-orange-700 mt-1",children:"Your application is currently being reviewed by administration for initial approval."})]})]})}),"          ",(n.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===n.status)&&(0,wt.jsx)("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg mb-4",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("svg",{className:"w-5 h-5 text-purple-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"text-sm font-medium text-purple-800",children:"\u2695\ufe0f Medical Evaluation In Progress"}),(0,wt.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:n.evaluationMessage||"Your appointment is scheduled - View your appointments"}),(0,wt.jsxs)(ut,{to:"/donor/appointments",className:"inline-flex items-center text-sm text-purple-600 hover:text-purple-800 mt-2 font-medium",children:["View Your Appointments",(0,wt.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})}),(n.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===n.status)&&(0,wt.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("svg",{className:"w-5 h-5 text-blue-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"\u2695\ufe0f Medical Evaluation Completed Successfully"}),(0,wt.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:n.evaluationMessage||"Your appointment or evaluation process completed"})]})]})}),(0,wt.jsxs)("div",{className:"mb-8",children:[(0,wt.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Approval Progress"}),(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:p(n.requestStatus||n.status)})]}),(0,wt.jsxs)("div",{className:"relative pt-4 pb-6 mt-4",children:[(0,wt.jsx)("div",{className:"w-full bg-gray-200 h-2 rounded-full absolute top-4"}),"              ",(0,wt.jsx)("div",{className:"bg-blue-600 h-2 rounded-full absolute top-4 transition-all duration-700 ease-in-out",style:{width:p(n.requestStatus||n.status)}}),(0,wt.jsxs)("div",{className:"flex justify-between relative",children:[(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                    w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                    ".concat("pending"===n.requestStatus?"bg-blue-500 ring-4 ring-blue-100":n.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED||n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status||n.requestStatus===cn.J2.DOCTOR_APPROVED||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED||"approved"===n.requestStatus||"approved"===n.status?"bg-green-500":n.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"bg-red-500":"bg-gray-400","\n                  "),children:n.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED||n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status||n.requestStatus===cn.J2.DOCTOR_APPROVED||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED||"approved"===n.requestStatus||"approved"===n.status?"\u2713":n.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"\u2717":"1"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Initial Review"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Medical information"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                    w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                    ".concat(n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status?"bg-blue-500 ring-4 ring-blue-100":n.requestStatus===cn.J2.DOCTOR_APPROVED||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED?"bg-green-500":"bg-gray-400","\n                  "),children:n.requestStatus===cn.J2.DOCTOR_APPROVED||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED?"\u2713":n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status?"\u25d0":"1.5"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Initial Admin Approval"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Ready for appointments"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                    w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                    ".concat(n.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===n.status?"bg-purple-500 ring-4 ring-purple-100":n.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===n.status?"bg-blue-500 ring-4 ring-blue-100":n.requestStatus===cn.J2.DOCTOR_APPROVED||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED?"bg-green-500":n.requestStatus===cn.J2.DOCTOR_REJECTED?"bg-red-500":"bg-gray-400","\n                  "),children:n.requestStatus===cn.J2.DOCTOR_APPROVED||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED?"\u2713":n.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===n.status?"\u2695":n.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===n.status?"\u2713":n.requestStatus===cn.J2.DOCTOR_REJECTED?"\u2717":"2"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Medical Evaluation"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:n.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===n.status?"In Progress":n.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===n.status?"Completed":"Appointment & assessment"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                    w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                    ".concat(n.requestStatus===cn.J2.DOCTOR_APPROVED?"bg-blue-500 ring-4 ring-blue-100":n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED?"bg-green-500":n.requestStatus===cn.J2.ADMIN_REJECTED?"bg-red-500":"bg-gray-400","\n                  "),children:n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED?"\u2713":n.requestStatus===cn.J2.ADMIN_REJECTED?"\u2717":"3"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Final Approval"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Admin review"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                    w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                    ".concat(n.requestStatus===dn||"waiting-list"===n.status?"bg-indigo-500 ring-4 ring-indigo-100":n.requestStatus===un||"match-found"===n.status?"bg-green-500":"bg-gray-400","\n                  "),children:n.requestStatus===un||"match-found"===n.status?"\u2713":n.requestStatus===dn||"waiting-list"===n.status?"\u23f1\ufe0f":"4"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Waiting List"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Awaiting match"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                    w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                    ".concat(n.requestStatus===un||"match-found"===n.status?"bg-pink-500 ring-4 ring-pink-100":"bg-gray-400","\n                  "),children:n.requestStatus===un||"match-found"===n.status?"\u2728":"5"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Match Found"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Ready for transplant"})]})]})]}),(0,wt.jsxs)("div",{className:"mt-6 text-center",children:["              ",(0,wt.jsxs)("span",{className:"px-3 py-1 text-sm font-medium rounded-full\n                ".concat("pending"===n.requestStatus?"bg-yellow-100 text-yellow-800":n.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"bg-blue-100 text-blue-800":n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status?"bg-green-100 text-green-800":n.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===n.status?"bg-purple-100 text-purple-800":n.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===n.status||n.requestStatus===cn.J2.DOCTOR_APPROVED?"bg-blue-100 text-blue-800":n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED||"approved"===n.requestStatus||"approved"===n.status?"bg-green-100 text-green-800":n.requestStatus===dn||"waiting-list"===n.status?"bg-indigo-100 text-indigo-800":n.requestStatus===un||"match-found"===n.status?"bg-pink-100 text-pink-800":"bg-red-100 text-red-800","\n              "),children:[(0,wt.jsx)("span",{className:"mr-1",children:"\u25cf"}),"                ","pending"===n.requestStatus?"Awaiting Initial Review":n.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"Awaiting Initial Admin Approval":n.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===n.status?"Ready for Medical Evaluation":n.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===n.status?"Evaluation Process":n.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===n.status?"Complete Evaluation":n.requestStatus===cn.J2.DOCTOR_APPROVED?"Awaiting Final Admin Approval":n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED||"approved"===n.requestStatus||"approved"===n.status?"\ud83c\udf89 Final Approval Completed - Fully Approved!":n.requestStatus===dn||"waiting-list"===n.status?"\u23f1\ufe0f On Waiting List - Awaiting Match":n.requestStatus===un||"match-found"===n.status?"\u2728 Match Found - Ready for Transplant!":"rejected"===n.requestStatus||"rejected"===n.status?"\u274c Application Rejected":"Application Status"]})]}),(0,wt.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:n.submittedAt&&(0,wt.jsxs)("span",{children:["Submitted on:"," ",c(n.submittedAt)]})})]}),("pending"===n.requestStatus||"pending"===n.status||n.requestStatus===cn.J2.PENDING||n.status===cn.J2.PENDING)&&(0,wt.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-yellow-800 font-medium",children:"Your donation application is under review."}),(0,wt.jsx)("p",{className:"text-yellow-700 mt-1",children:"The medical team is reviewing your information. You will be notified when there's an update."})]}),(n.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED||n.status===cn.J2.INITIAL_DOCTOR_APPROVED||"initial-doctor-approved"===n.requestStatus)&&(0,wt.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-blue-800 font-medium",children:"Your request for donation is Initially Approved from Medical Team."}),n.doctorComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800",children:"Medical Team Note:"}),(0,wt.jsx)("p",{className:"italic",children:n.doctorComment})]}),"              ",(0,wt.jsx)("p",{className:"mt-2 text-blue-700",children:"A medical professional will schedule your evaluation appointment. Please check your appointments regularly."}),(0,wt.jsx)("div",{className:"mt-4",children:(0,wt.jsx)(ut,{to:"/donor/appointments",className:"inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition",children:"View My Appointments"})})]}),"          ",("doctor-approved"===n.requestStatus||n.requestStatus===cn.J2.DOCTOR_APPROVED)&&(0,wt.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-blue-800 font-medium",children:"Your medical evaluation was successful! You are approved by the medical team."}),"              ",n.finalDoctorComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800",children:"Medical Evaluation Results:"}),(0,wt.jsx)("p",{className:"italic",children:n.finalDoctorComment})]}),(0,wt.jsxs)("div",{className:"mt-2",children:[(0,wt.jsxs)("p",{className:"text-blue-700",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital:"})," ",n.assignedHospitalName||n.hospital]}),(0,wt.jsx)("p",{className:"text-blue-700 mt-1",children:"The hospital will contact you shortly to schedule your donation."})]})]}),"          ",("admin-approved"===n.requestStatus||"approved"===n.status||n.requestStatus===cn.J2.ADMIN_APPROVED||n.status===cn.J2.FINAL_APPROVED||"approved"===n.requestStatus)&&(0,wt.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-green-800 font-medium",children:"\ud83c\udf89 Congratulations! Your donation application has been fully approved!"}),n.finalAdminNotes&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800",children:"Final Approval Note:"}),(0,wt.jsx)("p",{className:"italic",children:n.finalAdminNotes})]}),n.adminComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800",children:"Approval Note:"}),(0,wt.jsx)("p",{className:"italic",children:n.adminComment})]}),"              ",(0,wt.jsxs)("div",{className:"mt-2",children:[(0,wt.jsxs)("p",{className:"text-green-700",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital:"})," ",n.assignedHospitalName||n.hospital]}),(0,wt.jsx)("p",{className:"text-green-700 mt-1",children:"The hospital will contact you shortly to schedule your donation."})]})]}),(n.requestStatus===dn||"waiting-list"===n.status)&&(0,wt.jsxs)("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-indigo-800 font-medium",children:"\u23f1\ufe0f You have been added to the organ donation waiting list!"}),n.waitingListNotes&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-indigo-200",children:[(0,wt.jsx)("p",{className:"font-medium text-indigo-800",children:"Waiting List Information:"}),(0,wt.jsx)("p",{className:"italic",children:n.waitingListNotes})]}),(0,wt.jsxs)("div",{className:"mt-2",children:[(0,wt.jsxs)("p",{className:"text-indigo-700",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Your blood type:"})," ",n.bloodType||"Not specified"]}),(0,wt.jsxs)("p",{className:"text-indigo-700 mt-1",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Organ type:"})," ",n.organType||n.organToDonate||"Not specified"]}),(0,wt.jsx)("p",{className:"text-indigo-700 mt-1",children:"We are actively looking for a suitable match for your organ donation. You will be notified when a match is found."})]})]}),(n.requestStatus===un||"match-found"===n.status)&&(0,wt.jsxs)("div",{className:"bg-pink-50 border-l-4 border-pink-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-pink-800 font-medium",children:"\u2728 Great news! A match has been found for your organ donation!"}),n.matchFoundNotes&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-pink-200",children:[(0,wt.jsx)("p",{className:"font-medium text-pink-800",children:"Match Information:"}),(0,wt.jsx)("p",{className:"italic",children:n.matchFoundNotes})]}),(0,wt.jsxs)("div",{className:"mt-2",children:[(0,wt.jsxs)("p",{className:"text-pink-700",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Match compatibility:"})," ",n.matchCompatibility||"High"]}),(0,wt.jsxs)("p",{className:"text-pink-700 mt-1",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital:"})," ",n.assignedHospitalName||n.hospital||"To be determined"]}),(0,wt.jsx)("p",{className:"text-pink-700 mt-1",children:"The hospital will contact you shortly to schedule the transplant procedure. Thank you for your life-changing gift!"})]}),(0,wt.jsx)("div",{className:"mt-4",children:(0,wt.jsx)(ut,{to:"/donor/appointments",className:"inline-block bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600 transition",children:"View My Appointments"})})]}),(n.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED||n.status===cn.J2.INITIAL_DOCTOR_REJECTED||"initial-doctor-rejected"===n.requestStatus)&&(0,wt.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:[(0,wt.jsx)("p",{className:"text-red-800 font-medium",children:"You are not eligible for donation."}),(n.doctorComment||n.rejectionReason)&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800",children:"Reason for Rejection:"}),(0,wt.jsx)("p",{className:"italic",children:n.doctorComment||n.rejectionReason||"No reason provided."})]}),(0,wt.jsx)("p",{className:"text-red-700 mt-2",children:"Based on the medical information provided, you do not meet the donation criteria."})]}),("rejected"===n.requestStatus||"rejected"===n.status||n.requestStatus===cn.J2.DOCTOR_REJECTED||n.status===cn.J2.DOCTOR_REJECTED||n.requestStatus===cn.J2.ADMIN_REJECTED||n.status===cn.J2.ADMIN_REJECTED||n.requestStatus===cn.J2.FINAL_REJECTED||n.status===cn.J2.FINAL_REJECTED)&&(0,wt.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:["              ",(0,wt.jsx)("p",{className:"text-red-800 font-medium",children:"rejected"===n.finalAdminDecision?"\u274c Final decision: Your donation application has been permanently rejected by administration after medical evaluation.":n.finalDoctorRejected?"Based on your medical evaluation, we're unable to proceed with your donation.":n.requestStatus===cn.J2.ADMIN_REJECTED||"rejected"===n.requestStatus?"Your donation application has been declined by administration.":"We're sorry, your donation application has been declined."}),n.finalAdminNotes&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800",children:"Final Admin Decision:"}),(0,wt.jsx)("p",{className:"italic",children:n.finalAdminNotes||"No details provided."})]}),n.finalDoctorComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800",children:"Medical Evaluation Results:"}),(0,wt.jsx)("p",{className:"italic",children:n.finalDoctorComment||"No details provided."})]}),(n.doctorComment||n.rejectionReason)&&!n.finalDoctorComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800",children:"Reason for Rejection:"}),(0,wt.jsx)("p",{className:"italic",children:n.doctorComment||n.rejectionReason||"No reason provided."})]}),n.adminComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800",children:"Admin Note:"}),(0,wt.jsx)("p",{className:"italic",children:n.adminComment||"No details provided."})]}),d(n.submittedAt)?(0,wt.jsxs)("div",{className:"mt-3",children:[(0,wt.jsx)("p",{className:"text-red-700 mb-2",children:"You can now submit a new application."}),(0,wt.jsx)(ut,{to:"/donor/medical-form",className:"inline-block bg-blue-500 text-white px-4 py-2 rounded",children:"Submit New Application"})]}):(0,wt.jsx)("p",{className:"text-red-700 mt-2",children:"You can reapply 15 days after the rejection date."})]}),(0,wt.jsxs)("details",{className:"mt-4",children:[(0,wt.jsx)("summary",{className:"cursor-pointer text-blue-600 font-medium",children:"View Submitted Medical Information"}),(0,wt.jsx)("div",{className:"mt-3 border rounded-md p-3",children:(0,wt.jsx)("table",{className:"w-full border-collapse border border-gray-300",children:(0,wt.jsx)("tbody",{children:Object.entries(n).map((e=>{let[t,n]=e;if(["status","donorId","submittedAt","requestStatus","doctorApproved","adminApproved","doctorComment","adminComment","assignedHospitalName","hospitalId"].includes(t))return null;let r=n;if("object"===typeof n&&null!==n)if(n.toDate)r=c(n);else{const e=Object.entries(n).map((e=>{let[t,n]=e;return"".concat(t,": ").concat(n)})).join(", ");r=e||"N/A"}return(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium bg-gray-50",children:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1")}),(0,wt.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:r||"N/A"})]},t)}))})})})]})]}):(0,wt.jsxs)("div",{className:"bg-yellow-100 p-4 rounded mb-6",children:[(0,wt.jsx)("p",{children:"You haven't submitted your medical information yet."}),(0,wt.jsx)(ut,{to:"/donor/medical-form",className:"mt-2 inline-block bg-blue-500 text-white px-4 py-2 rounded",children:"Submit Medical Information"})]}),a.length>1&&(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Previous Applications"}),(0,wt.jsx)("div",{className:"space-y-4",children:a.filter((e=>e.id!==(null===n||void 0===n?void 0:n.id))).sort(((e,t)=>{var n,r,a,s;return((null===(n=t.submittedAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||0)-((null===(a=e.submittedAt)||void 0===a||null===(s=a.toDate)||void 0===s?void 0:s.call(a))||0)})).map((e=>(0,wt.jsxs)("div",{className:"border rounded-md p-4",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,wt.jsxs)("span",{className:"font-medium",children:["Submitted: ",c(e.submittedAt)]}),(0,wt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(h(e.requestStatus||e.status)),children:u(e.requestStatus||e.status)})]}),(e.doctorComment||e.adminComment||e.rejectionReason)&&(0,wt.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md text-sm",children:[(0,wt.jsx)("p",{className:"font-medium",children:"Feedback:"}),(0,wt.jsx)("p",{className:"italic",children:e.doctorComment||e.adminComment||e.rejectionReason})]}),("rejected"===e.requestStatus||"rejected"===e.status)&&d(e.submittedAt)&&(0,wt.jsx)("div",{className:"mt-2",children:(0,wt.jsx)(ut,{to:"/donor/medical-form",className:"inline-block bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"Reapply Now"})})]},e.id)))})]})]}):(0,wt.jsx)("p",{className:"text-center p-4",children:"Please log in to view your dashboard."})};function pn(){const[e,n]=(0,t.useState)(null),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)("personal"),[g,v]=(0,t.useState)([]),[y,x]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(!1),[E,A]=(0,t.useState)(!1),[S,I]=(0,t.useState)(!1),[_,T]=(0,t.useState)(""),[C,D]=(0,t.useState)({fullName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",dateOfBirth:"",age:"",gender:"",occupation:"",nationalId:"",weight:"",height:"",bloodType:"",lastDonation:"",medicalConditions:"",allergies:"",medications:"",surgeries:"",chronicDiseases:"",familyMedicalHistory:"",smoker:"no",alcoholConsumption:"none",donationHistory:[],previousDonations:"",preferredDonationCenter:"",preferredDonationTime:"",preferredContactMethod:"phone",willingToTravelDistance:"",organDonorConsent:"no",donationFrequency:"",donationMotivation:"",recentIllness:"no",recentVaccination:"no",recentTattoo:"no",recentPiercing:"no",recentPregnancy:"no",recentSurgery:"no",recentBloodTransfusion:"no",travelHistory:"",emergencyContact:{name:"",phone:"",relationship:"",address:""},additionalNotes:"",howDidYouHear:"",volunteerInterest:"no"});(0,t.useEffect)((()=>{(async()=>{if(C.state){w(!0),A(!1);try{const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("province","==",C.state),(0,bt._M)("verificationStatus","==","Approved")),n=await(0,bt.GG)(t),r=new Set;n.forEach((e=>{r.add(e.data().city)}));const a=[...r];v(a),x([]),l&&D((e=>(0,i.A)((0,i.A)({},e),{},{city:"",preferredDonationCenter:""}))),w(!1),0===a.length&&A(!0)}catch(e){console.error("Error fetching cities:",e),w(!1),A(!0)}}})()}),[C.state,l]),(0,t.useEffect)((()=>{(async()=>{if(C.city){j(!0),I(!1);try{const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("city","==",C.city)),n=(await(0,bt.GG)(t)).docs.map((e=>({name:e.data().hospitalName,userId:e.data().userId})));x(n),l&&D((e=>(0,i.A)((0,i.A)({},e),{},{preferredDonationCenter:""}))),j(!1),0===n.length&&I(!0)}catch(e){console.error("Error fetching hospitals:",e),j(!1),I(!0)}}})()}),[C.city,l]),(0,t.useEffect)((()=>{(async()=>{if(!C.preferredDonationCenter)return void T("");const e=y.find((e=>e.name===C.preferredDonationCenter));T(e?e.userId:"")})()}),[C.preferredDonationCenter,y]),(0,t.useEffect)((()=>{const e=(0,sn.hg)(xt.j2,(e=>{e?(n(e),k(e.uid)):(n(null),a(!1),window.location.href="/login")}));return()=>e()}),[]);const k=async t=>{try{const n=(0,bt.rJ)(xt.db,"donors"),r=(0,bt.P)(n,(0,bt._M)("userId","==",t)),s=await(0,bt.GG)(r);if(s.empty)u(!1),c(!0),e&&e.email&&D((t=>(0,i.A)((0,i.A)({},t),{},{email:e.email})));else{const e=s.docs[0].data(),t={fullName:e.fullName||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",dateOfBirth:e.dateOfBirth||"",age:e.age||"",gender:e.gender||"",occupation:e.occupation||"",nationalId:e.nationalId||"",weight:e.weight||"",height:e.height||"",bloodType:e.bloodType||"",lastDonation:e.lastDonation||"",medicalConditions:e.medicalConditions||"",allergies:e.allergies||"",medications:e.medications||"",surgeries:e.surgeries||"",chronicDiseases:e.chronicDiseases||"",familyMedicalHistory:e.familyMedicalHistory||"",smoker:e.smoker||"no",alcoholConsumption:e.alcoholConsumption||"none",donationHistory:e.donationHistory||[],previousDonations:e.previousDonations||"",preferredDonationCenter:e.preferredDonationCenter||"",preferredDonationTime:e.preferredDonationTime||"",preferredContactMethod:e.preferredContactMethod||"phone",willingToTravelDistance:e.willingToTravelDistance||"",organDonorConsent:e.organDonorConsent||"no",donationFrequency:e.donationFrequency||"",donationMotivation:e.donationMotivation||"",recentIllness:e.recentIllness||"no",recentVaccination:e.recentVaccination||"no",recentTattoo:e.recentTattoo||"no",recentPiercing:e.recentPiercing||"no",recentPregnancy:e.recentPregnancy||"no",recentSurgery:e.recentSurgery||"no",recentBloodTransfusion:e.recentBloodTransfusion||"no",travelHistory:e.travelHistory||"",emergencyContact:e.emergencyContact||{name:"",phone:"",relationship:"",address:""},additionalNotes:e.additionalNotes||"",howDidYouHear:e.howDidYouHear||"",volunteerInterest:e.volunteerInterest||"no"};D(t),p(t),u(!0),c(!1)}a(!1)}catch(n){console.error("Error fetching donor profile:",n),alert("Failed to load your profile. Please try again."),a(!1)}},P=e=>{const{name:t,value:n}=e.target;D((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))},R=e=>{const{name:t,value:n}=e.target;D((e=>(0,i.A)((0,i.A)({},e),{},{emergencyContact:(0,i.A)((0,i.A)({},e.emergencyContact),{},{[t]:n})})))},O=(e,t)=>{D((n=>(0,i.A)((0,i.A)({},n),{},{[e]:t})))},L=()=>{l&&D((0,i.A)({},h)),c(!l)};return r?(0,wt.jsx)("div",{className:"loading-container",children:(0,wt.jsx)("div",{className:"spinner"})}):(0,wt.jsxs)("div",{className:"container",children:[(0,wt.jsxs)("div",{className:"card",children:[(0,wt.jsxs)("div",{className:"card-header",children:[(0,wt.jsxs)("div",{className:"header-content",children:[(0,wt.jsx)("h2",{className:"card-title",children:"Donor Profile"}),d&&!l&&(0,wt.jsx)("button",{type:"button",className:"btn btn-edit",onClick:L,children:"Edit Profile"}),d&&l&&(0,wt.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:L,children:"Cancel"})]}),(0,wt.jsx)("p",{className:"card-description",children:d?l?"Edit your donor information below":"View your donor information and donation history":"Please complete your donor profile information"})]}),(0,wt.jsxs)("div",{className:"tab-navigation",children:[(0,wt.jsx)("button",{className:"tab-button ".concat("personal"===m?"active":""),onClick:()=>f("personal"),children:"Personal Info"}),(0,wt.jsx)("button",{className:"tab-button ".concat("medical"===m?"active":""),onClick:()=>f("medical"),children:"Medical Info"}),(0,wt.jsx)("button",{className:"tab-button ".concat("donation"===m?"active":""),onClick:()=>f("donation"),children:"Donation Preferences"}),(0,wt.jsx)("button",{className:"tab-button ".concat("eligibility"===m?"active":""),onClick:()=>f("eligibility"),children:"Eligibility"}),(0,wt.jsx)("button",{className:"tab-button ".concat("emergency"===m?"active":""),onClick:()=>f("emergency"),children:"Emergency Contact"})]}),(0,wt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0);try{if(!e)throw new Error("User not authenticated");const t=(0,bt.rJ)(xt.db,"donors"),n=(0,bt.P)(t,(0,bt._M)("userId","==",e.uid)),r=await(0,bt.GG)(n),a=(0,i.A)((0,i.A)({},C),{},{hospitalId:_||"",updatedAt:new Date});if(r.empty){const t=(0,bt.doc)((0,bt.rJ)(xt.db,"donors"));await(0,bt.BN)(t,(0,i.A)((0,i.A)({},a),{},{userId:e.uid,createdAt:new Date})),console.log("New donor profile created successfully!"),alert("Your profile has been created successfully!"),u(!0),c(!1)}else{const e=r.docs[0].ref;await(0,bt.updateDoc)(e,a),console.log("Donor profile updated successfully!"),alert("Your profile has been updated successfully!"),c(!1)}p((0,i.A)((0,i.A)({},C),{},{hospitalId:_}))}catch(n){console.error("Error saving donor profile:",n),alert("Failed to save your profile. Please try again.")}finally{o(!1)}},children:[(0,wt.jsxs)("div",{className:"card-content",children:["personal"===m&&(0,wt.jsxs)("div",{className:"section",children:[(0,wt.jsx)("h3",{className:"section-title",children:"Personal Information"}),(0,wt.jsxs)("div",{className:"form-grid",children:[(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"fullName",children:"Full Name*"}),(0,wt.jsx)("input",{id:"fullName",name:"fullName",value:C.fullName,onChange:P,placeholder:"John Doe",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"email",children:"Email*"}),(0,wt.jsx)("input",{id:"email",name:"email",type:"email",value:C.email,onChange:P,placeholder:"john.doe@example.com",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"phone",children:"Phone Number*"}),(0,wt.jsx)("input",{id:"phone",name:"phone",value:C.phone,onChange:P,placeholder:"+1 (555) 123-4567",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"dateOfBirth",children:"Date of Birth*"}),(0,wt.jsx)("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:C.dateOfBirth,onChange:P,required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"age",children:"Age*"}),(0,wt.jsx)("input",{id:"age",name:"age",type:"number",value:C.age,onChange:P,placeholder:"25",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"gender",children:"Gender*"}),(0,wt.jsxs)("select",{id:"gender",name:"gender",value:C.gender,onChange:P,className:"form-control",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select gender"}),(0,wt.jsx)("option",{value:"male",children:"Male"}),(0,wt.jsx)("option",{value:"female",children:"Female"}),(0,wt.jsx)("option",{value:"other",children:"Other"}),(0,wt.jsx)("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"occupation",children:"Occupation"}),(0,wt.jsx)("input",{id:"occupation",name:"occupation",value:C.occupation,onChange:P,placeholder:"Software Engineer",className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"nationalId",children:"National ID / Passport"}),(0,wt.jsx)("input",{id:"nationalId",name:"nationalId",value:C.nationalId,onChange:P,placeholder:"ID Number",className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"address",children:"Address*"}),(0,wt.jsx)("input",{id:"address",name:"address",value:C.address,onChange:P,placeholder:"123 Main St",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"state",children:"Province/State*"}),(0,wt.jsxs)("select",{id:"state",name:"state",value:C.state,onChange:P,className:"form-control",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select Province"}),(0,wt.jsx)("option",{value:"Punjab",children:"Punjab"}),(0,wt.jsx)("option",{value:"Sindh",children:"Sindh"}),(0,wt.jsx)("option",{value:"Balochistan",children:"Balochistan"}),(0,wt.jsx)("option",{value:"Khyber Pakhtunkhwa",children:"Khyber Pakhtunkhwa"}),(0,wt.jsx)("option",{value:"Gilgit Baltistan",children:"Gilgit Baltistan"})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"city",children:"City*"}),(0,wt.jsxs)("select",{id:"city",name:"city",value:C.city,onChange:P,className:"form-control",required:!0,disabled:d&&!l||!C.state||b,children:[(0,wt.jsx)("option",{value:"",children:"Select City"}),b?(0,wt.jsx)("option",{value:"",disabled:!0,children:"Loading cities..."}):E?(0,wt.jsx)("option",{value:"",disabled:!0,children:"No cities found"}):g.map((e=>(0,wt.jsx)("option",{value:e,children:e},e)))]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"zipCode",children:"Zip/Postal Code*"}),(0,wt.jsx)("input",{id:"zipCode",name:"zipCode",value:C.zipCode,onChange:P,placeholder:"10001",required:!0,className:"form-control",disabled:d&&!l})]})]}),(0,wt.jsx)("h3",{className:"section-title mt-4",children:"Physical Attributes"}),(0,wt.jsxs)("div",{className:"form-grid",children:[(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"weight",children:"Weight (kg)*"}),(0,wt.jsx)("input",{id:"weight",name:"weight",type:"number",value:C.weight,onChange:P,placeholder:"70",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"height",children:"Height (cm)*"}),(0,wt.jsx)("input",{id:"height",name:"height",type:"number",value:C.height,onChange:P,placeholder:"175",required:!0,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"bloodType",children:"Blood Type*"}),(0,wt.jsxs)("select",{id:"bloodType",name:"bloodType",value:C.bloodType,onChange:P,className:"form-control",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select blood type"}),(0,wt.jsx)("option",{value:"A+",children:"A+"}),(0,wt.jsx)("option",{value:"A-",children:"A-"}),(0,wt.jsx)("option",{value:"B+",children:"B+"}),(0,wt.jsx)("option",{value:"B-",children:"B-"}),(0,wt.jsx)("option",{value:"AB+",children:"AB+"}),(0,wt.jsx)("option",{value:"AB-",children:"AB-"}),(0,wt.jsx)("option",{value:"O+",children:"O+"}),(0,wt.jsx)("option",{value:"O-",children:"O-"})]})]})]})]}),"medical"===m&&(0,wt.jsxs)("div",{className:"section",children:[(0,wt.jsx)("h3",{className:"section-title",children:"Medical Information"}),(0,wt.jsxs)("div",{className:"form-grid",children:[(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"lastDonation",children:"Last Donation Date"}),(0,wt.jsx)("input",{id:"lastDonation",name:"lastDonation",type:"date",value:C.lastDonation,onChange:P,className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Smoker?"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"smoker",checked:"yes"===C.smoker,onChange:()=>O("smoker","yes"),disabled:d&&!l}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"smoker",checked:"no"===C.smoker,onChange:()=>O("smoker","no"),disabled:d&&!l}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"alcoholConsumption",children:"Alcohol Consumption"}),(0,wt.jsxs)("select",{id:"alcoholConsumption",name:"alcoholConsumption",value:C.alcoholConsumption,onChange:P,className:"form-control",disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"none",children:"None"}),(0,wt.jsx)("option",{value:"occasional",children:"Occasional"}),(0,wt.jsx)("option",{value:"moderate",children:"Moderate"}),(0,wt.jsx)("option",{value:"frequent",children:"Frequent"})]})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"allergies",children:"Allergies*"}),(0,wt.jsx)("textarea",{id:"allergies",name:"allergies",value:C.allergies,onChange:P,placeholder:"List any allergies you have, or type 'None' if not applicable",className:"form-control",rows:"2",required:!0,disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"medications",children:"Current Medications*"}),(0,wt.jsx)("textarea",{id:"medications",name:"medications",value:C.medications,onChange:P,placeholder:"List any medications you are currently taking, or type 'None' if not applicable",className:"form-control",rows:"2",required:!0,disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"medicalConditions",children:"Medical Conditions*"}),(0,wt.jsx)("textarea",{id:"medicalConditions",name:"medicalConditions",value:C.medicalConditions,onChange:P,placeholder:"List any medical conditions that might affect your eligibility to donate, or type 'None' if not applicable",className:"form-control",rows:"3",required:!0,disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"surgeries",children:"Previous Surgeries"}),(0,wt.jsx)("textarea",{id:"surgeries",name:"surgeries",value:C.surgeries,onChange:P,placeholder:"List any surgeries you've had in the past, or type 'None' if not applicable",className:"form-control",rows:"2",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"chronicDiseases",children:"Chronic Diseases"}),(0,wt.jsx)("textarea",{id:"chronicDiseases",name:"chronicDiseases",value:C.chronicDiseases,onChange:P,placeholder:"List any chronic diseases you have, or type 'None' if not applicable",className:"form-control",rows:"2",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"familyMedicalHistory",children:"Family Medical History"}),(0,wt.jsx)("textarea",{id:"familyMedicalHistory",name:"familyMedicalHistory",value:C.familyMedicalHistory,onChange:P,placeholder:"List any relevant family medical history, or type 'None' if not applicable",className:"form-control",rows:"2",disabled:d&&!l})]})]})]}),"donation"===m&&(0,wt.jsxs)("div",{className:"section",children:[(0,wt.jsx)("h3",{className:"section-title",children:"Donation Preferences"}),(0,wt.jsxs)("div",{className:"form-grid",children:[(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"previousDonations",children:"Number of Previous Donations"}),(0,wt.jsx)("input",{id:"previousDonations",name:"previousDonations",type:"number",value:C.previousDonations,onChange:P,placeholder:"0",className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"preferredDonationCenter",children:"Preferred Donation Center"}),(0,wt.jsxs)("select",{id:"preferredDonationCenter",name:"preferredDonationCenter",value:C.preferredDonationCenter,onChange:P,className:"form-control",disabled:d&&!l||!C.city||N,children:[(0,wt.jsx)("option",{value:"",children:"Select Hospital"}),N?(0,wt.jsx)("option",{value:"",disabled:!0,children:"Loading hospitals..."}):S?(0,wt.jsx)("option",{value:"",disabled:!0,children:"No hospitals found"}):y.map((e=>(0,wt.jsx)("option",{value:e.name,children:e.name},e.userId)))]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"preferredDonationTime",children:"Preferred Donation Time"}),(0,wt.jsxs)("select",{id:"preferredDonationTime",name:"preferredDonationTime",value:C.preferredDonationTime,onChange:P,className:"form-control",disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select preferred time"}),(0,wt.jsx)("option",{value:"morning",children:"Morning (8am - 12pm)"}),(0,wt.jsx)("option",{value:"afternoon",children:"Afternoon (12pm - 5pm)"}),(0,wt.jsx)("option",{value:"evening",children:"Evening (5pm - 8pm)"}),(0,wt.jsx)("option",{value:"weekend",children:"Weekends Only"}),(0,wt.jsx)("option",{value:"anytime",children:"Anytime"})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"preferredContactMethod",children:"Preferred Contact Method"}),(0,wt.jsxs)("select",{id:"preferredContactMethod",name:"preferredContactMethod",value:C.preferredContactMethod,onChange:P,className:"form-control",disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"phone",children:"Phone"}),(0,wt.jsx)("option",{value:"email",children:"Email"}),(0,wt.jsx)("option",{value:"sms",children:"SMS"}),(0,wt.jsx)("option",{value:"whatsapp",children:"WhatsApp"})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"willingToTravelDistance",children:"Willing to Travel Distance (km)"}),(0,wt.jsx)("input",{id:"willingToTravelDistance",name:"willingToTravelDistance",type:"number",value:C.willingToTravelDistance,onChange:P,placeholder:"10",className:"form-control",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"donationFrequency",children:"Preferred Donation Frequency"}),(0,wt.jsxs)("select",{id:"donationFrequency",name:"donationFrequency",value:C.donationFrequency,onChange:P,className:"form-control",disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select frequency"}),(0,wt.jsx)("option",{value:"monthly",children:"Monthly"}),(0,wt.jsx)("option",{value:"quarterly",children:"Every 3 months"}),(0,wt.jsx)("option",{value:"biannually",children:"Every 6 months"}),(0,wt.jsx)("option",{value:"annually",children:"Annually"}),(0,wt.jsx)("option",{value:"asNeeded",children:"As needed (emergency)"})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Organ Donor Consent"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"organDonorConsent",checked:"yes"===C.organDonorConsent,onChange:()=>O("organDonorConsent","yes"),disabled:d&&!l}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"organDonorConsent",checked:"no"===C.organDonorConsent,onChange:()=>O("organDonorConsent","no"),disabled:d&&!l}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Volunteer Interest"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"volunteerInterest",checked:"yes"===C.volunteerInterest,onChange:()=>O("volunteerInterest","yes"),disabled:d&&!l}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"volunteerInterest",checked:"no"===C.volunteerInterest,onChange:()=>O("volunteerInterest","no"),disabled:d&&!l}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"donationMotivation",children:"Motivation for Donating"}),(0,wt.jsx)("textarea",{id:"donationMotivation",name:"donationMotivation",value:C.donationMotivation,onChange:P,placeholder:"What motivates you to donate blood?",className:"form-control",rows:"3",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"howDidYouHear",children:"How did you hear about us?"}),(0,wt.jsxs)("select",{id:"howDidYouHear",name:"howDidYouHear",value:C.howDidYouHear,onChange:P,className:"form-control",disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select an option"}),(0,wt.jsx)("option",{value:"friend",children:"Friend or Family"}),(0,wt.jsx)("option",{value:"social",children:"Social Media"}),(0,wt.jsx)("option",{value:"news",children:"News or TV"}),(0,wt.jsx)("option",{value:"doctor",children:"Doctor Recommendation"}),(0,wt.jsx)("option",{value:"event",children:"Community Event"}),(0,wt.jsx)("option",{value:"online",children:"Online Search"}),(0,wt.jsx)("option",{value:"other",children:"Other"})]})]})]}),d&&C.donationHistory.length>0&&(0,wt.jsxs)("div",{className:"mt-4",children:[(0,wt.jsx)("h3",{className:"section-title",children:"Donation History"}),(0,wt.jsx)("div",{className:"table-container",children:(0,wt.jsxs)("table",{className:"table",children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{children:"Date"}),(0,wt.jsx)("th",{children:"Location"}),(0,wt.jsx)("th",{children:"Type"}),(0,wt.jsx)("th",{children:"Status"})]})}),(0,wt.jsx)("tbody",{children:C.donationHistory.map(((e,t)=>(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("td",{children:new Date(1e3*e.date.seconds).toLocaleDateString()}),(0,wt.jsx)("td",{children:e.location}),(0,wt.jsx)("td",{children:e.type}),(0,wt.jsx)("td",{children:(0,wt.jsx)("span",{className:"status-badge ".concat("Completed"===e.status?"status-completed":"Scheduled"===e.status?"status-scheduled":"status-pending"),children:e.status})})]},t)))})]})})]})]}),"eligibility"===m&&(0,wt.jsxs)("div",{className:"section",children:[(0,wt.jsx)("h3",{className:"section-title",children:"Eligibility Information"}),(0,wt.jsx)("p",{className:"section-description",children:"Please answer the following questions to help determine your eligibility to donate blood."}),(0,wt.jsxs)("div",{className:"form-grid",children:[(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you been ill in the past 14 days?*"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentIllness",checked:"yes"===C.recentIllness,onChange:()=>O("recentIllness","yes"),disabled:d&&!l,required:!0}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentIllness",checked:"no"===C.recentIllness,onChange:()=>O("recentIllness","no"),disabled:d&&!l,required:!0}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you received any vaccinations in the past 4 weeks?*"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentVaccination",checked:"yes"===C.recentVaccination,onChange:()=>O("recentVaccination","yes"),disabled:d&&!l,required:!0}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentVaccination",checked:"no"===C.recentVaccination,onChange:()=>O("recentVaccination","no"),disabled:d&&!l,required:!0}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you gotten a tattoo in the past 12 months?*"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentTattoo",checked:"yes"===C.recentTattoo,onChange:()=>O("recentTattoo","yes"),disabled:d&&!l,required:!0}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentTattoo",checked:"no"===C.recentTattoo,onChange:()=>O("recentTattoo","no"),disabled:d&&!l,required:!0}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you gotten a piercing in the past 12 months?*"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentPiercing",checked:"yes"===C.recentPiercing,onChange:()=>O("recentPiercing","yes"),disabled:d&&!l,required:!0}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentPiercing",checked:"no"===C.recentPiercing,onChange:()=>O("recentPiercing","no"),disabled:d&&!l,required:!0}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you been pregnant in the past 6 weeks?"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentPregnancy",checked:"yes"===C.recentPregnancy,onChange:()=>O("recentPregnancy","yes"),disabled:d&&!l}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentPregnancy",checked:"no"===C.recentPregnancy,onChange:()=>O("recentPregnancy","no"),disabled:d&&!l}),"No"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentPregnancy",checked:"na"===C.recentPregnancy,onChange:()=>O("recentPregnancy","na"),disabled:d&&!l}),"N/A"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you had surgery in the past 6 months?*"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentSurgery",checked:"yes"===C.recentSurgery,onChange:()=>O("recentSurgery","yes"),disabled:d&&!l,required:!0}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentSurgery",checked:"no"===C.recentSurgery,onChange:()=>O("recentSurgery","no"),disabled:d&&!l,required:!0}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{children:"Have you received a blood transfusion in the past 12 months?*"}),(0,wt.jsxs)("div",{className:"radio-group",children:[(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentBloodTransfusion",checked:"yes"===C.recentBloodTransfusion,onChange:()=>O("recentBloodTransfusion","yes"),disabled:d&&!l,required:!0}),"Yes"]}),(0,wt.jsxs)("label",{className:"radio-label",children:[(0,wt.jsx)("input",{type:"radio",name:"recentBloodTransfusion",checked:"no"===C.recentBloodTransfusion,onChange:()=>O("recentBloodTransfusion","no"),disabled:d&&!l,required:!0}),"No"]})]})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"travelHistory",children:"Recent Travel History (past 12 months)"}),(0,wt.jsx)("textarea",{id:"travelHistory",name:"travelHistory",value:C.travelHistory,onChange:P,placeholder:"List any countries you've visited in the past 12 months, or type 'None' if not applicable",className:"form-control",rows:"3",disabled:d&&!l})]})]})]}),"emergency"===m&&(0,wt.jsxs)("div",{className:"section",children:[(0,wt.jsx)("h3",{className:"section-title",children:"Emergency Contact"}),(0,wt.jsxs)("div",{className:"form-grid",children:[(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"emergencyContactName",children:"Name*"}),(0,wt.jsx)("input",{id:"emergencyContactName",name:"name",value:C.emergencyContact.name,onChange:R,placeholder:"Jane Doe",className:"form-control",required:!0,disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"emergencyContactPhone",children:"Phone*"}),(0,wt.jsx)("input",{id:"emergencyContactPhone",name:"phone",value:C.emergencyContact.phone,onChange:R,placeholder:"+1 (555) 987-6543",className:"form-control",required:!0,disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group",children:[(0,wt.jsx)("label",{htmlFor:"emergencyContactRelationship",children:"Relationship*"}),(0,wt.jsx)("input",{id:"emergencyContactRelationship",name:"relationship",value:C.emergencyContact.relationship,onChange:R,placeholder:"Spouse, Parent, Friend, etc.",className:"form-control",required:!0,disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"form-group full-width",children:[(0,wt.jsx)("label",{htmlFor:"emergencyContactAddress",children:"Address"}),(0,wt.jsx)("input",{id:"emergencyContactAddress",name:"address",value:C.emergencyContact.address,onChange:R,placeholder:"Emergency contact's address",className:"form-control",disabled:d&&!l})]})]}),(0,wt.jsxs)("div",{className:"form-group full-width mt-4",children:[(0,wt.jsx)("label",{htmlFor:"additionalNotes",children:"Additional Notes"}),(0,wt.jsx)("textarea",{id:"additionalNotes",name:"additionalNotes",value:C.additionalNotes,onChange:P,placeholder:"Any additional information you'd like to provide",className:"form-control",rows:"3",disabled:d&&!l})]})]})]}),(0,wt.jsx)("div",{className:"card-footer",children:(!d||l)&&(0,wt.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Saving...":d?"Update Profile":"Create Profile"})})]})]}),(0,wt.jsx)("style",{jsx:!0,children:"\n        .container {\n          max-width: 1200px;\n          margin: 0 auto;\n          padding: 2rem 1rem;\n        }\n        .card {\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n          overflow: hidden;\n          max-width: 900px;\n          margin: 0 auto;\n        }\n        .card-header {\n          padding: 1.5rem;\n          border-bottom: 1px solid #eee;\n        }\n        .header-content {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 0.5rem;\n        }\n        .card-title {\n          margin: 0;\n          font-size: 1.5rem;\n          font-weight: 600;\n        }\n        .card-description {\n          margin: 0;\n          color: #666;\n        }\n        .tab-navigation {\n          display: flex;\n          overflow-x: auto;\n          border-bottom: 1px solid #eee;\n          background-color: #f9fafb;\n        }\n        .tab-button {\n          padding: 1rem 1.5rem;\n          background: none;\n          border: none;\n          cursor: pointer;\n          font-weight: 500;\n          color: #4a5568;\n          white-space: nowrap;\n        }\n        .tab-button:hover {\n          background-color: #f1f5f9;\n        }\n        .tab-button.active {\n          color: #3182ce;\n          border-bottom: 2px solid #3182ce;\n          background-color: white;\n        }\n        .card-content {\n          padding: 1.5rem;\n        }\n        .card-footer {\n          padding: 1rem 1.5rem;\n          border-top: 1px solid #eee;\n          display: flex;\n          justify-content: flex-end;\n        }\n        .section {\n          margin-bottom: 2rem;\n        }\n        .section-title {\n          font-size: 1.2rem;\n          margin-bottom: 1rem;\n          font-weight: 500;\n        }\n        .section-description {\n          margin-bottom: 1rem;\n          color: #666;\n        }\n        .mt-4 {\n          margin-top: 1.5rem;\n        }\n        .form-grid {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 1rem;\n        }\n        @media (min-width: 768px) {\n          .form-grid {\n            grid-template-columns: 1fr 1fr;\n          }\n        }\n        .form-group {\n          margin-bottom: 1rem;\n        }\n        .full-width {\n          grid-column: 1 / -1;\n        }\n        label {\n          display: block;\n          margin-bottom: 0.5rem;\n          font-weight: 500;\n        }\n        .form-control {\n          width: 100%;\n          padding: 0.5rem;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          font-size: 1rem;\n          background-color: ".concat(d&&!l?"#f9f9f9":"white",";\n        }\n        .form-control:disabled {\n          cursor: not-allowed;\n          opacity: 0.8;\n        }\n        textarea.form-control {\n          min-height: 80px;\n          resize: vertical;\n        }\n        .radio-group {\n          display: flex;\n          gap: 1rem;\n        }\n        .radio-label {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          cursor: ").concat(d&&!l?"default":"pointer",";\n        }\n        .btn {\n          padding: 0.5rem 1rem;\n          border-radius: 4px;\n          font-size: 1rem;\n          cursor: pointer;\n          border: none;\n          font-weight: 500;\n        }\n        .btn-primary {\n          background-color: #3182ce;\n          color: white;\n        }\n        .btn-primary:hover {\n          background-color: #2c5282;\n        }\n        .btn-edit {\n          background-color: #4a5568;\n          color: white;\n        }\n        .btn-edit:hover {\n          background-color: #2d3748;\n        }\n        .btn-secondary {\n          background-color: #718096;\n          color: white;\n        }\n        .btn-secondary:hover {\n          background-color: #4a5568;\n        }\n        .btn:disabled {\n          opacity: 0.7;\n          cursor: not-allowed;\n        }\n        .table-container {\n          overflow-x: auto;\n        }\n        .table {\n          width: 100%;\n          border-collapse: collapse;\n        }\n        .table th, .table td {\n          padding: 0.75rem;\n          text-align: left;\n          border-bottom: 1px solid #eee;\n        }\n        .table th {\n          background-color: #f9fafb;\n          font-weight: 500;\n        }\n        .status-badge {\n          display: inline-block;\n          padding: 0.25rem 0.5rem;\n          border-radius: 9999px;\n          font-size: 0.75rem;\n          font-weight: 500;\n        }\n        .status-completed {\n          background-color: #c6f6d5;\n          color: #22543d;\n        }\n        .status-scheduled {\n          background-color: #bee3f8;\n          color: #2a4365;\n        }\n        .status-pending {\n          background-color: #feebc8;\n          color: #7b341e;\n        }\n        .loading-container {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          min-height: 400px;\n        }\n        .spinner {\n          border: 4px solid rgba(0, 0, 0, 0.1);\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          border-left-color: #3182ce;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      ")})]})}function mn(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=mn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const fn=function(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=mn(e))&&(r&&(r+=" "),r+=t);return r},gn=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var vn=e=>"number"==typeof e&&!isNaN(e),yn=e=>"string"==typeof e,xn=e=>"function"==typeof e,bn=e=>yn(e)||xn(e)?e:null,wn=(e,t)=>!1===e||vn(e)&&e>0?e:t,Nn=e=>(0,t.isValidElement)(e)||yn(e)||xn(e)||vn(e);function jn(e){let{enter:n,exit:r,appendPosition:a=!1,collapse:s=!0,collapseDuration:i=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:d,nodeRef:u,isIn:h,playToast:p}=e,m=a?"".concat(n,"--").concat(l):n,f=a?"".concat(r,"--").concat(l):r,g=(0,t.useRef)(0);return(0,t.useLayoutEffect)((()=>{let e=u.current,t=m.split(" "),n=r=>{r.target===u.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,t.useEffect)((()=>{let e=u.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:a}=e;requestAnimationFrame((()=>{a.minHeight="initial",a.height=r+"px",a.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)}))}))}(e,d,i):d()};h||(c?t():(g.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))}),[h]),t.createElement(t.Fragment,null,o)}}function En(e,t){return{content:An(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function An(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,t.isValidElement)(e)&&!yn(e.type)?(0,t.cloneElement)(e,{closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):xn(e)?e({closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):e}function Sn(e){let{delay:n,isRunning:r,closeToast:a,type:s="default",hide:o,className:l,controlledProgress:c,progress:d,rtl:u,isIn:h,theme:p}=e,m=o||c&&0===d,f={animationDuration:"".concat(n,"ms"),animationPlayState:r?"running":"paused"};c&&(f.transform="scaleX(".concat(d,")"));let g=fn("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(s),{"Toastify__progress-bar--rtl":u}),v=xn(l)?l({rtl:u,type:s,defaultClassName:g}):fn(g,l),y={[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{h&&a()}};return t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},t.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(p," Toastify__progress-bar--").concat(s)}),t.createElement("div",(0,i.A)({role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:v,style:f},y)))}var In=1,_n=()=>"".concat(In++);function Tn(e,t,n){let r=1,a=0,s=[],o=[],l=t,c=new Map,d=new Set,u=()=>{o=Array.from(c.values()),d.forEach((e=>e()))},h=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},p=e=>{if(null==e)c.forEach(h);else{let t=c.get(e);t&&h(t)}u()},m=e=>{var t,r;let{toastId:a,updateId:s}=e.props,i=null==s;e.staleId&&c.delete(e.staleId),e.isActive=!0,c.set(a,e),u(),n(En(e,i?"added":"updated")),i&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:l,observe:e=>(d.add(e),()=>d.delete(e)),toggle:(e,t)=>{c.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:p,toasts:c,clearQueue:()=>{a-=s.length,s=[]},buildToast:(t,o)=>{if((t=>{let{containerId:n,toastId:r,updateId:a}=t,s=n?n!==e:1!==e,i=c.has(r)&&null==a;return s||i})(o))return;let{toastId:d,updateId:h,data:f,staleId:g,delay:v}=o,y=null==h;y&&a++;let x=(0,i.A)((0,i.A)((0,i.A)({},l),{},{style:l.toastStyle,key:r++},Object.fromEntries(Object.entries(o).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:d,updateId:h,data:f,isIn:!1,className:bn(o.className||l.toastClassName),progressClassName:bn(o.progressClassName||l.progressClassName),autoClose:!o.isLoading&&wn(o.autoClose,l.autoClose),closeToast(e){c.get(d).removalReason=e,p(d)},deleteToast(){let e=c.get(d);if(null!=e){if(n(En(e,"removed")),c.delete(d),a--,a<0&&(a=0),s.length>0)return void m(s.shift());u()}}});x.closeButton=l.closeButton,!1===o.closeButton||Nn(o.closeButton)?x.closeButton=o.closeButton:!0===o.closeButton&&(x.closeButton=!Nn(l.closeButton)||l.closeButton);let b={content:t,props:x,staleId:g};l.limit&&l.limit>0&&a>l.limit&&y?s.push(b):vn(v)?setTimeout((()=>{m(b)}),v):m(b)},setProps(e){l=e},setToggle:(e,t)=>{let n=c.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=c.get(e))?void 0:t.isActive},getSnapshot:()=>o}}var Cn=new Map,Dn=[],kn=new Set,Pn=e=>kn.forEach((t=>t(e))),Rn=()=>Cn.size>0;function On(e,t){var n;if(t)return!(null==(n=Cn.get(t))||!n.isToastActive(e));let r=!1;return Cn.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function Ln(e){if(Rn()){if(null==e||(e=>yn(e)||vn(e))(e))Cn.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=Cn.get(e.containerId);t?t.removeToast(e.id):Cn.forEach((t=>{t.removeToast(e.id)}))}}else Dn=Dn.filter((t=>null!=e&&t.options.toastId!==e))}function Mn(e,t){Nn(e)&&(Rn()||Dn.push({content:e,options:t}),Cn.forEach((n=>{n.buildToast(e,t)})))}function Fn(e,t){Cn.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function Un(e){let t=e.containerId||1;return{subscribe(n){let r=Tn(t,e,Pn);Cn.set(t,r);let a=r.observe(n);return Dn.forEach((e=>Mn(e.content,e.options))),Dn=[],()=>{a(),Cn.delete(t)}},setProps(e){var n;null==(n=Cn.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=Cn.get(t))?void 0:e.getSnapshot()}}}function Vn(e){return e&&(yn(e.toastId)||vn(e.toastId))?e.toastId:_n()}function qn(e,t){return Mn(e,t),t.toastId}function zn(e,t){return(0,i.A)((0,i.A)({},t),{},{type:t&&t.type||e,toastId:Vn(t)})}function Bn(e){return(t,n)=>qn(t,zn(e,n))}function Jn(e,t){return qn(e,zn("default",t))}function Hn(e){let[n,r]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!1),i=(0,t.useRef)(null),o=(0,t.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:h}=e;function p(){r(!0)}function m(){r(!1)}function f(t){let r=i.current;if(o.canDrag&&r){o.didMove=!0,n&&m(),"x"===e.draggableDirection?o.delta=t.clientX-o.start:o.delta=t.clientY-o.start,o.start!==t.clientX&&(o.canCloseOnClick=!1);let a="x"===e.draggableDirection?"".concat(o.delta,"px, var(--y)"):"0, calc(".concat(o.delta,"px + var(--y))");r.style.transform="translate3d(".concat(a,",0)"),r.style.opacity="".concat(1-Math.abs(o.delta/o.removalDistance))}}function g(){document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",g);let t=i.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=Cn.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:r}),(0,t.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",p),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",m)}}),[e.pauseOnFocusLoss]);let v={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){o.didMove=!1,document.addEventListener("pointermove",f),document.addEventListener("pointerup",g);let n=i.current;o.canCloseOnClick=!0,o.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(o.start=t.clientX,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=t.clientY,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:a,right:s}=i.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=a&&t.clientX<=s&&t.clientY>=n&&t.clientY<=r?m():p()}};return l&&c&&(v.onMouseEnter=m,e.stacked||(v.onMouseLeave=p)),h&&(v.onClick=e=>{u&&u(e),o.canCloseOnClick&&d(!0)}),{playToast:p,pauseToast:m,isRunning:n,preventExitTransition:a,toastRef:i,eventHandlers:v}}Jn.loading=(e,t)=>qn(e,zn("default",(0,i.A)({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),Jn.promise=function(e,t,n){let r,{pending:a,error:s,success:o}=t;a&&(r=yn(a)?Jn.loading(a,n):Jn.loading(a.render,(0,i.A)((0,i.A)({},n),a)));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,a)=>{if(null==t)return void Jn.dismiss(r);let s=(0,i.A)((0,i.A)((0,i.A)({type:e},l),n),{},{data:a}),o=yn(t)?{render:t}:t;return r?Jn.update(r,(0,i.A)((0,i.A)({},s),o)):Jn(o.render,(0,i.A)((0,i.A)({},s),o)),a},d=xn(e)?e():e;return d.then((e=>c("success",o,e))).catch((e=>c("error",s,e))),d},Jn.success=Bn("success"),Jn.info=Bn("info"),Jn.error=Bn("error"),Jn.warning=Bn("warning"),Jn.warn=Jn.warning,Jn.dark=(e,t)=>qn(e,zn("default",(0,i.A)({theme:"dark"},t))),Jn.dismiss=function(e){Ln(e)},Jn.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cn.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},Jn.isActive=On,Jn.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=Cn.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:a}=n,s=(0,i.A)((0,i.A)((0,i.A)({delay:100},r),t),{},{toastId:t.toastId||e,updateId:_n()});s.toastId!==e&&(s.staleId=e);let o=s.render||a;delete s.render,qn(o,s)}},Jn.done=e=>{Jn.update(e,{progress:1})},Jn.onChange=function(e){return kn.add(e),()=>{kn.delete(e)}},Jn.play=e=>Fn(!0,e),Jn.pause=e=>Fn(!1,e);var Gn="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,Wn=e=>{let{theme:n,type:r,isLoading:a}=e,o=s(e,gn);return t.createElement("svg",(0,i.A)({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(r,")")},o))};var Yn={info:function(e){return t.createElement(Wn,(0,i.A)({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(Wn,(0,i.A)({},e),t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(Wn,(0,i.A)({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(Wn,(0,i.A)({},e),t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}};function Kn(e){let{theme:n,type:r,isLoading:a,icon:s}=e,o=null,l={theme:n,type:r};return!1===s||(xn(s)?o=s((0,i.A)((0,i.A)({},l),{},{isLoading:a})):(0,t.isValidElement)(s)?o=(0,t.cloneElement)(s,l):a?o=Yn.spinner():(e=>e in Yn)(r)&&(o=Yn[r](l))),o}var Qn=e=>{let{isRunning:n,preventExitTransition:r,toastRef:a,eventHandlers:s,playToast:o}=Hn(e),{closeButton:l,children:c,autoClose:d,onClick:u,type:h,hideProgressBar:p,closeToast:m,transition:f,position:g,className:v,style:y,progressClassName:x,updateId:b,role:w,progress:N,rtl:j,toastId:E,deleteToast:A,isIn:S,isLoading:I,closeOnClick:_,theme:T,ariaLabel:C}=e,D=fn("Toastify__toast","Toastify__toast-theme--".concat(T),"Toastify__toast--".concat(h),{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":_}),k=xn(v)?v({rtl:j,position:g,type:h,defaultClassName:D}):fn(D,v),P=Kn(e),R=!!N||!d,O={closeToast:m,type:h,theme:T},L=null;return!1===l||(L=xn(l)?l(O):(0,t.isValidElement)(l)?(0,t.cloneElement)(l,O):function(e){let{closeToast:n,theme:r,ariaLabel:a="close"}=e;return t.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:e=>{e.stopPropagation(),n(!0)},"aria-label":a},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(O)),t.createElement(f,{isIn:S,done:A,position:g,preventExitTransition:r,nodeRef:a,playToast:o},t.createElement("div",(0,i.A)((0,i.A)({id:E,tabIndex:0,onClick:u,"data-in":S,className:k},s),{},{style:y,ref:a},S&&{role:w,"aria-label":C}),null!=P&&t.createElement("div",{className:fn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},P),An(c,e,!n),L,!e.customProgressBar&&t.createElement(Sn,(0,i.A)((0,i.A)({},b&&!R?{key:"p-".concat(b)}:{}),{},{rtl:j,theme:T,delay:d,isRunning:n,isIn:S,closeToast:m,hide:p,type:h,className:x,controlledProgress:R,progress:N||0}))))},Xn=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Zn=jn(Xn("bounce",!0)),$n=(jn(Xn("slide",!0)),jn(Xn("zoom")),jn(Xn("flip")),{position:"top-right",transition:Zn,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function er(e){let n=(0,i.A)((0,i.A)({},$n),e),r=e.stacked,[a,s]=(0,t.useState)(!0),o=(0,t.useRef)(null),{getToastToRender:l,isToastActive:c,count:d}=function(e){var n;let{subscribe:r,getSnapshot:a,setProps:s}=(0,t.useRef)(Un(e)).current;s(e);let i=null==(n=(0,t.useSyncExternalStore)(r,a,a))?void 0:n.slice();return{getToastToRender:function(t){if(!i)return[];let n=new Map;return e.newestOnTop&&i.reverse(),i.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:On,count:null==i?void 0:i.length}}(n),{className:u,style:h,rtl:p,containerId:m,hotKeys:f}=n;function g(e){let t=fn("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":p});return xn(u)?u({position:e,rtl:p,defaultClassName:t}):fn(t,bn(u))}function v(){r&&(s(!0),Jn.play())}return Gn((()=>{var e;if(r){let t=o.current.querySelectorAll('[data-in="true"]'),r=12,s=null==(e=n.position)?void 0:e.includes("top"),i=0,l=0;Array.from(t).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(a)),n.dataset.pos||(n.dataset.pos=s?"top":"bot");let o=i*(a?.2:1)+(a?0:r*t);n.style.setProperty("--y","".concat(s?o:-1*o,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s","".concat(1-(a?l:0))),i+=n.offsetHeight,l+=.025}))}}),[a,d,r]),(0,t.useEffect)((()=>{function e(e){var t;let n=o.current;f(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),s(!1),Jn.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(s(!0),Jn.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[f]),t.createElement("section",{ref:o,className:"Toastify",id:m,onMouseEnter:()=>{r&&(s(!1),Jn.pause())},onMouseLeave:v,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":n["aria-label"]},l(((e,n)=>{let a=n.length?(0,i.A)({},h):(0,i.A)((0,i.A)({},h),{},{pointerEvents:"none"});return t.createElement("div",{tabIndex:-1,className:g(e),"data-stacked":r,style:a,key:"c-".concat(e)},n.map((e=>{let{content:n,props:a}=e;return t.createElement(Qn,(0,i.A)((0,i.A)({},a),{},{stacked:r,collapseAll:v,isIn:c(a.toastId,a.containerId),key:"t-".concat(a.key)}),n)})))})))}const tr=["Kidney","Heart","Eye","Leg","Arm"];const nr=function(){const e=de(),[n,r]=(0,t.useState)({donorName:"",bloodType:"",age:"",weight:"",height:"",bmi:"",medicalHistory:"",currentMedications:"",surgicalHistory:"",allergies:"",chronicConditions:"",bloodPressure:"",pulseRate:"",hemoglobinLevel:"",lastDonationDate:"",smokingStatus:"",alcoholConsumption:"",exerciseFrequency:"",hasHeartDisease:!1,hasDiabetes:!1,hasHIV:!1,hasHepatitis:!1,hasCancer:!1,emergencyContact:{name:"",relationship:"",phone:""},province:"",city:"",hospital:"",donorType:"",additionalNotes:""}),[a,s]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[f,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{if(!n.province)return;d(!0),m(!1);const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("province","==",n.province),(0,bt._M)("verificationStatus","==","Approved")),a=await(0,bt.GG)(t),o=new Set;a.forEach((e=>{o.add(e.data().city)}));const c=[...o];s(c),l([]),r((e=>(0,i.A)((0,i.A)({},e),{},{city:"",hospital:""}))),d(!1),0===c.length&&m(!0)})()}),[n.province]),(0,t.useEffect)((()=>{(async()=>{if(!n.city)return;h(!0),g(!1);const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("city","==",n.city)),a=(await(0,bt.GG)(t)).docs.map((e=>({name:e.data().hospitalName,userId:e.data().userId})));l(a),r((e=>(0,i.A)((0,i.A)({},e),{},{hospital:""}))),h(!1),0===a.length&&g(!0)})()}),[n.city]),(0,t.useEffect)((()=>{(async()=>{if(!n.hospital)return;const e=o.find((e=>e.name===n.hospital));y(e?e.userId:"")})()}),[n.hospital]);const x=()=>{if(n.weight&&n.height){const e=n.height/100,t=(n.weight/(e*e)).toFixed(1);r((e=>(0,i.A)((0,i.A)({},e),{},{bmi:t})))}};return(0,wt.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Medical Information Form"}),(0,wt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(!v)return void alert("Selected hospital not found. Please try again.");await(0,bt.BN)((0,bt.doc)(xt.db,"medicalRecords",xt.j2.currentUser.uid),(0,i.A)((0,i.A)({},n),{},{donorId:xt.j2.currentUser.uid,hospitalId:v,status:"pending",submittedAt:new Date})),Jn.success("Medical information submitted successfully!"),e("/donor/dashboard")}catch(r){console.error("Error:",r),alert("Error submitting medical information")}},className:"space-y-6",children:[(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Basic Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Blood Type"}),(0,wt.jsxs)("select",{value:n.bloodType,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{bloodType:e.target.value})),className:"w-full p-2 border rounded",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select Blood Type"}),(0,wt.jsx)("option",{value:"A+",children:"A+"}),(0,wt.jsx)("option",{value:"A-",children:"A-"}),(0,wt.jsx)("option",{value:"B+",children:"B+"}),(0,wt.jsx)("option",{value:"B-",children:"B-"}),(0,wt.jsx)("option",{value:"AB+",children:"AB+"}),(0,wt.jsx)("option",{value:"AB-",children:"AB-"}),(0,wt.jsx)("option",{value:"O+",children:"O+"}),(0,wt.jsx)("option",{value:"O-",children:"O-"})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Name"}),(0,wt.jsx)("input",{type:"text",value:n.donorName,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{donorName:e.target.value})),className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Age"}),(0,wt.jsx)("input",{type:"number",value:n.age,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{age:e.target.value})),className:"w-full p-2 border rounded",required:!0,min:"18",max:"65"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Weight (kg)"}),(0,wt.jsx)("input",{type:"number",value:n.weight,onChange:e=>{r((0,i.A)((0,i.A)({},n),{},{weight:e.target.value})),x()},className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Height (cm)"}),(0,wt.jsx)("input",{type:"number",value:n.height,onChange:e=>{r((0,i.A)((0,i.A)({},n),{},{height:e.target.value})),x()},className:"w-full p-2 border rounded",required:!0})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Medical History"}),(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Medical History"}),(0,wt.jsx)("textarea",{value:n.medicalHistory,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{medicalHistory:e.target.value})),className:"w-full p-2 border rounded",rows:"4",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Current Medications"}),(0,wt.jsx)("textarea",{value:n.currentMedications,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{currentMedications:e.target.value})),className:"w-full p-2 border rounded",rows:"3"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Surgical History"}),(0,wt.jsx)("textarea",{value:n.surgicalHistory,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{surgicalHistory:e.target.value})),className:"w-full p-2 border rounded",rows:"3"})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Medical Conditions"}),(0,wt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["Heart Disease","Diabetes","HIV","Hepatitis","Cancer"].map((e=>{const t="has".concat(e.replace(/\s+/g,""));return(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("input",{type:"checkbox",id:t,checked:n[t],onChange:e=>r((0,i.A)((0,i.A)({},n),{},{[t]:e.target.checked})),className:"mr-2"}),(0,wt.jsx)("label",{htmlFor:t,children:e})]},t)}))})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Emergency Contact"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Name"}),(0,wt.jsx)("input",{type:"text",value:n.emergencyContact.name,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{emergencyContact:(0,i.A)((0,i.A)({},n.emergencyContact),{},{name:e.target.value})})),className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Relationship"}),(0,wt.jsx)("input",{type:"text",value:n.emergencyContact.relationship,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{emergencyContact:(0,i.A)((0,i.A)({},n.emergencyContact),{},{relationship:e.target.value})})),className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Phone Number"}),(0,wt.jsx)("input",{type:"tel",value:n.emergencyContact.phone,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{emergencyContact:(0,i.A)((0,i.A)({},n.emergencyContact),{},{phone:e.target.value})})),className:"w-full p-2 border rounded",pattern:"[0-9]{10}",required:!0})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Health Measurements"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Blood Pressure (mmHg)"}),(0,wt.jsx)("input",{type:"text",value:n.bloodPressure,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{bloodPressure:e.target.value})),className:"w-full p-2 border rounded",placeholder:"120/80",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Pulse Rate (bpm)"}),(0,wt.jsx)("input",{type:"number",value:n.pulseRate,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{pulseRate:e.target.value})),className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Hemoglobin Level (g/dL)"}),(0,wt.jsx)("input",{type:"number",step:"0.1",value:n.hemoglobinLevel,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{hemoglobinLevel:e.target.value})),className:"w-full p-2 border rounded",required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Last Donation Date"}),(0,wt.jsx)("input",{type:"date",value:n.lastDonationDate,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{lastDonationDate:e.target.value})),className:"w-full p-2 border rounded"})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Lifestyle Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Smoking Status"}),(0,wt.jsxs)("select",{value:n.smokingStatus,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{smokingStatus:e.target.value})),className:"w-full p-2 border rounded",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select Status"}),(0,wt.jsx)("option",{value:"never",children:"Never Smoked"}),(0,wt.jsx)("option",{value:"former",children:"Former Smoker"}),(0,wt.jsx)("option",{value:"current",children:"Current Smoker"})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Alcohol Consumption"}),(0,wt.jsxs)("select",{value:n.alcoholConsumption,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{alcoholConsumption:e.target.value})),className:"w-full p-2 border rounded",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select Frequency"}),(0,wt.jsx)("option",{value:"never",children:"Never"}),(0,wt.jsx)("option",{value:"occasional",children:"Occasional"}),(0,wt.jsx)("option",{value:"regular",children:"Regular"}),(0,wt.jsx)("option",{value:"frequent",children:"Frequent"})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Exercise Frequency"}),(0,wt.jsxs)("select",{value:n.exerciseFrequency,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{exerciseFrequency:e.target.value})),className:"w-full p-2 border rounded",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select Frequency"}),(0,wt.jsx)("option",{value:"never",children:"Never"}),(0,wt.jsx)("option",{value:"occasional",children:"1-2 times/week"}),(0,wt.jsx)("option",{value:"regular",children:"3-4 times/week"}),(0,wt.jsx)("option",{value:"frequent",children:"5+ times/week"})]})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Residential Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Select Province"}),(0,wt.jsxs)("select",{value:n.province,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{province:e.target.value})),className:"w-full p-2 border rounded",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select Province"}),(0,wt.jsx)("option",{value:"Punjab",children:"Punjab"}),(0,wt.jsx)("option",{value:"Sindh",children:"Sindh"}),(0,wt.jsx)("option",{value:"Balochistan",children:"Balochistan"}),(0,wt.jsx)("option",{value:"Khyber Pakhtunkhwa",children:"Khyber Pakhtunkhwa"}),(0,wt.jsx)("option",{value:"Gilgit Baltistan",children:"Gilgit Baltistan"})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Select City"}),(0,wt.jsxs)("select",{value:n.city,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{city:e.target.value})),className:"w-full p-2 border rounded",required:!0,disabled:!n.province||c,children:[(0,wt.jsx)("option",{value:"",children:"Select City"}),a.map((e=>(0,wt.jsx)("option",{value:e,children:e},e)))]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Select Hospital"}),(0,wt.jsxs)("select",{value:n.hospital,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{hospital:e.target.value})),className:"w-full p-2 border rounded",required:!0,disabled:!n.city||u,children:[(0,wt.jsx)("option",{value:"",children:"Select Hospital"}),o.map((e=>(0,wt.jsx)("option",{value:e.name,children:e.name},e.userId)))]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Type of Donor"}),(0,wt.jsxs)("select",{value:n.donorType,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{donorType:e.target.value})),className:"w-full p-2 border rounded",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select Type of Donation"}),tr.map((e=>(0,wt.jsx)("option",{value:e,children:e},e)))]})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Additional Notes"}),(0,wt.jsx)("div",{children:(0,wt.jsx)("textarea",{value:n.additionalNotes,onChange:e=>r((0,i.A)((0,i.A)({},n),{},{additionalNotes:e.target.value})),className:"w-full p-2 border rounded",rows:"4",placeholder:"Any additional information you'd like to share..."})})]}),(0,wt.jsx)("div",{className:"flex justify-end",children:(0,wt.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600 transition-colors",children:"Submit Medical Information"})})]})]})},rr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";if(!e)return t;try{if(e.seconds)return new Date(1e3*e.seconds).toLocaleDateString();if(e instanceof Date)return e.toLocaleDateString();if("string"===typeof e)return e.includes("T")||e.includes("-")?new Date(e).toLocaleDateString():e;if("number"===typeof e)return new Date(e).toLocaleDateString()}catch(n){console.error("Error formatting date:",n)}return t},ar=e=>{let{isOpen:n,onClose:r,appointment:a,onCancel:s,onComplete:i,onReschedule:o,userRole:l,viewDetailsOnly:c=!1}=e;const[d,u]=(0,t.useState)({doctorName:(null===a||void 0===a?void 0:a.doctorName)||"Loading doctor info...",hospitalName:(null===a||void 0===a?void 0:a.hospitalName)||"Loading hospital..."}),[h,p]=(0,t.useState)(!0);if((0,t.useEffect)((()=>{if(n&&a){console.log("Appointment details modal opened, fetching provider details",a);(async()=>{try{if(a.doctorId){console.log("Found doctorId, fetching hospital and doctor info:",a.doctorId);try{const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("userId","==",a.doctorId)),n=await(0,bt.GG)(t);if(!n.empty){const e=n.docs[0].data();console.log("Hospital data found:",e);let t=a.doctorName||"Unknown Doctor",r=e.hospitalName||e.name||"Unknown Hospital";return e.doctorName&&(console.log("Doctor name found in hospital record:",e.doctorName),t="Dr. ".concat(e.doctorName),e.doctorSpecialization&&(t+=" (".concat(e.doctorSpecialization,")"))),u({doctorName:t,hospitalName:r}),void p(!1)}}catch(t){console.error("Error fetching hospital data:",t)}console.log("Fetching doctor info for doctorId:",a.doctorId);const n=(0,bt.doc)(xt.db,"users",a.doctorId),r=await(0,bt.x7)(n);if(r.exists()){const t=r.data();console.log("Doctor data fetched:",t);let n="Dr. ",s="Unknown Hospital";if(t.firstName&&t.lastName?n+="".concat(t.firstName," ").concat(t.lastName):t.displayName?n+=t.displayName:t.name?n+=t.name:t.email?n+=t.email:n=a.doctorName||"Doctor Name Not Available",t.hospitalName)s=t.hospitalName;else if(t.hospital){var e;"string"===typeof t.hospital?s=t.hospital:null!==(e=t.hospital)&&void 0!==e&&e.name&&(s=t.hospital.name)}u({doctorName:n,hospitalName:s})}else console.log("No doctor document found in database, using appointment data"),u({doctorName:a.doctorName||"Unknown Doctor",hospitalName:a.hospitalName||"Unknown Hospital"})}else console.log("No doctorId found, using existing appointment data"),u({doctorName:a.doctorName||"Doctor information not available",hospitalName:a.hospitalName||"Hospital information not available"})}catch(n){console.error("Error fetching provider info:",n)}finally{p(!1)}})()}}),[n,a]),!n||!a)return null;const m=()=>"donor"===a.patientType||"donor"===a.type||!!a.donorId||!!a.organToDonate||a.appointmentType&&a.appointmentType.toLowerCase().includes("donor"),f=e=>null===e||void 0===e?"N/A":"string"===typeof e||"number"===typeof e||"boolean"===typeof e?e:"object"===typeof e&&null!==e?"patientId"in e&&"patientType"in e&&"purpose"in e&&"existingAppointment"in e?e.purpose||"No purpose specified":JSON.stringify(e):String(e);return(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[(0,wt.jsxs)("div",{className:"border-b px-6 py-4 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,wt.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,wt.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full mr-3 ".concat("completed"===a.status?"bg-green-100 text-green-700":"cancelled"===a.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:"completed"===a.status?(0,wt.jsx)("i",{className:"fas fa-check"}):"cancelled"===a.status?(0,wt.jsx)("i",{className:"fas fa-times"}):(0,wt.jsx)("i",{className:"fas fa-calendar-check"})}),"completed"===a.status?"Completed":"cancelled"===a.status?"Cancelled":"Scheduled"," Appointment            ",(0,wt.jsxs)("span",{className:"ml-2 text-base font-normal text-gray-500",children:["(",m()?"Donor":"Recipient",")"]})]}),(0,wt.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,wt.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,wt.jsxs)("div",{className:"p-6 overflow-y-auto flex-1",children:[(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-blue-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"far fa-calendar-alt mr-2"})," Appointment Details"]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-sm",children:[(0,wt.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Schedule Information"}),(0,wt.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Date:"})," ","string"===typeof a.date?a.date:rr(a.date)]}),(0,wt.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Time:"})," ",a.time||"Not specified"]}),(0,wt.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Duration:"})," ",a.duration||"30 minutes"]}),a.appointmentType&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Type:"})," ",a.appointmentType]})]}),(0,wt.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-sm",children:[(0,wt.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Appointment Information"}),"                ",(0,wt.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Purpose:"})," ","object"===typeof a.purpose&&null!==a.purpose?f(a.purpose):a.purpose||a.appointmentPurpose||a.reason||"Not specified"]}),(0,wt.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Status:"}),(0,wt.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-medium ".concat("completed"===a.status?"bg-green-100 text-green-800":"cancelled"===a.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:a.status||"scheduled"})]}),a.scheduledBy&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Scheduled By:"})," ",a.scheduledBy]}),a.followUpAppointment&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Follow-Up Appointment:"})," ",!0===a.followUpAppointment?"Yes":"No"]})]})]})]}),(0,wt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:["            ",(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-green-800 mb-3 flex items-center",children:["              ",(0,wt.jsx)("i",{className:"fas fa-user mr-2"}),m()?"Donor":"Recipient"," Information"]}),(0,wt.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-sm",children:[(0,wt.jsxs)("div",{className:"mb-4 pb-3 border-b border-gray-100",children:[(0,wt.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Basic Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["                  ",(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Name:"})," ",a.patientName||a.donorName||a.recipientName||"Not specified"]}),a.bloodType&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Blood Type:"}),(0,wt.jsx)("span",{className:"ml-1 px-2 py-0.5 bg-red-50 text-red-700 rounded-full text-xs font-bold",children:a.bloodType})]}),"                  ",(a.email||a.patientEmail)&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Email:"})," ",a.email||a.patientEmail]}),(a.phone||a.contactNumber||a.patientPhone)&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Phone:"})," ",a.phone||a.contactNumber||a.patientPhone]}),a.age&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Age:"})," ",a.age," years"]}),a.gender&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Gender:"})," ",a.gender]})]})]}),(0,wt.jsxs)("div",{children:["                ",(0,wt.jsxs)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:[m()?"Donation":"Transplant"," Information"]}),(0,wt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:m()?(0,wt.jsxs)(wt.Fragment,{children:["                      ",(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Organ to Donate:"}),(0,wt.jsx)("span",{className:"ml-1 px-2 py-0.5 bg-purple-50 text-purple-700 rounded-full text-xs font-bold",children:a.organToDonate||a.organType||a.organ||"Not specified"})]}),a.donationReason&&(0,wt.jsxs)("p",{className:"text-gray-600 md:col-span-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Donation Reason:"}),(0,wt.jsx)("span",{className:"block mt-1 p-2 bg-gray-50 rounded text-sm",children:a.donationReason})]}),a.donorAvailability&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Availability:"})," ",a.donorAvailability]})]}):(0,wt.jsxs)(wt.Fragment,{children:["                      ",(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Requested Organ:"}),(0,wt.jsx)("span",{className:"ml-1 px-2 py-0.5 bg-purple-50 text-purple-700 rounded-full text-xs font-bold",children:a.organType||a.organ||a.organToDonate||"Not specified"})]}),a.urgencyLevel&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Urgency Level:"}),(0,wt.jsx)("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs font-bold\n                            ".concat("critical"===a.urgencyLevel?"bg-red-100 text-red-800":"urgent"===a.urgencyLevel?"bg-orange-100 text-orange-800":"moderate"===a.urgencyLevel?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:(0,wt.jsx)("span",{className:"capitalize",children:a.urgencyLevel})})]}),"                      ",a.waitingSince&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Waiting Since:"})," ",a.waitingSince]}),a.diagnosisDate&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Diagnosis Date:"})," ",a.diagnosisDate]})]})})]})]})]}),(0,wt.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-purple-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-hospital-user mr-2"})," Medical Provider Information              ",(0,wt.jsx)("span",{className:"ml-2 text-xs text-gray-600",children:h?"(Loading provider information...)":"(Provider data: ".concat(d.doctorName,", ").concat(d.hospitalName,")")})]}),(0,wt.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-sm",children:[(0,wt.jsxs)("div",{className:"mb-4 pb-3 border-b border-gray-100",children:["                ",(0,wt.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Doctor Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["                  ",(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Doctor:"}),h?(0,wt.jsx)("span",{className:"ml-1",children:"Loading..."}):"Unknown Doctor"===d.doctorName||"Doctor information not available"===d.doctorName?(0,wt.jsx)("span",{className:"ml-1 font-semibold text-gray-500",children:"Not assigned"}):(0,wt.jsxs)("span",{className:"ml-1 font-semibold text-green-700 bg-green-50 px-2 py-1 rounded flex-wrap",children:[(0,wt.jsx)("i",{className:"fas fa-user-md mr-1"})," ",d.doctorName]})]}),(a.doctorSpecialization||a.specialization||a.doctorSpeciality)&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Specialization:"})," ",a.doctorSpecialization||a.specialization||a.doctorSpeciality]}),a.doctorEmail&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Email:"})," ",a.doctorEmail]}),a.doctorPhone&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Phone:"})," ",a.doctorPhone]})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Facility Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["                  ",(0,wt.jsxs)("p",{className:"text-gray-600 md:col-span-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital/Clinic:"}),h?(0,wt.jsx)("span",{className:"ml-1",children:"Loading..."}):"Unknown Hospital"===d.hospitalName||"Hospital information not available"===d.hospitalName?(0,wt.jsx)("span",{className:"ml-1 font-semibold text-gray-500",children:"Not specified"}):(0,wt.jsx)("span",{className:"ml-1 font-semibold text-purple-700 bg-purple-50 px-2 py-1 rounded",children:d.hospitalName}),"                  "]}),(a.hospitalPhone||a.facilityPhone||a.contactPhone)&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Phone:"})," ",a.hospitalPhone||a.facilityPhone||a.contactPhone]}),(a.hospitalEmail||a.facilityEmail||a.contactEmail)&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Email:"})," ",a.hospitalEmail||a.facilityEmail||a.contactEmail]}),a.hospitalDepartment&&(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Department:"})," ",a.hospitalDepartment]})]})]})]})]}),a.notes&&(0,wt.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-yellow-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-sticky-note mr-2"})," Notes"]}),(0,wt.jsx)("div",{className:"bg-white p-3 rounded-md shadow-sm",children:(0,wt.jsx)("p",{className:"text-gray-600 whitespace-pre-line",children:a.notes})})]}),(a.medicalNotes||a.medicalCondition)&&(0,wt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-notes-medical mr-2"})," Medical Information"]}),(0,wt.jsxs)("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[a.medicalCondition&&(0,wt.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Medical Condition:"})," ",a.medicalCondition]}),a.medicalNotes&&(0,wt.jsxs)("div",{className:"mt-2",children:[(0,wt.jsx)("p",{className:"font-medium text-gray-600",children:"Medical Notes:"}),(0,wt.jsx)("p",{className:"text-gray-600 mt-1 whitespace-pre-line",children:a.medicalNotes})]})]})]}),a.appointmentHistory&&a.appointmentHistory.length>0&&(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-history mr-2"})," Appointment History"]}),(0,wt.jsx)("div",{className:"bg-white p-3 rounded-md shadow-sm max-h-48 overflow-y-auto",children:(0,wt.jsx)("ul",{className:"divide-y divide-gray-200",children:a.appointmentHistory.sort(((e,t)=>{var n,r;const a=null!==(n=e.date)&&void 0!==n&&n.seconds?new Date(1e3*e.date.seconds):new Date(e.date||0);return(null!==(r=t.date)&&void 0!==r&&r.seconds?new Date(1e3*t.date.seconds):new Date(t.date||0))-a})).map(((e,t)=>{var n;const r=null!==(n=e.date)&&void 0!==n&&n.seconds?new Date(1e3*e.date.seconds).toLocaleDateString():"string"===typeof e.date?e.date:"Unknown date";return(0,wt.jsxs)("li",{className:"py-2",children:[(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsxs)("span",{className:"font-medium",children:[r," ",e.time||""]}),(0,wt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.status||"scheduled"})]}),(0,wt.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:f(e.purpose)||"No purpose specified"}),e.notes&&(0,wt.jsx)("div",{className:"text-sm italic mt-1 text-gray-500",children:e.notes})]},t)}))})})]})]}),(0,wt.jsxs)("div",{className:"border-t px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3",children:[(0,wt.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200",children:"Close"}),!c&&"cancelled"!==a.status&&"completed"!==a.status&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("button",{onClick:()=>{o(a),r()},className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors duration-200 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-calendar-alt mr-2"}),"Reschedule"]}),(0,wt.jsxs)("button",{onClick:()=>{i(a),r()},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-check-circle mr-2"}),"Complete"]}),(0,wt.jsxs)("button",{onClick:()=>{s(a),r()},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200 flex items-center",children:["                ",(0,wt.jsx)("i",{className:"fas fa-times-circle mr-2"}),"Cancel"]})]})]})]})})};n(318);function sr(e,t){return function(){return e.apply(t,arguments)}}const{toString:ir}=Object.prototype,{getPrototypeOf:or}=Object,{iterator:lr,toStringTag:cr}=Symbol,dr=(ur=Object.create(null),e=>{const t=ir.call(e);return ur[t]||(ur[t]=t.slice(8,-1).toLowerCase())});var ur;const hr=e=>(e=e.toLowerCase(),t=>dr(t)===e),pr=e=>t=>typeof t===e,{isArray:mr}=Array,fr=pr("undefined");const gr=hr("ArrayBuffer");const vr=pr("string"),yr=pr("function"),xr=pr("number"),br=e=>null!==e&&"object"===typeof e,wr=e=>{if("object"!==dr(e))return!1;const t=or(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(cr in e)&&!(lr in e)},Nr=hr("Date"),jr=hr("File"),Er=hr("Blob"),Ar=hr("FileList"),Sr=hr("URLSearchParams"),[Ir,_r,Tr,Cr]=["ReadableStream","Request","Response","Headers"].map(hr);function Dr(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let i;for(n=0;n<s;n++)i=r[n],t.call(null,e[i],i,e)}}function kr(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const Pr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Rr=e=>!fr(e)&&e!==Pr;const Or=(Lr="undefined"!==typeof Uint8Array&&or(Uint8Array),e=>Lr&&e instanceof Lr);var Lr;const Mr=hr("HTMLFormElement"),Fr=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Ur=hr("RegExp"),Vr=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Dr(n,((n,a)=>{let s;!1!==(s=t(n,a,e))&&(r[a]=s||n)})),Object.defineProperties(e,r)};const qr=hr("AsyncFunction"),zr=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],Pr.addEventListener("message",(e=>{let{source:t,data:a}=e;t===Pr&&a===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),Pr.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,yr(Pr.postMessage)),Br="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Pr):"undefined"!==typeof process&&process.nextTick||zr,Jr={isArray:mr,isArrayBuffer:gr,isBuffer:function(e){return null!==e&&!fr(e)&&null!==e.constructor&&!fr(e.constructor)&&yr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||yr(e.append)&&("formdata"===(t=dr(e))||"object"===t&&yr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&gr(e.buffer),t},isString:vr,isNumber:xr,isBoolean:e=>!0===e||!1===e,isObject:br,isPlainObject:wr,isReadableStream:Ir,isRequest:_r,isResponse:Tr,isHeaders:Cr,isUndefined:fr,isDate:Nr,isFile:jr,isBlob:Er,isRegExp:Ur,isFunction:yr,isStream:e=>br(e)&&yr(e.pipe),isURLSearchParams:Sr,isTypedArray:Or,isFileList:Ar,forEach:Dr,merge:function e(){const{caseless:t}=Rr(this)&&this||{},n={},r=(r,a)=>{const s=t&&kr(n,a)||a;wr(n[s])&&wr(r)?n[s]=e(n[s],r):wr(r)?n[s]=e({},r):mr(r)?n[s]=r.slice():n[s]=r};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&Dr(arguments[a],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Dr(t,((t,r)=>{n&&yr(t)?e[r]=sr(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&or(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:dr,kindOfTest:hr,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(mr(e))return e;let t=e.length;if(!xr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[lr]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Mr,hasOwnProperty:Fr,hasOwnProp:Fr,reduceDescriptors:Vr,freezeMethods:e=>{Vr(e,((t,n)=>{if(yr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];yr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return mr(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:kr,global:Pr,isContextDefined:Rr,isSpecCompliantForm:function(e){return!!(e&&yr(e.append)&&"FormData"===e[cr]&&e[lr])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(br(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const a=mr(e)?[]:{};return Dr(e,((e,t)=>{const s=n(e,r+1);!fr(s)&&(a[t]=s)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:qr,isThenable:e=>e&&(br(e)||yr(e))&&yr(e.then)&&yr(e.catch),setImmediate:zr,asap:Br,isIterable:e=>null!=e&&yr(e[lr])};function Hr(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Jr.inherits(Hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Jr.toJSONObject(this.config),code:this.code,status:this.status}}});const Gr=Hr.prototype,Wr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Wr[e]={value:e}})),Object.defineProperties(Hr,Wr),Object.defineProperty(Gr,"isAxiosError",{value:!0}),Hr.from=(e,t,n,r,a,s)=>{const i=Object.create(Gr);return Jr.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Hr.call(i,e.message,t,n,r,a),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const Yr=Hr;function Kr(e){return Jr.isPlainObject(e)||Jr.isArray(e)}function Qr(e){return Jr.endsWith(e,"[]")?e.slice(0,-2):e}function Xr(e,t,n){return e?e.concat(t).map((function(e,t){return e=Qr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Zr=Jr.toFlatObject(Jr,{},null,(function(e){return/^is[A-Z]/.test(e)}));const $r=function(e,t,n){if(!Jr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Jr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Jr.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,s=n.dots,i=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Jr.isSpecCompliantForm(t);if(!Jr.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Jr.isDate(e))return e.toISOString();if(!o&&Jr.isBlob(e))throw new Yr("Blob is not supported. Use a Buffer instead.");return Jr.isArrayBuffer(e)||Jr.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"===typeof e)if(Jr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Jr.isArray(e)&&function(e){return Jr.isArray(e)&&!e.some(Kr)}(e)||(Jr.isFileList(e)||Jr.endsWith(n,"[]"))&&(o=Jr.toArray(e)))return n=Qr(n),o.forEach((function(e,r){!Jr.isUndefined(e)&&null!==e&&t.append(!0===i?Xr([n],r,s):null===i?n:n+"[]",l(e))})),!1;return!!Kr(e)||(t.append(Xr(a,n,s),l(e)),!1)}const d=[],u=Object.assign(Zr,{defaultVisitor:c,convertValue:l,isVisitable:Kr});if(!Jr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Jr.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),Jr.forEach(n,(function(n,s){!0===(!(Jr.isUndefined(n)||null===n)&&a.call(t,n,Jr.isString(s)?s.trim():s,r,u))&&e(n,r?r.concat(s):[s])})),d.pop()}}(e),t};function ea(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ta(e,t){this._pairs=[],e&&$r(e,this,t)}const na=ta.prototype;na.append=function(e,t){this._pairs.push([e,t])},na.toString=function(e){const t=e?function(t){return e.call(this,t,ea)}:ea;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ra=ta;function aa(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sa(e,t,n){if(!t)return e;const r=n&&n.encode||aa;Jr.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(s=a?a(t,n):Jr.isURLSearchParams(t)?t.toString():new ra(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ia=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Jr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},oa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},la={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ra,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ca="undefined"!==typeof window&&"undefined"!==typeof document,da="object"===typeof navigator&&navigator||void 0,ua=ca&&(!da||["ReactNative","NativeScript","NS"].indexOf(da.product)<0),ha="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pa=ca&&window.location.href||"http://localhost",ma=(0,i.A)((0,i.A)({},e),la);const fa=function(e){function t(e,n,r,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&Jr.isArray(r)?r.length:s,o)return Jr.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!i;r[s]&&Jr.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],a)&&Jr.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let s;for(r=0;r<a;r++)s=n[r],t[s]=e[s];return t}(r[s])),!i}if(Jr.isFormData(e)&&Jr.isFunction(e.entries)){const n={};return Jr.forEachEntry(e,((e,r)=>{t(function(e){return Jr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const ga={transitional:oa,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=Jr.isObject(e);a&&Jr.isHTMLForm(e)&&(e=new FormData(e));if(Jr.isFormData(e))return r?JSON.stringify(fa(e)):e;if(Jr.isArrayBuffer(e)||Jr.isBuffer(e)||Jr.isStream(e)||Jr.isFile(e)||Jr.isBlob(e)||Jr.isReadableStream(e))return e;if(Jr.isArrayBufferView(e))return e.buffer;if(Jr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $r(e,new ma.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ma.isNode&&Jr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Jr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $r(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(Jr.isString(e))try{return(t||JSON.parse)(e),Jr.trim(e)}catch(du){if("SyntaxError"!==du.name)throw du}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ga.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Jr.isResponse(e)||Jr.isReadableStream(e))return e;if(e&&Jr.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(du){if(n){if("SyntaxError"===du.name)throw Yr.from(du,Yr.ERR_BAD_RESPONSE,this,null,this.response);throw du}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Jr.forEach(["delete","get","head","post","put","patch"],(e=>{ga.headers[e]={}}));const va=ga,ya=Jr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xa=Symbol("internals");function ba(e){return e&&String(e).trim().toLowerCase()}function wa(e){return!1===e||null==e?e:Jr.isArray(e)?e.map(wa):String(e)}function Na(e,t,n,r,a){return Jr.isFunction(r)?r.call(this,t,n):(a&&(t=n),Jr.isString(t)?Jr.isString(r)?-1!==t.indexOf(r):Jr.isRegExp(r)?r.test(t):void 0:void 0)}class ja{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=ba(t);if(!a)throw new Error("header name must be a non-empty string");const s=Jr.findKey(r,a);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=wa(e))}const s=(e,t)=>Jr.forEach(e,((e,n)=>a(e,n,t)));if(Jr.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Jr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&ya[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Jr.isObject(e)&&Jr.isIterable(e)){let n,r,a={};for(const t of e){if(!Jr.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?Jr.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=ba(e)){const n=Jr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Jr.isFunction(t))return t.call(this,e,n);if(Jr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ba(e)){const n=Jr.findKey(this,e);return!(!n||void 0===this[n]||t&&!Na(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=ba(e)){const a=Jr.findKey(n,e);!a||t&&!Na(0,n[a],a,t)||(delete n[a],r=!0)}}return Jr.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!Na(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return Jr.forEach(this,((r,a)=>{const s=Jr.findKey(n,a);if(s)return t[s]=wa(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();i!==a&&delete t[a],t[i]=wa(r),n[i]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Jr.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Jr.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[xa]=this[xa]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=ba(e);t[r]||(!function(e,t){const n=Jr.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return Jr.isArray(e)?e.forEach(r):r(e),this}}ja.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Jr.reduceDescriptors(ja.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Jr.freezeMethods(ja);const Ea=ja;function Aa(e,t){const n=this||va,r=t||n,a=Ea.from(r.headers);let s=r.data;return Jr.forEach(e,(function(e){s=e.call(n,s,a.normalize(),t?t.status:void 0)})),a.normalize(),s}function Sa(e){return!(!e||!e.__CANCEL__)}function Ia(e,t,n){Yr.call(this,null==e?"canceled":e,Yr.ERR_CANCELED,t,n),this.name="CanceledError"}Jr.inherits(Ia,Yr,{__CANCEL__:!0});const _a=Ia;function Ta(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Yr("Request failed with status code "+n.status,[Yr.ERR_BAD_REQUEST,Yr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ca=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];a||(a=l),n[s]=o,r[s]=l;let d=i,u=0;for(;d!==s;)u+=n[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Da=function(e,t){let n,r,a=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(n=l,r||(r=setTimeout((()=>{r=null,i(n)}),s-t)))},()=>n&&i(n)]},ka=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=Ca(50,250);return Da((n=>{const s=n.loaded,i=n.lengthComputable?n.total:void 0,o=s-r,l=a(o);r=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},Pa=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ra=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jr.asap((()=>e(...n)))},Oa=ma.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ma.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ma.origin),ma.navigator&&/(msie|trident)/i.test(ma.navigator.userAgent)):()=>!0,La=ma.hasStandardBrowserEnv?{write(e,t,n,r,a,s){const i=[e+"="+encodeURIComponent(t)];Jr.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Jr.isString(r)&&i.push("path="+r),Jr.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ma(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Fa=e=>e instanceof Ea?(0,i.A)({},e):e;function Ua(e,t){t=t||{};const n={};function r(e,t,n,r){return Jr.isPlainObject(e)&&Jr.isPlainObject(t)?Jr.merge.call({caseless:r},e,t):Jr.isPlainObject(t)?Jr.merge({},t):Jr.isArray(t)?t.slice():t}function a(e,t,n,a){return Jr.isUndefined(t)?Jr.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function s(e,t){if(!Jr.isUndefined(t))return r(void 0,t)}function i(e,t){return Jr.isUndefined(t)?Jr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,a,s){return s in t?r(n,a):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>a(Fa(e),Fa(t),0,!0)};return Jr.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||a,i=s(e[r],t[r],r);Jr.isUndefined(i)&&s!==o||(n[r]=i)})),n}const Va=e=>{const t=Ua({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Ea.from(o),t.url=sa(Ma(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Jr.isFormData(r))if(ma.hasStandardBrowserEnv||ma.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(ma.hasStandardBrowserEnv&&(a&&Jr.isFunction(a)&&(a=a(t)),a||!1!==a&&Oa(t.url))){const e=s&&i&&La.read(i);e&&o.set(s,e)}return t},qa="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Va(e);let a=r.data;const s=Ea.from(r.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=r;function m(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=Ea.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Ta((function(e){t(e),m()}),(function(e){n(e),m()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Yr("Request aborted",Yr.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new Yr("Network Error",Yr.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||oa;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Yr(t,a.clarifyTimeoutError?Yr.ETIMEDOUT:Yr.ECONNABORTED,e,f)),f=null},void 0===a&&s.setContentType(null),"setRequestHeader"in f&&Jr.forEach(s.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),Jr.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),p&&([l,d]=ka(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=ka(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{f&&(n(!t||t.type?new _a(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===ma.protocols.indexOf(v)?n(new Yr("Unsupported protocol "+v+":",Yr.ERR_BAD_REQUEST,e)):f.send(a||null)}))},za=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Yr?t:new _a(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,a(new Yr("timeout ".concat(t," of ms exceeded"),Yr.ETIMEDOUT))}),t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:o}=r;return o.unsubscribe=()=>Jr.asap(i),o}};function Ba(e,t){this.v=e,this.k=t}function Ja(e){return function(){return new Ha(e.apply(this,arguments))}}function Ha(e){var t,n;function r(t,n){try{var s=e[t](n),i=s.value,o=i instanceof Ba;Promise.resolve(o?i.v:i).then((function(n){if(o){var l="return"===t?"return":"next";if(!i.k||n.done)return r(l,n);n=e[l](n).value}a(s.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(s,i){var o={key:e,arg:a,resolve:s,reject:i,next:null};n?n=n.next=o:(t=n=o,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function Ga(e){return new Ba(e,0)}function Wa(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new Ba(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Ya(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Ka(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Ka(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Ka=function(e){this.s=e,this.n=e.next},Ka.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Ka(e)}Ha.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ha.prototype.next=function(e){return this._invoke("next",e)},Ha.prototype.throw=function(e){return this._invoke("throw",e)},Ha.prototype.return=function(e){return this._invoke("return",e)};const Qa=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},Xa=function(){var e=Ja((function*(e,t){var n,r=!1,a=!1;try{for(var s,i=Ya(Za(e));r=!(s=yield Ga(i.next())).done;r=!1){const e=s.value;yield*Wa(Ya(Qa(e,t)))}}catch(o){a=!0,n=o}finally{try{r&&null!=i.return&&(yield Ga(i.return()))}finally{if(a)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Za=function(){var e=Ja((function*(e){if(e[Symbol.asyncIterator])return void(yield*Wa(Ya(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Ga(t.read());if(e)break;yield n}}finally{yield Ga(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),$a=(e,t,n,r)=>{const a=Xa(e,t);let s,i=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return o(),void e.close();let s=r.byteLength;if(n){let e=i+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},es="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ts=es&&"function"===typeof ReadableStream,ns=es&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),rs=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(du){return!1}},as=ts&&rs((()=>{let e=!1;const t=new Request(ma.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ss=ts&&rs((()=>Jr.isReadableStream(new Response("").body))),is={stream:ss&&(e=>e.body)};var os;es&&(os=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!is[e]&&(is[e]=Jr.isFunction(os[e])?t=>t[e]():(t,n)=>{throw new Yr("Response type '".concat(e,"' is not supported"),Yr.ERR_NOT_SUPPORT,n)})})));const ls=async(e,t)=>{const n=Jr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Jr.isBlob(e))return e.size;if(Jr.isSpecCompliantForm(e)){const t=new Request(ma.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Jr.isArrayBufferView(e)||Jr.isArrayBuffer(e)?e.byteLength:(Jr.isURLSearchParams(e)&&(e+=""),Jr.isString(e)?(await ns(e)).byteLength:void 0)})(t):n},cs=es&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:p}=Va(e);d=d?(d+"").toLowerCase():"text";let m,f=za([a,s&&s.toAbortSignal()],o);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(c&&as&&"get"!==n&&"head"!==n&&0!==(v=await ls(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Jr.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Pa(v,ka(Ra(c)));r=$a(n.body,65536,e,t)}}Jr.isString(h)||(h=h?"include":"omit");const a="credentials"in Request.prototype;m=new Request(t,(0,i.A)((0,i.A)({},p),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:a?h:void 0}));let s=await fetch(m);const o=ss&&("stream"===d||"response"===d);if(ss&&(l||o&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=Jr.toFiniteNumber(s.headers.get("content-length")),[n,r]=l&&Pa(t,ka(Ra(l),!0))||[];s=new Response($a(s.body,65536,n,(()=>{r&&r(),g&&g()})),e)}d=d||"text";let y=await is[Jr.findKey(is,d)||"text"](s,e);return!o&&g&&g(),await new Promise(((t,n)=>{Ta(t,n,{data:y,headers:Ea.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:m})}))}catch(y){if(g&&g(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Yr("Network Error",Yr.ERR_NETWORK,e,m),{cause:y.cause||y});throw Yr.from(y,y&&y.code,e,m)}}),ds={http:null,xhr:qa,fetch:cs};Jr.forEach(ds,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(du){}Object.defineProperty(e,"adapterName",{value:t})}}));const us=e=>"- ".concat(e),hs=e=>Jr.isFunction(e)||null===e||!1===e,ps=e=>{e=Jr.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!hs(n)&&(r=ds[(t=String(n)).toLowerCase()],void 0===r))throw new Yr("Unknown adapter '".concat(t,"'"));if(r)break;a[t||"#"+s]=r}if(!r){const e=Object.entries(a).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(us).join("\n"):" "+us(e[0]):"as no adapter specified";throw new Yr("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function ms(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _a(null,e)}function fs(e){ms(e),e.headers=Ea.from(e.headers),e.data=Aa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ps(e.adapter||va.adapter)(e).then((function(t){return ms(e),t.data=Aa.call(e,e.transformResponse,t),t.headers=Ea.from(t.headers),t}),(function(t){return Sa(t)||(ms(e),t&&t.response&&(t.response.data=Aa.call(e,e.transformResponse,t.response),t.response.headers=Ea.from(t.response.headers))),Promise.reject(t)}))}const gs="1.9.0",vs={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{vs[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ys={};vs.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,s)=>{if(!1===e)throw new Yr(r(a," has been removed"+(t?" in "+t:"")),Yr.ERR_DEPRECATED);return t&&!ys[a]&&(ys[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,s)}},vs.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const xs={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Yr("options must be an object",Yr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const s=r[a],i=t[s];if(i){const t=e[s],n=void 0===t||i(t,s,e);if(!0!==n)throw new Yr("option "+s+" must be "+n,Yr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Yr("Unknown option "+s,Yr.ERR_BAD_OPTION)}},validators:vs},bs=xs.validators;class ws{constructor(e){this.defaults=e||{},this.interceptors={request:new ia,response:new ia}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(du){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ua(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&xs.assertOptions(n,{silentJSONParsing:bs.transitional(bs.boolean),forcedJSONParsing:bs.transitional(bs.boolean),clarifyTimeoutError:bs.transitional(bs.boolean)},!1),null!=r&&(Jr.isFunction(r)?t.paramsSerializer={serialize:r}:xs.assertOptions(r,{encode:bs.function,serialize:bs.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xs.assertOptions(t,{baseUrl:bs.spelling("baseURL"),withXsrfToken:bs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&Jr.merge(a.common,a[t.method]);a&&Jr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=Ea.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[fs.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=fs.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return sa(Ma((e=Ua(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Jr.forEach(["delete","get","head","options"],(function(e){ws.prototype[e]=function(t,n){return this.request(Ua(n||{},{method:e,url:t,data:(n||{}).data}))}})),Jr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(Ua(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ws.prototype[e]=t(),ws.prototype[e+"Form"]=t(!0)}));const Ns=ws;class js{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new _a(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new js((function(t){e=t}));return{token:t,cancel:e}}}const Es=js;const As={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(As).forEach((e=>{let[t,n]=e;As[n]=t}));const Ss=As;const Is=function e(t){const n=new Ns(t),r=sr(Ns.prototype.request,n);return Jr.extend(r,Ns.prototype,n,{allOwnKeys:!0}),Jr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ua(t,n))},r}(va);Is.Axios=Ns,Is.CanceledError=_a,Is.CancelToken=Es,Is.isCancel=Sa,Is.VERSION=gs,Is.toFormData=$r,Is.AxiosError=Yr,Is.Cancel=Is.CanceledError,Is.all=function(e){return Promise.all(e)},Is.spread=function(e){return function(t){return e.apply(null,t)}},Is.isAxiosError=function(e){return Jr.isObject(e)&&!0===e.isAxiosError},Is.mergeConfig=Ua,Is.AxiosHeaders=Ea,Is.formToJSON=e=>fa(Jr.isHTMLForm(e)?new FormData(e):e),Is.getAdapter=ps,Is.HttpStatusCode=Ss,Is.default=Is;const _s=Is,Ts="datajz3sv",Cs=async(e,t,n)=>{const r=t||"Hospitals Licenses",a=new FormData;a.append("file",e),a.append("cloud_name",Ts),a.append("api_key","328386383747649"),a.append("upload_preset","Hospitals"),a.append("folder",r);try{if(n&&"function"===typeof n){return(await _s.post("https://api.cloudinary.com/v1_1/".concat(Ts,"/image/upload"),a,{onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total);n(t)}})).data.secure_url}return(await _s.post("https://api.cloudinary.com/v1_1/".concat(Ts,"/image/upload"),a)).data.secure_url}catch(s){throw console.error("Error uploading file:",s),s}},Ds=["image/jpeg","image/jpg","image/png"],ks="idle",Ps="loading",Rs="uploading",Os="saving",Ls="retrying",Ms=e=>{let{message:t="Loading..."}=e;return(0,wt.jsxs)("div",{className:"flex flex-col justify-center items-center py-8",children:[(0,wt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#973131] mb-4"}),(0,wt.jsx)("p",{className:"text-gray-600 text-sm",children:t})]})},Fs=e=>{let{error:t,onRetry:n}=e;return(0,wt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,wt.jsxs)("div",{className:"flex items-start",children:[(0,wt.jsx)("div",{className:"flex-shrink-0",children:(0,wt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,wt.jsxs)("div",{className:"ml-3 flex-1",children:[(0,wt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,wt.jsx)("p",{className:"mt-1 text-sm text-red-700",children:t}),n&&(0,wt.jsx)("button",{onClick:n,className:"mt-2 text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200 transition-colors",children:"Try Again"})]})]})})},Us=e=>{let{appointment:t}=e;return(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,wt.jsx)(Jt,{className:"mr-2 text-gray-600"}),"Appointment Information"]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Donor Name"}),(0,wt.jsx)("p",{className:"text-gray-900 font-medium",children:t.patientName||t.donorName||t.userName||"Unknown Donor"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Organ to Donate"}),(0,wt.jsx)("p",{className:"text-gray-900 font-medium",children:t.organType||t.organToDonate||"Not specified"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Appointment Date"}),(0,wt.jsx)("p",{className:"text-gray-900 font-medium",children:(e=>{if(!e)return"Not specified";try{return"function"===typeof e.toDate?e.toDate().toLocaleDateString():new Date(e).toLocaleDateString()}catch(t){return"Invalid date"}})(t.date)})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Doctor"}),(0,wt.jsx)("p",{className:"text-gray-900 font-medium",children:t.doctorName||"Not assigned"})]})]})]})},Vs=e=>{let{selectedFile:t,onFileChange:n,existingDocument:r,uploadProgress:a,isUploading:s}=e;return r?(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Attached Medical Document"}),(0,wt.jsx)("div",{className:"border-2 border-gray-300 rounded-md px-6 py-8 text-center bg-gray-50",children:r.hasAttachment?(0,wt.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,wt.jsx)(Wt,{className:"text-red-500",size:24}),(0,wt.jsxs)("div",{className:"text-left",children:[(0,wt.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:r.fileName||"Medical document"}),(0,wt.jsxs)("p",{className:"text-xs text-blue-600 mt-1 flex items-center",children:[(0,wt.jsx)(Vt,{className:"mr-1"}),"Document submitted for review"]})]})]}):(0,wt.jsxs)("div",{children:[(0,wt.jsx)(Yt,{className:"mx-auto text-gray-400 text-3xl mb-2"}),(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"No document was attached"})]})})]}):(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Attach Medical Document Image (Optional)"}),(0,wt.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-md px-6 py-8 text-center cursor-pointer hover:border-[#973131] transition-colors",children:[(0,wt.jsx)("input",{type:"file",id:"document-file",className:"hidden",accept:Ds.join(","),onChange:e=>{const t=e.target.files[0];if(t)return Ds.includes(t.type)?t.size>1572864?(Jn.error("File size must be less than 1.5MB for optimal upload reliability"),void(e.target.value="")):void n(t):(Jn.error("Please select a valid image file (JPG, JPEG, PNG)"),void(e.target.value=""))},disabled:s,"aria-label":"Upload medical document image"}),(0,wt.jsx)("label",{htmlFor:"document-file",className:"cursor-pointer",children:t?(0,wt.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(e=>{if(!e)return(0,wt.jsx)(Yt,{className:"text-gray-500",size:24});const t=e.type;return t.includes("image")?(0,wt.jsx)(Ht,{className:"text-blue-500",size:24}):t.includes("pdf")?(0,wt.jsx)(Wt,{className:"text-red-500",size:24}):(0,wt.jsx)(Yt,{className:"text-gray-500",size:24})})(t),(0,wt.jsxs)("div",{className:"text-left w-full max-w-xs",children:[(0,wt.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),(0,wt.jsxs)("p",{className:"text-xs text-gray-500",children:[(i=t.size,(i/1048576).toFixed(2))," MB"]}),s&&a>0&&(0,wt.jsxs)("div",{className:"mt-2 w-full",children:[(0,wt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,wt.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(a,"%")}})}),(0,wt.jsxs)("p",{className:"text-xs text-right mt-1 text-blue-600",children:[a,"% uploaded"]})]})]})]}):(0,wt.jsxs)("div",{children:[(0,wt.jsx)(Yt,{className:"mx-auto text-gray-400 text-3xl mb-2"}),(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload or drag and drop"}),"              ",(0,wt.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"JPG, JPEG, PNG images only (Max 1.5MB for optimal reliability)"})]})})]})]});var i},qs=e=>{let{medicalStatus:t,onStatusChange:n,notes:r,onNotesChange:a,isReadOnly:s}=e;return(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("label",{className:"block text-gray-700 font-medium mb-3",children:"Medical Status Assessment *"}),(0,wt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("input",{id:"medically_fit",name:"medical_status",type:"radio",value:"medically_fit",checked:"medically_fit"===t,onChange:()=>n("medically_fit"),disabled:s,className:"h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300"}),(0,wt.jsx)("label",{htmlFor:"medically_fit",className:"ml-2 block text-sm font-medium ".concat("medically_fit"===t?"text-green-700":"text-gray-700"),children:"Medically Fit"})]}),(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("input",{id:"medically_unfit",name:"medical_status",type:"radio",value:"medically_unfit",checked:"medically_unfit"===t,onChange:()=>n("medically_unfit"),disabled:s,className:"h-5 w-5 text-red-600 focus:ring-red-500 border-gray-300"}),(0,wt.jsx)("label",{htmlFor:"medically_unfit",className:"ml-2 block text-sm font-medium ".concat("medically_unfit"===t?"text-red-700":"text-gray-700"),children:"Medically Unfit"})]})]})]}),(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"notes",children:"Medical Notes"}),(0,wt.jsx)("textarea",{id:"notes",className:"w-full px-4 py-2 border border-gray-300 rounded-md transition-colors ".concat(s?"bg-gray-50 text-gray-700":"focus:outline-none focus:ring-2 focus:ring-[#973131] focus:border-transparent"),rows:"4",placeholder:s?"No notes provided":"Add any relevant medical notes...",value:r,onChange:e=>a(e.target.value),readOnly:s,"aria-describedby":"notes-help"}),(0,wt.jsx)("p",{id:"notes-help",className:"text-xs text-gray-500 mt-1",children:s?"":"Optional: Add detailed observations or recommendations"})]})]})},zs=e=>{let{isOpen:n,onClose:r,appointmentId:a,onDocumentUploaded:s=null}=e;const{user:o}=(0,t.useContext)(Nt),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)("medically_fit"),[g,v]=(0,t.useState)(""),[y,x]=(0,t.useState)(0),[b,w]=(0,t.useState)(ks),[N,j]=(0,t.useState)(null),E=b===Ps,A=b===Rs,S=b===Os,I=b===Ls,_=A||S||I,T=!!d,C=(0,t.useCallback)((()=>{c(null),u(null),p(null),f("medically_fit"),v(""),x(0),w(ks),j(null)}),[]),D=(0,t.useCallback)((async()=>{if(a)try{w(Ps),j(null),console.log("Fetching appointment details for ID:",a);let e=(0,bt.doc)(xt.db,"donorAppointments",a),t=await(0,bt.x7)(e);if(console.log("Donor appointments check:",t.exists()),t.exists()||(e=(0,bt.doc)(xt.db,"appointments",a),t=await(0,bt.x7)(e),console.log("General appointments check:",t.exists())),!t.exists())throw console.log("No appointment found in either collection"),new Error("Appointment not found");const n=(0,i.A)({id:t.id},t.data());console.log("Found appointment data:",n);const r=(0,bt.P)((0,bt.rJ)(xt.db,"donorUploadDocuments"),(0,bt._M)("appointmentId","==",a)),s=await(0,bt.GG)(r);if(!s.empty){const e=s.docs[0].data(),t=(0,i.A)({id:s.docs[0].id},e);u(t),f(e.medicalStatus||"medically_fit"),v(e.notes||""),Jn.info("Viewing previously submitted medical documents")}c(n)}catch(e){console.error("Error fetching appointment:",e),j(e.message||"Failed to load appointment details")}finally{w(ks)}else j("No appointment ID provided")}),[a]),k=(0,t.useCallback)((async e=>new Promise((t=>{const n=document.createElement("canvas"),r=n.getContext("2d"),a=new Image;a.onload=()=>{const e=1200,s=1200;let{width:i,height:o}=a;i>o?i>e&&(o=o*e/i,i=e):o>s&&(i=i*s/o,o=s),n.width=i,n.height=o,r.drawImage(a,0,0,i,o),n.toBlob(t,"image/jpeg",.8)},a.src=URL.createObjectURL(e)}))),[]),P=(0,t.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{let n=e;return e.type.startsWith("image/")&&(console.log("Compressing image for better upload performance..."),n=await k(e),n=new File([n],e.name,{type:"image/jpeg"})),new Promise(((r,a)=>{const s=setTimeout((()=>{a(new Error("Upload timeout - please try again with a smaller file"))}),12e4);Cs(n,"medical-documents",(e=>{x(e),console.log("Upload progress: ".concat(e,"%"))})).then((t=>{clearTimeout(s),console.log("Upload successful!"),r({url:t,type:n.type,originalFileName:e.name})})).catch((async n=>{var i;if(clearTimeout(s),console.error("Upload failed:",n),t<3&&("NETWORK_ERROR"===n.code||n.message.includes("timeout")||n.message.includes("failed")||(null===(i=n.response)||void 0===i?void 0:i.status)>=500)){console.log("Retrying upload (attempt ".concat(t+1,"/").concat(3,")...")),w(Ls),Jn.info("Upload failed, retrying... (".concat(t+1,"/").concat(3,")")),await new Promise((e=>setTimeout(e,2e3*(t+1))));try{const n=await P(e,t+1);r(n)}catch(o){a(o)}}else a(new Error("Upload failed: ".concat(n.message||"Please check your internet connection and try again")))}))}))}catch(N){throw console.error("Error in upload process:",N),new Error("Upload preparation failed: ".concat(N.message))}}),[k]),R=(0,t.useCallback)((async()=>{if(l){if(!m)return j("Please select a medical status"),void Jn.error("Please select a medical status");if(d)r();else try{var e,t,n;j(null);let i=null;h&&(console.log("Starting file upload to Cloudinary..."),w(Rs),Jn.info("Uploading file to Cloudinary... Please wait"),i=await P(h),console.log("File upload to Cloudinary completed successfully"),Jn.success("File uploaded successfully to Cloudinary!")),w(Os),Jn.info("Saving document details...");const c={appointmentId:a,donorId:l.donorId||l.patientId||l.userId,donorName:l.patientName||l.donorName||l.userName||"Unknown Donor",organToDonate:l.organType||l.organToDonate||"Not specified",appointmentDate:l.date,medicalStatus:m,notes:g.trim(),createdAt:(0,bt.serverTimestamp)(),doctorId:(null===o||void 0===o?void 0:o.uid)||l.doctorId||null,doctorName:(null===o||void 0===o?void 0:o.displayName)||(null===o||void 0===o?void 0:o.firstName)||(null===o||void 0===o?void 0:o.email)||l.doctorName||"Unknown Doctor",hasAttachment:!!h,fileName:(null===(e=i)||void 0===e?void 0:e.originalFileName)||(null===h||void 0===h?void 0:h.name)||null,fileUrl:(null===(t=i)||void 0===t?void 0:t.url)||null,fileType:(null===(n=i)||void 0===n?void 0:n.type)||null,status:"pending_admin_review"};console.log("Saving document to Firestore...",c);const d=await(0,bt.gS)((0,bt.rJ)(xt.db,"donorUploadDocuments"),c);await(0,bt.gS)((0,bt.rJ)(xt.db,"adminNotifications"),{type:"medical_document_review",title:"New Medical Document for Review",message:"Dr. ".concat(c.doctorName," submitted medical assessment for ").concat(c.donorName," (").concat(c.organToDonate,")"),documentId:d.id,appointmentId:a,donorName:c.donorName,doctorName:c.doctorName,medicalStatus:c.medicalStatus,isRead:!1,createdAt:(0,bt.serverTimestamp)(),priority:"medically_unfit"===c.medicalStatus?"high":"normal"}),console.log("Document saved successfully with ID:",d.id),Jn.success("Medical document successfully sent to admin for final review!"),s&&s(a),r()}catch(i){console.error("Error in submission process:",i);const e=i.message||"Failed to submit document";j(e),Jn.error(e),b!==Rs&&b!==Ls||x(0)}finally{w(ks)}}else Jn.error("No appointment data found")}),[l,m,d,h,a,g,o,P,s,r,b]);(0,t.useEffect)((()=>{n&&a?D():n||C()}),[n,a,D,C]);const O=(0,t.useCallback)((()=>{_?window.confirm("Upload in progress. Are you sure you want to close?")&&r():r()}),[_,r]),L=(0,t.useCallback)((e=>{p(e),j(null)}),[]),M=(0,t.useCallback)((e=>{f(e),j(null)}),[]),F=(0,t.useCallback)((e=>{v(e)}),[]),U=(0,t.useCallback)((()=>{D()}),[D]);return n?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[95vh] overflow-hidden flex flex-col",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center border-b px-6 py-4 bg-white sticky top-0 z-10",children:[(0,wt.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:d?"View Medical Document Details":"Medical Document Review"}),(0,wt.jsx)("button",{onClick:O,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100 transition-colors",disabled:_,"aria-label":"Close modal",children:(0,wt.jsx)($t,{size:20})})]}),(0,wt.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:E?(0,wt.jsx)(Ms,{message:"Loading appointment details..."}):N?(0,wt.jsx)(Fs,{error:N,onRetry:U}):l?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(Us,{appointment:l}),(0,wt.jsx)(Vs,{selectedFile:h,onFileChange:L,existingDocument:d,uploadProgress:y,isUploading:A}),(0,wt.jsx)(qs,{medicalStatus:m,onStatusChange:M,notes:g,onNotesChange:F,isReadOnly:T})]}):null}),(0,wt.jsxs)("div",{className:"border-t px-6 py-4 bg-gray-50 flex justify-between items-center sticky bottom-0",children:[(0,wt.jsx)("button",{onClick:O,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",disabled:_,children:_?"Processing...":"Close"}),d?(0,wt.jsxs)("div",{className:"text-sm text-green-600 flex items-center",children:[(0,wt.jsx)(Vt,{className:"mr-2"}),"Already submitted for admin review"]}):(0,wt.jsxs)("button",{onClick:R,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",disabled:E||_||!m,children:["              ",A?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Uploading (",y,"%)..."]}):I?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Retrying upload..."]}):S?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Submitting..."]}):"Send For Final Review to Admin"]})]})]})}):null},Bs=e=>{let{appointments:n,onEdit:r,onCancel:a,onComplete:s,onReschedule:o,userRole:l,viewDetailsOnly:c=!1,onViewDetails:d=null,currentUserId:u=null,isDonorView:h=!1}=e;const[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)("all"),[x,b]=(0,t.useState)(!1),[w,N]=(0,t.useState)(null),[j,E]=(0,t.useState)({}),[A,S]=(0,t.useState)(!0),[I,_]=(0,t.useState)(!1),[T,C]=(0,t.useState)({}),[D,k]=(0,t.useState)(!0),P="admin"===l||"doctor"===l,R=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n.length||"doctor"!==l&&"admin"!==l)k(!1);else try{k(!0);const t=e?[e]:n.map((e=>e.id)),r=(0,i.A)({},T);for(const e of t){const t=(0,bt.P)((0,bt.rJ)(xt.db,"donorUploadDocuments"),(0,bt._M)("appointmentId","==",e)),n=await(0,bt.GG)(t);r[e]=!n.empty}C(r)}catch(t){console.error("Error checking document status:",t)}finally{k(!1)}};(0,t.useEffect)((()=>{R()}),[n,l]),(0,t.useEffect)((()=>{if(!P&&u&&n.length>0){const e=n.length,t=n.filter((e=>{const t=e.recipientId||e.donorId||e.patientId||e.userId,n=String(t||"").trim(),r=String(u||"").trim(),a=parseFloat(t),s=parseFloat(u),i=!isNaN(a)&&!isNaN(s)&&a===s;return n===r||i||e.matchCriteria})).length;_(t<e),console.log("Filtering appointments: ".concat(t," visible out of ").concat(e," total"))}else _(!1)}),[n,u,P]);const O=n.filter((e=>{if("all"!==v&&e.status!==v)return!1;if(P)return!0;if(u){const t=e.recipientId||e.donorId||e.patientId||e.userId,n=String(u||"").trim(),r=String(t||"").trim(),a=parseFloat(u),s=parseFloat(t),i=!isNaN(a)&&!isNaN(s)&&a===s;if(e.matchCriteria)return!0;return r===n||i}return!0}));(0,t.useEffect)((()=>{(async()=>{const e={};S(!0);try{const a=[...new Set(n.filter((e=>e.doctorId)).map((e=>e.doctorId)))];if(0===a.length)return void S(!1);for(const n of a)try{const r=(0,bt.rJ)(xt.db,"hospitals"),a=(0,bt.P)(r,(0,bt._M)("userId","==",n)),s=await(0,bt.GG)(a);if(!s.empty){const t=s.docs[0].data();let r="Unknown Doctor",a=t.hospitalName||t.name||"Unknown Hospital";t.doctorName&&(r="Dr. ".concat(t.doctorName),t.doctorSpecialization&&(r+=" (".concat(t.doctorSpecialization,")"))),e[n]={doctorName:r,hospitalName:a};continue}const i=(0,bt.doc)(xt.db,"users",n),o=await(0,bt.x7)(i);if(o.exists()){const r=o.data();let a="Dr. ",s="Unknown Hospital";if(r.firstName&&r.lastName?a+="".concat(r.firstName," ").concat(r.lastName):r.displayName?a+=r.displayName:r.name?a+=r.name:r.fullName?a+=r.fullName:r.email?a+=r.email:a="Doctor Name Not Available",r.hospitalName)s=r.hospitalName;else if(r.hospital){var t;"string"===typeof r.hospital?s=r.hospital:null!==(t=r.hospital)&&void 0!==t&&t.name&&(s=r.hospital.name)}e[n]={doctorName:a,hospitalName:s}}else e[n]={doctorName:"Unknown Doctor",hospitalName:"Unknown Hospital"}}catch(r){console.error("Error fetching doctor info for ".concat(n,":"),r),e[n]={doctorName:"Error loading doctor info",hospitalName:"Error loading hospital info"}}}catch(r){console.error("Error in fetching doctor information:",r)}finally{E(e),S(!1)}})()}),[n]);const L=e=>{console.log("Original appointment data:",e),d?d(e):(m(e),g(!0))};return(0,wt.jsxs)("div",{className:"appointment-list",children:[(0,wt.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,wt.jsxs)("div",{className:"flex space-x-2 px-4 py-2 overflow-x-auto",children:[(0,wt.jsxs)("button",{className:"px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap ".concat("all"===v?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),onClick:()=>y("all"),children:[(0,wt.jsx)("i",{className:"fas fa-list-ul mr-2"}),"All Appointments"]}),(0,wt.jsxs)("button",{className:"px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap ".concat("scheduled"===v?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),onClick:()=>y("scheduled"),children:[(0,wt.jsx)("i",{className:"far fa-calendar-alt mr-2"}),"Scheduled"]}),(0,wt.jsxs)("button",{className:"px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap ".concat("completed"===v?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),onClick:()=>y("completed"),children:[(0,wt.jsx)("i",{className:"fas fa-check-circle mr-2"}),"Completed"]}),(0,wt.jsxs)("button",{className:"px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap ".concat("cancelled"===v?"bg-red-100 text-red-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),onClick:()=>y("cancelled"),children:[(0,wt.jsx)("i",{className:"fas fa-times-circle mr-2"}),"Cancelled"]})]})}),"      ",!P&&u&&(0,wt.jsx)("div",{className:"px-4 py-2 mb-2 rounded text-sm ".concat(I?"bg-blue-50":""),children:(0,wt.jsxs)("span",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-shield-alt mr-2 ".concat(I?"text-blue-600":"text-gray-400")}),(0,wt.jsx)("span",{className:I?"font-medium text-blue-700":"text-gray-500",children:I?"Security filter activated: You can only view your own appointments":"Privacy protection active: You are viewing your appointments only"})]})}),0===O.length?(0,wt.jsxs)("div",{className:"text-center py-10 px-4",children:[(0,wt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,wt.jsx)("i",{className:"far fa-calendar-times text-5xl"})}),(0,wt.jsx)("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No appointments found"}),(0,wt.jsx)("p",{className:"text-gray-500",children:"all"!==v?"There are no ".concat(v," appointments to display."):"No appointments have been scheduled yet."}),!1]}):(0,wt.jsx)("div",{className:"overflow-x-auto",children:(0,wt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:["            ",(0,wt.jsx)("thead",{className:"bg-gray-50",children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-user-alt mr-2"}),"Patient Info"]})}),(0,wt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"far fa-calendar-alt mr-2"}),"Date & Time"]})}),(0,wt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-clipboard-list mr-2"}),"Purpose & Details"]})}),(0,wt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Status"]})}),(0,wt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-hospital-user mr-2"}),"Medical Provider"]})}),(0,wt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-cog mr-2"}),"Actions"]})})]})}),(0,wt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map((e=>{return(0,wt.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>L(e),children:["                  ",(0,wt.jsx)("td",{className:"px-6 py-4",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-full bg-blue-100 text-blue-600",children:(0,wt.jsx)("i",{className:"fas ".concat("donor"===e.type?"fa-hand-holding-heart":"fa-hospital-user")})}),(0,wt.jsxs)("div",{className:"ml-4",children:["                        ",(0,wt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patientName||e.donorName||e.recipientName||"Unknown Patient"}),(0,wt.jsxs)("div",{className:"flex flex-col text-xs text-gray-500 mt-1",children:[(0,wt.jsxs)("span",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-user-tag mr-1"}),e.patientType||e.type||(e.donorId?"Donor":"Recipient")]}),e.bloodType&&(0,wt.jsxs)("span",{className:"flex items-center mt-1",children:[(0,wt.jsx)("i",{className:"fas fa-tint mr-1 text-red-500"}),e.bloodType]}),(e.organType||e.organToDonate)&&(0,wt.jsxs)("span",{className:"flex items-center mt-1",children:[(0,wt.jsx)("i",{className:"fas fa-heartbeat mr-1 text-purple-500"}),e.organType||e.organToDonate]})]})]})]})}),(0,wt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,wt.jsx)("div",{className:"text-sm text-gray-900",children:"string"===typeof e.date?e.date:rr(e.date)}),(0,wt.jsx)("div",{className:"text-sm text-gray-500",children:e.time||"No time specified"})]}),"                  ",(0,wt.jsxs)("td",{className:"px-6 py-4",children:[(0,wt.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:(t=e.purpose,null===t||void 0===t?"N/A":"string"===typeof t||"number"===typeof t||"boolean"===typeof t?t:"object"===typeof t&&null!==t?"patientId"in t&&"patientType"in t&&"purpose"in t&&"existingAppointment"in t?t.purpose||"No purpose specified":JSON.stringify(t):String(t))}),("donor"===e.type||"donor"===e.patientType)&&e.donationReason&&(0,wt.jsxs)("div",{className:"text-xs text-gray-500 mt-1 truncate max-w-xs",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Reason: "}),e.donationReason.length>50?"".concat(e.donationReason.substring(0,50),"..."):e.donationReason]}),("recipient"===e.type||"recipient"===e.patientType)&&e.urgencyLevel&&(0,wt.jsxs)("div",{className:"text-xs mt-1 px-2 py-0.5 rounded-full inline-flex items-center w-fit\n                        ".concat("critical"===e.urgencyLevel?"bg-red-100 text-red-800":"urgent"===e.urgencyLevel?"bg-orange-100 text-orange-800":"moderate"===e.urgencyLevel?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[(0,wt.jsx)("span",{className:"mr-1 h-1.5 w-1.5 rounded-full block\n                          ".concat("critical"===e.urgencyLevel?"bg-red-500":"urgent"===e.urgencyLevel?"bg-orange-500":"moderate"===e.urgencyLevel?"bg-yellow-500":"bg-green-500")}),(0,wt.jsx)("span",{className:"capitalize",children:e.urgencyLevel})]}),e.notes&&(0,wt.jsxs)("div",{className:"text-xs text-blue-600 mt-1 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-sticky-note mr-1"}),"Has notes"]})]}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:[(0,wt.jsx)("span",{className:"mr-1.5 h-2 w-2 rounded-full ".concat("completed"===e.status?"bg-green-500":"cancelled"===e.status?"bg-red-500":"bg-blue-500")}),e.status||"scheduled"]})}),"                  ",(0,wt.jsxs)("td",{className:"px-6 py-4",children:[(0,wt.jsxs)("div",{className:"text-sm text-gray-900 font-medium",children:[(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-user-md text-green-600 mr-2"}),A?(0,wt.jsx)("span",{className:"text-gray-500",children:"Loading..."}):(0,wt.jsx)("span",{className:"font-semibold text-green-700 bg-green-50 px-1 py-0.5 rounded",children:e.doctorId&&j[e.doctorId]?j[e.doctorId].doctorName:e.doctorName?e.doctorName.startsWith("Dr.")?e.doctorName:"Dr. ".concat(e.doctorName):"Not assigned"})]}),e.doctorSpecialization&&(0,wt.jsx)("div",{className:"text-xs text-gray-500 ml-6 mt-1",children:e.doctorSpecialization})]}),(0,wt.jsxs)("div",{className:"text-xs mt-2 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-hospital mr-1 text-purple-600"}),A?(0,wt.jsx)("span",{className:"text-gray-500",children:"Loading..."}):(0,wt.jsx)("span",{className:"truncate max-w-[150px] font-semibold text-purple-700 bg-purple-50 px-1 py-0.5 rounded",children:e.doctorId&&j[e.doctorId]?j[e.doctorId].hospitalName:e.hospitalName||"Not specified"})]}),e.hospitalAddress&&(0,wt.jsxs)("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-map-marker-alt mr-1"}),(0,wt.jsx)("span",{className:"truncate max-w-[150px]",children:e.hospitalAddress.length>30?"".concat(e.hospitalAddress.substring(0,30),"..."):e.hospitalAddress})]})]}),(0,wt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-y-1",children:[(0,wt.jsxs)("button",{onClick:t=>{t.stopPropagation(),L(e)},className:"text-blue-600 hover:text-blue-800 px-2 py-1 rounded hover:bg-blue-50 block w-full text-left",children:[(0,wt.jsx)("i",{className:"fas fa-eye mr-1"})," View Details"]}),"                    ",!h&&"completed"===e.status&&("donor"===e.type||"donor"===e.patientType)&&("doctor"===l||"admin"===l)&&(0,wt.jsx)("button",{onClick:t=>{t.stopPropagation(),N(e),b(!0)},className:"".concat(T[e.id]?"text-green-600 hover:text-green-800 hover:bg-green-50":"text-purple-600 hover:text-purple-800 hover:bg-purple-50"," px-2 py-1 rounded block w-full text-left"),disabled:D,children:D?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("i",{className:"fas fa-spinner fa-spin mr-1"})," Checking..."]}):T[e.id]?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("i",{className:"fas fa-file-medical-alt mr-1"})," View Medical Document"]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("i",{className:"fas fa-file-medical mr-1"})," Upload Medical Document"]})}),!c&&"cancelled"!==e.status&&"completed"!==e.status&&(0,wt.jsxs)(wt.Fragment,{children:[!h&&(0,wt.jsxs)("button",{onClick:t=>{t.stopPropagation(),o(e)},className:"text-orange-600 hover:text-orange-800 px-2 py-1 rounded hover:bg-orange-50 block w-full text-left",children:[(0,wt.jsx)("i",{className:"fas fa-calendar-alt mr-1"})," Reschedule"]}),("doctor"===l||"admin"===l)&&(0,wt.jsxs)("button",{onClick:t=>{t.stopPropagation(),s(e)},className:"text-green-600 hover:text-green-800 px-2 py-1 rounded hover:bg-green-50 block w-full text-left",children:[(0,wt.jsx)("i",{className:"fas fa-check mr-1"})," Complete"]}),("doctor"===l||"admin"===l)&&(0,wt.jsxs)("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"text-red-600 hover:text-red-800 px-2 py-1 rounded hover:bg-red-50 block w-full text-left",children:[(0,wt.jsx)("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})]},e.id);var t}))})]})}),"      ",!d&&f&&p&&(0,wt.jsx)(ar,{isOpen:f,onClose:()=>{g(!1),m(null)},appointment:p,onReschedule:o,onCancel:a,onComplete:s,userRole:l,viewDetailsOnly:c}),"      ",x&&w&&(0,wt.jsx)(zs,{isOpen:x,onClose:()=>b(!1),appointmentId:w.id,onDocumentUploaded:e=>{R(e)}})]})},Js=()=>{const{user:e}=(0,t.useContext)(Nt),[n,r]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(!1),[f,g]=(0,t.useState)("all"),[v,y]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(!e)return s("User data not available. Please log in again."),void r(!1);if(!e.uid&&!xt.j2.currentUser)return s("User ID not found. Please refresh or log in again."),void r(!1);{const t=(0,i.A)((0,i.A)({},e),{},{uid:e.uid||(xt.j2.currentUser?xt.j2.currentUser.uid:null)});if(t.role&&"donor"!==t.role&&"patient"!==t.role&&"admin"!==t.role&&"doctor"!==t.role)return console.warn("User role doesn't have permission to view donor appointments:",t.role),s("You don't have permission to view these appointments. Please contact an administrator if you believe this is an error."),y(!0),void r(!1);if(t.uid){console.log("User data for appointments:",t),l(t);const e=async()=>{try{var e;if(console.log("Fetching appointments for donor ID: ".concat(t.uid)),!xt.j2.currentUser||!xt.j2.currentUser.uid)return s("Authentication required. Please sign in again."),void r(!1);const c="admin"===t.role||"doctor"===t.role,u=t.uid.toString().trim();let h;console.log("Using cleaned userId for query:",u);let p=[];if(c&&t.viewingPatientId){console.log("Admin/Doctor viewing specific patient ID: ".concat(t.viewingPatientId));const e=(0,bt.P)((0,bt.rJ)(xt.db,"donorAppointments"),(0,bt._M)("donorId","==",t.viewingPatientId));h=await(0,bt.GG)(e)}else{const e=["donorAppointments","appointments"];let t=!1;for(const n of e){console.log("Searching in collection: ".concat(n));const e=[(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("donorId","==",u)),(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("recipientId","==",u)),(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("patientId","==",u)),(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("userId","==",u)),(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("donorId","==",parseInt(u))),(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("recipientId","==",parseInt(u))),(0,bt.P)((0,bt.rJ)(xt.db,n),(0,bt._M)("patientId","==",parseInt(u)))];for(const n of e){const e=await(0,bt.GG)(n);if(console.log("Query attempt found ".concat(e.size," appointments")),e.size>0){h=e,t=!0,console.log("Found appointments with this query!");break}}if(t)break}t||(console.log("No appointments found with targeted queries, checking all appointments"),h=await(0,bt.GG)((0,bt.rJ)(xt.db,"donorAppointments")))}console.log("Found ".concat((null===(e=h)||void 0===e?void 0:e.size)||0," appointments for donor"));for(const e of h.docs)try{const t=e.data();if(!c){const n=t.donorId||t.recipientId||t.patientId||t.userId;console.log("Checking appointment:",e.id),console.log("  - detected appointmentUserId:",n),console.log("  - userId we're looking for:",u);const r=String(n||"").trim(),a=String(u||"").trim(),s=parseFloat(n),i=parseFloat(u),o=!isNaN(s)&&!isNaN(i)&&s===i;if((!r||r!==a)&&!o){console.log("Skipping appointment - not for this user:","Appointment ID: ".concat(e.id));continue}console.log("\u2713 Including appointment for this user:",e.id,{stringMatch:r===a,numericMatch:o,appointmentType:t.type||(t.recipientId?"recipient":"donor")})}let r=new Date;if(t.date)try{"function"===typeof t.date.toDate?r=t.date.toDate():t.date instanceof Date?r=t.date:"string"===typeof t.date?r=new Date(t.date):"number"===typeof t.date.seconds?r=new Date(1e3*t.date.seconds):t.date._seconds&&(r=new Date(1e3*t.date._seconds)),isNaN(r.getTime())&&(console.warn("Invalid date detected, using current date instead"),r=new Date)}catch(n){console.warn("Error converting date:",n),r=new Date}let s=t.doctorName||"Unknown Doctor",o=t.hospitalName||"Unknown Hospital";if(t.doctorId&&!t.doctorName)try{const e=(0,bt.doc)(xt.db,"users",t.doctorId),n=await(0,bt.x7)(e);if(n.exists()){const e=n.data();s="Dr. ".concat(e.firstName||""," ").concat(e.lastName||"").trim(),"Dr. "===s&&(s="Dr. "+(e.displayName||"Unknown"));const r=(0,bt.rJ)(xt.db,"hospitals"),a=(0,bt.P)(r,(0,bt._M)("userId","==",t.doctorId)),i=await(0,bt.GG)(a);i.empty||(o=i.docs[0].data().name||"Unknown Hospital")}}catch(a){console.error("Error fetching doctor info:",a)}const l=t.type||(t.recipientId?"recipient":"donor");p.push((0,i.A)((0,i.A)({id:e.id},t),{},{date:r,doctorName:s,hospitalName:o,status:t.status||"scheduled",type:l}))}catch(a){console.error("Error processing appointment:",a)}if(0===p.length)if(console.log("WARNING: No appointments matched after processing!"),console.log("This could indicate a data structure issue or that no appointments exist."),c){console.log("ADMIN/DOCTOR ACCESS: Bypassing filters to show all appointments");try{const e=["donorAppointments","recipientAppointments"];for(const t of e){console.log("Fetching all ".concat(t," for admin/doctor view"));const e=await(0,bt.GG)((0,bt.rJ)(xt.db,t));for(const r of e.docs)try{const e=r.data();let a=new Date;if(e.date)try{"function"===typeof e.date.toDate?a=e.date.toDate():e.date instanceof Date?a=e.date:"string"===typeof e.date?a=new Date(e.date):"number"===typeof e.date.seconds&&(a=new Date(1e3*e.date.seconds))}catch(n){console.warn("Error converting date:",n)}const s=e.type||("recipientAppointments"===t?"recipient":"donor");p.push((0,i.A)((0,i.A)({id:r.id},e),{},{date:a,status:e.status||"scheduled",type:s,doctorName:e.doctorName||"Unknown Doctor",hospitalName:e.hospitalName||"Unknown Hospital"}))}catch(o){console.error("Error processing doc:",o)}}try{const e=await(0,bt.GG)((0,bt.rJ)(xt.db,"appointments"));for(const t of e.docs)try{const e=t.data();let r;r=e.type?e.type:e.patientType?e.patientType:e.recipientId&&!e.donorId?"recipient":(e.donorId&&e.recipientId,"donor");let a=new Date;if(e.date)try{"function"===typeof e.date.toDate?a=e.date.toDate():e.date instanceof Date?a=e.date:"string"===typeof e.date?a=new Date(e.date):"number"===typeof e.date.seconds&&(a=new Date(1e3*e.date.seconds))}catch(n){console.warn("Error converting date:",n)}p.push((0,i.A)((0,i.A)({id:t.id},e),{},{date:a,status:e.status||"scheduled",type:r,doctorName:e.doctorName||"Unknown Doctor",hospitalName:e.hospitalName||"Unknown Hospital"}))}catch(o){console.error("Error processing doc:",o)}}catch(a){console.error("Error fetching general appointments:",a)}}catch(a){console.error("Error in admin/doctor appointment fetch:",a)}}else{console.log("REGULAR USER ACCESS: Aggressive search for user's appointments");try{const e=parseInt(u),t=String(u);console.log('Searching with multiple ID formats: String("'.concat(t,'"), Number(').concat(e,")"));const n=await(0,bt.GG)((0,bt.rJ)(xt.db,"appointments"));console.log("Found ".concat(n.size," total appointments in general collection"));for(const a of n.docs){const n=a.data(),r=n.donorId,s=n.patientId,o=n.userId,c=String(r||"").trim()===t,d=String(s||"").trim()===t,u=String(o||"").trim()===t,h=!isNaN(r)&&!isNaN(e)&&Number(r)===e,m=!isNaN(s)&&!isNaN(e)&&Number(s)===e,f=!isNaN(o)&&!isNaN(e)&&Number(o)===e;if(c||d||u||h||m||f){console.log("MATCH FOUND for appointment ".concat(a.id,"! Match type:"),{matchesDonorId:c,matchesPatientId:d,matchesUserId:u,numMatchesDonorId:h,numMatchesPatientId:m,numMatchesUserId:f});let e=new Date;try{n.date&&("function"===typeof n.date.toDate?e=n.date.toDate():n.date instanceof Date?e=n.date:"string"===typeof n.date?e=new Date(n.date):"number"===typeof n.date.seconds&&(e=new Date(1e3*n.date.seconds)))}catch(l){console.warn("Date conversion error:",l)}!("donor"===n.type||"donor"===n.patientType||Boolean(n.donorId))&&n.type||p.push((0,i.A)((0,i.A)({id:a.id},n),{},{date:e,status:n.status||"scheduled",type:"donor",doctorName:n.doctorName||"Unknown Doctor",hospitalName:n.hospitalName||"Unknown Hospital",matchCriteria:{matchesDonorId:c,matchesPatientId:d,matchesUserId:u,numMatchesDonorId:h,numMatchesPatientId:m,numMatchesUserId:f}}))}}const r=await(0,bt.GG)((0,bt.rJ)(xt.db,"donorAppointments"));console.log("Found ".concat(r.size," total appointments in donorAppointments collection"));for(const a of r.docs){const n=a.data(),r=n.donorId,s=n.patientId,o=n.userId,c=String(r||"").trim()===t,d=String(s||"").trim()===t,u=String(o||"").trim()===t,h=!isNaN(r)&&!isNaN(e)&&Number(r)===e,m=!isNaN(s)&&!isNaN(e)&&Number(s)===e,f=!isNaN(o)&&!isNaN(e)&&Number(o)===e;if(c||d||u||h||m||f){console.log("MATCH FOUND for appointment ".concat(a.id,"! Match type:"),{matchesDonorId:c,matchesPatientId:d,matchesUserId:u,numMatchesDonorId:h,numMatchesPatientId:m,numMatchesUserId:f});let e=new Date;try{n.date&&("function"===typeof n.date.toDate?e=n.date.toDate():n.date instanceof Date?e=n.date:"string"===typeof n.date?e=new Date(n.date):"number"===typeof n.date.seconds&&(e=new Date(1e3*n.date.seconds)))}catch(l){console.warn("Date conversion error:",l)}p.push((0,i.A)((0,i.A)({id:a.id},n),{},{date:e,status:n.status||"scheduled",type:"donor",doctorName:n.doctorName||"Unknown Doctor",hospitalName:n.hospitalName||"Unknown Hospital",matchCriteria:{matchesDonorId:c,matchesPatientId:d,matchesUserId:u,numMatchesDonorId:h,numMatchesPatientId:m,numMatchesUserId:f}}))}}}catch(a){console.error("Error in aggressive appointment search:",a)}}const m=(e=>(console.log("\ud83d\udd27 Fixing appointments list"),e&&Array.isArray(e)?(console.log("Processing ".concat(e.length," appointments for fixing")),e.map((e=>{if(!e)return console.warn("Encountered null/undefined appointment in list"),null;const t=(0,i.A)({},e);if(t.date)try{"function"===typeof t.date.toDate?t.date=t.date.toDate():"string"===typeof t.date?t.date=new Date(t.date):t.date.seconds&&(t.date=new Date(1e3*t.date.seconds))}catch(du){console.warn("Error fixing date for appointment:",t.id,du),t.date=new Date}else t.date=new Date;return t.id||(t.id="fixed-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9))),t.status||(t.status="scheduled"),t})).filter(Boolean)):(console.warn("fixAppointmentsList received invalid input:",e),[])))(p);m.sort(((e,t)=>t.date-e.date)),console.log("Processed donor appointments:",m),d(m||[]),s(null)}catch(a){console.error("Error fetching appointments:",a),s("Failed to load your appointments. Please try again later.")}finally{r(!1)}};e()}else s("Unable to determine user ID. Please log out and log in again."),r(!1)}}),[e]);const x=c.filter((e=>"scheduled"===e.status)).length,b=c.filter((e=>"completed"===e.status)).length,w=c.filter((e=>"cancelled"===e.status)).length,N=e=>{alert("Please contact your doctor to reschedule this appointment")};return(0,wt.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,wt.jsxs)("div",{className:"py-6",children:["        ",(0,wt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,wt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Your Donation Appointments"}),(0,wt.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(0,wt.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,wt.jsx)("p",{className:"mb-4 text-gray-700",children:"View all your donation-related appointments here. You can see upcoming appointments, view past appointments, and check the status of any scheduled appointments. Please note that only medical professionals can schedule appointments for you."}),"                ","              ",(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Donation Process"}),"                ",(0,wt.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:"Appointments are an essential part of the donation process. Our medical staff will guide you through each step and answer any questions you may have. Remember to bring your ID and medical information to each appointment."}),(0,wt.jsxs)("p",{className:"text-sm text-blue-700 font-medium",children:[(0,wt.jsx)("strong",{children:"Important:"})," Only medical staff can schedule appointments for you. You cannot create or schedule appointments yourself. If you need to reschedule or have questions about your appointments, please contact your assigned doctor directly."]})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg shadow-sm border border-blue-100",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-blue-800",children:"Upcoming"}),(0,wt.jsx)("div",{className:"bg-blue-500 p-2 rounded-full w-10 h-10 flex items-center justify-center",children:(0,wt.jsx)("i",{className:"fas fa-calendar-alt text-white"})})]}),(0,wt.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:x}),(0,wt.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Scheduled appointments"})]}),(0,wt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg shadow-sm border border-green-100",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-green-800",children:"Completed"}),(0,wt.jsx)("div",{className:"bg-green-500 p-2 rounded-full w-10 h-10 flex items-center justify-center",children:(0,wt.jsx)("i",{className:"fas fa-check-circle text-white"})})]}),(0,wt.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:b}),(0,wt.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Past appointments"})]}),(0,wt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg shadow-sm border border-red-100",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"Cancelled"}),(0,wt.jsx)("div",{className:"bg-red-500 p-2 rounded-full w-10 h-10 flex items-center justify-center",children:(0,wt.jsx)("i",{className:"fas fa-times-circle text-white"})})]}),(0,wt.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-2",children:w}),(0,wt.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Cancelled appointments"})]})]}),n?(0,wt.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,wt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?(0,wt.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",children:[(0,wt.jsx)("p",{className:"font-bold",children:"Error"}),(0,wt.jsx)("p",{children:a}),(0,wt.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Refresh Page"})]}):(0,wt.jsxs)("div",{children:["                  ",(0,wt.jsx)(Bs,{appointments:c,onEdit:N,onCancel:e=>{alert("Please contact your doctor to cancel this appointment")},onComplete:e=>{alert("Only medical staff can mark appointments as completed")},onReschedule:N,userRole:(null===o||void 0===o?void 0:o.role)||"patient",viewDetailsOnly:"admin"!==(null===o||void 0===o?void 0:o.role)&&"doctor"!==(null===o||void 0===o?void 0:o.role),onViewDetails:e=>{h(e),m(!0)},currentUserId:null===o||void 0===o?void 0:o.uid,isDonorView:!0})]}),"              ",p&&u&&(0,wt.jsx)(ar,{isOpen:p,onClose:()=>{m(!1),h(null)},appointment:u,onReschedule:()=>{},onCancel:()=>{},onComplete:()=>{},userRole:"patient",viewDetailsOnly:!0})]})})]})]})})};var Hs=n(119);const Gs=e=>{let{currentPatient:t,patientName:n,currentPatientType:r}=e;return(0,wt.jsxs)("div",{className:"AppointmentModal-header",children:[(0,wt.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:[t?t.status?"".concat(t.isBeingViewed?"View":"Edit"," ").concat("completed"===t.status?"Completed":"cancelled"===t.status?"Cancelled":"Scheduled"," Appointment for ").concat(n):"Schedule Appointment for ".concat(n):"Schedule New Appointment",r&&(0,wt.jsxs)("span",{className:"text-base font-normal ml-2 text-gray-500",children:["(","donor"===r?"Donor":"Recipient",")"]})]}),t&&t.isBeingViewed&&(0,wt.jsx)("div",{className:"mb-2 bg-purple-50 border border-purple-200 p-2 rounded-lg text-center",children:(0,wt.jsxs)("span",{className:"inline-block px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-semibold",children:[(0,wt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 11-6 0 3 3 0 016 0z"}),(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Mode - Editing disabled"]})})]})},Ws=e=>{var t,n;let{loadingDoctorInfo:r,doctorInfo:a}=e;return(0,wt.jsxs)("div",{className:"mb-4 bg-green-50 p-4 rounded-lg",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Appointment Provider"}),(0,wt.jsxs)("p",{className:"flex items-start mb-2",children:[(0,wt.jsx)("span",{className:"font-medium min-w-[80px]",children:"Doctor:"}),(0,wt.jsx)("span",{className:"doctor-name ml-2",children:r?(0,wt.jsxs)("span",{className:"inline-flex items-center",children:[(0,wt.jsxs)("svg",{className:"animate-spin h-4 w-4 mr-2 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,wt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,wt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading doctor information..."]}):(0,wt.jsx)("span",{className:"font-medium text-green-800",children:a.doctorName&&"Dr. "!==a.doctorName?a.doctorName:null!==(t=xt.j2.currentUser)&&void 0!==t&&t.displayName?"Dr. ".concat(xt.j2.currentUser.displayName):null!==(n=xt.j2.currentUser)&&void 0!==n&&n.email?"Dr. (".concat(xt.j2.currentUser.email,")"):"No doctor name available"})})]}),(0,wt.jsxs)("p",{className:"flex items-start",children:[(0,wt.jsx)("span",{className:"font-medium min-w-[80px]",children:"Hospital:"}),(0,wt.jsx)("span",{className:"hospital-name ml-2",children:r?(0,wt.jsxs)("span",{className:"inline-flex items-center",children:[(0,wt.jsxs)("svg",{className:"animate-spin h-4 w-4 mr-2 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,wt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,wt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading hospital information..."]}):a.hospitalName?(0,wt.jsx)("span",{className:"font-medium text-green-800",children:a.hospitalName}):(0,wt.jsx)("span",{className:"text-red-600",children:"No hospital name available"})})]})]})},Ys=e=>{let{patientType:t,selectedPatientId:n,setPatientType:r,setSelectedPatientId:a,patientOptions:s,getDonorName:i,getRecipientName:o}=e;return(0,wt.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2 font-medium",children:"Patient Type"}),(0,wt.jsxs)("select",{className:"w-full p-2 border rounded-md",value:t,onChange:e=>{r(e.target.value),a("")},children:[(0,wt.jsx)("option",{value:"donor",children:"Donor"}),(0,wt.jsx)("option",{value:"recipient",children:"Recipient"})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsxs)("label",{className:"block mb-2 font-medium",children:["Select ","donor"===t?"Donor":"Recipient"]}),(0,wt.jsxs)("select",{className:"w-full p-2 border rounded-md",value:n,onChange:e=>{const n=e.target.value;a(n);const r=s.find((e=>e.id===n));r&&("function"===typeof window.setCurrentPatient?(window.setCurrentPatient(r),window.setCurrentPatientType(t)):window.selectedPatientInfo={patient:r,type:t})},children:[(0,wt.jsxs)("option",{value:"",children:["Select a ",t]}),s.map((e=>(0,wt.jsx)("option",{value:e.id,children:"donor"===t?i(e):o(e)},e.id)))]})]})]})},Ks=e=>{let{patientName:t,currentPatientType:n,currentPatient:r}=e;return(0,wt.jsx)("div",{className:"mt-4 text-xs text-gray-500 bg-gray-50 p-2 rounded border border-gray-200",children:(0,wt.jsxs)("details",{children:[(0,wt.jsx)("summary",{className:"cursor-pointer font-medium mb-1",children:"Debug Information (Click to expand)"}),(0,wt.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-mono",children:"patientName:"})," ",t]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-mono",children:"currentPatientType:"})," ",n||"not set"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-mono",children:"Patient ID:"})," ",(null===r||void 0===r?void 0:r.id)||"not set"]}),"recipient"===n&&(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-mono",children:"recipientId:"})," ",(null===r||void 0===r?void 0:r.recipientId)||"not set"]}),"donor"===n&&(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-mono",children:"donorId:"})," ",(null===r||void 0===r?void 0:r.donorId)||"not set"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-mono",children:"isBeingViewed:"})," ",null!==r&&void 0!==r&&r.isBeingViewed?"true":"false"]})]})]})})},Qs=e=>{let{appointmentHistory:t}=e;return!t||t.length<=1?null:(0,wt.jsxs)("div",{className:"mt-4 pt-3 border-t-2 border-blue-200",children:[(0,wt.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Appointment History"}),(0,wt.jsx)("div",{className:"max-h-48 overflow-y-auto bg-white rounded border border-blue-100 p-2",children:(0,wt.jsx)("ul",{className:"text-sm",children:t.sort(((e,t)=>{var n,r;const a=null!==(n=e.date)&&void 0!==n&&n.seconds?new Date(1e3*e.date.seconds):new Date(e.date||0);return(null!==(r=t.date)&&void 0!==r&&r.seconds?new Date(1e3*t.date.seconds):new Date(t.date||0))-a})).map(((e,t)=>{var n;const r=null!==(n=e.date)&&void 0!==n&&n.seconds?new Date(1e3*e.date.seconds).toLocaleDateString():"string"===typeof e.date?e.date:"Unknown date";return(0,wt.jsxs)("li",{className:"mb-2 pb-2 border-b border-gray-100 last:border-b-0",children:[(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsxs)("span",{className:"font-medium",children:[r," ",e.time||""]}),(0,wt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat("completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.status||"scheduled"})]}),(0,wt.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.purpose||"No purpose specified"}),e.notes&&(0,wt.jsx)("div",{className:"text-xs italic mt-1",children:e.notes})]},t)}))})})]})},Xs=e=>{var t,n,r,a;let{currentPatient:s,currentPatientType:i,patientName:o,patientDetails:l,scheduleData:c,purpose:d}=e;return(0,wt.jsxs)("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg",children:[(0,wt.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["donor"===i?"Donor":"Recipient"," Information"]}),s.isEnhancedWithFirstAppointment&&(0,wt.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-2 mb-3 text-sm",children:[(0,wt.jsx)("p",{className:"font-medium",children:"Note: Showing information from first appointment"}),(0,wt.jsx)("p",{className:"text-xs",children:"Important details are pulled from the patient's first appointment to ensure continuity of care."})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Name:"}),(0,wt.jsx)("span",{className:"ml-2",children:o})]}),(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"ID:"}),(0,wt.jsx)("span",{className:"ml-2 font-mono text-sm",children:s.id})]}),(s.email||s.contactEmail||(null===(t=s.userData)||void 0===t?void 0:t.email)||(null===l||void 0===l?void 0:l.email))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Email:"}),(0,wt.jsx)("span",{className:"ml-2",children:s.email||s.contactEmail||(null===(n=s.userData)||void 0===n?void 0:n.email)||(null===l||void 0===l?void 0:l.email)})]}),(s.phone||s.contactPhone||(null===(r=s.userData)||void 0===r?void 0:r.phoneNumber)||(null===l||void 0===l?void 0:l.phone))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Phone:"}),(0,wt.jsx)("span",{className:"ml-2",children:s.phone||s.contactPhone||(null===(a=s.userData)||void 0===a?void 0:a.phoneNumber)||(null===l||void 0===l?void 0:l.phone)})]}),(s.age||s.dateOfBirth||(null===l||void 0===l?void 0:l.age)||(null===l||void 0===l?void 0:l.dateOfBirth))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:s.dateOfBirth||null!==l&&void 0!==l&&l.dateOfBirth?"Date of Birth:":"Age:"}),(0,wt.jsx)("span",{className:"ml-2",children:s.dateOfBirth||(null===l||void 0===l?void 0:l.dateOfBirth)||s.age||(null===l||void 0===l?void 0:l.age)||"Not specified"})]}),(s.gender||(null===l||void 0===l?void 0:l.gender))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Gender:"}),(0,wt.jsx)("span",{className:"ml-2 capitalize",children:s.gender||(null===l||void 0===l?void 0:l.gender)})]}),(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Blood Type:"}),(0,wt.jsx)("span",{className:"ml-2 font-medium",children:((e,t)=>{const n=s.bloodType||s.blood_type||(null===l||void 0===l?void 0:l.bloodType)||(null===l||void 0===l?void 0:l.blood_type)||(null===(e=s.patientData)||void 0===e?void 0:e.bloodType)||(null===(t=s.data)||void 0===t?void 0:t.bloodType);return n?(0,wt.jsx)("span",{className:"text-blue-700",children:n.toUpperCase()}):(0,wt.jsx)("span",{className:"text-red-500",children:"Not specified"})})()})]}),"donor"===i?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Organ to Donate:"}),(0,wt.jsx)("span",{className:"ml-2 capitalize font-medium",children:(e=>{const t=s.organToDonate||s.organ||s.organType||(null===(e=s.donorInfo)||void 0===e?void 0:e.organToDonate)||(null===l||void 0===l?void 0:l.organToDonate)||(null===l||void 0===l?void 0:l.organ)||(null===l||void 0===l?void 0:l.organType);return t?(0,wt.jsx)("span",{className:"text-green-700",children:t}):(0,wt.jsx)("span",{className:"text-red-500",children:"Not specified"})})()})]}),(s.donationReason||(null===l||void 0===l?void 0:l.donationReason))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Donation Reason:"}),(0,wt.jsx)("span",{className:"ml-2",children:s.donationReason||(null===l||void 0===l?void 0:l.donationReason)})]}),(s.donorStatus||(null===l||void 0===l?void 0:l.donorStatus))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Donor Status:"}),(0,wt.jsx)("span",{className:"ml-2 capitalize",children:s.donorStatus||(null===l||void 0===l?void 0:l.donorStatus)})]})]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Requested Organ:"}),(0,wt.jsx)("span",{className:"ml-2 capitalize font-medium",children:(e=>{const t=s.organType||s.organ||s.requestedOrgan||(null===(e=s.recipientInfo)||void 0===e?void 0:e.organType)||(null===l||void 0===l?void 0:l.organType)||(null===l||void 0===l?void 0:l.organ)||(null===l||void 0===l?void 0:l.requestedOrgan);return t?(0,wt.jsx)("span",{className:"text-green-700",children:t}):(0,wt.jsx)("span",{className:"text-red-500",children:"Not specified"})})()})]}),(s.medicalCondition||(null===l||void 0===l?void 0:l.medicalCondition))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Medical Condition:"}),(0,wt.jsx)("span",{className:"ml-2",children:s.medicalCondition||(null===l||void 0===l?void 0:l.medicalCondition)})]}),(s.urgencyLevel||(null===l||void 0===l?void 0:l.urgencyLevel))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Urgency Level:"}),(0,wt.jsx)("span",{className:"ml-2 capitalize",children:s.urgencyLevel||(null===l||void 0===l?void 0:l.urgencyLevel)})]})]}),(s.medicalNotes||(null===l||void 0===l?void 0:l.medicalNotes))&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Medical Notes:"}),(0,wt.jsx)("div",{className:"mt-1 text-sm bg-white p-2 rounded border border-blue-100",children:s.medicalNotes||(null===l||void 0===l?void 0:l.medicalNotes)})]}),(0,wt.jsx)(Ks,{patientName:o,currentPatientType:i,currentPatient:s}),(0,wt.jsxs)("div",{className:"mt-3 pt-2 border-t-2 border-blue-200",children:[(0,wt.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Appointment Details"}),(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Date:"}),(0,wt.jsx)("span",{className:"ml-2",children:c.date})]}),(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Time:"}),(0,wt.jsx)("span",{className:"ml-2",children:c.time})]}),(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Purpose:"}),(0,wt.jsx)("span",{className:"ml-2",children:s.purpose||d})]}),s.notes&&(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Appointment Notes:"}),(0,wt.jsx)("div",{className:"mt-1 text-sm bg-white p-2 rounded border border-blue-100",children:s.notes})]}),(0,wt.jsxs)("div",{className:"py-1 border-b border-blue-100",children:[(0,wt.jsx)("span",{className:"font-medium text-blue-700",children:"Status:"}),(0,wt.jsx)("span",{className:"ml-2 capitalize ".concat("scheduled"===s.status?"text-blue-600 font-medium":"completed"===s.status?"text-green-600 font-medium":"cancelled"===s.status?"text-red-600 font-medium":""),children:s.status||"Not specified"})]})]})]}),s.appointmentHistory&&s.appointmentHistory.length>1&&(0,wt.jsx)(Qs,{appointmentHistory:s.appointmentHistory}),s.isBeingViewed&&(0,wt.jsx)("div",{className:"mt-3 pt-2 border-t border-blue-200 text-center",children:(0,wt.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,wt.jsxs)("span",{className:"text-sm text-gray-700",children:["This is ",(0,wt.jsx)("span",{className:"font-bold text-purple-800",children:"View Mode"}),". To edit, close this view and click ",(0,wt.jsx)("span",{className:"font-semibold text-blue-600",children:"Edit"})," from the list."]})]})})]})},Zs=e=>{let{scheduleData:t,setScheduleData:n,purpose:r,setPurpose:a,currentPatient:s,existingAppointments:o}=e;return(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2 font-medium",children:"Appointment Date"}),(0,wt.jsx)("input",{type:"date",className:"w-full p-2 border rounded-md ".concat(s&&s.isBeingViewed?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500"),value:t.date,onChange:e=>n((0,i.A)((0,i.A)({},t),{},{date:e.target.value})),min:(new Date).toISOString().split("T")[0],required:!0,readOnly:s&&s.isBeingViewed})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2 font-medium",children:"Appointment Time"}),(0,wt.jsx)("input",{type:"time",className:"w-full p-2 border rounded-md ".concat(s&&s.isBeingViewed?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500"),value:t.time,onChange:e=>n((0,i.A)((0,i.A)({},t),{},{time:e.target.value})),required:!0,readOnly:s&&s.isBeingViewed})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2 font-medium",children:"Appointment Purpose"}),(0,wt.jsxs)("select",{id:"appointmentPurpose",className:"w-full p-2 border rounded-md ".concat(s&&s.isBeingViewed?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-blue-500"),value:r,onChange:e=>a(e.target.value),disabled:s&&s.isBeingViewed,children:[(0,wt.jsx)("option",{value:"Medical Consultation",children:"Medical Consultation"}),(0,wt.jsx)("option",{value:"Pre-Donation Assessment",children:"Pre-Donation Assessment"}),(0,wt.jsx)("option",{value:"Post-Donation Follow-up",children:"Post-Donation Follow-up"}),(0,wt.jsx)("option",{value:"Transplant Evaluation",children:"Transplant Evaluation"}),(0,wt.jsx)("option",{value:"Laboratory Tests",children:"Laboratory Tests"}),(0,wt.jsx)("option",{value:"Psychological Evaluation",children:"Psychological Evaluation"}),(0,wt.jsx)("option",{value:"Other Medical Service",children:"Other Medical Service"})]})]}),(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Note: Make sure the selected time slot is available. Unavailable time slots will be rejected."}),o.length>0&&(0,wt.jsxs)("div",{className:"bg-yellow-50 p-2 rounded-md",children:[(0,wt.jsx)("p",{className:"text-sm font-medium",children:"Other scheduled appointments on this date:"}),(0,wt.jsx)("ul",{className:"text-xs ml-4 list-disc",children:o.filter((e=>(e.date&&e.date.seconds?new Date(1e3*e.date.seconds).toISOString().split("T")[0]:"string"===typeof e.date?e.date:"")===t.date)).map(((e,t)=>(0,wt.jsx)("li",{children:"string"===typeof e.time?e.time:"Time not specified"},t)))})]})]})]})},$s=e=>{const t={};return Object.entries(e).forEach((e=>{let[n,r]=e;null===r||void 0===r?t[n]=null:"object"!==typeof r||Array.isArray(r)||null===r?Array.isArray(r)?t[n]=r.map((e=>"object"===typeof e&&null!==e?$s(e):e)):t[n]=r:t[n]=$s(r)})),t},ei=e=>{let{currentPatient:t,forceCloseModal:n,onSubmit:r,actionInProgress:a,scheduleData:s,selectedPatientId:i,purpose:o,patientType:l,currentPatientType:c}=e;return(0,wt.jsx)("div",{className:"AppointmentModal-footer",children:(0,wt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,wt.jsx)("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200",onClick:n,children:t&&!t.isBeingViewed?"Cancel":"Close"}),(!t||!t.isBeingViewed)&&(0,wt.jsx)("button",{className:"px-4 py-2 text-white rounded-md transition-colors duration-200 ".concat(a?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),onClick:()=>{if(r&&"function"===typeof r){const e=i||(t?t.id:null),n=$s({purpose:o,patientId:e,donorId:"donor"===(t?c:l)?e:null,recipientId:"recipient"===(t?c:l)?e:null,patientType:t?c:l,type:t?c:l});r(n)}},disabled:a||!s.date||!s.time||!i&&!t,children:a?(0,wt.jsxs)("span",{className:"flex items-center",children:[(0,wt.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,wt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,wt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Schedule Appointment"})]})})},ti=e=>{let{isOpen:n,onClose:r,onSubmit:a,currentPatient:s,currentPatientType:o,scheduleData:l,setScheduleData:c,existingAppointments:d,actionInProgress:u,getDonorName:h,getRecipientName:p,donors:m,recipients:f}=e;const g=(0,t.useRef)(null),v=(0,t.useRef)(null),[y,x]=(0,t.useState)("donor"),[b,w]=(0,t.useState)(""),[N,j]=(0,t.useState)("Medical Consultation"),[E,A]=(0,t.useState)({doctorName:"",hospitalName:""}),[S,I]=(0,t.useState)(!0),[_,T]=(0,t.useState)(null),C=()=>{console.log("Force closing modal"),v.current&&(v.current.style.display="none"),"function"===typeof r&&r(),window.setCurrentPatient&&(window.setCurrentPatient=null),window.setCurrentPatientType&&(window.setCurrentPatientType=null),window.selectedPatientInfo=null,window.currentDoctorInfo=null},D=(0,t.useCallback)((async()=>{try{const n=xt.j2.currentUser;if(!n||!n.uid)return console.error("No authenticated user found for doctor info"),A({doctorName:"Not authenticated",hospitalName:"Please log in again"}),void I(!1);try{const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("userId","==",n.uid)),r=await(0,bt.GG)(t);if(!r.empty){const e=r.docs[0].data();if(console.log("Hospital data found:",e),e.doctorName){console.log("Doctor name found in hospital record:",e.doctorName);let t="Dr. ".concat(e.doctorName);return e.doctorSpecialization&&(t+=" (".concat(e.doctorSpecialization,")")),A({doctorName:t,hospitalName:e.hospitalName||"Unknown Hospital"}),void I(!1)}}}catch(t){console.error("Error fetching hospital data:",t)}console.log("Fetching doctor info for UID:",n.uid);const r=(0,bt.doc)(xt.db,"users",n.uid),a=await(0,bt.x7)(r);if(a.exists()){const r=a.data();console.log("Doctor data fetched:",r),console.log("Doctor data keys:",Object.keys(r)),console.log("First name:",r.firstName),console.log("Last name:",r.lastName),console.log("Display name:",r.displayName),console.log("Name:",r.name),console.log("Full name:",r.fullName),console.log("Email:",r.email);let s="Dr. ";r.profile?(console.log("Doctor profile data found:",r.profile),r.profile.firstName&&r.profile.lastName?(s+="".concat(r.profile.firstName," ").concat(r.profile.lastName),console.log("Using profile firstName + lastName:",s)):r.profile.fullName?(s+=r.profile.fullName,console.log("Using profile fullName:",s)):r.profile.name&&(s+=r.profile.name,console.log("Using profile name:",s))):r.firstName&&r.lastName?(s+="".concat(r.firstName," ").concat(r.lastName),console.log("Using firstName + lastName:",s)):r.firstName?(s+=r.firstName,console.log("Using firstName only:",s)):r.lastName?(s+=r.lastName,console.log("Using lastName only:",s)):r.displayName?(s+=r.displayName,console.log("Using displayName:",s)):r.name?(s+=r.name,console.log("Using name:",s)):r.fullName?(s+=r.fullName,console.log("Using fullName:",s)):r.email?(s+="(".concat(r.email,")"),console.log("Using email as fallback:",s)):xt.j2.currentUser.displayName?(s+=xt.j2.currentUser.displayName,console.log("Using auth.currentUser.displayName:",s)):xt.j2.currentUser.email?(s+="(".concat(xt.j2.currentUser.email,")"),console.log("Using auth.currentUser.email:",s)):(s="Doctor Name Not Available",console.log("No valid name fields found"));let i="Unknown Hospital";try{const t=(0,bt.rJ)(xt.db,"hospitals");let a=(0,bt.P)(t,(0,bt._M)("userId","==",n.uid)),o=await(0,bt.GG)(a);if(o.empty){if(r.hospitalName)i=r.hospitalName,console.log("Found hospital name directly in doctor data:",i);else if(r.hospital){var e;"string"===typeof r.hospital?i=r.hospital:null!==(e=r.hospital)&&void 0!==e&&e.name&&(i=r.hospital.name),console.log("Found hospital from doctor's hospital field:",i)}}else{const e=o.docs[0].data();i=e.hospitalName||e.name||"Hospital Name Not Set",console.log("Hospital data fetched from collection:",e),e.doctorName&&"Dr. "===s&&(s="Dr. ".concat(e.doctorName),console.log("Using doctor name from hospital data:",s))}}catch(t){console.error("Error fetching hospital info:",t)}const o={doctorName:s,hospitalName:i};console.log("Setting doctor info:",o),A((e=>(console.log("Previous doctorInfo state:",e),o))),I(!1),setTimeout((()=>{console.log("After setState - Current doctorInfo:",o)}),0)}else console.log("No doctor document found"),A({doctorName:"Unknown Doctor",hospitalName:"Unknown Hospital"})}catch(n){console.error("Error fetching doctor info:",n),A({doctorName:"Error loading doctor info",hospitalName:"Please try refreshing"})}finally{I(!1)}}),[]),k=(0,t.useMemo)((()=>{if(!s)return"";if(console.log("Name resolution - Patient data:",s),console.log("Name resolution - Patient type:",o),"donor"===o&&s.donorName)return s.donorName;if("recipient"===o&&s.recipientName)return s.recipientName;const e="donor"===o?"function"===typeof h?h(s):null:"function"===typeof p?p(s):null;if(console.log("Name resolution - Name from function:",e),e&&"Unknown"!==e&&"Unknown Donor"!==e&&"Unknown Recipient"!==e)return e;const t=["fullName","patientName","donorName","recipientName","name","displayName"];for(const a of t)if(s[a]&&"string"===typeof s[a]&&""!==s[a].trim())return console.log("Name resolution - Found name in field: ".concat(a," = ").concat(s[a])),s[a];if(s.firstName||s.lastName){const e="".concat(s.firstName||""," ").concat(s.lastName||"").trim();if(console.log("Name resolution - Combined first/last name: ".concat(e)),e)return e}if("donor"===o&&s.donorFirstName){const e="".concat(s.donorFirstName||""," ").concat(s.donorLastName||"").trim();if(console.log("Name resolution - Donor specific name: ".concat(e)),e)return e}if("recipient"===o&&s.recipientFirstName){const e="".concat(s.recipientFirstName||""," ").concat(s.recipientLastName||"").trim();if(console.log("Name resolution - Recipient specific name: ".concat(e)),e)return e}const n="donor"===o?"donorId":"recipientId";if(s[n]){console.log("Name resolution - Found ".concat(n,": ").concat(s[n]));const e=("donor"===o?(null===m||void 0===m?void 0:m.approved)||[]:(null===f||void 0===f?void 0:f.approved)||[]).find((e=>e.id===s[n]));if(e){console.log("Name resolution - Found match in ".concat(o," list:"),e);const n="donor"===o?"function"===typeof h?h(e):null:"function"===typeof p?p(e):null;if(n&&"Unknown Donor"!==n&&"Unknown Recipient"!==n)return console.log("Name resolution - Using name from matched ".concat(o,": ").concat(n)),n;for(const r of t)if(e[r]&&"string"===typeof e[r]&&""!==e[r].trim())return console.log("Name resolution - Found name in matched ".concat(o,".").concat(r,": ").concat(e[r])),e[r]}}if(_){console.log("Name resolution - Checking patientDetails:",_);for(const e of t)if(_[e]&&"string"===typeof _[e]&&""!==_[e].trim())return console.log("Name resolution - Found name in patientDetails.".concat(e,": ").concat(_[e])),_[e];if(_.firstName||_.lastName){const e="".concat(_.firstName||""," ").concat(_.lastName||"").trim();if(console.log("Name resolution - From patientDetails first/last: ".concat(e)),e)return e}}if(s.userData){const e=s.userData;if(console.log("Name resolution - Checking userData:",e),e.displayName)return e.displayName;if(e.name)return e.name;if(e.firstName||e.lastName)return"".concat(e.firstName||""," ").concat(e.lastName||"").trim();if(e.email)return e.email}if(s.patientData){const e=s.patientData;if(console.log("Name resolution - Checking patientData:",e),e.fullName)return e.fullName;if(e.name)return e.name;if(e.firstName||e.lastName)return"".concat(e.firstName||""," ").concat(e.lastName||"").trim()}const r="donor"===o?"Donor #"+s.id.substring(0,5):"Recipient #"+s.id.substring(0,5);return console.log("Name resolution - Using fallback: ".concat(r)),r}),[s,o,h,p,_,m,f]);(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n&&C()};return n&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n,C]),(0,t.useEffect)((()=>{if(n){console.log("Modal opened, fetching info"),x(o||"donor"),w((null===s||void 0===s?void 0:s.id)||""),s&&s.purpose?j(s.purpose):j("Medical Consultation"),I(!0),D(),v.current&&(v.current.style.display="flex"),g.current&&setTimeout((()=>{g.current.focus()}),50),console.log("Current patient:",s),console.log("Current patient type:",o);let e=null===s||void 0===s?void 0:s.id;"donor"===o&&null!==s&&void 0!==s&&s.donorId?(e=s.donorId,console.log("Using donorId (".concat(e,") instead of general id for patient fetch"))):"recipient"===o&&null!==s&&void 0!==s&&s.recipientId&&(e=s.recipientId,console.log("Using recipientId (".concat(e,") instead of general id for patient fetch"))),e&&o?setTimeout((()=>{(async(e,t)=>{if(e&&t)try{console.log("Fetching ".concat(t," details for ID: ").concat(e));const n="donor"===t?"donors":"recipients",r=(0,bt.doc)(xt.db,n,e),a=await(0,bt.x7)(r);if(a.exists()){const e=(0,i.A)({id:a.id},a.data());console.log("Found ".concat(t," details:"),e),T(e)}else console.log("No ".concat(t," document found with ID: ").concat(e)),T(null)}catch(n){console.error("Error fetching ".concat(t," details:"),n),T(null)}else console.error("Missing patientId or patientType in fetchPatientDetails:",{patientId:e,patientType:t})})(e,o)}),50):console.warn("Missing required patient information for data fetch:",{patientId:e,patientType:o})}else v.current&&(v.current.style.display="none")}),[n,s,o,D]),(0,t.useEffect)((()=>{n&&xt.j2.currentUser&&(console.log("Loading doctor info based on auth state for user:",xt.j2.currentUser.uid),I(!0),setTimeout((()=>{D()}),100))}),[n,D]);const P="donor"===y?(null===m||void 0===m?void 0:m.approved)||[]:(null===f||void 0===f?void 0:f.approved)||[];if(console.log("RENDER - doctorInfo:",E),console.log("RENDER - loadingDoctorInfo:",S),console.log("RENDER - patientName:",s),!n)return null;const R=(null===s||void 0===s?void 0:s.appointments)||[];return(0,Hs.createPortal)((0,wt.jsx)("div",{ref:v,className:"AppointmentModal-backdrop",onClick:e=>{e.target===v.current&&C()},children:(0,wt.jsxs)("div",{ref:g,className:"AppointmentModal",tabIndex:-1,children:[(0,wt.jsx)(Gs,{currentPatient:s,patientName:k,currentPatientType:o}),(0,wt.jsxs)("div",{className:"AppointmentModal-content",children:[(0,wt.jsx)(Ws,{loadingDoctorInfo:S,doctorInfo:E}),s?(0,wt.jsx)(Xs,{currentPatient:s,currentPatientType:o,patientName:k,patientDetails:_,scheduleData:l,purpose:N}):(0,wt.jsx)(Ys,{patientType:y,selectedPatientId:b,setPatientType:x,setSelectedPatientId:w,patientOptions:P,getDonorName:h,getRecipientName:p}),(0,wt.jsx)(Zs,{scheduleData:l,setScheduleData:c,purpose:N,setPurpose:j,currentPatient:s,existingAppointments:d}),s&&(0,wt.jsx)(Qs,{appointmentHistory:R}),(0,wt.jsx)(Ks,{patientName:k,currentPatientType:o,currentPatient:s})]}),(0,wt.jsx)(ei,{currentPatient:s,forceCloseModal:C,onSubmit:a,actionInProgress:u,scheduleData:l,selectedPatientId:b,purpose:N,patientType:y,currentPatientType:o})]})}),document.body)};const ni=function(){const e=de(),[r,a]=(0,t.useState)({pending:[],approved:[],rejected:[]}),[s,o]=(0,t.useState)({pending:[],approved:[],rejected:[]}),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[m,f]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[y,x]=(0,t.useState)(!1),[b,w]=(0,t.useState)("pending"),[N,j]=(0,t.useState)("pending"),[E,A]=(0,t.useState)({date:"",time:""}),[S,I]=(0,t.useState)([]),[_,T]=(0,t.useState)(""),[C,D]=(0,t.useState)(""),[k,P]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[L,M]=(0,t.useState)({}),[F,U]=(0,t.useState)({}),[V,q]=(0,t.useState)(null),[z,B]=(0,t.useState)(null),[J,H]=(0,t.useState)(null),[G,W]=(0,t.useState)(!1),[Y,K]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(null);(0,t.useEffect)((()=>{Z(),ae(),se(),ie(),x(!1),window.currentDoctorInfo=null,window.selectedPatientInfo=null,window.setCurrentPatient=null,window.setCurrentPatientType=null}),[]);const Z=async()=>{try{const e=(0,bt.doc)(xt.db,"users",xt.j2.currentUser.uid),t=await(0,bt.x7)(e);t.exists()&&H(t.data())}catch(e){console.error("Error fetching user data:",e)}},$=function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return r;if(Array.isArray(t)){let n=e;for(const e of t){if(void 0===n[e])return r;n=n[e]}return n}return null!==(n=e[t])&&void 0!==n?n:r},ee=e=>{var t,n,r,a,s,i;return null!==e&&void 0!==e&&e.fullName?e.fullName:null!==e&&void 0!==e&&e.name?e.name:null!==e&&void 0!==e&&e.donorName?e.donorName:null!==e&&void 0!==e&&null!==(t=e.userData)&&void 0!==t&&t.fullName?e.userData.fullName:null!==e&&void 0!==e&&null!==(n=e.userData)&&void 0!==n&&n.name?e.userData.name:null!==e&&void 0!==e&&null!==(r=e.userData)&&void 0!==r&&r.displayName?e.userData.displayName:null!==e&&void 0!==e&&null!==(a=e.formData)&&void 0!==a&&a.fullName?e.formData.fullName:null!==e&&void 0!==e&&null!==(s=e.formData)&&void 0!==s&&s.name?e.formData.name:null!==e&&void 0!==e&&e.email?e.email:null!==e&&void 0!==e&&null!==(i=e.userData)&&void 0!==i&&i.email?e.userData.email:"Unknown Donor"},te=e=>(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.name)||"N/A",ne=e=>{if(!_)return e||[];const t=_.toLowerCase().trim();return(e||[]).filter((e=>{var n,r;return[null===e||void 0===e?void 0:e.fullName,null===e||void 0===e?void 0:e.bloodType,null===e||void 0===e||null===(n=e.age)||void 0===n?void 0:n.toString(),null===e||void 0===e||null===(r=e.weight)||void 0===r?void 0:r.toString()].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(t)))}))},re=e=>{if(!C)return e||[];const t=C.toLowerCase().trim();return(e||[]).filter((e=>{var n;if(!e)return!1;return[null===e||void 0===e?void 0:e.fullName,null===e||void 0===e?void 0:e.bloodType,null===e||void 0===e||null===(n=e.age)||void 0===n?void 0:n.toString(),null===e||void 0===e?void 0:e.organType].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(t)))}))};(0,t.useEffect)((()=>{ae(),se(),ie()}),[]);const ae=async()=>{try{console.log("Starting donor fetch...");const t=xt.j2.currentUser.uid;console.log("Current user ID:",t);const n={pending:[],approved:[],rejected:[]};try{const e=(0,bt.P)((0,bt.rJ)(xt.db,"medicalRecords"),(0,bt._M)("hospitalId","==",t));console.log("Fetching donors with hospitalId...");const r=await(0,bt.GG)(e);console.log("Found ".concat(r.size," donors with hospitalId")),r.forEach((e=>{const t=(0,i.A)({id:e.id},e.data()),r=t.requestStatus||t.status;"pending"===r||r===cn.J2.PENDING?n.pending.push(t):"doctor-approved"===r||r===cn.J2.DOCTOR_APPROVED||"admin-approved"===r||r===cn.J2.ADMIN_APPROVED||"approved"===r||r===cn.J2.FINAL_APPROVED||r===cn.J2.INITIAL_DOCTOR_APPROVED||"initially-approved"===r||r===cn.J2.INITIALLY_APPROVED||r===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===r||r===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===r?n.approved.push(t):"rejected"!==r&&r!==cn.J2.DOCTOR_REJECTED&&r!==cn.J2.ADMIN_REJECTED&&r!==cn.J2.FINAL_REJECTED&&r!==cn.J2.INITIAL_DOCTOR_REJECTED||n.rejected.push(t)}))}catch(e){console.warn("Error with first query method:",e)}if(0===Object.values(n).flat().length)try{console.log("Trying alternate field structure...");const e=(0,bt.P)((0,bt.rJ)(xt.db,"medicalRecords"),(0,bt._M)("assignedToHospital","==",t)),r=await(0,bt.GG)(e);console.log("Found ".concat(r.size," donors with assignedToHospital")),r.forEach((e=>{const t=(0,i.A)({id:e.id},e.data()),r=t.requestStatus||t.status;"pending"===r||r===cn.J2.PENDING?n.pending.push(t):"doctor-approved"===r||r===cn.J2.DOCTOR_APPROVED||"admin-approved"===r||r===cn.J2.ADMIN_APPROVED||"approved"===r||r===cn.J2.FINAL_APPROVED||r===cn.J2.INITIAL_DOCTOR_APPROVED||"initially-approved"===r||r===cn.J2.INITIALLY_APPROVED||r===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===r||r===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===r?n.approved.push(t):"rejected"!==r&&r!==cn.J2.DOCTOR_REJECTED&&r!==cn.J2.ADMIN_REJECTED&&r!==cn.J2.FINAL_REJECTED&&r!==cn.J2.INITIAL_DOCTOR_REJECTED||n.rejected.push(t)}))}catch(e){console.warn("Error with second query method:",e)}console.log("Final donor counts:",{pending:n.pending.length,approved:n.approved.length,rejected:n.rejected.length}),a(n)}catch(t){console.error("Error fetching donors:",t),Jn.error("Error fetching donors. Please try again.")}},se=async()=>{try{O(!0);const e=xt.j2.currentUser.uid,t={pending:[],approved:[],rejected:[]};console.log("Doctor ID:",e);const n=(0,bt.doc)(xt.db,"users",e),r=await(0,bt.x7)(n),a=r.exists()&&r.data().hospitalId||e;console.log("Fetching recipients for hospital ID:",a);const s=(0,bt.rJ)(xt.db,"recipients"),l=await(0,bt.GG)(s);console.log("Total recipients found:",l.size),l.forEach((n=>{const r=(0,i.A)({id:n.id},n.data());if(console.log("Checking recipient:",r.fullName,"hospitalId:",r.hospitalId,"RecipientId",r.userId,"hospitalAssociation:",r.hospitalAssociation,"assignedToHospital:",r.assignedToHospital),r.hospitalId===a||r.hospitalId===e||r.assignedToHospital===a||r.assignedToHospital===e){console.log("MATCH FOUND for recipient:",r.fullName);const e=r.requestStatus;"pending"===e||e===cn.J2.PENDING?t.pending.push(r):"doctor-approved"===e||e===cn.J2.DOCTOR_APPROVED||"admin-approved"===e||e===cn.J2.ADMIN_APPROVED?t.approved.push(r):"rejected"!==e&&e!==cn.J2.DOCTOR_REJECTED&&e!==cn.J2.ADMIN_REJECTED||t.rejected.push(r)}})),console.log("Filtered recipient data:",t),o(t),O(!1)}catch(e){console.error("Error fetching recipients:",e),Jn.error("Error loading recipient data"),O(!1)}},ie=async()=>{try{const e=xt.j2.currentUser.uid,t=[],n=(0,bt.P)((0,bt.rJ)(xt.db,"donorAppointments"),(0,bt._M)("doctorId","==",e));(await(0,bt.GG)(n)).forEach((e=>{const n=e.data(),r=n.date&&n.date.seconds?new Date(1e3*n.date.seconds).toISOString().split("T")[0]:"string"===typeof n.date?n.date:"";t.push((0,i.A)((0,i.A)({id:e.id},n),{},{date:r,donorName:n.donorName||"Unknown Donor"}))}));const r=(0,bt.P)((0,bt.rJ)(xt.db,"recipientAppointments"),(0,bt._M)("doctorId","==",e));(await(0,bt.GG)(r)).forEach((e=>{const n=e.data(),r=n.date&&n.date.seconds?new Date(1e3*n.date.seconds).toISOString().split("T")[0]:"string"===typeof n.date?n.date:"";t.push((0,i.A)((0,i.A)({id:e.id},n),{},{date:r,recipientName:n.recipientName||"Unknown Recipient"}))}));const a=(0,bt.P)((0,bt.rJ)(xt.db,"appointments"),(0,bt._M)("doctorId","==",e));(await(0,bt.GG)(a)).forEach((e=>{const n=e.data(),r=n.date&&n.date.seconds?new Date(1e3*n.date.seconds).toISOString().split("T")[0]:"string"===typeof n.date?n.date:"";t.push((0,i.A)((0,i.A)({id:e.id},n),{},{date:r}))})),I(t),console.log("Appointments loaded:",t.length)}catch(e){console.error("Error fetching appointments:",e),Jn.error("Failed to load appointments. Please try again.")}},oe=(e,t)=>"donor"===t?L[e]&&L[e].length>0:F[e]&&F[e].length>0;(0,t.useEffect)((()=>{if(S.length>0){const e={},t={};S.forEach((n=>{n.donorId&&(e[n.donorId]||(e[n.donorId]=[]),e[n.donorId].push(n)),n.recipientId&&(t[n.recipientId]||(t[n.recipientId]=[]),t[n.recipientId].push(n))})),M(e),U(t)}}),[S]);const le=(e,t)=>!S.some((n=>(n.date||"")===e&&n.time===t)),ce=async e=>{try{P(!0);const t=prompt("Please provide a reason for rejection:");if(!t)return void P(!1);const n=(0,bt.doc)(xt.db,"recipients",e);await(0,bt.updateDoc)(n,{requestStatus:cn.J2.DOCTOR_REJECTED,doctorReviewed:!0,doctorComment:t,doctorId:xt.j2.currentUser.uid,doctorReviewDate:new Date}),Jn.success("Application rejected"),await se()}catch(t){console.error("Error in rejection process:",t),Jn.error("Failed to reject application")}finally{P(!1)}},ue=async e=>{try{P(!0);const t=(0,bt.doc)(xt.db,"recipients",e);await(0,bt.updateDoc)(t,{requestStatus:cn.J2.DOCTOR_APPROVED,doctorReviewed:!0,doctorComment:"",doctorId:xt.j2.currentUser.uid,doctorReviewDate:new Date}),Jn.success("Application approved and sent to admin for final review"),await se()}catch(t){console.error("Error in approval process:",t),Jn.error("Failed to approve application")}finally{P(!1)}},he=async e=>{try{P(!0);const t=(0,bt.doc)(xt.db,"medicalRecords",e);await(0,bt.updateDoc)(t,{requestStatus:cn.J2.INITIAL_DOCTOR_APPROVED,status:cn.J2.INITIAL_DOCTOR_APPROVED,doctorReviewed:!0,doctorComment:"",doctorId:xt.j2.currentUser.uid,doctorReviewDate:(0,bt.serverTimestamp)()});const{triggerAutomaticStatusTransition:r}=await Promise.resolve().then(n.bind(n,109));await r(e,cn.J2.INITIAL_DOCTOR_APPROVED)===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL?Jn.success("Donor application initially approved and forwarded for admin review."):Jn.success("Donor application initially approved. Medical evaluation required next."),await ae()}catch(t){console.error("Error in donor initial approval process:",t),Jn.error("Failed to approve donor application")}finally{P(!1)}},pe=async e=>{try{P(!0);const t=prompt("Please provide a reason for rejection:");if(!t)return void P(!1);const n=(0,bt.doc)(xt.db,"medicalRecords",e);await(0,bt.updateDoc)(n,{requestStatus:cn.J2.INITIAL_DOCTOR_REJECTED,status:cn.J2.INITIAL_DOCTOR_REJECTED,doctorReviewed:!0,doctorComment:t,rejectionReason:t,doctorId:xt.j2.currentUser.uid,doctorReviewDate:(0,bt.serverTimestamp)()}),Jn.success("Donor application rejected - not eligible for donation"),await ae()}catch(t){console.error("Error in donor rejection process:",t),Jn.error("Failed to reject donor application")}finally{P(!1)}},me=async e=>{try{P(!0);const t=(0,bt.doc)(xt.db,"medicalRecords",e);if(!(await(0,bt.x7)(t)).exists())return Jn.error("Donor record not found"),void P(!1);const n=prompt("Enter assessment notes after medical evaluation:");await(0,bt.updateDoc)(t,{requestStatus:cn.J2.DOCTOR_APPROVED,status:cn.J2.DOCTOR_APPROVED,finalDoctorApproved:!0,finalDoctorComment:n||"Approved after medical evaluation",finalEvaluationDate:(0,bt.serverTimestamp)(),doctorId:xt.j2.currentUser.uid}),Jn.success("Final approval completed after medical evaluation"),await ae()}catch(t){console.error("Error in final donor approval process:",t),Jn.error("Failed to complete final approval")}finally{P(!1)}},fe=async e=>{try{P(!0);const t=prompt("Please provide a reason for rejection after medical evaluation:");if(!t)return void P(!1);const n=(0,bt.doc)(xt.db,"medicalRecords",e);await(0,bt.updateDoc)(n,{requestStatus:cn.J2.DOCTOR_REJECTED,status:cn.J2.DOCTOR_REJECTED,finalDoctorRejected:!0,finalDoctorComment:t,finalRejectionReason:t,finalEvaluationDate:(0,bt.serverTimestamp)(),doctorId:xt.j2.currentUser.uid}),Jn.success("Donor application rejected after medical evaluation"),await ae()}catch(t){console.error("Error in final donor rejection process:",t),Jn.error("Failed to reject donor after medical evaluation")}finally{P(!1)}},ge=e=>{if(!e)return!1;const t=e.requestStatus||e.status;return[cn.J2.INITIALLY_APPROVED,cn.J2.ADMIN_APPROVED,cn.J2.FINAL_APPROVED,cn.J2.MEDICAL_EVALUATION_IN_PROGRESS,cn.J2.MEDICAL_EVALUATION_COMPLETED,"initially-approved","admin-approved","approved","medical-evaluation-in-progress","medical-evaluation-completed"].includes(t)},ve=e=>{if(!e)return"Donor information not found";switch(e.requestStatus||e.status){case cn.J2.PENDING:case"pending":return"Donor application is still under initial review";case cn.J2.INITIAL_DOCTOR_APPROVED:case"initial-doctor-approved":return"Donor needs initial admin approval before appointments can be scheduled";case cn.J2.PENDING_INITIAL_ADMIN_APPROVAL:case"pending-initial-admin-approval":return"Donor is waiting for initial admin approval";case cn.J2.INITIAL_ADMIN_REJECTED:case"initial-admin-rejected":return"Donor was rejected by admin during initial review";case cn.J2.INITIAL_DOCTOR_REJECTED:case"initial-doctor-rejected":return"Donor was rejected during initial medical review";case cn.J2.DOCTOR_REJECTED:case"doctor-rejected":return"Donor was rejected after medical evaluation";case cn.J2.ADMIN_REJECTED:case"admin-rejected":return"Donor application was rejected by administration";case cn.J2.FINAL_REJECTED:case"final-rejected":return"Donor application was finally rejected";default:return"Donor is not eligible for appointment scheduling at this time"}},ye=(t,n)=>{if("donor"!==n||ge(t))oe(t.id,n)?e("/doctor/appointments?type=".concat(n,"&id=").concat(t.id)):y?(x(!1),setTimeout((()=>{xe(t,n)}),200)):xe(t,n);else{const e=ve(t);Jn.error("Cannot schedule appointment: ".concat(e))}},xe=(e,t)=>{console.log("Setting up appointment modal for patient:",e.id,"type:",t),window.currentDoctorInfo=null,window.selectedPatientInfo=null;const n=(new Date).toISOString().split("T")[0];A({date:n,time:""}),window.setCurrentPatient=q,window.setCurrentPatientType=B,q(e),B(t),setTimeout((()=>{console.log("Opening appointment modal"),x(!0)}),100)},be=()=>{var t,n,r;return l?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,wt.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Donor Details: ",ee(l)]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Basic Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Blood Type:"})," ",l.bloodType]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Organ Type:"})," ",(0,wt.jsx)("span",{className:"capitalize",children:l.donorType||l.organType||"Not specified"})]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Age:"})," ",l.age]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Weight:"})," ",l.weight," kg"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Height:"})," ",l.height," cm"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"BMI:"})," ",l.bmi]})]})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Medical History"}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Medical History:"})," ",l.medicalHistory||"None recorded"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Current Medications:"})," ",l.currentMedications||"None"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Surgical History:"})," ",l.surgicalHistory||"None"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Allergies:"})," ",l.allergies||"None reported"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Chronic Conditions:"})," ",l.chronicConditions||"None reported"]})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Health Measurements"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Blood Pressure:"})," ",l.bloodPressure||"Not recorded"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Pulse Rate:"})," ",l.pulseRate?"".concat(l.pulseRate," bpm"):"Not recorded"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hemoglobin Level:"})," ",l.hemoglobinLevel?"".concat(l.hemoglobinLevel," g/dL"):"Not recorded"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Last Donation:"})," ",l.lastDonationDate||"First time donor"]})]})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Lifestyle Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Smoking Status:"})," ","never"===l.smokingStatus?"Never Smoked":"former"===l.smokingStatus?"Former Smoker":"current"===l.smokingStatus?"Current Smoker":l.smokingStatus||"Not specified"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Alcohol Consumption:"})," ","never"===l.alcoholConsumption?"Never":"occasional"===l.alcoholConsumption?"Occasional":"regular"===l.alcoholConsumption?"Regular":"frequent"===l.alcoholConsumption?"Frequent":l.alcoholConsumption||"Not specified"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Exercise Frequency:"})," ","never"===l.exerciseFrequency?"Never":"occasional"===l.exerciseFrequency?"1-2 times/week":"regular"===l.exerciseFrequency?"3-4 times/week":"frequent"===l.exerciseFrequency?"5+ times/week":l.exerciseFrequency||"Not specified"]})]})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Medical Conditions"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,wt.jsxs)("p",{children:["Heart Disease: ",l.hasHeartDisease?"Yes":"No"]}),(0,wt.jsxs)("p",{children:["Diabetes: ",l.hasDiabetes?"Yes":"No"]}),(0,wt.jsxs)("p",{children:["HIV: ",l.hasHIV?"Yes":"No"]}),(0,wt.jsxs)("p",{children:["Hepatitis: ",l.hasHepatitis?"Yes":"No"]}),(0,wt.jsxs)("p",{children:["Cancer: ",l.hasCancer?"Yes":"No"]})]})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Residential Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Province:"})," ",l.province||"Not specified"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"City:"})," ",l.city||"Not specified"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital:"})," ",l.hospital||"Not assigned"]})]})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Emergency Contact"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Name:"})," ",(null===(t=l.emergencyContact)||void 0===t?void 0:t.name)||"Not provided"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Relationship:"})," ",(null===(n=l.emergencyContact)||void 0===n?void 0:n.relationship)||"Not provided"]}),"              ",(0,wt.jsxs)("p",{children:[(0,wt.jsx)("span",{className:"font-medium",children:"Phone:"})," ",(null===(r=l.emergencyContact)||void 0===r?void 0:r.phone)||"Not provided"]})]})]}),l.additionalNotes&&(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Additional Notes"}),(0,wt.jsx)("p",{children:l.additionalNotes})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Approval Status"}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsx)("div",{className:"mb-6",children:(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)("div",{className:"w-full bg-gray-200 h-2 rounded-full absolute top-4"}),(0,wt.jsx)("div",{className:"bg-blue-600 h-2 rounded-full absolute top-4 transition-all duration-700 ease-in-out",style:{width:"pending"===l.requestStatus?"0%":l.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"25%":l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status?"40%":l.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===l.status?"65%":l.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===l.status?"75%":l.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===l.status?"85%":l.requestStatus===cn.J2.DOCTOR_APPROVED?"80%":l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED||l.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===l.status||"approved"===l.requestStatus||"approved"===l.status?"100%":"0%"}}),(0,wt.jsxs)("div",{className:"flex justify-between relative",children:[(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                        w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                        ".concat("pending"===l.requestStatus?"bg-blue-500 ring-4 ring-blue-100":l.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED||l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status||l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED||"approved"===l.requestStatus||"approved"===l.status?"bg-green-500":l.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"bg-red-500":"bg-gray-400","\n                      "),children:l.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED||l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status||l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED||"approved"===l.requestStatus||"approved"===l.status?"\u2713":l.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"\u2717":"1"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Initial Review"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Medical information"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                        w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                        ".concat(l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status?"bg-blue-500 ring-4 ring-blue-100":l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED?"bg-green-500":"bg-gray-400","\n                      "),children:l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED?"\u2713":l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status?"\u25d0":"1.5"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Initial Admin Approval"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Ready for appointments"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                        w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                        ".concat(l.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===l.status?"bg-purple-500 ring-4 ring-purple-100":l.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===l.status?"bg-blue-500 ring-4 ring-blue-100":l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED?"bg-green-500":l.requestStatus===cn.J2.DOCTOR_REJECTED?"bg-red-500":"bg-gray-400","\n                      "),children:l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED?"\u2713":l.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===l.status?"\u2695":l.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===l.status?"\u2713":l.requestStatus===cn.J2.DOCTOR_REJECTED?"\u2717":"2"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Medical Evaluation"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:l.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===l.status?"In Progress":l.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===l.status?"Completed":"Appointment & assessment"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                        w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                        ".concat(l.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===l.status?"bg-indigo-500 ring-4 ring-indigo-100":l.requestStatus===cn.J2.DOCTOR_APPROVED?"bg-blue-500 ring-4 ring-blue-100":l.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===l.status||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED?"bg-green-500":l.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===l.status||l.requestStatus===cn.J2.ADMIN_REJECTED?"bg-red-500":"bg-gray-400","\n                      "),children:l.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===l.status||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED?"\u2713":l.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===l.status||l.requestStatus===cn.J2.ADMIN_REJECTED?"\u2717":l.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===l.status?"\u23f3":"3"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Final Admin Review"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:l.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===l.status?"Under Review":l.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===l.status?"Approved":l.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===l.status?"Rejected":"Final decision"})]})]})]})}),(0,wt.jsx)("div",{className:"mt-6 text-center",children:(0,wt.jsxs)("span",{className:"px-3 py-1 text-sm font-medium rounded-full\n                    ".concat("pending"===l.requestStatus?"bg-yellow-100 text-yellow-800":l.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"bg-blue-100 text-blue-800":l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status?"bg-green-100 text-green-800":l.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===l.status?"bg-purple-100 text-purple-800":l.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===l.status?"bg-blue-100 text-blue-800":l.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===l.status?"bg-indigo-100 text-indigo-800":l.requestStatus===cn.J2.DOCTOR_APPROVED?"bg-blue-100 text-blue-800":l.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===l.status?"bg-emerald-100 text-emerald-800":l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED||"approved"===l.requestStatus||"approved"===l.status?"bg-green-100 text-green-800":l.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===l.status?"bg-red-200 text-red-900":"bg-red-100 text-red-800","\n                  "),children:[(0,wt.jsx)("span",{className:"mr-1",children:"\u25cf"}),"pending"===l.requestStatus?"Awaiting Initial Review":l.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"Awaiting Medical Evaluation":l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status?"Initially Approved by Admin - Ready for Appointments":l.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===l.status?"Medical Evaluation In Progress":l.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===l.status?"Medical Evaluation Completed":l.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===l.status?"\u23f3 Pending Final Admin Review":l.requestStatus===cn.J2.DOCTOR_APPROVED?"Awaiting Admin Final Approval":l.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===l.status?"\ud83c\udf89 Final Admin Approved!":l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED||"approved"===l.requestStatus||"approved"===l.status?"\ud83c\udf89 Final Approval Completed":l.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"Not Eligible for Donation":l.requestStatus===cn.J2.DOCTOR_REJECTED?"Rejected After Medical Evaluation":l.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===l.status?"\u274c Final Admin Rejected":l.requestStatus===cn.J2.ADMIN_REJECTED?"Admin Rejected":"Rejected"]})})]}),l.doctorComment&&(0,wt.jsxs)("div",{className:"mt-2 p-3 bg-white rounded-md border border-gray-200",children:[(0,wt.jsx)("p",{className:"font-medium text-gray-800",children:"Initial Doctor Notes:"}),(0,wt.jsx)("p",{className:"italic",children:l.doctorComment})]}),l.finalDoctorComment&&(0,wt.jsxs)("div",{className:"mt-2 p-3 bg-white rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800",children:"Final Evaluation Notes:"}),(0,wt.jsx)("p",{className:"italic",children:l.finalDoctorComment})]}),l.adminComment&&(0,wt.jsxs)("div",{className:"mt-2 p-3 bg-white rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800",children:"Admin Notes:"}),(0,wt.jsx)("p",{className:"italic",children:l.adminComment})]})]}),(0,wt.jsxs)("div",{className:"flex justify-end space-x-2",children:["pending"===b&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>he(l.id),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",disabled:k,children:"Initial Approve"}),(0,wt.jsx)("button",{onClick:()=>pe(l.id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",disabled:k,children:"Reject"})]}),"approved"===b&&(0,wt.jsxs)(wt.Fragment,{children:[l.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED&&(0,wt.jsxs)("div",{className:"flex space-x-2",children:[(0,wt.jsx)("button",{onClick:()=>ye(l,"donor"),className:"px-4 py-2 rounded ".concat(ge(l)?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-400 text-gray-200 cursor-not-allowed"),disabled:k||!ge(l),title:ge(l)?"Schedule medical evaluation for ".concat(ee(l)):ve(l),children:oe(l.id,"donor")?"View Evaluation":"Schedule Evaluation"}),oe(l.id,"donor")&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>me(l.id),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",disabled:k,children:"Final Approve"}),(0,wt.jsx)("button",{onClick:()=>fe(l.id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",disabled:k,children:"Final Reject"})]})]}),(l.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===l.status)&&(0,wt.jsx)("div",{className:"flex space-x-2",children:(0,wt.jsx)("button",{onClick:()=>ye(l,"donor"),className:"px-4 py-2 rounded ".concat(ge(l)?"bg-green-500 text-white hover:bg-green-600":"bg-gray-400 text-gray-200 cursor-not-allowed"),disabled:k||!ge(l),title:ge(l)?"Schedule appointment for ".concat(ee(l)):ve(l),children:oe(l.id,"donor")?"View Appointments":"Schedule Appointment"})}),(l.requestStatus===cn.J2.DOCTOR_APPROVED||l.requestStatus===cn.J2.ADMIN_APPROVED||l.status===cn.J2.FINAL_APPROVED)&&(oe(l.id,"donor")?(0,wt.jsx)("button",{onClick:()=>e("/doctor/appointments?type=donor&id=".concat(l.id)),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:k,children:"View Appointments"}):(0,wt.jsx)("button",{onClick:()=>ye(l,"donor"),className:"px-4 py-2 rounded ".concat(ge(l)?"bg-green-500 text-white hover:bg-green-600":"bg-gray-400 text-gray-200 cursor-not-allowed"),disabled:k||!ge(l),title:ge(l)?"Schedule appointment for eligible donor":ve(l),children:"Schedule Appointment"})),!ge(l)&&(0,wt.jsxs)("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,wt.jsx)("span",{className:"text-sm text-yellow-800 font-medium",children:"Appointment Scheduling Restricted"})]}),(0,wt.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:ve(l)})]})]}),(0,wt.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Close"})]})]})}):null},we=()=>l?(0,wt.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-auto",children:[(0,wt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto my-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Schedule Medical Test"}),(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Date"}),(0,wt.jsx)("input",{type:"date",className:"w-full p-2 border rounded",value:E.date,onChange:e=>A((0,i.A)((0,i.A)({},E),{},{date:e.target.value})),min:(new Date).toISOString().split("T")[0]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{className:"block mb-2",children:"Time"}),(0,wt.jsx)("input",{type:"time",className:"w-full p-2 border rounded",value:E.time,onChange:e=>A((0,i.A)((0,i.A)({},E),{},{time:e.target.value}))})]}),(0,wt.jsx)("div",{className:"bg-blue-600 h-2 rounded-full absolute top-4 transition-all duration-700 ease-in-out",style:{width:"pending"===d.requestStatus?"0%":"doctor-approved"===d.requestStatus?"50%":"admin-approved"===d.requestStatus?"100%":"0%"}}),(0,wt.jsxs)("div",{className:"flex justify-between relative",children:[(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                        w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                        ".concat("pending"===d.requestStatus?"bg-blue-500 ring-4 ring-blue-100":"doctor-approved"===d.requestStatus||"admin-approved"===d.requestStatus?"bg-green-500":"rejected"===d.requestStatus?"bg-red-500":"bg-gray-400","\n                      "),children:"doctor-approved"===d.requestStatus||"admin-approved"===d.requestStatus?"\u2713":"rejected"===d.requestStatus?"\u2717":"1"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Doctor Review"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Medical assessment"})]}),(0,wt.jsxs)("div",{className:"text-center",children:[(0,wt.jsx)("div",{className:"\n                        w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold\n                        ".concat("doctor-approved"===d.requestStatus?"bg-blue-500 ring-4 ring-blue-100":"admin-approved"===d.requestStatus?"bg-green-500":"admin-rejected"===d.requestStatus?"bg-red-500":"bg-gray-400","\n                      "),children:"admin-approved"===d.requestStatus?"\u2713":"admin-rejected"===d.requestStatus?"\u2717":"2"}),(0,wt.jsx)("div",{className:"mt-2 text-xs font-medium",children:"Admin Approval"}),(0,wt.jsx)("div",{className:"text-xs text-gray-500",children:"Final decision"})]})]})]}),(0,wt.jsx)("div",{className:"mt-6 text-center",children:(0,wt.jsxs)("span",{className:"px-3 py-1 text-sm font-medium rounded-full\n                    ".concat("pending"===d.requestStatus?"bg-yellow-100 text-yellow-800":"doctor-approved"===d.requestStatus?"bg-blue-100 text-blue-800":"admin-approved"===d.requestStatus?"bg-green-100 text-green-800":"bg-red-100 text-red-800","\n                  "),children:[(0,wt.jsx)("span",{className:"mr-1",children:"\u25cf"}),"pending"===d.requestStatus?"Awaiting Doctor Review":"doctor-approved"===d.requestStatus?"Awaiting Admin Final Approval":"admin-approved"===d.requestStatus?"Approved":"rejected"===d.requestStatus?"Rejected":"Unknown Status"]})})]}),d.doctorComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800",children:"Medical Team Note:"}),(0,wt.jsx)("p",{className:"italic",children:d.doctorComment})]}),d.adminComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800",children:"Admin Note:"}),(0,wt.jsx)("p",{className:"italic",children:d.adminComment}),"                "]}),(0,wt.jsxs)("div",{className:"flex justify-end space-x-2",children:["pending"===N&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>ue(d.id),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",disabled:k,children:"Approve"}),(0,wt.jsx)("button",{onClick:()=>ce(d.id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",disabled:k,children:"Reject"})]}),"approved"===N&&(oe(d.id,"recipient")?(0,wt.jsx)("button",{onClick:()=>e("/doctor/appointments?type=recipient&id=".concat(d.id)),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:k,children:"View Appointments"}):(0,wt.jsx)("button",{onClick:()=>ye(d,"recipient"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-blue-600",disabled:k,children:"Schedule Appointment"})),(0,wt.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Close"})]})]}):null;return(0,wt.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Doctor Dashboard"}),(0,wt.jsxs)("div",{className:"mb-6 bg-white p-5 rounded-lg shadow-md",children:[(0,wt.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Actions"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{onClick:()=>e("/doctor/appointments"),className:"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer",children:[(0,wt.jsx)("div",{className:"rounded-full bg-blue-100 p-3 mr-4",children:(0,wt.jsx)("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"font-medium",children:"Appointments"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600",children:"Manage patient appointments"})]})]}),(0,wt.jsxs)("div",{onClick:()=>e("/doctor/applications"),className:"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors cursor-pointer",children:[(0,wt.jsx)("div",{className:"rounded-full bg-purple-100 p-3 mr-4",children:(0,wt.jsx)("svg",{className:"w-6 h-6 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h4",{className:"font-medium",children:"Applications"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600",children:"View application status"})]})]})]})]}),(0,wt.jsxs)("div",{className:"mb-8",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsxs)("div",{className:"flex space-x-2",children:[(0,wt.jsxs)("button",{className:"px-4 py-2 rounded ".concat("pending"===b?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>w("pending"),children:["Pending Donors (",ne(r.pending).length,")"]}),(0,wt.jsxs)("button",{className:"px-4 py-2 rounded ".concat("approved"===b?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>w("approved"),children:["Approved Donors (",ne(r.approved).length,")"]}),(0,wt.jsxs)("button",{className:"px-4 py-2 rounded ".concat("rejected"===b?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>w("rejected"),children:["Rejected Donors (",ne(r.rejected).length,")"]})]}),(0,wt.jsx)("div",{className:"w-64",children:(0,wt.jsx)("input",{type:"text",placeholder:"Search donors by name, blood type, age...",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:_,onChange:e=>T(e.target.value)})})]}),(0,wt.jsxs)("table",{className:"min-w-full bg-white",children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{className:"bg-gray-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Donor Name"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Blood Group"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Organ Type"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Age"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Weight"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Status"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-center",children:"Actions"})]})}),(0,wt.jsx)("tbody",{className:"text-gray-600 text-sm",children:r[b]&&ne(r[b]).length>0?ne(r[b]).map((e=>(0,wt.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("div",{className:"font-medium",children:ee(e)})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:$(e,"bloodType")}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("span",{className:"capitalize",children:$(e,"donorType")||$(e,"organType")||"Not specified"})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:$(e,"age")}),(0,wt.jsxs)("td",{className:"py-3 px-6 text-left",children:[$(e,"weight")," kg"]}),"                  ",(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsxs)("div",{className:"flex flex-col gap-1",children:["                      ",(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("pending"===e.requestStatus?"bg-yellow-100 text-yellow-800":e.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"bg-blue-50 text-blue-700":e.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"bg-red-100 text-red-800":e.requestStatus===cn.J2.DOCTOR_APPROVED?"bg-blue-100 text-blue-800":e.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===e.status?"bg-green-50 text-green-700":e.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===e.status?"bg-purple-100 text-purple-800":e.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===e.status?"bg-blue-100 text-blue-800":e.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===e.status?"bg-indigo-100 text-indigo-800":e.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===e.status?"bg-emerald-100 text-emerald-800":e.requestStatus===cn.J2.ADMIN_APPROVED||e.status===cn.J2.FINAL_APPROVED||"approved"===e.requestStatus||"approved"===e.status?"bg-green-100 text-green-800":e.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===e.status?"bg-red-200 text-red-900":e.requestStatus===cn.J2.DOCTOR_REJECTED||e.requestStatus===cn.J2.ADMIN_REJECTED?"bg-red-100 text-red-800":(0,cn.qY)(e.status)),children:"pending"===e.requestStatus?"Pending Initial Review":e.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"Initially Approved":e.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED?"Initially Rejected":e.requestStatus===cn.J2.DOCTOR_APPROVED?"Final Doctor Approved":e.requestStatus===cn.J2.INITIALLY_APPROVED||"initially-approved"===e.status?"Initially Approved by Admin":e.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||"medical-evaluation-in-progress"===e.status?"Medical Evaluation In Progress":e.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"medical-evaluation-completed"===e.status?"Medical Evaluation Completed":e.requestStatus===cn.J2.PENDING_FINAL_ADMIN_REVIEW||"pending-final-admin-review"===e.status?"\u23f3 Pending Final Admin Review":e.requestStatus===cn.J2.FINAL_ADMIN_APPROVED||"final-admin-approved"===e.status?"\ud83c\udf89 Final Admin Approved!":e.requestStatus===cn.J2.ADMIN_APPROVED||e.status===cn.J2.FINAL_APPROVED||"approved"===e.requestStatus||"approved"===e.status?"\ud83c\udf89 Final Approval Completed":e.requestStatus===cn.J2.FINAL_ADMIN_REJECTED||"final-admin-rejected"===e.status?"\u274c Final Admin Rejected":e.requestStatus===cn.J2.DOCTOR_REJECTED||e.requestStatus===cn.J2.ADMIN_REJECTED?"Rejected":(0,cn.Pd)(e.status,"doctor")}),(e.requestStatus===cn.J2.DOCTOR_APPROVED||e.requestStatus===cn.J2.ADMIN_APPROVED||e.requestStatus===cn.J2.INITIALLY_APPROVED||e.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||e.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"initially-approved"===e.status||"medical-evaluation-in-progress"===e.status||"medical-evaluation-completed"===e.status||e.status===cn.J2.FINAL_APPROVED||"approved"===e.requestStatus||"approved"===e.status)&&(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(ge(e)?"bg-green-50 text-green-700 border border-green-200":"bg-orange-50 text-orange-700 border border-orange-200"),title:ge(e)?"Eligible for appointments":ve(e),children:ge(e)?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("svg",{className:"inline w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Appointment Ready"]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("svg",{className:"inline w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Needs Admin Approval"]})}),!(e.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED||e.requestStatus===cn.J2.DOCTOR_REJECTED||e.requestStatus===cn.J2.ADMIN_REJECTED)&&(0,wt.jsx)("div",{className:"flex items-center mt-1 w-full",children:(0,wt.jsxs)("div",{className:"w-full bg-gray-200 h-1.5 rounded-full flex",children:[(0,wt.jsx)("div",{className:"h-1.5 rounded-l-full ".concat("pending"===e.requestStatus?"bg-yellow-500 animate-pulse":"bg-green-500"),style:{width:"33%"}}),(0,wt.jsx)("div",{className:"h-1.5 ".concat(e.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"bg-yellow-500 animate-pulse":e.requestStatus===cn.J2.DOCTOR_APPROVED||e.requestStatus===cn.J2.ADMIN_APPROVED||e.status===cn.J2.FINAL_APPROVED?"bg-green-500":"bg-gray-200"),style:{width:"33%"}}),(0,wt.jsx)("div",{className:"h-1.5 rounded-r-full ".concat(e.requestStatus===cn.J2.DOCTOR_APPROVED?"bg-yellow-500 animate-pulse":e.requestStatus===cn.J2.ADMIN_APPROVED||e.status===cn.J2.FINAL_APPROVED?"bg-green-500":"bg-gray-200"),style:{width:"33%"}})]})}),(e.requestStatus===cn.J2.INITIAL_DOCTOR_REJECTED||e.requestStatus===cn.J2.DOCTOR_REJECTED||e.requestStatus===cn.J2.ADMIN_REJECTED)&&(0,wt.jsx)("div",{className:"flex items-center mt-1",children:(0,wt.jsx)("div",{className:"w-full bg-gray-200 h-1.5 rounded-full",children:(0,wt.jsx)("div",{className:"bg-red-500 h-1.5 rounded-full",style:{width:"100%"}})})})]})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-center",children:(0,wt.jsxs)("div",{className:"flex item-center justify-center space-x-2",children:[(0,wt.jsx)("button",{onClick:()=>(e=>{c(e),p(!0)})(e),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"View Details"}),"                      ","pending"===b&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>he(e.id),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",disabled:k,children:"Initial Approve"}),(0,wt.jsx)("button",{onClick:()=>pe(e.id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",disabled:k,children:"Reject"})]}),"approved"===b&&(0,wt.jsxs)(wt.Fragment,{children:["                          ",e.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>ye(e,"donor"),className:"px-3 py-1 rounded text-white text-sm ".concat(ge(e)?"bg-blue-500 hover:bg-blue-600":"bg-gray-400 cursor-not-allowed"),type:"button",disabled:!ge(e),title:ge(e)?"Schedule medical evaluation for ".concat(ee(e)):ve(e),children:ge(e)?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("svg",{className:"inline w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),oe(e.id,"donor")?"View Evaluation":"Schedule Evaluation"]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("svg",{className:"inline w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Restricted"]})}),oe(e.id,"donor")&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>me(e.id),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",disabled:k,children:"Final Approve"}),(0,wt.jsx)("button",{onClick:()=>fe(e.id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",disabled:k,children:"Final Reject"})]})]}),"                            ",(e.requestStatus===cn.J2.DOCTOR_APPROVED||e.requestStatus===cn.J2.ADMIN_APPROVED||e.requestStatus===cn.J2.INITIALLY_APPROVED||e.requestStatus===cn.J2.MEDICAL_EVALUATION_IN_PROGRESS||e.requestStatus===cn.J2.MEDICAL_EVALUATION_COMPLETED||"initially-approved"===e.status||"medical-evaluation-in-progress"===e.status||"medical-evaluation-completed"===e.status||e.status===cn.J2.FINAL_APPROVED)&&(0,wt.jsx)("button",{onClick:()=>ye(e,"donor"),className:"px-3 py-1 rounded text-white text-sm ".concat(ge(e)?"bg-green-500 hover:bg-green-600":"bg-gray-400 cursor-not-allowed"),type:"button",disabled:!ge(e),title:ge(e)?"View appointments for ".concat(ee(e)):ve(e),children:ge(e)?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("svg",{className:"inline w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"View Appointments"]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("svg",{className:"inline w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Restricted"]})})]})]})})]},e.id))):(0,wt.jsx)("tr",{children:(0,wt.jsx)("td",{colSpan:"7",className:"py-4 px-6 text-center",children:_?"No matching donors found in ".concat(b," list"):"No donors found in ".concat(b," list")})})})]})]}),(0,wt.jsxs)("div",{className:"mb-8",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsxs)("div",{className:"flex space-x-2",children:[(0,wt.jsxs)("button",{className:"px-4 py-2 rounded ".concat("pending"===N?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>j("pending"),children:["Pending Recipients (",re(s.pending).length,")"]}),(0,wt.jsxs)("button",{className:"px-4 py-2 rounded ".concat("approved"===N?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>j("approved"),children:["Approved Recipients (",re(s.approved).length,")"]}),(0,wt.jsxs)("button",{className:"px-4 py-2 rounded ".concat("rejected"===N?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>j("rejected"),children:["Rejected Recipients (",re(s.rejected).length,")"]})]}),(0,wt.jsx)("div",{className:"w-64",children:(0,wt.jsx)("input",{type:"text",placeholder:"Search recipients by name, blood type...",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:C,onChange:e=>D(e.target.value)})})]}),(0,wt.jsxs)("table",{className:"min-w-full bg-white",children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{className:"bg-gray-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Name"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Blood Type"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Request Type"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Organ Type"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Status"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-center",children:"Actions"})]})}),(0,wt.jsxs)("tbody",{className:"text-gray-600 text-sm",children:[s[N]&&re(s[N]).length>0?re(s[N]).map((e=>(0,wt.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("div",{className:"font-medium",children:te(e)})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:e.bloodType}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("span",{className:"capitalize",children:e.requestType||"Organ"})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("span",{className:"capitalize",children:e.organType||"Not specified"})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("pending"===e.requestStatus?"bg-yellow-100 text-yellow-800":"doctor-approved"===e.requestStatus?"bg-blue-100 text-blue-800":"admin-approved"===e.requestStatus?"bg-green-100 text-green-800":"rejected"===e.requestStatus?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"pending"===e.requestStatus?"Pending Review":"doctor-approved"===e.requestStatus?"Doctor Approved":"admin-approved"===e.requestStatus?"Admin Approved":"rejected"===e.requestStatus?"Rejected":"Unknown Status"})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-center",children:(0,wt.jsxs)("div",{className:"flex item-center justify-center space-x-2",children:[(0,wt.jsx)("button",{onClick:()=>(e=>{u(null),setTimeout((()=>{u(e),v(!0)}),10)})(e),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"View Details"}),"pending"===N&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>ue(e.id),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",disabled:k,children:"Approve"}),(0,wt.jsx)("button",{onClick:()=>ce(e.id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",disabled:k,children:"Reject"})]}),"approved"===N&&(0,wt.jsx)("button",{onClick:()=>ye(e,"recipient"),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",title:"Schedule appointment for ".concat(te(e)),children:oe(e.id,"recipient")?"View Appointments":"Schedule Appointment"})]})})]},e.id))):(0,wt.jsx)("tr",{children:(0,wt.jsx)("td",{colSpan:"6",className:"py-4 px-6 text-center",children:C?"No matching recipients found in ".concat(N," list"):"No recipients found in ".concat(N," list")})}),"          "]}),"        "]})]}),"      ",h&&(0,wt.jsx)(be,{}),m&&(0,wt.jsx)(we,{}),g&&(0,wt.jsx)(RecipientDetailsModal,{}),(0,wt.jsx)(ti,{isOpen:y,onClose:()=>{console.log("Modal close requested"),window.setCurrentPatient&&(window.setCurrentPatient=null),window.setCurrentPatientType&&(window.setCurrentPatientType=null),window.selectedPatientInfo=null,window.currentDoctorInfo=null,x(!1),setTimeout((()=>{q(null),B(null),A({date:"",time:""})}),100)},onSubmit:async t=>{console.log("handleCreateAppointment called with data:",t);try{if(!V)return console.error("No patient selected"),void Jn.error("Please select a patient");if(!E.date||!E.time)return console.error("Missing date or time"),void Jn.error("Please select both date and time");const s=t.purpose||"Medical Consultation";console.log("Using purpose:",s);const o=t.type||z;let l;console.log("Patient type for appointment:",o);try{l=n(318)}catch(r){console.log("Using legacy appointment creation - integration module not available")}if(!le(E.date,E.time))return void Jn.error("This time slot is already booked. Please select another time.");P(!0);const c=V.id;let d="Your doctor",u="Hospital";const h=(0,bt.rJ)(xt.db,"hospitals"),p=(0,bt.P)(h,(0,bt._M)("userId","==",xt.j2.currentUser.uid)),m=await(0,bt.GG)(p);if(m.empty){const e=(0,bt.doc)(xt.db,"users",xt.j2.currentUser.uid),t=await(0,bt.x7)(e);if(t.exists()){const e=t.data();if(d=e.firstName&&e.lastName?"Dr. ".concat(e.firstName," ").concat(e.lastName).trim():e.doctorName?e.doctorName:e.displayName?"Dr. ".concat(e.displayName).trim():"Doctor",e.hospitalId){const t=(0,bt.doc)(xt.db,"hospitals",e.hospitalId),n=await(0,bt.x7)(t);if(n.exists()){const e=n.data();u=e.hospitalName||e.name||"Hospital"}}}}else{const e=m.docs[0].data();console.log("Hospital data found:",e),e.doctorName&&(d=e.doctorName),e.hospitalName&&(u=e.hospitalName)}console.log("Appointment data:",{doctorName:d,hospitalName:u,purpose:s});const f={doctorId:xt.j2.currentUser.uid,doctorName:d,hospitalName:u,date:bt.Dc.fromDate(new Date(E.date)),time:E.time,status:"scheduled",notes:"",purpose:s,doctorScheduled:!0,scheduledByDoctor:!0,createdAt:bt.Dc.now()};let g,v="";if("donor"===z){const e=(0,bt.doc)(xt.db,"medicalRecords",c),t=await(0,bt.x7)(e);if(t.exists()){const n=t.data();if(v=ee(n),l&&l.createAppointment){const e=await l.createAppointment((0,i.A)((0,i.A)({},f),{},{donorId:c,donorName:v,patientId:c,userId:c,bloodType:n.bloodType||"",organType:n.organType||n.donorType||"",contactNumber:n.phone||n.contactNumber||"",patientName:v}),"donor");if(!e.success)throw new Error(e.error||"Failed to create appointment");g=e.appointmentId}else{g=(await(0,bt.gS)((0,bt.rJ)(xt.db,"donorAppointments"),(0,i.A)((0,i.A)({},f),{},{donorId:c,donorName:v,bloodType:n.bloodType||"",organType:n.organType||n.donorType||"",contactNumber:n.phone||n.contactNumber||"",type:"donor"}))).id;const t=n.appointmentIds||[];await(0,bt.updateDoc)(e,{appointmentIds:[...t,g],appointmentScheduled:!0,appointmentDate:E.date,appointmentTime:E.time,updatedAt:bt.Dc.now()});try{await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:c,title:"New Appointment Scheduled",message:"".concat(d," has scheduled an appointment for you on ").concat(E.date," at ").concat(E.time),read:!1,createdAt:bt.Dc.now()})}catch(a){console.error("Error creating notification:",a)}}}}else{const t=(0,bt.doc)(xt.db,"recipients",c),n=await(0,bt.x7)(t);if(n.exists()){const e=n.data();v=te(e);const r=(0,i.A)((0,i.A)({},f),{},{recipientId:e.userId,patientId:e.userId,userId:e.userId,recipientName:v,patientName:v,bloodType:e.bloodType||"",organType:e.organType||e.neededOrgan||"",contactNumber:e.phone||e.contactNumber||"",urgencyLevel:e.urgencyLevel||"",type:"recipient",patientType:"recipient",appointmentType:"recipient",appointmentFor:"recipient"});if(console.log("Creating recipient appointment with data:",r),l&&l.createAppointment){const e=await l.createAppointment(r,"recipient");if(!e.success)throw new Error(e.error||"Failed to create appointment");g=e.appointmentId}else{g=(await(0,bt.gS)((0,bt.rJ)(xt.db,"recipientAppointments"),r)).id;const n=e.appointmentIds||[];await(0,bt.updateDoc)(t,{appointmentIds:[...n,g],appointmentScheduled:!0,appointmentDate:E.date,appointmentTime:E.time,updatedAt:bt.Dc.now()});try{await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:c,title:"New Appointment Scheduled",message:"".concat(d," has scheduled an appointment for you on ").concat(E.date," at ").concat(E.time),read:!1,createdAt:bt.Dc.now()})}catch(a){console.error("Error creating notification:",a)}}}if(await ie(),"donor"===z){if(await ae(),!L[c]||0===L[c].length){const e=(0,i.A)({},L);e[c]||(e[c]=[]),e[c].push({id:g,donorId:c,donorName:v,date:E.date,time:E.time,status:"scheduled"}),M(e)}}else if(await se(),!F[c]||0===F[c].length){const e=(0,i.A)({},F);e[c]||(e[c]=[]),e[c].push({id:g,recipientId:c,patientId:c,userId:c,recipientName:v,patientName:v,date:E.date,time:E.time,status:"scheduled",type:"recipient",patientType:"recipient",appointmentType:"recipient",doctorName:d,hospitalName:u}),U(e)}window.setCurrentPatient=null,window.setCurrentPatientType=null,window.selectedPatientInfo=null,window.currentDoctorInfo=null,Jn.success("Appointment successfully scheduled"),setTimeout((()=>{Jn.success("Appointment successfully sent to ".concat(v))}),500),e("/doctor/appointments?type=".concat(z,"&id=").concat(c))}}catch(s){console.error("Error scheduling appointment:",s),Jn.error("Error scheduling appointment. Please try again.")}finally{P(!1)}},currentPatient:V,currentPatientType:z,scheduleData:E,setScheduleData:A,existingAppointments:S,actionInProgress:k,getDonorName:ee,getRecipientName:te,donors:r,recipients:s})]})},ri=()=>(0,wt.jsx)("span",{class:"loader"}),ai=()=>{const[e,n]=(0,t.useState)(null),[r,a]=(0,t.useState)(!1),[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)({}),[h,p]=(0,t.useState)(""),[m,f]=(0,t.useState)(!1),g=(0,sn.xI)();(0,t.useEffect)((()=>{(async()=>{if(g.currentUser){const t=(0,bt.P)((0,bt.rJ)(xt.db,"hospitals"),(0,bt._M)("userId","==",g.currentUser.uid));try{const e=await(0,bt.GG)(t);if(!e.empty){const t=e.docs[0];n((0,i.A)({id:t.id},t.data()))}}catch(e){console.error("Error fetching hospital data:",e)}}})()}),[g.currentUser]);const v=e=>{const{name:t,value:n}=e.target;c((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))};return e?(0,wt.jsxs)("div",{className:"container mt-5",children:[(0,wt.jsx)("h2",{className:"mb-4",children:"Hospital Application Status"}),h&&(0,wt.jsx)("div",{className:"alert alert-success",role:"alert",children:h}),(0,wt.jsx)("div",{className:"card",children:(0,wt.jsxs)("div",{className:"card-body",children:[(0,wt.jsx)("h5",{className:"card-title",children:"Application Details"}),(0,wt.jsxs)("div",{className:"mb-3",children:[(0,wt.jsx)("strong",{children:"Status: "}),(0,wt.jsx)("span",{className:"badge bg-".concat("Pending"===e.verificationStatus?"warning":"success"),children:e.verificationStatus})]}),(0,wt.jsxs)("div",{className:"row",children:[(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Hospital Name:"})," ",e.hospitalName]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Contact Number:"})," ",e.contactNumber]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Address:"})," ",e.address]})]}),(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"License Number:"})," ",e.licenseNumber]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Doctor Name:"})," ",e.doctorName]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Specialization:"})," ",e.doctorSpecialization]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"License File:"})," ",(0,wt.jsx)("a",{href:e.licenseFile,target:"_blank",rel:"noopener noreferrer",children:"View File"})]})]})]}),(0,wt.jsx)("button",{className:"btn btn-primary",onClick:()=>{c((0,i.A)((0,i.A)({},e),{},{newLicenseFile:null})),a(!0)},disabled:"Pending"!==e.verificationStatus,children:"Edit Application"})]})}),(0,wt.jsx)("div",{className:"modal fade ".concat(r?"show":""),style:{display:r?"block":"none"},tabIndex:"-1",children:(0,wt.jsx)("div",{className:"modal-dialog modal-lg",children:(0,wt.jsxs)("div",{className:"modal-content",children:[(0,wt.jsxs)("div",{className:"modal-header",children:[(0,wt.jsx)("h5",{className:"modal-title",children:"Edit Application"}),(0,wt.jsx)("button",{type:"button",className:"btn-close",onClick:()=>a(!1)})]}),(0,wt.jsx)("div",{className:"modal-body",children:(0,wt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return["hospitalName","address","contactNumber","licenseNumber","doctorName","doctorSpecialization"].forEach((t=>{var n;null!==(n=l[t])&&void 0!==n&&n.trim()||(e[t]="".concat(t.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))," is required"))})),l.licenseFile||l.newLicenseFile||(e.licenseFile="License file is required"),u(e),0===Object.keys(e).length})()){o(!0);try{let t=l.licenseFile;l.newLicenseFile&&(t=await Cs(l.newLicenseFile));const r={hospitalName:l.hospitalName,address:l.address,contactNumber:l.contactNumber,licenseNumber:l.licenseNumber,doctorName:l.doctorName,doctorSpecialization:l.doctorSpecialization,licenseFile:t,updatedAt:(new Date).toISOString()},s=(0,bt.doc)(xt.db,"hospitals",e.id);await(0,bt.updateDoc)(s,r),n((e=>(0,i.A)((0,i.A)({},e),r))),p("Application updated successfully!"),a(!1)}catch(r){console.error("Error updating hospital:",r),u({submit:"Failed to update application. Please try again."})}finally{o(!1)}}},children:[d.submit&&(0,wt.jsx)("div",{className:"alert alert-danger",children:d.submit}),(0,wt.jsxs)("div",{className:"row g-3",children:[(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"Hospital Name:"}),(0,wt.jsx)("input",{type:"text",name:"hospitalName",value:(null===l||void 0===l?void 0:l.hospitalName)||"",onChange:v,className:"form-control"}),d.hospitalName&&(0,wt.jsx)("div",{className:"text-danger",children:d.hospitalName})]}),(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"Email:"}),(0,wt.jsx)("input",{type:"email",value:(null===l||void 0===l?void 0:l.email)||"",className:"form-control",disabled:!0})]}),(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"Contact Number:"}),(0,wt.jsx)("input",{type:"text",name:"contactNumber",value:(null===l||void 0===l?void 0:l.contactNumber)||"",onChange:v,className:"form-control"}),d.contactNumber&&(0,wt.jsx)("div",{className:"text-danger",children:d.contactNumber})]}),(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"License Number:"}),(0,wt.jsx)("input",{type:"text",name:"licenseNumber",value:(null===l||void 0===l?void 0:l.licenseNumber)||"",onChange:v,className:"form-control"}),d.licenseNumber&&(0,wt.jsx)("div",{className:"text-danger",children:d.licenseNumber})]}),(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"Doctor Name:"}),(0,wt.jsx)("input",{type:"text",name:"doctorName",value:(null===l||void 0===l?void 0:l.doctorName)||"",onChange:v,className:"form-control"}),d.doctorName&&(0,wt.jsx)("div",{className:"text-danger",children:d.doctorName})]}),(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"Doctor Specialization:"}),(0,wt.jsx)("input",{type:"text",name:"doctorSpecialization",value:(null===l||void 0===l?void 0:l.doctorSpecialization)||"",onChange:v,className:"form-control"}),d.doctorSpecialization&&(0,wt.jsx)("div",{className:"text-danger",children:d.doctorSpecialization})]}),(0,wt.jsxs)("div",{className:"col-12",children:[(0,wt.jsx)("label",{className:"form-label",children:"License File:"}),null===l||void 0===l||!l.licenseFile||null!==l&&void 0!==l&&l.newLicenseFile?(0,wt.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];t&&c((e=>(0,i.A)((0,i.A)({},e),{},{newLicenseFile:t})))},className:"form-control"}):(0,wt.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,wt.jsx)("a",{href:l.licenseFile,target:"_blank",rel:"noopener noreferrer",children:"Current File"}),(0,wt.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>{c((e=>(0,i.A)((0,i.A)({},e),{},{licenseFile:null,newLicenseFile:null})))},children:"Delete"})]}),d.licenseFile&&(0,wt.jsx)("div",{className:"text-danger",children:d.licenseFile})]})]}),(0,wt.jsxs)("div",{className:"mt-4",children:[(0,wt.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:s,children:s?"Updating...":"Update Application"}),(0,wt.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>a(!1),children:"Cancel"})]})]})})]})})}),r&&(0,wt.jsx)("div",{className:"modal-backdrop fade show"})]}):(0,wt.jsx)("div",{className:"container text-center d-flex align-items-center justify-content-center ",style:{height:"500px"},children:(0,wt.jsx)(ri,{})})},si={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ii(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const oi={date:ii({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ii({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ii({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},li={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ci(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const di={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ci({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ci({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ci({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ci({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ci({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function ui(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const hi={ordinalNumber:(pi={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(pi.matchPattern);if(!n)return null;const r=n[0],a=e.match(pi.parsePattern);if(!a)return null;let s=pi.valueCallback?pi.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:ui({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ui({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:ui({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ui({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ui({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var pi;const mi={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=si[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:oi,formatRelative:(e,t,n,r)=>li[e],localize:di,match:hi,options:{weekStartsOn:0,firstWeekContainsDate:1}};let fi={};function gi(){return fi}Math.pow(10,8);const vi=6048e5,yi=Symbol.for("constructDateFrom");function xi(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&yi in e?e[yi](t):e instanceof Date?new e.constructor(t):new Date(t)}function bi(e,t){return xi(t||e,e)}function wi(e){const t=bi(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ni(e,t){const n=bi(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function ji(e,t,n){const[r,a]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=xi.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(a)}(null===n||void 0===n?void 0:n.in,e,t),s=Ni(r),i=Ni(a),o=+s-wi(s),l=+i-wi(i);return Math.round((o-l)/864e5)}function Ei(e,t){const n=bi(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ai(e,t){const n=bi(e,null===t||void 0===t?void 0:t.in);return ji(n,Ei(n))+1}function Si(e,t){var n,r,a,s,i,o;const l=gi(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,d=bi(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function Ii(e,t){return Si(e,(0,i.A)((0,i.A)({},t),{},{weekStartsOn:1}))}function _i(e,t){const n=bi(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),a=xi(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=Ii(a),i=xi(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Ii(i);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Ti(e,t){const n=_i(e,t),r=xi((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ii(r)}function Ci(e,t){const n=bi(e,null===t||void 0===t?void 0:t.in),r=+Ii(n)-+Ti(n);return Math.round(r/vi)+1}function Di(e,t){var n,r,a,s,i,o;const l=bi(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),d=gi(),u=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==r?r:null===(o=d.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,h=xi((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,u),h.setHours(0,0,0,0);const p=Si(h,t),m=xi((null===t||void 0===t?void 0:t.in)||e,0);m.setFullYear(c,0,u),m.setHours(0,0,0,0);const f=Si(m,t);return+l>=+p?c+1:+l>=+f?c:c-1}function ki(e,t){var n,r,a,s,i,o;const l=gi(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,d=Di(e,t),u=xi((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return Si(u,t)}function Pi(e,t){const n=bi(e,null===t||void 0===t?void 0:t.in),r=+Si(n,t)-+ki(n,t);return Math.round(r/vi)+1}function Ri(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Oi={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ri("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Ri(n+1,2)},d:(e,t)=>Ri(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Ri(e.getHours()%12||12,t.length),H:(e,t)=>Ri(e.getHours(),t.length),m:(e,t)=>Ri(e.getMinutes(),t.length),s:(e,t)=>Ri(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Ri(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Li="midnight",Mi="noon",Fi="morning",Ui="afternoon",Vi="evening",qi="night",zi={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Oi.y(e,t)},Y:function(e,t,n,r){const a=Di(e,r),s=a>0?a:1-a;if("YY"===t){return Ri(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Ri(s,t.length)},R:function(e,t){return Ri(_i(e),t.length)},u:function(e,t){return Ri(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ri(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ri(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Oi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ri(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Pi(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Ri(a,t.length)},I:function(e,t,n){const r=Ci(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Ri(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Oi.d(e,t)},D:function(e,t,n){const r=Ai(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Ri(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ri(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ri(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Ri(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?Mi:0===r?Li:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?Vi:r>=12?Ui:r>=4?Fi:qi,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Oi.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Oi.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ri(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ri(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Oi.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Oi.s(e,t)},S:function(e,t){return Oi.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Ji(r);case"XXXX":case"XX":return Hi(r);default:return Hi(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Ji(r);case"xxxx":case"xx":return Hi(r);default:return Hi(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Bi(r,":");default:return"GMT"+Hi(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Bi(r,":");default:return"GMT"+Hi(r,":")}},t:function(e,t,n){return Ri(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Ri(+e,t.length)}};function Bi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return 0===s?n+String(a):n+String(a)+t+Ri(s,2)}function Ji(e,t){if(e%60===0){return(e>0?"-":"+")+Ri(Math.abs(e)/60,2)}return Hi(e,t)}function Hi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Ri(Math.trunc(r/60),2)+t+Ri(r%60,2)}const Gi=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Wi=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Yi={p:Wi,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Gi(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Gi(r,t)).replace("{{time}}",Wi(a,t))}},Ki=/^D+$/,Qi=/^Y+$/,Xi=["D","DD","YY","YYYY"];function Zi(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function $i(e){return!(!Zi(e)&&"number"!==typeof e||isNaN(+bi(e)))}const eo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,to=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,no=/^'([^]*?)'?$/,ro=/''/g,ao=/[a-zA-Z]/;function so(e,t,n){var r,a,s,i,o,l,c,d,u,h,p,m,f,g;const v=gi(),y=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:v.locale)&&void 0!==r?r:mi,x=null!==(s=null!==(i=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:v.firstWeekContainsDate)&&void 0!==i?i:null===(d=v.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:1,b=null!==(u=null!==(h=null!==(p=null!==(m=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==m?m:null===n||void 0===n||null===(f=n.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==p?p:v.weekStartsOn)&&void 0!==h?h:null===(g=v.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==u?u:0,w=bi(e,null===n||void 0===n?void 0:n.in);if(!$i(w))throw new RangeError("Invalid time value");let N=t.match(to).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Yi[t])(e,y.formatLong)}return e})).join("").match(eo).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:io(e)};if(zi[t])return{isToken:!0,value:e};if(t.match(ao))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(N=y.localize.preprocessor(w,N));const j={firstWeekContainsDate:x,weekStartsOn:b,locale:y};return N.map((r=>{if(!r.isToken)return r.value;const a=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return Qi.test(e)}(a))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return Ki.test(e)}(a))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),Xi.includes(e))throw new RangeError(r)}(a,t,String(e));return(0,zi[a[0]])(w,a,y.localize,j)})).join("")}function io(e){const t=e.match(no);return t?t[1].replace(ro,"'"):e}var oo=n(865);const lo=function(e){if(null===e||void 0===e)return arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"===typeof e||"number"===typeof e||"boolean"===typeof e)return String(e);if(e instanceof Date)return e.toLocaleString();if(e&&"object"===typeof e&&void 0!==e.seconds)return new Date(1e3*e.seconds).toLocaleString();if(Array.isArray(e))return e.map((e=>lo(e))).join(", ");if("object"===typeof e){if(e&&(e.patientId||e.patientType||e.purpose||e.existingAppointment)){const t=[];return e.purpose&&t.push("Purpose: ".concat(e.purpose)),e.patientType&&t.push("Type: ".concat(e.patientType)),t.join(", ")||"[Appointment Data]"}try{return JSON.stringify(e)}catch(t){return console.warn("Failed to stringify object for rendering:",t),"[Object]"}}return String(e)},co=e=>{if(!e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map((e=>co(e)));const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];null===r||"object"!==typeof r||r instanceof Date?t[n]=r:t[n]=co(r)}return t},uo=e=>{let{onSubmit:n,initialData:r={},appointmentType:a,userRole:s,userId:o}=e;const[l,c]=(0,t.useState)({doctorId:r.doctorId||"",date:r.date?so(new Date(r.date),"yyyy-MM-dd"):"",time:r.time||"",purpose:r.purpose||"",notes:r.notes||"",status:r.status||"scheduled"}),[d,u]=(0,t.useState)([]),[h,p]=(0,t.useState)(!1),[m,f]=(0,t.useState)(null),[g,v]=(0,t.useState)(null),[y,x]=(0,t.useState)(!1),b="donor"===s&&!r.id;(0,t.useEffect)((()=>{(async()=>{try{p(!0);const e=await(0,oo.ar)();u(e),p(!1)}catch(e){f("Failed to load doctors. Please try again."),p(!1)}})(),(async()=>{if("donor"===s&&o)try{const e=(0,bt.doc)(xt.db,"medicalRecords",o),t=await(0,bt.x7)(e);if(t.exists()){const e=t.data(),n=e.requestStatus||e.status;v(n);const r=(0,cn.Ot)(n,s);x(r)}}catch(e){console.error("Error checking approval status:",e)}else x(!0)})()}),[s,o]);const w=e=>{const{name:t,value:n}=e.target;c((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))};return(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,wt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:r.id?"Edit Appointment":"Schedule New Appointment"}),b&&!y&&(0,wt.jsxs)("div",{className:"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mb-4",children:[(0,wt.jsx)("p",{className:"font-bold",children:"Appointment Eligibility Notice"}),g===cn.J2.PENDING&&(0,wt.jsx)("p",{children:"Your application is currently under review. You will be able to schedule appointments once your application is initially approved by administration."}),(g===cn.J2.INITIAL_DOCTOR_APPROVED||g===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL)&&(0,wt.jsx)("p",{children:"Your application has been reviewed by the medical team and is pending initial admin approval. Please wait for administration review before scheduling appointments."}),g===cn.J2.INITIAL_ADMIN_REJECTED&&(0,wt.jsx)("p",{children:"Your application was not initially approved by administration. Please contact support for more information."}),!g&&(0,wt.jsx)("p",{children:"Please submit your medical information and get approval before scheduling appointments."})]}),b&&y&&(0,wt.jsxs)("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",children:[(0,wt.jsx)("p",{className:"font-bold",children:"\u2713 Appointment Scheduling Available"}),(0,wt.jsx)("p",{children:"Your application has been initially approved. You are eligible to schedule appointments with doctors."})]}),m&&(0,wt.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:(0,wt.jsx)("p",{children:m})}),!b||y?(0,wt.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),b&&!y)return void(g===cn.J2.PENDING?f("Your application is still pending review. You cannot schedule appointments until your application is initially approved."):g===cn.J2.INITIAL_DOCTOR_APPROVED||g===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL?f("Your application is pending initial admin approval. Please wait for administration review before scheduling appointments."):g===cn.J2.INITIAL_ADMIN_REJECTED?f("Your application was rejected by administration. You are not eligible to schedule appointments."):f("You are not eligible to schedule appointments. Please ensure your application is initially approved first."));if(!l.doctorId||!l.date||!l.time||!l.purpose)return void f("Please fill in all required fields");const t=co({doctorId:l.doctorId,date:new Date(l.date),time:l.time,purpose:l.purpose,notes:l.notes,status:l.status});"donor"===a?t.donorId=o:t.recipientId=o,console.log("Submitting safe appointment data:",t),n(t)},children:[(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("label",{className:"block text-gray-700 mb-2",children:"Doctor"}),(0,wt.jsxs)("select",{name:"doctorId",value:l.doctorId,onChange:w,className:"w-full px-3 py-2 border rounded-md",disabled:h||"doctor"===s,required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select a doctor"}),d.map((e=>(0,wt.jsxs)("option",{value:e.id,children:["Dr. ",e.firstName," ",e.lastName]},e.id)))]})]}),(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("label",{className:"block text-gray-700 mb-2",children:"Date"}),(0,wt.jsx)("input",{type:"date",name:"date",value:l.date,onChange:w,className:"w-full px-3 py-2 border rounded-md",min:so(new Date,"yyyy-MM-dd"),required:!0})]}),(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("label",{className:"block text-gray-700 mb-2",children:"Time"}),(0,wt.jsx)("input",{type:"time",name:"time",value:l.time,onChange:w,className:"w-full px-3 py-2 border rounded-md",required:!0})]}),(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("label",{className:"block text-gray-700 mb-2",children:"Purpose"}),(0,wt.jsxs)("select",{name:"purpose",value:l.purpose,onChange:w,className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,wt.jsx)("option",{value:"",children:"Select purpose"}),(0,wt.jsx)("option",{value:"Initial Consultation",children:"Initial Consultation"}),(0,wt.jsx)("option",{value:"Follow-up",children:"Follow-up"}),(0,wt.jsx)("option",{value:"Test Results",children:"Test Results"}),(0,wt.jsx)("option",{value:"Procedure",children:"Procedure"}),(0,wt.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("label",{className:"block text-gray-700 mb-2",children:"Notes (Optional)"}),(0,wt.jsx)("textarea",{name:"notes",value:l.notes,onChange:w,className:"w-full px-3 py-2 border rounded-md",rows:"3"})]}),r.id&&"doctor"===s&&(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsx)("label",{className:"block text-gray-700 mb-2",children:"Status"}),(0,wt.jsxs)("select",{name:"status",value:l.status,onChange:w,className:"w-full px-3 py-2 border rounded-md",children:[(0,wt.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,wt.jsx)("option",{value:"completed",children:"Completed"}),(0,wt.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,wt.jsx)("div",{className:"flex justify-end",children:(0,wt.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",disabled:h||b&&!y,children:r.id?"Update Appointment":"Schedule Appointment"})})]}):null]})},ho=e=>{let{onSubmit:n,appointmentType:r,onCancel:a}=e;const[s,o]=(0,t.useState)({patientId:"",date:"",time:"",purpose:"Medical Consultation",notes:"",status:"scheduled"}),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{u(!0);const e=xt.j2.currentUser.uid;let t=[];if("donor"===r){const n=(0,bt.P)((0,bt.rJ)(xt.db,"medicalRecords"),(0,bt._M)("status","in",["approved","doctor-approved","admin-approved"]),(0,bt._M)("hospitalId","==",e));if(t=(await(0,bt.GG)(n)).docs.map((e=>({id:e.id,name:e.data().fullName||e.data().name||"Unknown Donor",type:"donor",data:e.data()}))),0===t.length){const n=(0,bt.P)((0,bt.rJ)(xt.db,"medicalRecords"),(0,bt._M)("status","in",["approved","doctor-approved","admin-approved"]),(0,bt._M)("assignedToHospital","==",e));t=(await(0,bt.GG)(n)).docs.map((e=>({id:e.id,name:e.data().fullName||e.data().name||"Unknown Donor",type:"donor",data:e.data()})))}}else{const n=await(0,bt.GG)((0,bt.P)((0,bt.rJ)(xt.db,"users"),(0,bt._M)("uid","==",e)));let r=e;if(!n.empty){const e=n.docs[0].data();e.hospitalId&&(r=e.hospitalId)}const a=(0,bt.P)((0,bt.rJ)(xt.db,"recipients"),(0,bt._M)("hospitalId","==",r));if(t=(await(0,bt.GG)(a)).docs.map((e=>({id:e.id,name:e.data().fullName||e.data().name||"Unknown Recipient",type:"recipient",data:e.data()}))),0===t.length){const e=(0,bt.P)((0,bt.rJ)(xt.db,"recipients"),(0,bt._M)("assignedToHospital","==",r));t=(await(0,bt.GG)(e)).docs.map((e=>({id:e.id,name:e.data().fullName||e.data().name||"Unknown Recipient",type:"recipient",data:e.data()})))}}c(t),u(!1),console.log("Found ".concat(t.length," ").concat(r,"s for scheduling"))}catch(e){console.error("Error fetching ".concat(r,"s:"),e),p("Failed to load ".concat(r,"s. Please try again.")),u(!1)}})()}),[r]);const m=e=>{const{name:t,value:n}=e.target;o((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))};return(0,wt.jsx)("div",{className:"bg-white",children:(0,wt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.patientId&&s.date&&s.time){u(!0);try{const e=xt.j2.currentUser.uid;let t="Unknown Doctor",a="Unknown Hospital";const o=await(0,bt.GG)((0,bt.P)((0,bt.rJ)(xt.db,"users"),(0,bt._M)("uid","==",e)));if(!o.empty){const e=o.docs[0].data();if(t="Dr. ".concat(e.firstName||""," ").concat(e.lastName||"").trim(),"Dr. "===t&&(t="Dr. "+(e.displayName||"Unknown")),e.hospitalId){const t=await(0,bt.GG)((0,bt.P)((0,bt.rJ)(xt.db,"hospitals"),(0,bt._M)("id","==",e.hospitalId)));t.empty||(a=t.docs[0].data().name||"Unknown Hospital")}}if("Unknown Hospital"===a){const t=await(0,bt.GG)((0,bt.P)((0,bt.rJ)(xt.db,"hospitals"),(0,bt._M)("userId","==",e)));t.empty||(a=t.docs[0].data().name||"Unknown Hospital")}console.log("Creating appointment with doctor/hospital info:",{doctorName:t,hospitalName:a});const l=(0,i.A)((0,i.A)({},s),{},{doctorId:e,doctorName:t,hospitalName:a,date:new Date(s.date),["donor"===r?"donorId":"recipientId"]:s.patientId,type:r,patientType:r});delete l.patientId;const c={purpose:l.purpose,patientId:"donor"===r?l.donorId:l.recipientId,type:r,date:l.date,time:l.time,notes:l.notes,doctorId:l.doctorId,doctorName:l.doctorName,hospitalName:l.hospitalName};n(c)}catch(h){console.error("Error preparing appointment data:",h),p("Failed to prepare appointment data. Please try again."),u(!1)}}else p("Please fill in all required fields")},className:"space-y-4",children:[h&&(0,wt.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:(0,wt.jsx)("p",{children:h})}),d?(0,wt.jsx)("div",{className:"flex justify-center py-4",children:(0,wt.jsx)("div",{className:"loader"})}):0===l.length?(0,wt.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4",children:[(0,wt.jsxs)("p",{className:"font-bold",children:["No approved ",r,"s found"]}),(0,wt.jsxs)("p",{children:["You don't have any approved ",r,"s assigned to your hospital. Patients need to be approved before you can schedule appointments with them."]})]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("div",{className:"mb-4",children:[(0,wt.jsxs)("label",{htmlFor:"patientId",className:"block text-sm font-medium text-gray-700 mb-1",children:["Select ","donor"===r?"Donor":"Recipient","*"]}),(0,wt.jsxs)("select",{id:"patientId",name:"patientId",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md shadow-sm",value:s.patientId,onChange:m,required:!0,children:[(0,wt.jsxs)("option",{value:"",children:["Select a ",r]}),l.map((e=>(0,wt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date*"}),(0,wt.jsx)("input",{type:"date",id:"date",name:"date",className:"mt-1 block w-full border-gray-300 focus:ring-blue-500 focus:border-blue-500 rounded-md shadow-sm",value:s.date,onChange:m,min:so(new Date,"yyyy-MM-dd"),required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time*"}),(0,wt.jsx)("input",{type:"time",id:"time",name:"time",className:"mt-1 block w-full border-gray-300 focus:ring-blue-500 focus:border-blue-500 rounded-md shadow-sm",value:s.time,onChange:m,required:!0})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"purpose",className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose*"}),(0,wt.jsxs)("select",{id:"purpose",name:"purpose",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md shadow-sm",value:s.purpose,onChange:m,required:!0,children:[(0,wt.jsx)("option",{value:"Medical Consultation",children:"Medical Consultation"}),(0,wt.jsx)("option",{value:"Initial Assessment",children:"Initial Assessment"}),(0,wt.jsx)("option",{value:"Follow-up Visit",children:"Follow-up Visit"}),(0,wt.jsx)("option",{value:"Lab Tests",children:"Lab Tests"}),(0,wt.jsx)("option",{value:"Pre-operative Assessment",children:"Pre-operative Assessment"}),(0,wt.jsx)("option",{value:"Post-operative Follow-up",children:"Post-operative Follow-up"}),"donor"===r&&(0,wt.jsx)("option",{value:"Donation Procedure",children:"Donation Procedure"}),"recipient"===r&&(0,wt.jsx)("option",{value:"Transplant Procedure",children:"Transplant Procedure"})]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,wt.jsx)("textarea",{id:"notes",name:"notes",rows:"3",className:"mt-1 block w-full border-gray-300 focus:ring-blue-500 focus:border-blue-500 rounded-md shadow-sm",placeholder:"Any additional information about this appointment...",value:s.notes,onChange:m})]})]}),(0,wt.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,wt.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,wt.jsx)("button",{type:"submit",className:"inline-flex justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:d||0===l.length,children:d?"Loading...":"Schedule Appointment"})]})]})})},po=e=>{var n;let{isOpen:r,onClose:a,appointment:s,onSubmit:o}=e;const[l,c]=(0,t.useState)({date:null!==s&&void 0!==s&&s.date&&"string"===typeof s.date?s.date:null!==s&&void 0!==s&&null!==(n=s.date)&&void 0!==n&&n.seconds?new Date(1e3*s.date.seconds).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],time:(null===s||void 0===s?void 0:s.time)||"",purpose:(null===s||void 0===s?void 0:s.purpose)||"Medical Consultation"}),[d,u]=(0,t.useState)(!1);if(!r||!s)return null;const h=e=>{e.preventDefault(),u(!0);const t=(0,i.A)((0,i.A)({},s),{},{date:l.date,time:l.time,purpose:l.purpose});o(t),u(!1),a()},p=s.patientName||s.donorName||s.recipientName||"Patient";return(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,wt.jsxs)("div",{className:"border-b px-6 py-4 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,wt.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,wt.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full mr-3 bg-orange-100 text-orange-700",children:(0,wt.jsx)("i",{className:"fas fa-calendar-alt"})}),"Reschedule Appointment",(0,wt.jsxs)("span",{className:"ml-2 text-base font-normal text-gray-500",children:["(","donor"===s.patientType||"donor"===s.type||s.donorId||s.organToDonate||s.appointmentType&&s.appointmentType.toLowerCase().includes("donor")?"Donor":"Recipient",": ",p,")"]})]}),(0,wt.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,wt.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,wt.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,wt.jsxs)("form",{onSubmit:h,children:[(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-blue-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"far fa-calendar-alt mr-2"})," Current Appointment Details"]}),(0,wt.jsx)("div",{className:"bg-white p-4 rounded-md shadow-sm mb-4",children:(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Current Date:"})," ","string"===typeof s.date?s.date:rr(s.date)]}),(0,wt.jsxs)("p",{className:"text-gray-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Current Time:"})," ",s.time||"Not specified"]}),(0,wt.jsxs)("p",{className:"text-gray-600 md:col-span-2",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Current Purpose:"})," ",s.purpose||s.appointmentPurpose||"Not specified"]})]})})]}),(0,wt.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg mb-6",children:[(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-orange-800 mb-3 flex items-center",children:[(0,wt.jsx)("i",{className:"fas fa-calendar-plus mr-2"})," New Schedule Information"]}),(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"date",className:"block mb-2 text-sm font-medium text-gray-700",children:"New Appointment Date"}),(0,wt.jsx)("input",{id:"date",type:"date",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-orange-500",value:l.date,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{date:e.target.value})),min:(new Date).toISOString().split("T")[0],required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"time",className:"block mb-2 text-sm font-medium text-gray-700",children:"New Appointment Time"}),(0,wt.jsx)("input",{id:"time",type:"time",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-orange-500",value:l.time,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{time:e.target.value})),required:!0})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("label",{htmlFor:"purpose",className:"block mb-2 text-sm font-medium text-gray-700",children:"Appointment Purpose"}),(0,wt.jsxs)("select",{id:"purpose",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-orange-500",value:l.purpose,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{purpose:e.target.value})),children:[(0,wt.jsx)("option",{value:"Medical Consultation",children:"Medical Consultation"}),(0,wt.jsx)("option",{value:"Pre-Donation Assessment",children:"Pre-Donation Assessment"}),(0,wt.jsx)("option",{value:"Post-Donation Follow-up",children:"Post-Donation Follow-up"}),(0,wt.jsx)("option",{value:"Transplant Evaluation",children:"Transplant Evaluation"}),(0,wt.jsx)("option",{value:"Laboratory Tests",children:"Laboratory Tests"}),(0,wt.jsx)("option",{value:"Psychological Evaluation",children:"Psychological Evaluation"}),(0,wt.jsx)("option",{value:"Other Medical Service",children:"Other Medical Service"})]})]})]}),(0,wt.jsx)("div",{className:"mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-400 rounded",children:(0,wt.jsxs)("div",{className:"flex",children:[(0,wt.jsx)("div",{className:"flex-shrink-0",children:(0,wt.jsx)("i",{className:"fas fa-exclamation-circle text-yellow-600"})}),(0,wt.jsx)("div",{className:"ml-3",children:(0,wt.jsx)("p",{className:"text-sm text-yellow-700",children:"Note: The patient will be notified of the rescheduled appointment. Please ensure the new time slot is available."})})]})})]})]})}),(0,wt.jsxs)("div",{className:"border-t px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3",children:[(0,wt.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200",disabled:d,children:"Cancel"}),(0,wt.jsx)("button",{onClick:h,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors duration-200 flex items-center",disabled:d,children:d?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,wt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,wt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("i",{className:"fas fa-calendar-check mr-2"}),"Confirm Reschedule"]})})]})]})})},mo=e=>{if(!e||"object"!==typeof e)return e;const t=(0,i.A)({},e);return"object"===typeof e.purpose&&(t.purpose=lo(e.purpose,"Consultation")),"object"===typeof e.patientType&&(t.patientType=lo(e.patientType,"donor")),"object"===typeof e.existingAppointment&&(t.existingAppointment=lo(e.existingAppointment,"Yes")),t},fo=e=>Array.isArray(e)?e.map(mo):[];var go=n(25);const vo=function(){const[e,n]=(0,t.useState)(!1),r=async()=>{try{const e=(0,bt.rJ)(xt.db,"donors"),t=(0,bt.P)(e,(0,bt._M)("status","==","approved")),n=await(0,bt.GG)(t);return n&&n.docs?n.docs.map((e=>(0,i.A)({id:e.id},e.data()))):[]}catch(x){return console.error("Error fetching donors:",x),[]}},a=async()=>{try{const e=(0,bt.rJ)(xt.db,"recipients"),t=(0,bt.P)(e,(0,bt._M)("status","==","approved")),n=await(0,bt.GG)(t);return n&&n.docs?n.docs.map((e=>(0,i.A)({id:e.id},e.data()))):[]}catch(x){return console.error("Error fetching recipients:",x),[]}},{user:s}=(0,t.useContext)(Nt),o=oe(),l=new URLSearchParams(o.search),c=l.get("type"),d=l.get("id"),[u,h]=(0,t.useState)(c||"donor"),[p,m]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[v,y]=(0,t.useState)(!0),[x,b]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1),[j,E]=(0,t.useState)(null),[A,S]=(0,t.useState)(!1),[I,_]=(0,t.useState)([]),[T,C]=(0,t.useState)({approved:[]}),[D,k]=(0,t.useState)({approved:[]}),[P,R]=(0,t.useState)([]),[O,L]=(0,t.useState)({date:"",time:""}),M=e=>{if(!e)return"Unknown Donor";if(console.log("getDonorName called with:",e),e.id?console.log("Processing donor with ID: ".concat(e.id)):console.log("Warning: Donor object has no ID"),e._cachedName&&e._cachedName.trim())return console.log("Using cached name: ".concat(e._cachedName)),e._cachedName;if(e.fullName&&e.fullName.trim())return e.fullName;if(e.firstName||e.lastName){const t="".concat(e.firstName||""," ").concat(e.lastName||"").trim();if(t)return t}if(e.name&&e.name.trim())return e.name;if(e.donorName&&e.donorName.trim())return e.donorName;if(e.displayName&&e.displayName.trim())return e.displayName;if(e.patientName&&e.patientName.trim())return e.patientName;if(e.userData){if(e.userData.fullName)return e.userData.fullName;if(e.userData.name)return e.userData.name;if(e.userData.displayName)return e.userData.displayName;if(e.userData.firstName||e.userData.lastName)return"".concat(e.userData.firstName||""," ").concat(e.userData.lastName||"").trim();if(e.userData.email)return e.userData.email}if(e.formData){if(e.formData.fullName)return e.formData.fullName;if(e.formData.name)return e.formData.name}if(e.donorDetails){if(e.donorDetails.fullName)return e.donorDetails.fullName;if(e.donorDetails.name)return e.donorDetails.name;if(e.donorDetails.firstName||e.donorDetails.lastName)return"".concat(e.donorDetails.firstName||""," ").concat(e.donorDetails.lastName||"").trim()}if(e.data){if(e.data.fullName)return e.data.fullName;if(e.data.name)return e.data.name;if(e.data.firstName||e.data.lastName)return"".concat(e.data.firstName||""," ").concat(e.data.lastName||"").trim()}return e.email?e.email:e.contactEmail?e.contactEmail:e.donorId&&e.donorId!==e.id?"Donor #".concat(e.donorId.substring(0,6)):e.id?"Donor #".concat(e.id.substring(0,6)):"Donor"},F=e=>{if(!e)return"Unknown Recipient";if("string"===typeof e)return"Recipient #".concat(e.substring(0,6));if("object"!==typeof e||null===e)return"Unknown Recipient";if(console.log("getRecipientName called with:",e),e.id?console.log("Processing recipient with ID: ".concat(e.id)):console.log("Warning: Recipient object has no ID"),e._cachedName&&e._cachedName.trim())return console.log("Using cached name: ".concat(e._cachedName)),e._cachedName;if(e.fullName&&e.fullName.trim())return e.fullName;if(e.firstName||e.lastName){const t="".concat(e.firstName||""," ").concat(e.lastName||"").trim();if(t)return t}if(e.name&&e.name.trim())return e.name;if(e.recipientName&&e.recipientName.trim())return e.recipientName;if(e.displayName&&e.displayName.trim())return e.displayName;if(e.patientName&&e.patientName.trim())return e.patientName;if(e.userData){if(e.userData.fullName)return e.userData.fullName;if(e.userData.name)return e.userData.name;if(e.userData.displayName)return e.userData.displayName;if(e.userData.firstName||e.userData.lastName)return"".concat(e.userData.firstName||""," ").concat(e.userData.lastName||"").trim();if(e.userData.email)return e.userData.email}if(e.recipientDetails){if(e.recipientDetails.fullName)return e.recipientDetails.fullName;if(e.recipientDetails.name)return e.recipientDetails.name;if(e.recipientDetails.firstName||e.recipientDetails.lastName)return"".concat(e.recipientDetails.firstName||""," ").concat(e.recipientDetails.lastName||"").trim()}if(e.data){if(e.data.fullName)return e.data.fullName;if(e.data.name)return e.data.name;if(e.data.firstName||e.data.lastName)return"".concat(e.data.firstName||""," ").concat(e.data.lastName||"").trim()}return e.email?e.email:e.contactEmail?e.contactEmail:e.contactNumber?"Recipient (".concat(e.contactNumber,")"):e.recipientId&&e.recipientId!==e.id?"Recipient #".concat(e.recipientId.substring(0,6)):e.id?"Recipient #".concat(e.id.substring(0,6)):"Recipient"};(0,t.useEffect)((function(){!async function(){y(!0),b(null),console.log("Fetching appointments for tab:",u);try{if(!s||!s.uid)return console.error("No user found or user missing UID"),b("User authentication error. Please log in again."),void y(!1);try{const e=await(0,oo.Cb)(s.uid);if(console.log("Appointments fetched:",(null===e||void 0===e?void 0:e.length)||0),!e||!Array.isArray(e))return console.error("Invalid appointments data returned:",e),b("Received invalid appointment data. Please try again."),void y(!1);const t=fo(e);console.log("Processed safe appointments:",t.length),m(t),Promise.all([r(),a()]).then((e=>{let[n,r]=e;C({approved:n||[]}),k({approved:r||[]}),((e,t,n)=>{if(!e||!Array.isArray(e))return;console.log("Enhancing appointments with names:",e.length);const r=e.map((e=>{if(!e)return e;const r=(0,i.A)({},e);if(r.type||(r.donorId&&!r.recipientId?r.type="donor":r.recipientId&&!r.donorId&&(r.type="recipient")),"donor"===r.type&&r.donorId){const e=t.find((e=>e.id===r.donorId));e&&(r.patientName=M(e),delete r.recipientId,delete r.recipientName,e._cachedName=r.patientName)}if("recipient"===r.type&&r.recipientId){const e=n.find((e=>e.id===r.recipientId));e&&(r.patientName=F(e),delete r.donorId,delete r.donorName,e._cachedName=r.patientName)}return console.log("Enhanced appointment ".concat(r.id,": type=").concat(r.type,", patientName=").concat(r.patientName)),r}));m(r)})(t,n||[],r||[])})).catch((e=>{console.error("Error fetching patient data:",e)})),y(!1)}catch(e){console.error("Error in appointment fetch:",e),b("Failed to load appointments: ".concat(e.message)),y(!1)}try{const e=await(0,oo.ar)();e&&Array.isArray(e)?_(e):console.error("Invalid doctors data:",e)}catch(t){console.error("Error fetching doctors:",t)}try{const e=(0,bt.rJ)(xt.db,"donors"),t=(0,bt.P)(e,(0,bt._M)("status","==","approved")),n=await(0,bt.GG)(t);if(n&&n.docs){const e=n.docs.map((e=>(0,i.A)({id:e.id},e.data())));C({approved:e})}const r=(0,bt.rJ)(xt.db,"recipients"),a=(0,bt.P)(r,(0,bt._M)("status","==","approved")),s=await(0,bt.GG)(a);if(s&&s.docs){const e=s.docs.map((e=>(0,i.A)({id:e.id},e.data())));k({approved:e})}}catch(n){console.error("Error fetching donors and recipients:",n)}}catch(o){console.error("Fatal error in fetchData:",o),b("An unexpected error occurred: ".concat(o.message)),y(!1)}}()}),[s,u]),(0,t.useEffect)((function(){if(p.length>0){console.log("Filtering appointments for tab:",u);let e=p.filter((function(e){if(!e)return!1;return(e.type||e.patientType||(e.donorId?"donor":e.recipientId?"recipient":null))===u}));console.log("Active tab:",u,"- Filtered appointments:",e.length),d&&(e=e.filter((function(e){return"donor"===u?e.donorId===d:e.recipientId===d})),console.log("Further filtered by patient ID:",d,"- Results:",e.length),e.length>0&&!j&&o.search.includes("id=")&&E(e[0])),g(e)}}),[p,u,d,j,o.search,T.approved,D.approved]);const U=function(e){try{if(y(!0),!j)return console.error("No appointment selected for update"),Jn.error("No appointment selected for update"),void y(!1);(0,oo.l0)(j.id,j.type,e).then((function(){return Jn.success("Appointment updated successfully!"),N(!1),S(!1),E(null),(0,oo.Cb)(s.uid)})).then((function(e){m(e),y(!1)})).catch((function(e){console.error("Error updating appointment:",e),Jn.error("Failed to update appointment. Please try again."),y(!1)}))}catch(t){console.error("Error in handleUpdateAppointment:",t),Jn.error("Failed to update appointment. Please try again."),y(!1)}},V=function(e){console.log("Form submitted with data:",e);let t=co({});if(null===e||void 0===e)return console.error("No data received in handleSubmit"),void Jn.error("No data provided for submission");if("string"===typeof e)t=co({purpose:e});else if("object"===typeof e){const n={};e.purpose&&("string"===typeof e.purpose?n.purpose=e.purpose:n.purpose="Medical Consultation"),e.patientId&&"string"===typeof e.patientId&&(n.patientId=e.patientId),e.patientType?"string"===typeof e.patientType?n.type=e.patientType:n.type=u:e.type&&"string"===typeof e.type?n.type=e.type:n.type=u,e.date&&(n.date=e.date),e.time&&(n.time=e.time),e.notes&&(n.notes=e.notes),e.doctorId&&(n.doctorId=e.doctorId),e.hospitalId&&(n.hospitalId=e.hospitalId),"donor"===u&&e.patientId?n.donorId=e.patientId:"recipient"===u&&e.patientId&&(n.recipientId=e.patientId),t=co(n)}console.log("Sanitized data:",t),A?U(t):function(e){if(!e||"object"!==typeof e)return console.error("Invalid appointment data:",e),void Jn.error("Invalid appointment data");try{y(!0);const t="object"===typeof e.purpose?lo(e.purpose):e.purpose||"Medical Consultation";console.log("Using purpose:",t);const n=(0,i.A)((0,i.A)({},e),{},{purpose:t,doctorId:s.uid,doctorName:s.firstName&&s.lastName?"Dr. ".concat(s.firstName," ").concat(s.lastName):s.displayName?"Dr. ".concat(s.displayName):"Dr. Unknown"}),r=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),a=e.time||"scheduled time";let o,l;"donor"===u?(l=e.donorId||e.patientId,o=(0,oo.yK)(n).then((function(e){return Jn.success("Donor appointment scheduled successfully!"),l&&(0,go.createNotification)(l,"New Appointment Scheduled","You have a new donation appointment scheduled for ".concat(r," at ").concat(a,". Purpose: ").concat(t,"."),"appointment").catch((e=>console.error("Error sending notification:",e))),e}))):(l=e.recipientId||e.patientId,o=(0,oo.hW)(n).then((function(e){return Jn.success("Recipient appointment scheduled successfully!"),l&&(0,go.createNotification)(l,"New Appointment Scheduled","You have a new transplant appointment scheduled for ".concat(r," at ").concat(a,". Purpose: ").concat(t,"."),"appointment").catch((e=>console.error("Error sending notification:",e))),e}))),o.then((function(){return N(!1),(0,oo.Cb)(s.uid)})).then((function(e){m(e),y(!1)})).catch((function(e){console.error("Error creating appointment:",e),Jn.error("Failed to schedule appointment. Please try again."),y(!1)}))}catch(t){console.error("Error in handleCreateAppointment:",t),Jn.error("Failed to schedule appointment. Please try again."),y(!1)}}(t)};return(0,wt.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,wt.jsx)(er,{position:"top-right",autoClose:3e3}),(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Appointment Management"}),(0,wt.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all donor and recipient appointments in one place"})]}),(0,wt.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,wt.jsxs)("nav",{className:"flex -mb-px",children:[(0,wt.jsx)("button",{className:"py-4 px-6 font-medium text-sm border-b-2 ".concat("donor"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:function(){h("donor")},children:"Donor Appointments"}),"          ",(0,wt.jsx)("button",{className:"py-4 px-6 font-medium text-sm border-b-2 ".concat("recipient"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:function(){h("recipient")},children:"Recipient Appointments"})]})}),(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wt.jsx)("div",{children:(0,wt.jsxs)("h2",{className:"text-xl font-semibold",children:["donor"===u?"Donor":"Recipient"," Appointments"]})}),(0,wt.jsx)("div",{className:"flex space-x-3"})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-blue-800",children:"Upcoming"}),(0,wt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:f.filter((function(e){return"scheduled"===e.status})).length})]}),(0,wt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-green-800",children:"Completed"}),(0,wt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:f.filter((function(e){return"completed"===e.status})).length})]}),(0,wt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg shadow",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"Cancelled"}),(0,wt.jsx)("p",{className:"text-3xl font-bold text-red-600",children:f.filter((function(e){return"cancelled"===e.status})).length})]})]}),x&&(0,wt.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 mb-6 rounded-lg shadow-md",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Appointments"}),"string"===typeof x?(0,wt.jsx)("p",{className:"mb-3",children:x}):x instanceof Error?(0,wt.jsx)("p",{className:"mb-3",children:x.message||"An error occurred"}):(0,wt.jsx)("p",{className:"mb-3",children:x&&"object"===typeof x&&x.message?x.message:"An unexpected error occurred"}),"string"===typeof x&&x.includes("requires an index")&&(0,wt.jsxs)("div",{className:"mt-4 bg-white p-4 rounded border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium mb-2",children:"Firestore Index Required"}),(0,wt.jsx)("p",{className:"text-sm mb-3",children:"This error occurs because Firestore needs an index for the query. Please follow these steps to fix it:"}),(0,wt.jsxs)("ol",{className:"list-decimal list-inside text-sm ml-2 space-y-1 mb-3",children:[(0,wt.jsx)("li",{children:"Click the link in the error message"}),(0,wt.jsx)("li",{children:"Sign in to your Firebase console if prompted"}),(0,wt.jsx)("li",{children:'Click "Create Index" on the Firebase console page that opens'}),(0,wt.jsx)("li",{children:"Wait for the index to be created (typically 1-2 minutes)"}),(0,wt.jsx)("li",{children:"Return to this page and refresh"})]}),(0,wt.jsx)("button",{onClick:function(){window.location.reload()},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-2",children:"Retry After Creating Index"})]})]}),v&&(0,wt.jsx)("div",{className:"flex justify-center my-8",children:(0,wt.jsx)("div",{className:"loader"})}),!v&&(0,wt.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,wt.jsx)(Bs,{appointments:f,onEdit:function(e){E(null);const t=JSON.parse(JSON.stringify(e));"isBeingViewed"in t&&delete t.isBeingViewed,t.isBeingEdited=!0,console.log("Preparing appointment for editing:",t);const n="donor"===t.type?t.donorId:t.recipientId;if(n&&!t.fullName)if("donor"===t.type){const e=(T.approved||[]).find((e=>e.id===n));e&&(console.log("Found matching donor for editing:",e),Object.assign(t,{fullName:e.fullName||e.name,bloodType:e.bloodType||t.bloodType,age:e.age||t.age,gender:e.gender||t.gender,contactNumber:e.contactNumber||e.phone||t.contactNumber,email:e.email||t.email}))}else{const e=(D.approved||[]).find((e=>e.id===n));e&&(console.log("Found matching recipient for editing:",e),Object.assign(t,{fullName:e.fullName||e.name,bloodType:e.bloodType||t.bloodType,age:e.age||t.age,gender:e.gender||t.gender,contactNumber:e.contactNumber||e.phone||t.contactNumber,email:e.email||t.email,organType:e.organType||t.organType}))}E(t),S(!0),N(!0)},onCancel:function(e){try{window.confirm("Are you sure you want to cancel this appointment?")&&(y(!0),(0,oo.ol)(e.id,e.type).then((function(){return Jn.info("Appointment cancelled successfully."),(0,oo.Cb)(s.uid)})).then((function(e){m(e),y(!1)})).catch((function(e){console.error("Error cancelling appointment:",e),Jn.error("Failed to cancel appointment. Please try again."),y(!1)})))}catch(t){console.error("Error in handleCancelAppointment:",t),Jn.error("Failed to cancel appointment. Please try again."),y(!1)}},onComplete:function(e){try{window.confirm("Are you sure you want to mark this appointment as completed?")&&(y(!0),(0,oo.pb)(e.id,e.type).then((function(){return Jn.success("Appointment marked as completed!"),(0,oo.Cb)(s.uid)})).then((function(e){m(e),y(!1)})).catch((function(e){console.error("Error completing appointment:",e),Jn.error("Failed to complete appointment. Please try again."),y(!1)})))}catch(t){console.error("Error in handleCompleteAppointment:",t),Jn.error("Failed to complete appointment. Please try again."),y(!1)}},onReschedule:e=>{E(e),n(!0)},userRole:(null===s||void 0===s?void 0:s.role)||"doctor"})}),w&&(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto p-4",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md flex flex-col max-h-[90vh]",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center border-b px-6 py-4 sticky top-0 bg-white z-10",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium",children:A?"Edit Appointment":"Schedule New ".concat("donor"===u?"Donor":"Recipient"," Appointment")}),(0,wt.jsx)("button",{onClick:function(){N(!1)},className:"text-gray-400 hover:text-gray-500",children:(0,wt.jsx)("span",{className:"text-2xl",children:"\xd7"})})]}),(0,wt.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:A?(0,wt.jsx)(uo,{onSubmit:V,initialData:j,appointmentType:u,userRole:(null===s||void 0===s?void 0:s.role)||"doctor",userId:A&&j?j[u+"Id"]:""}):(0,wt.jsx)(ho,{onSubmit:V,appointmentType:u,onCancel:function(){N(!1)}})})]})}),e&&j&&(0,wt.jsx)(po,{isOpen:e,onClose:()=>n(!1),appointment:j,onSubmit:e=>{const t=(0,i.A)((0,i.A)({},j),{},{date:e.date,time:e.time,purpose:e.purpose}),r=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),a=e.time||"scheduled time",s="donor"===j.type?j.donorId:j.recipientId;s&&(0,go.createNotification)(s,"Appointment Rescheduled","Your appointment has been rescheduled to ".concat(r," at ").concat(a,". Purpose: ").concat(e.purpose||j.purpose,"."),"appointment").catch((e=>console.error("Error sending notification:",e))),U(t),n(!1)}})]})};function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yo.apply(null,arguments)}n(949);function xo(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function bo(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function wo(e,n){return Object.keys(n).reduce((function(r,s){var i,o=r,l=o[xo(s)],c=o[s],d=a(o,[xo(s),s].map(bo)),u=n[s],h=function(e,n,r){var a=(0,t.useRef)(void 0!==e),s=(0,t.useState)(n),i=s[0],o=s[1],l=void 0!==e,c=a.current;return a.current=l,!l&&c&&i!==n&&o(n),[l?e:i,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r&&r.apply(void 0,[e].concat(n)),o(e)}),[r])]}(c,l,e[u]),p=h[0],m=h[1];return yo({},d,((i={})[s]=p,i[u]=m,i))}),e)}function No(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function jo(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Eo(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}No.__suppressDeprecationWarning=!0,jo.__suppressDeprecationWarning=!0,Eo.__suppressDeprecationWarning=!0;function Ao(e,n,r){const a=(0,t.useRef)(void 0!==e),[s,i]=(0,t.useState)(n),o=void 0!==e,l=a.current;return a.current=o,!o&&l&&s!==n&&i(n),[o?e:s,(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[a,...s]=t;let o=null==r?void 0:r(a,...s);return i(a),o}),[r])]}const So={prefix:String(Math.round(1e10*Math.random())),current:0},Io=t.createContext(So),_o=t.createContext(!1);Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);let To=new WeakMap;function Co(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,t.useContext)(Io),r=(0,t.useRef)(null);if(null===r.current&&!e){var a,s;let e=null===(s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(a=s.ReactCurrentOwner)||void 0===a?void 0:a.current;if(e){let t=To.get(e);null==t?To.set(e,{id:n.current,state:e.memoizedState}):e.memoizedState!==t.state&&(n.current=t.id,To.delete(e))}r.current=++n.current}return r.current}const Do="function"===typeof t.useId?function(e){let n=t.useId(),[r]=(0,t.useState)("function"===typeof t.useSyncExternalStore?t.useSyncExternalStore(Ro,ko,Po):(0,t.useContext)(_o)),a=r?"react-aria":"react-aria".concat(So.prefix);return e||"".concat(a,"-").concat(n)}:function(e){let n=(0,t.useContext)(Io),r=Co(!!e),a="react-aria".concat(n.prefix);return e||"".concat(a,"-").concat(r)};function ko(){return!1}function Po(){return!0}function Ro(e){return()=>{}}const Oo=t.createContext(null),Lo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Mo=t.createContext(null);const Fo=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)((()=>{n.current=e}),[e]),n};function Uo(e){const n=Fo(e);return(0,t.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}const Vo=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const qo=function(e,n){return(0,t.useMemo)((()=>function(e,t){const n=Vo(e),r=Vo(t);return e=>{n&&n(e),r&&r(e)}}(e,n)),[e,n])};function zo(e){if(!e||"function"===typeof e)return null;const{major:n}=function(){const e=t.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return n>=19?e.props.ref:e.ref}const Bo=function(e){let{children:n,in:r,onExited:a,mountOnEnter:s,unmountOnExit:i}=e;const o=(0,t.useRef)(null),l=(0,t.useRef)(r),c=Uo(a);(0,t.useEffect)((()=>{r?l.current=!0:c(o.current)}),[r,c]);const d=qo(o,zo(n)),u=(0,t.cloneElement)(n,{ref:d});return r?u:i||!l.current&&s?null:u},Jo=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ho=["activeKey","getControlledId","getControllerId"],Go=["as"];function Wo(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Yo(e){let{active:n,eventKey:r,mountOnEnter:a,transition:s,unmountOnExit:i,role:o="tabpanel",onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:p}=e,m=Wo(e,Jo);const f=(0,t.useContext)(Oo);if(!f)return[Object.assign({},m,{role:o}),{eventKey:r,isActive:n,mountOnEnter:a,transition:s,unmountOnExit:i,onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:p}];const{activeKey:g,getControlledId:v,getControllerId:y}=f,x=Wo(f,Ho),b=Lo(r);return[Object.assign({},m,{role:o,id:v(r),"aria-labelledby":y(r)}),{eventKey:r,isActive:null==n&&null!=b?Lo(g)===b:n,transition:s||x.transition,mountOnEnter:null!=a?a:x.mountOnEnter,unmountOnExit:null!=i?i:x.unmountOnExit,onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:p}]}const Ko=t.forwardRef(((e,t)=>{let{as:n="div"}=e,r=Wo(e,Go);const[a,{isActive:s,onEnter:i,onEntering:o,onEntered:l,onExit:c,onExiting:d,onExited:u,mountOnEnter:h,unmountOnExit:p,transition:m=Bo}]=Yo(r);return(0,wt.jsx)(Oo.Provider,{value:null,children:(0,wt.jsx)(Mo.Provider,{value:null,children:(0,wt.jsx)(m,{in:s,onEnter:i,onEntering:o,onEntered:l,onExit:c,onExiting:d,onExited:u,mountOnEnter:h,unmountOnExit:p,children:(0,wt.jsx)(n,Object.assign({},a,{ref:t,hidden:!s,"aria-hidden":!s}))})})})}));Ko.displayName="TabPanel";const Qo=e=>{const{id:n,generateChildId:r,onSelect:a,activeKey:s,defaultActiveKey:i,transition:o,mountOnEnter:l,unmountOnExit:c,children:d}=e,[u,h]=Ao(s,i,a),p=Do(n),m=(0,t.useMemo)((()=>r||((e,t)=>p?"".concat(p,"-").concat(t,"-").concat(e):null)),[p,r]),f=(0,t.useMemo)((()=>({onSelect:h,activeKey:u,transition:o,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:e=>m(e,"tabpane"),getControllerId:e=>m(e,"tab")})),[h,u,o,l,c,m]);return(0,wt.jsx)(Oo.Provider,{value:f,children:(0,wt.jsx)(Mo.Provider,{value:h||null,children:d})})};Qo.Panel=Ko;const Xo=Qo;var Zo=n(738),$o=n.n(Zo),el=Function.prototype.bind.call(Function.prototype.call,[].slice);function tl(e,t){return el(e.querySelectorAll(t))}const nl=t.createContext(null);nl.displayName="NavContext";const rl=nl;function al(e){return"".concat("data-rr-ui-").concat(e)}const sl=["as","disabled"];function il(e){let{tagName:t,disabled:n,href:r,target:a,rel:s,role:i,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=a||null!=s?"a":"button");const d={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},d];const u=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?a:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const ol=t.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,sl);const[s,{tagName:i}]=il(Object.assign({tagName:n,disabled:r},a));return(0,wt.jsx)(i,Object.assign({},a,s,{ref:t}))}));ol.displayName="Button";const ll=ol,cl=["as","active","eventKey"];function dl(e){let{key:n,onClick:r,active:a,id:s,role:i,disabled:o}=e;const l=(0,t.useContext)(Mo),c=(0,t.useContext)(rl),d=(0,t.useContext)(Oo);let u=a;const h={role:i};if(c){i||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=n?n:null),t=c.getControlledId(null!=n?n:null);h[al("event-key")]=n,h.id=e||s,u=null==a&&null!=n?c.activeKey===n:a,!u&&(null!=d&&d.unmountOnExit||null!=d&&d.mountOnEnter)||(h["aria-controls"]=t)}return"tab"===h.role&&(h["aria-selected"]=u,u||(h.tabIndex=-1),o&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=Uo((e=>{o||(null==r||r(e),null!=n&&l&&!e.isPropagationStopped()&&l(n,e))})),[h,{isActive:u}]}const ul=t.forwardRef(((e,t)=>{let{as:n=ll,active:r,eventKey:a}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,cl);const[i,o]=dl(Object.assign({key:Lo(a,s.href),active:r},s));return i[al("active")]=o.isActive,(0,wt.jsx)(n,Object.assign({},s,i,{ref:t}))}));ul.displayName="NavItem";const hl=ul,pl=["as","onSelect","activeKey","role","onKeyDown"];const ml=()=>{},fl=al("event-key"),gl=t.forwardRef(((e,n)=>{let{as:r="div",onSelect:a,activeKey:s,role:i,onKeyDown:o}=e,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,pl);const c=function(){const[,e]=(0,t.useReducer)((e=>e+1),0);return e}(),d=(0,t.useRef)(!1),u=(0,t.useContext)(Mo),h=(0,t.useContext)(Oo);let p,m;h&&(i=i||"tablist",s=h.activeKey,p=h.getControlledId,m=h.getControllerId);const f=(0,t.useRef)(null),g=e=>{const t=f.current;if(!t)return null;const n=tl(t,"[".concat(fl,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const a=n.indexOf(r);if(-1===a)return null;let s=a+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},v=(e,t)=>{null!=e&&(null==a||a(e,t),null==u||u(e,t))};(0,t.useEffect)((()=>{if(f.current&&d.current){const e=f.current.querySelector("[".concat(fl,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));const y=qo(n,f);return(0,wt.jsx)(Mo.Provider,{value:v,children:(0,wt.jsx)(rl.Provider,{value:{role:i,activeKey:Lo(s),getControlledId:p||ml,getControllerId:m||ml},children:(0,wt.jsx)(r,Object.assign({},l,{onKeyDown:e=>{if(null==o||o(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,c())},ref:y,role:i}))})})}));gl.displayName="Nav";const vl=Object.assign(gl,{Item:hl}),yl=["xxl","xl","lg","md","sm","xs"],xl="xs",bl=t.createContext({prefixes:{},breakpoints:yl,minBreakpoint:xl}),{Consumer:wl,Provider:Nl}=bl;function jl(e,n){const{prefixes:r}=(0,t.useContext)(bl);return e||r[n]||n}const El=t.createContext(null);El.displayName="NavbarContext";const Al=El,Sl=t.createContext(null);Sl.displayName="CardHeaderContext";const Il=Sl,_l=["className","bsPrefix","as"],Tl=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:a="div"}=e,o=s(e,_l);return r=jl(r,"nav-item"),(0,wt.jsx)(a,(0,i.A)({ref:t,className:$o()(n,r)},o))}));Tl.displayName="NavItem";const Cl=Tl;const Dl="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,kl="undefined"!==typeof document||Dl?t.useLayoutEffect:t.useEffect;new WeakMap;const Pl=["onKeyDown"];const Rl=t.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Pl);const[a]=il(Object.assign({tagName:"a"},r)),s=Uo((e=>{a.onKeyDown(e),null==n||n(e)}));return function(e){return!e||"#"===e.trim()}(r.href)||"button"===r.role?(0,wt.jsx)("a",Object.assign({ref:t},r,a,{onKeyDown:s})):(0,wt.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n}))}));Rl.displayName="Anchor";const Ol=Rl,Ll=["bsPrefix","className","as","active","eventKey","disabled"],Ml=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:a=Ol,active:o,eventKey:l,disabled:c=!1}=e,d=s(e,Ll);n=jl(n,"nav-link");const[u,h]=dl((0,i.A)({key:Lo(l,d.href),active:o,disabled:c},d));return(0,wt.jsx)(a,(0,i.A)((0,i.A)((0,i.A)({},d),u),{},{ref:t,disabled:c,className:$o()(r,n,c&&"disabled",h.isActive&&"active")}))}));Ml.displayName="NavLink";const Fl=Ml,Ul=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Vl=t.forwardRef(((e,n)=>{const r=wo(e,{activeKey:"onSelect"}),{as:a="div",bsPrefix:o,variant:l,fill:c=!1,justify:d=!1,navbar:u,navbarScroll:h,className:p,activeKey:m}=r,f=s(r,Ul),g=jl(o,"nav");let v,y,x=!1;const b=(0,t.useContext)(Al),w=(0,t.useContext)(Il);return b?(v=b.bsPrefix,x=null==u||u):w&&({cardHeaderBsPrefix:y}=w),(0,wt.jsx)(vl,(0,i.A)({as:a,ref:n,activeKey:m,className:$o()(p,{[g]:!x,["".concat(v,"-nav")]:x,["".concat(v,"-nav-scroll")]:x&&h,["".concat(y,"-").concat(l)]:!!y,["".concat(g,"-").concat(l)]:!!l,["".concat(g,"-fill")]:c,["".concat(g,"-justified")]:d})},f))}));Vl.displayName="Nav";const ql=Object.assign(Vl,{Item:Cl,Link:Fl}),zl=["className","bsPrefix","as"],Bl=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:a="div"}=e,o=s(e,zl);return r=jl(r,"tab-content"),(0,wt.jsx)(a,(0,i.A)({ref:t,className:$o()(n,r)},o))}));Bl.displayName="TabContent";const Jl=Bl;function Hl(e,t){return Hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hl(e,t)}const Gl=!1,Wl=t.createContext(null);var Yl="unmounted",Kl="exited",Ql="entering",Xl="entered",Zl="exiting",$l=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var a,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(a=Kl,r.appearStatus=Ql):a=Xl:a=t.unmountOnExit||t.mountOnEnter?Yl:Kl,r.state={status:a},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Hl(e,t)}(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Yl?{status:Kl}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ql&&n!==Xl&&(t=Ql):n!==Ql&&n!==Xl||(t=Zl)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ql){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Hs.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kl&&this.setState({status:Yl})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[Hs.findDOMNode(this),r],s=a[0],i=a[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||Gl?this.safeSetState({status:Xl},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,i),this.safeSetState({status:Ql},(function(){t.props.onEntering(s,i),t.onTransitionEnd(l,(function(){t.safeSetState({status:Xl},(function(){t.props.onEntered(s,i)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Hs.findDOMNode(this);t&&!Gl?(this.props.onExit(r),this.safeSetState({status:Zl},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Kl},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Kl},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Hs.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=a[0],i=a[1];this.props.addEndListener(s,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Yl)return null;var n=this.props,r=n.children,s=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,a(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Wl.Provider,{value:null},"function"===typeof r?r(e,s):t.cloneElement(t.Children.only(r),s))},n}(t.Component);function ec(){}$l.contextType=Wl,$l.propTypes={},$l.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ec,onEntering:ec,onEntered:ec,onExit:ec,onExiting:ec,onExited:ec},$l.UNMOUNTED=Yl,$l.EXITED=Kl,$l.ENTERING=Ql,$l.ENTERED=Xl,$l.EXITING=Zl;const tc=$l;function nc(e){return e&&e.ownerDocument||document}function rc(e,t){return function(e){var t=nc(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var ac=/([A-Z])/g;var sc=/^ms-/;function ic(e){return function(e){return e.replace(ac,"-$1").toLowerCase()}(e).replace(sc,"-ms-")}var oc=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const lc=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(ic(t))||rc(e).getPropertyValue(ic(t));Object.keys(t).forEach((function(a){var s=t[a];s||0===s?!function(e){return!(!e||!oc.test(e))}(a)?n+=ic(a)+": "+s+";":r+=a+"("+s+") ":e.style.removeProperty(ic(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},cc=!("undefined"===typeof window||!window.document||!window.document.createElement);var dc=!1,uc=!1;try{var hc={get passive(){return dc=!0},get once(){return uc=dc=!0}};cc&&(window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,!0))}catch(du){}const pc=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!uc){var a=r.once,s=r.capture,i=n;!uc&&a&&(i=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=i),e.addEventListener(t,i,dc?r:s)}e.addEventListener(t,n,r)};const mc=function(e,t,n,r){var a=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};const fc=function(e,t,n,r){return pc(e,t,n,r),function(){mc(e,t,n,r)}};function gc(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}(e,"transitionend",!0)}),t+n),s=fc(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),s()}}function vc(e,t,n,r){null==n&&(n=function(e){var t=lc(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var a=gc(e,n,r),s=fc(e,"transitionend",t);return function(){a(),s()}}function yc(e,t){const n=lc(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function xc(e,t){const n=yc(e,"transitionDuration"),r=yc(e,"transitionDelay"),a=vc(e,(n=>{n.target===e&&(a(),t(n))}),n+r)}const bc=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const wc=function(e,n){return(0,t.useMemo)((()=>function(e,t){const n=bc(e),r=bc(t);return e=>{n&&n(e),r&&r(e)}}(e,n)),[e,n])};const Nc=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],jc=t.forwardRef(((e,n)=>{let{onEnter:r,onEntering:a,onEntered:o,onExit:l,onExiting:c,onExited:d,addEndListener:u,children:h,childRef:p}=e,m=s(e,Nc);const f=(0,t.useRef)(null),g=wc(f,p),v=e=>{var t;g((t=e)&&"setState"in t?Hs.findDOMNode(t):null!=t?t:null)},y=e=>t=>{e&&f.current&&e(f.current,t)},x=(0,t.useCallback)(y(r),[r]),b=(0,t.useCallback)(y(a),[a]),w=(0,t.useCallback)(y(o),[o]),N=(0,t.useCallback)(y(l),[l]),j=(0,t.useCallback)(y(c),[c]),E=(0,t.useCallback)(y(d),[d]),A=(0,t.useCallback)(y(u),[u]);return(0,wt.jsx)(tc,(0,i.A)((0,i.A)({ref:n},m),{},{onEnter:x,onEntered:w,onEntering:b,onExit:N,onExited:E,onExiting:j,addEndListener:A,nodeRef:f,children:"function"===typeof h?(e,t)=>h(e,(0,i.A)((0,i.A)({},t),{},{ref:v})):t.cloneElement(h,{ref:v})}))}));jc.displayName="TransitionWrapper";const Ec=jc,Ac=["className","children","transitionClasses","onEnter"],Sc={[Ql]:"show",[Xl]:"show"},Ic=t.forwardRef(((e,n)=>{let{className:r,children:a,transitionClasses:o={},onEnter:l}=e,c=s(e,Ac);const d=(0,i.A)({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},c),u=(0,t.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==l||l(e,t)}),[l]);return(0,wt.jsx)(Ec,(0,i.A)((0,i.A)({ref:n,addEndListener:xc},d),{},{onEnter:u,childRef:zo(a),children:(e,n)=>t.cloneElement(a,(0,i.A)((0,i.A)({},n),{},{className:$o()("fade",r,a.props.className,Sc[e],o[e])}))}))}));Ic.displayName="Fade";const _c=Ic;function Tc(e){return"boolean"===typeof e?e?_c:Bo:e}const Cc=["bsPrefix","transition"],Dc=["className","as"],kc=t.forwardRef(((e,t)=>{let{bsPrefix:n,transition:r}=e,a=s(e,Cc);const[o,{isActive:l,onEnter:c,onEntering:d,onEntered:u,onExit:h,onExiting:p,onExited:m,mountOnEnter:f,unmountOnExit:g,transition:v=_c}]=Yo((0,i.A)((0,i.A)({},a),{},{transition:Tc(r)})),{className:y,as:x="div"}=o,b=s(o,Dc),w=jl(n,"tab-pane");return(0,wt.jsx)(Oo.Provider,{value:null,children:(0,wt.jsx)(Mo.Provider,{value:null,children:(0,wt.jsx)(v,{in:l,onEnter:c,onEntering:d,onEntered:u,onExit:h,onExiting:p,onExited:m,mountOnEnter:f,unmountOnExit:g,children:(0,wt.jsx)(x,(0,i.A)((0,i.A)({},b),{},{ref:t,className:$o()(y,w,l&&"active")}))})})})}));kc.displayName="TabPane";const Pc=kc;function Rc(e,n){let r=0;return t.Children.map(e,(e=>t.isValidElement(e)?n(e,r++):e))}const Oc=["id","onSelect","transition","mountOnEnter","unmountOnExit","variant","children","activeKey"];function Lc(e){let n;return function(e,n){let r=0;t.Children.forEach(e,(e=>{t.isValidElement(e)&&n(e,r++)}))}(e,(e=>{null==n&&(n=e.props.eventKey)})),n}function Mc(e){const{title:t,eventKey:n,disabled:r,tabClassName:a,tabAttrs:s,id:o}=e.props;return null==t?null:(0,wt.jsx)(Cl,{as:"li",role:"presentation",children:(0,wt.jsx)(Fl,(0,i.A)((0,i.A)({as:"button",type:"button",eventKey:n,disabled:r,id:o,className:a},s),{},{children:t}))})}const Fc=e=>{const t=wo(e,{activeKey:"onSelect"}),{id:n,onSelect:r,transition:a,mountOnEnter:o=!1,unmountOnExit:l=!1,variant:c="tabs",children:d,activeKey:u=Lc(d)}=t,h=s(t,Oc);return(0,wt.jsxs)(Xo,{id:n,activeKey:u,onSelect:r,transition:Tc(a),mountOnEnter:o,unmountOnExit:l,children:[(0,wt.jsx)(ql,(0,i.A)((0,i.A)({id:n},h),{},{role:"tablist",as:"ul",variant:c,children:Rc(d,Mc)})),(0,wt.jsx)(Jl,{children:Rc(d,(e=>{const t=(0,i.A)({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,wt.jsx)(Pc,(0,i.A)({},t))}))})]})};Fc.displayName="Tabs";const Uc=Fc;var Vc=n(942),qc=n.n(Vc);const zc=["transition"],Bc=e=>{let{transition:t}=e,n=s(e,zc);return(0,wt.jsx)(Xo,(0,i.A)((0,i.A)({},n),{},{transition:Tc(t)}))};Bc.displayName="TabContainer";const Jc=Bc,Hc={eventKey:qc().oneOfType([qc().string,qc().number]),title:qc().node.isRequired,disabled:qc().bool,tabClassName:qc().string,tabAttrs:qc().object},Gc=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Gc.propTypes=Hc;const Wc=Object.assign(Gc,{Container:Jc,Content:Jl,Pane:Pc}),Yc=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],Kc=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,striped:a,bordered:o,borderless:l,hover:c,size:d,variant:u,responsive:h}=e,p=s(e,Yc);const m=jl(n,"table"),f=$o()(r,m,u&&"".concat(m,"-").concat(u),d&&"".concat(m,"-").concat(d),a&&"".concat(m,"-").concat("string"===typeof a?"striped-".concat(a):"striped"),o&&"".concat(m,"-bordered"),l&&"".concat(m,"-borderless"),c&&"".concat(m,"-hover")),g=(0,wt.jsx)("table",(0,i.A)((0,i.A)({},p),{},{className:f,ref:t}));if(h){let e="".concat(m,"-responsive");return"string"===typeof h&&(e="".concat(e,"-").concat(h)),(0,wt.jsx)("div",{className:e,children:g})}return g}));Kc.displayName="Table";const Qc=Kc,Xc=["as","bsPrefix","variant","size","active","disabled","className"],Zc=t.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:a="primary",size:o,active:l=!1,disabled:c=!1,className:d}=e,u=s(e,Xc);const h=jl(r,"btn"),[p,{tagName:m}]=il((0,i.A)({tagName:n,disabled:c},u)),f=m;return(0,wt.jsx)(f,(0,i.A)((0,i.A)((0,i.A)({},p),u),{},{ref:t,disabled:c,className:$o()(d,h,l&&"active",a&&"".concat(h,"-").concat(a),o&&"".concat(h,"-").concat(o),u.href&&c&&"disabled")}))}));Zc.displayName="Button";const $c=Zc;var ed;function td(e){if((!ed&&0!==ed||e)&&cc){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ed=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ed}const nd=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)((()=>{n.current=e}),[e]),n};function rd(e){const n=nd(e);return(0,t.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}function ad(e){const n=function(e){const n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((()=>()=>n.current()),[])}function sd(e){void 0===e&&(e=nc());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(du){return e.body}}function id(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function od(e){const n=function(e){const n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((()=>()=>n.current()),[])}const ld=al("modal-open");const cd=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(lc(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(ld,""),lc(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(ld),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},dd=(0,t.createContext)(cc?window:void 0);dd.Provider;function ud(){return(0,t.useContext)(dd)}const hd=(e,t)=>cc?null==e?(t||nc()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const pd=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const md=["component"];const fd=t.forwardRef(((e,n)=>{let{component:r}=e,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,md);const s=function(e){let{onEnter:n,onEntering:r,onEntered:a,onExit:s,onExiting:i,onExited:o,addEndListener:l,children:c}=e,d=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,pd);const u=(0,t.useRef)(null),h=qo(u,zo(c)),p=e=>t=>{e&&u.current&&e(u.current,t)},m=(0,t.useCallback)(p(n),[n]),f=(0,t.useCallback)(p(r),[r]),g=(0,t.useCallback)(p(a),[a]),v=(0,t.useCallback)(p(s),[s]),y=(0,t.useCallback)(p(i),[i]),x=(0,t.useCallback)(p(o),[o]),b=(0,t.useCallback)(p(l),[l]);return Object.assign({},d,{nodeRef:u},n&&{onEnter:m},r&&{onEntering:f},a&&{onEntered:g},s&&{onExit:v},i&&{onExiting:y},o&&{onExited:x},l&&{addEndListener:b},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:h})):(0,t.cloneElement)(c,{ref:h})})}(a);return(0,wt.jsx)(r,Object.assign({ref:n},s))})),gd=fd;function vd(e){let{children:n,in:r,onExited:a,onEntered:s,transition:i}=e;const[o,l]=(0,t.useState)(!r);r&&o&&l(!1);const c=function(e){let{in:n,onTransition:r}=e;const a=(0,t.useRef)(null),s=(0,t.useRef)(!0),i=Uo(r);return kl((()=>{if(!a.current)return;let e=!1;return i({in:n,element:a.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[n,i]),kl((()=>(s.current=!1,()=>{s.current=!0})),[]),a}({in:!!r,onTransition:e=>{Promise.resolve(i(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==a||a(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),d=qo(c,zo(n));return o&&!r?null:(0,t.cloneElement)(n,{ref:d})}function yd(e,t,n){return e?(0,wt.jsx)(gd,Object.assign({},n,{component:e})):t?(0,wt.jsx)(vd,Object.assign({},n,{transition:t})):(0,wt.jsx)(Bo,Object.assign({},n))}const xd=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let bd;function wd(e){const n=ud(),r=e||function(e){return bd||(bd=new cd({ownerDocument:null==e?void 0:e.document})),bd}(n),a=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(a.current,{add:()=>r.add(a.current),remove:()=>r.remove(a.current),isTopModal:()=>r.isTopModal(a.current),setDialogRef:(0,t.useCallback)((e=>{a.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((e=>{a.current.backdrop=e}),[])})}const Nd=(0,t.forwardRef)(((e,n)=>{let{show:r=!1,role:a="dialog",className:s,style:i,children:o,backdrop:l=!0,keyboard:c=!0,onBackdropClick:d,onEscapeKeyDown:u,transition:h,runTransition:p,backdropTransition:m,runBackdropTransition:f,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:x,renderDialog:b,renderBackdrop:w=e=>(0,wt.jsx)("div",Object.assign({},e)),manager:N,container:j,onShow:E,onHide:A=()=>{},onExit:S,onExited:I,onExiting:_,onEnter:T,onEntering:C,onEntered:D}=e,k=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,xd);const P=ud(),R=function(e,n){const r=ud(),[a,s]=(0,t.useState)((()=>hd(e,null==r?void 0:r.document)));if(!a){const t=hd(e);t&&s(t)}return(0,t.useEffect)((()=>{n&&a&&n(a)}),[n,a]),(0,t.useEffect)((()=>{const t=hd(e);t!==a&&s(t)}),[e,a]),a}(j),O=wd(N),L=function(){const e=(0,t.useRef)(!0),n=(0,t.useRef)((()=>e.current));return(0,t.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),n.current}(),M=function(e){const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{n.current=e})),n.current}(r),[F,U]=(0,t.useState)(!r),V=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(()=>O),[O]),cc&&!M&&r&&(V.current=sd(null==P?void 0:P.document)),r&&F&&U(!1);const q=Uo((()=>{if(O.add(),W.current=fc(document,"keydown",H),G.current=fc(document,"focus",(()=>setTimeout(B)),!0),E&&E(),g){var e,t;const n=sd(null!=(e=null==(t=O.dialog)?void 0:t.ownerDocument)?e:null==P?void 0:P.document);O.dialog&&n&&!id(O.dialog,n)&&(V.current=n,O.dialog.focus())}})),z=Uo((()=>{var e;(O.remove(),null==W.current||W.current(),null==G.current||G.current(),y)&&(null==(e=V.current)||null==e.focus||e.focus(x),V.current=null)}));(0,t.useEffect)((()=>{r&&R&&q()}),[r,R,q]),(0,t.useEffect)((()=>{F&&z()}),[F,z]),od((()=>{z()}));const B=Uo((()=>{if(!v||!L()||!O.isTopModal())return;const e=sd(null==P?void 0:P.document);O.dialog&&e&&!id(O.dialog,e)&&O.dialog.focus()})),J=Uo((e=>{e.target===e.currentTarget&&(null==d||d(e),!0===l&&A())})),H=Uo((e=>{c&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&O.isTopModal()&&(null==u||u(e),e.defaultPrevented||A())})),G=(0,t.useRef)(),W=(0,t.useRef)();if(!R)return null;const Y=Object.assign({role:a,ref:O.setDialogRef,"aria-modal":"dialog"===a||void 0},k,{style:i,className:s,tabIndex:-1});let K=b?b(Y):(0,wt.jsx)("div",Object.assign({},Y,{children:t.cloneElement(o,{role:"document"})}));K=yd(h,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:S,onExiting:_,onExited:function(){U(!0),null==I||I(...arguments)},onEnter:T,onEntering:C,onEntered:D,children:K});let Q=null;return l&&(Q=w({ref:O.setBackdropRef,onClick:J}),Q=yd(m,f,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Q})),(0,wt.jsx)(wt.Fragment,{children:Hs.createPortal((0,wt.jsxs)(wt.Fragment,{children:[Q,K]}),R)})}));Nd.displayName="Modal";const jd=Object.assign(Nd,{Manager:cd});function Ed(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Ad=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Sd=".sticky-top",Id=".navbar-toggler";class _d extends cd{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,lc(t,{[e]:"".concat(parseFloat(lc(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],lc(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const a=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";tl(t,Ad).forEach((t=>this.adjustAndStore(a,t,e.scrollBarWidth))),tl(t,Sd).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),tl(t,Id).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=Ed(n.className,r):n.setAttribute("class",Ed(n.className&&n.className.baseVal||"",r));const a=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";tl(t,Ad).forEach((e=>this.restore(a,e))),tl(t,Sd).forEach((e=>this.restore(s,e))),tl(t,Id).forEach((e=>this.restore(s,e)))}}let Td;const Cd=["className","bsPrefix","as"],Dd=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:a="div"}=e,o=s(e,Cd);return r=jl(r,"modal-body"),(0,wt.jsx)(a,(0,i.A)({ref:t,className:$o()(n,r)},o))}));Dd.displayName="ModalBody";const kd=Dd,Pd=t.createContext({onHide(){}}),Rd=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],Od=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:a,centered:o,size:l,fullscreen:c,children:d,scrollable:u}=e,h=s(e,Rd);n=jl(n,"modal");const p="".concat(n,"-dialog"),m="string"===typeof c?"".concat(n,"-fullscreen-").concat(c):"".concat(n,"-fullscreen");return(0,wt.jsx)("div",(0,i.A)((0,i.A)({},h),{},{ref:t,className:$o()(p,r,l&&"".concat(n,"-").concat(l),o&&"".concat(p,"-centered"),u&&"".concat(p,"-scrollable"),c&&m),children:(0,wt.jsx)("div",{className:$o()("".concat(n,"-content"),a),children:d})}))}));Od.displayName="ModalDialog";const Ld=Od,Md=["className","bsPrefix","as"],Fd=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:a="div"}=e,o=s(e,Md);return r=jl(r,"modal-footer"),(0,wt.jsx)(a,(0,i.A)({ref:t,className:$o()(n,r)},o))}));Fd.displayName="ModalFooter";const Ud=Fd,Vd=["className","variant","aria-label"],qd={"aria-label":qc().string,onClick:qc().func,variant:qc().oneOf(["white"])},zd=t.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":a="Close"}=e,o=s(e,Vd);return(0,wt.jsx)("button",(0,i.A)({ref:t,type:"button",className:$o()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":a},o))}));zd.displayName="CloseButton",zd.propTypes=qd;const Bd=zd,Jd=["closeLabel","closeVariant","closeButton","onHide","children"],Hd=t.forwardRef(((e,n)=>{let{closeLabel:r="Close",closeVariant:a,closeButton:o=!1,onHide:l,children:c}=e,d=s(e,Jd);const u=(0,t.useContext)(Pd),h=rd((()=>{null==u||u.onHide(),null==l||l()}));return(0,wt.jsxs)("div",(0,i.A)((0,i.A)({ref:n},d),{},{children:[c,o&&(0,wt.jsx)(Bd,{"aria-label":r,variant:a,onClick:h})]}))}));Hd.displayName="AbstractModalHeader";const Gd=Hd,Wd=["bsPrefix","className","closeLabel","closeButton"],Yd=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:a="Close",closeButton:o=!1}=e,l=s(e,Wd);return n=jl(n,"modal-header"),(0,wt.jsx)(Gd,(0,i.A)((0,i.A)({ref:t},l),{},{className:$o()(r,n),closeLabel:a,closeButton:o}))}));Yd.displayName="ModalHeader";const Kd=Yd,Qd=["className","bsPrefix","as"],Xd=(Zd="h4",t.forwardRef(((e,t)=>(0,wt.jsx)("div",(0,i.A)((0,i.A)({},e),{},{ref:t,className:$o()(e.className,Zd)})))));var Zd;const $d=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:a=Xd}=e,o=s(e,Qd);return r=jl(r,"modal-title"),(0,wt.jsx)(a,(0,i.A)({ref:t,className:$o()(n,r)},o))}));$d.displayName="ModalTitle";const eu=$d,tu=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function nu(e){return(0,wt.jsx)(_c,(0,i.A)((0,i.A)({},e),{},{timeout:null}))}function ru(e){return(0,wt.jsx)(_c,(0,i.A)((0,i.A)({},e),{},{timeout:null}))}const au=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:a,style:o,dialogClassName:l,contentClassName:c,children:d,dialogAs:u=Ld,"data-bs-theme":h,"aria-labelledby":p,"aria-describedby":m,"aria-label":f,show:g=!1,animation:v=!0,backdrop:y=!0,keyboard:x=!0,onEscapeKeyDown:b,onShow:w,onHide:N,container:j,autoFocus:E=!0,enforceFocus:A=!0,restoreFocus:S=!0,restoreFocusOptions:I,onEntered:_,onExit:T,onExiting:C,onEnter:D,onEntering:k,onExited:P,backdropClassName:R,manager:O}=e,L=s(e,tu);const[M,F]=(0,t.useState)({}),[U,V]=(0,t.useState)(!1),q=(0,t.useRef)(!1),z=(0,t.useRef)(!1),B=(0,t.useRef)(null),[J,H]=(0,t.useState)(null),G=wc(n,H),W=rd(N),Y=function(){const{dir:e}=(0,t.useContext)(bl);return"rtl"===e}();r=jl(r,"modal");const K=(0,t.useMemo)((()=>({onHide:W})),[W]);function Q(){return O||function(e){return Td||(Td=new _d(e)),Td}({isRTL:Y})}function X(e){if(!cc)return;const t=Q().getScrollbarWidth()>0,n=e.scrollHeight>nc(e).documentElement.clientHeight;F({paddingRight:t&&!n?td():void 0,paddingLeft:!t&&n?td():void 0})}const Z=rd((()=>{J&&X(J.dialog)}));ad((()=>{mc(window,"resize",Z),null==B.current||B.current()}));const $=()=>{q.current=!0},ee=e=>{q.current&&J&&e.target===J.dialog&&(z.current=!0),q.current=!1},te=()=>{V(!0),B.current=vc(J.dialog,(()=>{V(!1)}))},ne=e=>{"static"!==y?z.current||e.target!==e.currentTarget?z.current=!1:null==N||N():(e=>{e.target===e.currentTarget&&te()})(e)},re=(0,t.useCallback)((e=>(0,wt.jsx)("div",(0,i.A)((0,i.A)({},e),{},{className:$o()("".concat(r,"-backdrop"),R,!v&&"show")}))),[v,R,r]),ae=(0,i.A)((0,i.A)({},o),M);ae.display="block";return(0,wt.jsx)(Pd.Provider,{value:K,children:(0,wt.jsx)(jd,{show:g,ref:G,backdrop:y,container:j,keyboard:!0,autoFocus:E,enforceFocus:A,restoreFocus:S,restoreFocusOptions:I,onEscapeKeyDown:e=>{x?null==b||b(e):(e.preventDefault(),"static"===y&&te())},onShow:w,onHide:N,onEnter:(e,t)=>{e&&X(e),null==D||D(e,t)},onEntering:(e,t)=>{null==k||k(e,t),pc(window,"resize",Z)},onEntered:_,onExit:e=>{null==B.current||B.current(),null==T||T(e)},onExiting:C,onExited:e=>{e&&(e.style.display=""),null==P||P(e),mc(window,"resize",Z)},manager:Q(),transition:v?nu:void 0,backdropTransition:v?ru:void 0,renderBackdrop:re,renderDialog:e=>(0,wt.jsx)("div",(0,i.A)((0,i.A)({role:"dialog"},e),{},{style:ae,className:$o()(a,r,U&&"".concat(r,"-static"),!v&&"show"),onClick:y?ne:void 0,onMouseUp:ee,"data-bs-theme":h,"aria-label":f,"aria-labelledby":p,"aria-describedby":m,children:(0,wt.jsx)(u,(0,i.A)((0,i.A)({},L),{},{onMouseDown:$,className:l,contentClassName:c,children:d}))}))})})}));au.displayName="Modal";const su=Object.assign(au,{Body:kd,Header:Kd,Title:eu,Footer:Ud,Dialog:Ld,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),iu=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(null),[s,o]=(0,t.useState)("Pending"),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]);(0,t.useEffect)((()=>{h()}),[]);const h=async()=>{try{const e=(await(0,bt.GG)((0,bt.rJ)(xt.db,"hospitals"))).docs.map((e=>(0,i.A)({id:e.id},e.data())));n(e)}catch(e){console.error("Error fetching hospitals:",e)}},p=async e=>{if(r)try{await(0,bt.updateDoc)((0,bt.doc)(xt.db,"hospitals",r.id),{verificationStatus:e}),h(),a(null)}catch(t){console.error("Error updating hospital status:",t)}},m=t=>e.filter((e=>e.verificationStatus===t));return(0,wt.jsxs)("div",{className:"container mt-5",children:[(0,wt.jsx)("h2",{className:"mb-4",children:"Registered Hospitals"}),(0,wt.jsxs)(Uc,{activeKey:s,onSelect:e=>o(e),className:"mb-3",children:[(0,wt.jsx)(Wc,{eventKey:"Pending",title:"Pending (".concat(m("Pending").length,")"),children:m("Pending").length>0?(0,wt.jsxs)(Qc,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{children:"Hospital Name"}),(0,wt.jsx)("th",{children:"Email"}),(0,wt.jsx)("th",{children:"License Number"}),(0,wt.jsx)("th",{children:"Action"})]})}),(0,wt.jsx)("tbody",{children:m("Pending").map((e=>(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("td",{children:e.hospitalName}),(0,wt.jsx)("td",{children:e.email}),(0,wt.jsx)("td",{children:e.licenseNumber}),(0,wt.jsx)("td",{children:(0,wt.jsx)($c,{variant:"info",onClick:()=>a(e),children:"View Details"})})]},e.id)))})]}):(0,wt.jsx)("p",{children:"No pending applications."})}),(0,wt.jsx)(Wc,{eventKey:"Approved",title:"Approved (".concat(m("Approved").length,")"),children:m("Approved").length>0?(0,wt.jsxs)(Qc,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{children:"Hospital Name"}),(0,wt.jsx)("th",{children:"Email"}),(0,wt.jsx)("th",{children:"License Number"})]})}),(0,wt.jsx)("tbody",{children:m("Approved").map((e=>(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("td",{children:e.hospitalName}),(0,wt.jsx)("td",{children:e.email}),(0,wt.jsx)("td",{children:e.licenseNumber})]},e.id)))})]}):(0,wt.jsx)("p",{children:"No approved applications."})}),(0,wt.jsx)(Wc,{eventKey:"Rejected",title:"Rejected (".concat(m("Rejected").length,")"),children:m("Rejected").length>0?(0,wt.jsxs)(Qc,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{children:"Hospital Name"}),(0,wt.jsx)("th",{children:"Email"}),(0,wt.jsx)("th",{children:"License Number"})]})}),(0,wt.jsx)("tbody",{children:m("Rejected").map((e=>(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("td",{children:e.hospitalName}),(0,wt.jsx)("td",{children:e.email}),(0,wt.jsx)("td",{children:e.licenseNumber})]},e.id)))})]}):(0,wt.jsx)("p",{children:"No rejected applications."})})]}),r&&(0,wt.jsxs)(su,{show:!0,onHide:()=>a(null),children:[(0,wt.jsx)(su.Header,{closeButton:!0,children:(0,wt.jsx)(su.Title,{children:r.hospitalName})}),(0,wt.jsxs)(su.Body,{children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Email:"})," ",r.email]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"License Number:"})," ",r.licenseNumber]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Contact:"})," ",r.contactNumber]}),"            ",r.licenseFile&&(0,wt.jsxs)("div",{className:"mt-3",children:[(0,wt.jsx)("p",{className:"font-medium mb-2",children:"License Document:"}),(0,wt.jsx)("div",{className:"relative",children:(0,wt.jsx)("img",{src:r.licenseFile,alt:"License",className:"img-fluid max-w-full rounded border border-gray-200",style:{maxHeight:"400px",objectFit:"contain"}})})]})]}),(0,wt.jsxs)(su.Footer,{children:[(0,wt.jsx)($c,{variant:"success",onClick:()=>p("Approved"),children:"Approve"}),(0,wt.jsx)($c,{variant:"danger",onClick:()=>p("Rejected"),children:"Reject"})]})]})]})};const ou=function(){return(0,wt.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,wt.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Hospital Admin Dashboard"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Statistics"}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsxs)("p",{children:["Pending Donors: ",(0,wt.jsx)("span",{className:"font-bold text-blue-600",children:"12"})]}),(0,wt.jsxs)("p",{children:["Pending Recipients: ",(0,wt.jsx)("span",{className:"font-bold text-green-600",children:"8"})]}),(0,wt.jsxs)("p",{children:["Active Cases: ",(0,wt.jsx)("span",{className:"font-bold text-purple-600",children:"15"})]})]})]}),"        ",(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)(ut,{to:"/admin/medical-documents",className:"block text-purple-600 hover:underline font-medium",children:"Review Medical Documents"}),(0,wt.jsx)(ut,{to:"/admin/verify-donors",className:"block text-blue-600 hover:underline",children:"Verify Donors"}),(0,wt.jsx)(ut,{to:"/admin/verify-recipients",className:"block text-blue-600 hover:underline",children:"Verify Recipients"}),(0,wt.jsx)(ut,{to:"/admin/manage-doctors",className:"block text-blue-600 hover:underline",children:"Manage Doctors"})]})]}),(0,wt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,wt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),(0,wt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,wt.jsx)("p",{children:"New donor registration - 2 hours ago"}),(0,wt.jsx)("p",{children:"Recipient verified - 3 hours ago"}),(0,wt.jsx)("p",{children:"Match found - 5 hours ago"})]})]})]}),(0,wt.jsx)("h2",{children:"Hopitals Lists"})]})};const lu=function(){const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)({name:"",specialization:"",email:"",phone:""});(0,t.useEffect)((()=>{s()}),[]);const s=async()=>{try{const e=(0,bt.P)((0,bt.rJ)(xt.db,"users"),(0,bt._M)("role","==","doctor")),t=await(0,bt.GG)(e),r=[];t.forEach((e=>{r.push((0,i.A)({id:e.id},e.data()))})),n(r)}catch(e){console.error("Error fetching doctors:",e)}};return(0,wt.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Doctor Management"}),(0,wt.jsx)(iu,{})]})};function cu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let du={data:""},uu=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||du,hu=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pu=/\/\*[^]*?\*\/|  +/g,mu=/\n+/g,fu=(e,t)=>{let n="",r="",a="";for(let s in e){let i=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+i+";":r+="f"==s[1]?fu(i,s):s+"{"+fu(i,"k"==s[1]?"":t)+"}":"object"==typeof i?r+=fu(i,t?t.replace(/([^,])+/g,(e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):s):null!=i&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=fu.p?fu.p(s,i):s+":"+i+";")}return n+(t&&a?t+"{"+a+"}":a)+r},gu={},vu=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+vu(e[n]);return t}return e},yu=(e,t,n,r,a)=>{let s=vu(e),i=gu[s]||(gu[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!gu[i]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=hu.exec(e.replace(pu,""));)t[4]?r.shift():t[3]?(n=t[3].replace(mu," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(mu," ").trim();return r[0]})(e);gu[i]=fu(a?{["@keyframes "+i]:t}:t,n?"":"."+i)}let o=n&&gu.g?gu.g:null;return n&&(gu.g=gu[i]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(gu[i],t,r,o),i};function xu(e){let t=this||{},n=e.call?e(t.p):e;return yu(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,a)=>{let s=t[a];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":fu(e,""):!1===e?"":e}return e+r+(null==s?"":s)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,uu(t.target),t.g,t.o,t.k)}xu.bind({g:1});let bu,wu,Nu,ju=xu.bind({k:1});function Eu(e,t){let n=this||{};return function(){let r=arguments;function a(s,i){let o=Object.assign({},s),l=o.className||a.className;n.p=Object.assign({theme:wu&&wu()},o),n.o=/ *go\d+/.test(l),o.className=xu.apply(n,r)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),Nu&&c[0]&&Nu(o),bu(c,o)}return t?t(a):a}}var Au,Su,Iu,_u,Tu,Cu,Du,ku,Pu,Ru,Ou,Lu,Mu,Fu,Uu,Vu,qu=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,zu=(()=>{let e=0;return()=>(++e).toString()})(),Bu=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ju=(e,t)=>{switch(t.type){case 0:return(0,i.A)((0,i.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.map((e=>e.id===t.toast.id?(0,i.A)((0,i.A)({},e),t.toast):e))});case 2:let{toast:n}=t;return Ju(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.map((e=>e.id===r||void 0===r?(0,i.A)((0,i.A)({},e),{},{dismissed:!0,visible:!1}):e))});case 4:return void 0===t.toastId?(0,i.A)((0,i.A)({},e),{},{toasts:[]}):(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return(0,i.A)((0,i.A)({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return(0,i.A)((0,i.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map((e=>(0,i.A)((0,i.A)({},e),{},{pauseDuration:e.pauseDuration+a})))})}},Hu=[],Gu={toasts:[],pausedAt:void 0},Wu=e=>{Gu=Ju(Gu,e),Hu.forEach((e=>{e(Gu)}))},Yu=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return(0,i.A)((0,i.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||zu()})}(t,e,n);return Wu({type:2,toast:r}),r.id},Ku=(e,t)=>Yu("blank")(e,t);Ku.error=Yu("error"),Ku.success=Yu("success"),Ku.loading=Yu("loading"),Ku.custom=Yu("custom"),Ku.dismiss=e=>{Wu({type:3,toastId:e})},Ku.remove=e=>Wu({type:4,toastId:e}),Ku.promise=(e,t,n)=>{let r=Ku.loading(t.loading,(0,i.A)((0,i.A)({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then((e=>{let a=t.success?qu(t.success,e):void 0;return a?Ku.success(a,(0,i.A)((0,i.A)({id:r},n),null==n?void 0:n.success)):Ku.dismiss(r),e})).catch((e=>{let a=t.error?qu(t.error,e):void 0;a?Ku.error(a,(0,i.A)((0,i.A)({id:r},n),null==n?void 0:n.error)):Ku.dismiss(r)})),e};new Map;var Qu=ju(Au||(Au=cu(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Xu=ju(Su||(Su=cu(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Zu=ju(Iu||(Iu=cu(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),$u=Eu("div")(_u||(_u=cu(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),Qu,Xu,(e=>e.secondary||"#fff"),Zu),eh=ju(Tu||(Tu=cu(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),th=Eu("div")(Cu||(Cu=cu(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),eh),nh=ju(Du||(Du=cu(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),rh=ju(ku||(ku=cu(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ah=Eu("div")(Pu||(Pu=cu(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),nh,rh,(e=>e.secondary||"#fff")),sh=Eu("div")(Ru||(Ru=cu(["\n  position: absolute;\n"]))),ih=Eu("div")(Ou||(Ou=cu(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),oh=ju(Lu||(Lu=cu(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),lh=Eu("div")(Mu||(Mu=cu(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),oh),ch=e=>{let{toast:n}=e,{icon:r,type:a,iconTheme:s}=n;return void 0!==r?"string"==typeof r?t.createElement(lh,null,r):r:"blank"===a?null:t.createElement(ih,null,t.createElement(th,(0,i.A)({},s)),"loading"!==a&&t.createElement(sh,null,"error"===a?t.createElement($u,(0,i.A)({},s)):t.createElement(ah,(0,i.A)({},s))))},dh=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),uh=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),hh=Eu("div")(Fu||(Fu=cu(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),ph=Eu("div")(Uu||(Uu=cu(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"])));t.memo((e=>{let{toast:n,position:r,style:a,children:s}=e,o=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,a]=Bu()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[dh(n),uh(n)];return{animation:t?"".concat(ju(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(ju(a)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||r||"top-center",n.visible):{opacity:0},l=t.createElement(ch,{toast:n}),c=t.createElement(ph,(0,i.A)({},n.ariaProps),qu(n.message,n));return t.createElement(hh,{className:n.className,style:(0,i.A)((0,i.A)((0,i.A)({},o),a),n.style)},"function"==typeof s?s({icon:l,message:c}):t.createElement(t.Fragment,null,l,c))}));!function(e,t,n,r){fu.p=t,bu=e,wu=n,Nu=r}(t.createElement);xu(Vu||(Vu=cu(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"])));const mh=e=>{let{activeTab:t,setActiveTab:n}=e;return(0,wt.jsx)("div",{className:"mb-6 border-b",children:(0,wt.jsxs)("ul",{className:"flex flex-wrap -mb-px",children:[(0,wt.jsx)("li",{className:"mr-2",children:(0,wt.jsx)("button",{className:"inline-block p-4 ".concat("pending"===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>n("pending"),children:"Pending Requests"})}),(0,wt.jsx)("li",{className:"mr-2",children:(0,wt.jsx)("button",{className:"inline-block p-4 ".concat("approved"===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>n("approved"),children:"Approved"})}),(0,wt.jsx)("li",{className:"mr-2",children:(0,wt.jsx)("button",{className:"inline-block p-4 ".concat("rejected"===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>n("rejected"),children:"Rejected"})})]})})},fh=e=>{let{donors:t,getStatusBadgeColor:n,getStatusDisplay:r,getSafeValue:a,getDonorName:s,formatDate:i,viewDonorDetails:o,openConfirmationModal:l}=e;return(0,wt.jsx)("div",{className:"overflow-x-auto",children:(0,wt.jsxs)("table",{className:"min-w-full bg-white",children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{className:"bg-gray-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Donor Name"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Blood Group"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Age"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Donation Type"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Status"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Submitted"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-center",children:"Actions"})]})}),(0,wt.jsx)("tbody",{className:"text-gray-600 text-sm",children:0===t.length?(0,wt.jsx)("tr",{children:(0,wt.jsx)("td",{colSpan:"7",className:"py-4 px-6 text-center",children:"No donors found in this category"})}):t.map((e=>(0,wt.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("div",{className:"font-medium",children:s(e)})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:a(e,["bloodType","bloodGroup"])}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:a(e,"age")}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:a(e,["donorType","organType"])}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(n(e.requestStatus||e.status)),children:r(e.requestStatus||e.status)})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:i(e.submittedAt)}),(0,wt.jsx)("td",{className:"py-3 px-6 text-center",children:(0,wt.jsxs)("div",{className:"flex item-center justify-center space-x-2",children:[(0,wt.jsx)("button",{onClick:()=>o(e),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"View Details"}),(e.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED||e.requestStatus===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL||e.status===cn.J2.INITIAL_DOCTOR_APPROVED||e.status===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL)&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:()=>l("initialApprove",e),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",children:"Initially Approve"}),(0,wt.jsx)("button",{onClick:()=>l("initialReject",e),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Initially Reject"})]}),(e.requestStatus===cn.J2.DOCTOR_APPROVED||e.status===cn.J2.DOCTOR_APPROVED)&&(0,wt.jsx)("button",{onClick:()=>l("confirmApproval",e),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",children:"Confirm Approval"}),(e.requestStatus===cn.J2.DOCTOR_APPROVED||e.status===cn.J2.DOCTOR_APPROVED)&&(0,wt.jsx)("button",{onClick:()=>l("overrideApproval",e),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Override Approval"}),(e.requestStatus===cn.J2.DOCTOR_REJECTED||e.status===cn.J2.DOCTOR_REJECTED)&&(0,wt.jsx)("button",{onClick:()=>l("confirmRejection",e),className:"bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600",children:"Confirm Rejection"}),(e.requestStatus===cn.J2.DOCTOR_REJECTED||e.status===cn.J2.DOCTOR_REJECTED)&&(0,wt.jsx)("button",{onClick:()=>l("overrideRejection",e),className:"bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600",children:"Override Rejection"})]})})]},e.id)))})]})})},gh=e=>{let{selectedDonor:t,closeDetailModal:n,adminComment:r,setAdminComment:a,openConfirmationModal:s,actionInProgress:i,updateDonorStatus:o,getStatusBadgeColor:l,getStatusDisplay:c,getDonorName:d}=e;return t?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto p-6",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold",children:"Donor Medical Information"}),(0,wt.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,wt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Approval Status"}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,wt.jsx)("span",{className:"text-sm font-medium mr-2",children:"Status:"}),(0,wt.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(l(t.requestStatus||t.status)),children:c(t.requestStatus||t.status)})]}),(0,wt.jsxs)("div",{className:"mb-3",children:[(0,wt.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Approval Progress"}),(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:t.requestStatus===cn.J2.PENDING?"0%":t.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"25%":t.requestStatus===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL?"35%":t.requestStatus===cn.J2.INITIALLY_APPROVED?"50%":t.requestStatus===cn.J2.DOCTOR_APPROVED?"75%":t.requestStatus===cn.J2.ADMIN_APPROVED||t.status===cn.J2.ADMIN_APPROVED?"100%":(t.requestStatus===cn.J2.REJECTED||t.requestStatus===cn.J2.INITIAL_ADMIN_REJECTED||(t.requestStatus,cn.J2.INITIAL_DOCTOR_REJECTED),"0%")})]}),(0,wt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:(0,wt.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:t.requestStatus===cn.J2.PENDING?"5%":t.requestStatus===cn.J2.INITIAL_DOCTOR_APPROVED?"25%":t.requestStatus===cn.J2.PENDING_INITIAL_ADMIN_APPROVAL?"35%":t.requestStatus===cn.J2.INITIALLY_APPROVED?"50%":t.requestStatus===cn.J2.DOCTOR_APPROVED?"75%":t.requestStatus===cn.J2.ADMIN_APPROVED||t.status===cn.J2.ADMIN_APPROVED?"100%":"0%"}})})]}),t.doctorComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800",children:"Medical Team Notes:"}),(0,wt.jsx)("p",{className:"italic",children:t.doctorComment})]}),t.adminComment&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800",children:"Admin Notes:"}),(0,wt.jsx)("p",{className:"italic",children:t.adminComment})]}),(t.requestStatus===cn.J2.DOCTOR_APPROVED||t.status===cn.J2.DOCTOR_APPROVED)&&(0,wt.jsxs)("div",{className:"mt-4",children:[(0,wt.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,wt.jsx)("p",{className:"text-yellow-800 font-medium",children:"Doctor has approved this donor"}),(0,wt.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"You can confirm this approval or override it with a rejection."})]}),(0,wt.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,wt.jsx)("button",{onClick:()=>s("confirmApproval",t),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 flex-1",disabled:i,children:"Confirm Approval"}),(0,wt.jsx)("button",{onClick:()=>s("overrideApproval",t),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 flex-1",disabled:i,children:"Override with Rejection"})]}),(0,wt.jsx)("label",{htmlFor:"adminComment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Comment (required for manual approval):"}),(0,wt.jsx)("textarea",{id:"adminComment",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Enter comments or instructions for the donor..."})]}),(t.requestStatus===cn.J2.DOCTOR_REJECTED||t.status===cn.J2.DOCTOR_REJECTED)&&(0,wt.jsxs)("div",{className:"mt-4",children:[(0,wt.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[(0,wt.jsx)("p",{className:"text-red-800 font-medium",children:"Doctor has rejected this donor"}),(0,wt.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"You can confirm this rejection or override it with an approval."})]}),(0,wt.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,wt.jsx)("button",{onClick:()=>s("confirmRejection",t),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 flex-1",disabled:i,children:"Confirm Rejection"}),(0,wt.jsx)("button",{onClick:()=>s("overrideRejection",t),className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 flex-1",disabled:i,children:"Override with Approval"})]})]})]})]}),(0,wt.jsxs)("div",{className:"mt-6 flex justify-end space-x-2",children:[(t.requestStatus===cn.J2.DOCTOR_APPROVED||t.status===cn.J2.DOCTOR_APPROVED)&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("button",{onClick:async()=>{await o(t.id,cn.J2.ADMIN_APPROVED)&&n()},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",disabled:!r.trim()||i,children:"Manual Approve"}),(0,wt.jsx)("button",{onClick:async()=>{await o(t.id,cn.J2.ADMIN_REJECTED)&&n()},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",disabled:i,children:"Manual Reject"})]}),(0,wt.jsx)("button",{onClick:n,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",disabled:i,children:"Close"})]})]})}):null},vh=e=>{let{confirmationModalOpen:t,selectedDonor:n,confirmationAction:r,closeConfirmationModal:a,handleConfirmation:s,actionInProgress:i,getDonorName:o}=e;return t&&n?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Confirm Action"}),"confirmApproval"===r&&(0,wt.jsxs)("p",{className:"mb-6",children:["Are you sure you want to confirm the doctor's approval for ",o(n),"?"]}),"confirmRejection"===r&&(0,wt.jsxs)("p",{className:"mb-6",children:["Are you sure you want to confirm the doctor's rejection for ",o(n),"?"]}),"overrideApproval"===r&&(0,wt.jsxs)("p",{className:"mb-6",children:["Are you sure you want to override the doctor's approval and reject ",o(n),"? You will be asked to provide a reason for this override."]}),"overrideRejection"===r&&(0,wt.jsxs)("p",{className:"mb-6",children:["Are you sure you want to override the doctor's rejection and approve ",o(n),"? You will be asked to provide a reason for this override."]}),"initialApprove"===r&&(0,wt.jsxs)("p",{className:"mb-6",children:["Are you sure you want to initially approve ",o(n),"? This will allow them to schedule appointments."]}),"initialReject"===r&&(0,wt.jsxs)("p",{className:"mb-6",children:["Are you sure you want to initially reject ",o(n),"? You will be asked to provide a reason for this rejection."]}),(0,wt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,wt.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",disabled:i,children:"Cancel"}),(0,wt.jsx)("button",{onClick:s,className:"px-4 py-2 text-white rounded ".concat("confirmApproval"===r||"overrideRejection"===r||"initialApprove"===r?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"),disabled:i,children:i?"Processing...":"Confirm"})]})]})}):null},yh=e=>{let{onClose:t}=e;return(0,wt.jsxs)("div",{className:"flex justify-between items-center border-b px-6 py-4 bg-white",children:[(0,wt.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Medical Document Details"}),(0,wt.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close modal",children:(0,wt.jsx)($t,{size:20})})]})},xh=e=>{let{document:t,formatDate:n}=e;return(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,wt.jsx)(tn,{className:"mr-2 text-blue-600"}),"Donor Information"]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Name:"}),(0,wt.jsx)("p",{className:"font-medium text-gray-900",children:t.donorName})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Organ to Donate:"}),(0,wt.jsxs)("p",{className:"font-medium text-gray-900 flex items-center",children:[(0,wt.jsx)(Qt,{className:"mr-1 text-red-500"}),t.organToDonate]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Appointment Date:"}),(0,wt.jsxs)("p",{className:"font-medium text-gray-900 flex items-center",children:[(0,wt.jsx)(Ut,{className:"mr-1 text-blue-500"}),n(t.appointmentDate)]})]})]})]})},bh=e=>{let{document:t,formatDate:n}=e;return(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,wt.jsx)(Zt,{className:"mr-2 text-green-600"}),"Doctor's Assessment"]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Doctor Name:"}),(0,wt.jsx)("p",{className:"font-medium text-gray-900",children:t.doctorName})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Medical Status:"}),(0,wt.jsx)("div",{className:"mt-1",children:"medically_fit"===t.medicalStatus?(0,wt.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[(0,wt.jsx)(qt,{className:"inline mr-1"}),"Medically Fit"]}):(0,wt.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[(0,wt.jsx)(Bt,{className:"inline mr-1"}),"Medically Unfit"]})})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Medical Notes:"}),(0,wt.jsx)("p",{className:"mt-1 p-3 bg-white border rounded text-gray-900",children:t.notes||"No notes provided"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Submitted On:"}),(0,wt.jsx)("p",{className:"font-medium text-gray-900",children:n(t.createdAt)})]})]})]})},wh=e=>{let{document:t,formatDate:n,getStatusColor:r}=e;return(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Current Status"}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("div",{children:(0,wt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(r(t.status)),children:"pending_admin_review"===t.status?"Pending Admin Review":"approved"===t.status?"Approved":"rejected"===t.status?"Rejected":t.status})}),t.adminActionDate&&(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Action Date:"}),(0,wt.jsx)("p",{className:"font-medium text-gray-900",children:n(t.adminActionDate)})]}),t.rejectionReason&&(0,wt.jsxs)("div",{children:[(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:"Rejection Reason:"}),(0,wt.jsx)("p",{className:"mt-1 p-3 bg-red-50 border border-red-200 rounded text-red-800",children:t.rejectionReason})]})]})]})},Nh=e=>{let{document:t,formatDate:n,getStatusColor:r}=e;return(0,wt.jsxs)("div",{className:"space-y-6",children:[(0,wt.jsx)(xh,{document:t,formatDate:n}),(0,wt.jsx)(bh,{document:t,formatDate:n}),(0,wt.jsx)(wh,{document:t,formatDate:n,getStatusColor:r})]})},jh=e=>{let{document:t,setShowImageModal:n}=e;return(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,wt.jsx)(Ht,{className:"mr-2 text-purple-600"}),"Attached Medical Document"]}),t.hasAttachment&&t.fileUrl?(0,wt.jsx)("div",{className:"space-y-4",children:(0,wt.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,wt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"font-medium text-gray-900",children:t.fileName}),(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Medical Document Image"})]}),(0,wt.jsxs)("button",{onClick:()=>n(!0),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center text-sm",children:[(0,wt.jsx)(Jt,{className:"mr-1"}),"View Full Size"]})]}),(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)("img",{src:t.fileUrl,alt:"Medical Document",className:"w-full h-64 object-cover rounded border cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n(!0)}),(0,wt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 bg-black bg-opacity-20 rounded transition-opacity",children:(0,wt.jsx)("span",{className:"text-white text-sm font-medium",children:"Click to enlarge"})})]})]})}):(0,wt.jsxs)("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,wt.jsx)(Ht,{className:"mx-auto text-gray-400 text-3xl mb-2"}),(0,wt.jsx)("p",{className:"text-gray-500",children:"No document was attached"})]})]})},Eh=e=>{let{document:t}=e;return"pending_admin_review"!==t.status?null:(0,wt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,wt.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Admin Decision Guide"}),(0,wt.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Medical Status:"})," ","medically_fit"===t.medicalStatus?"Fit":"Unfit"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Has Document:"})," ",t.hasAttachment?"Yes":"No"]}),(0,wt.jsxs)("p",{children:[(0,wt.jsx)("strong",{children:"Doctor's Notes:"})," ",t.notes?"Provided":"None"]})]}),"medically_fit"===t.medicalStatus?(0,wt.jsx)("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded text-green-800 text-sm",children:"\u2713 Doctor marked as medically fit - Consider for approval"}):(0,wt.jsx)("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:"\u2717 Doctor marked as medically unfit - Consider for rejection"})]})},Ah=e=>{let{document:t,setShowImageModal:n}=e;return(0,wt.jsxs)("div",{className:"space-y-6",children:[(0,wt.jsx)(jh,{document:t,setShowImageModal:n}),(0,wt.jsx)(Eh,{document:t})]})},Sh=e=>{let{document:t,formatDate:n,getStatusColor:r,setShowImageModal:a}=e;return(0,wt.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,wt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,wt.jsx)(Nh,{document:t,formatDate:n,getStatusColor:r}),(0,wt.jsx)(Ah,{document:t,setShowImageModal:a})]})})},Ih=e=>{let{document:t,onClose:n,setShowRejectModal:r,handleApprove:a,processing:s}=e;return"pending_admin_review"!==t.status?(0,wt.jsx)("div",{className:"border-t px-6 py-4 bg-gray-50 flex justify-end",children:(0,wt.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Close"})}):(0,wt.jsxs)("div",{className:"border-t px-6 py-4 bg-gray-50 flex justify-between items-center",children:[(0,wt.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Close"}),(0,wt.jsxs)("div",{className:"flex space-x-3",children:[(0,wt.jsx)("button",{onClick:()=>r(!0),disabled:s[t.id],className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:s[t.id]?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Rejecting..."]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(Bt,{className:"mr-2"}),"Reject Donor"]})}),"medically_fit"===t.medicalStatus&&(0,wt.jsx)("button",{onClick:a,disabled:s[t.id],className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:s[t.id]?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Approving..."]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(qt,{className:"mr-2"}),"Approve Donor"]})})]})]})},_h=e=>{let{showRejectModal:t,rejectionReason:n,setRejectionReason:r,setShowRejectModal:a,handleRejectWithReason:s}=e;return t?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-60 flex justify-center items-center p-4",children:(0,wt.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:(0,wt.jsxs)("div",{className:"p-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Rejection"}),(0,wt.jsx)("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for rejecting this donor:"}),(0,wt.jsx)("textarea",{className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",rows:"4",placeholder:"Enter rejection reason...",value:n,onChange:e=>r(e.target.value)}),(0,wt.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,wt.jsx)("button",{onClick:()=>{a(!1),r("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,wt.jsx)("button",{onClick:s,disabled:!n.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Confirm Rejection"})]})]})})}):null},Th=e=>{let{showImageModal:t,fileUrl:n,setShowImageModal:r}=e;return t&&n?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-60 flex justify-center items-center p-4",children:(0,wt.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,wt.jsx)("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-white hover:text-gray-300 p-2 rounded-full bg-black bg-opacity-50 hover:bg-opacity-70 transition-colors z-10",children:(0,wt.jsx)($t,{size:20})}),(0,wt.jsx)("img",{src:n,alt:"Medical Document Full Size",className:"max-w-full max-h-full object-contain rounded"})]})}):null},Ch=e=>{let{isOpen:n,onClose:r,document:a,onApprove:s,onReject:i,processing:o}=e;const[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1);if(!n||!a)return null;return(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col",children:[(0,wt.jsx)(yh,{onClose:r}),(0,wt.jsx)(Sh,{document:a,formatDate:e=>{if(!e)return"N/A";try{return"function"===typeof e.toDate?e.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"Invalid date"}},getStatusColor:e=>{switch(e){case"pending_admin_review":return"text-yellow-600 bg-yellow-100";case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},setShowImageModal:p}),(0,wt.jsx)(Ih,{document:a,onClose:r,setShowRejectModal:c,handleApprove:async()=>{if("medically_fit"===a.medicalStatus)try{console.log("\ud83c\udfe5 Starting final approval process for document:",a.id);const t=(0,bt.serverTimestamp)(),n=(0,bt.doc)(xt.db,"medicalDocuments",a.id);if(await(0,bt.updateDoc)(n,{status:cn.J2.FINAL_APPROVED,adminActionDate:t,adminComment:"Medical evaluation approved. Donor is finally approved.",finalApprovalDate:t,progressStatus:100}),console.log("\u2705 Medical document updated"),a.donorId){const e=(0,bt.doc)(xt.db,"medicalRecords",a.donorId);await(0,bt.updateDoc)(e,{requestStatus:cn.J2.FINAL_APPROVED,status:cn.J2.FINAL_APPROVED,medicalEvaluationStatus:"completed",finalAdminApproved:!0,finalAdminComment:"Medical evaluation approved. Donor is finally approved.",finalEvaluationDate:t,progressPercentage:100,adminActionDate:t}),console.log("\u2705 Donor record updated")}if(a.donorId)try{const e=(0,bt.doc)(xt.db,"users",a.donorId);await(0,bt.updateDoc)(e,{donorStatus:cn.J2.FINAL_APPROVED,lastStatusUpdate:t}),console.log("\u2705 Donor user status updated")}catch(e){console.log("\u2139\ufe0f Could not update user status (user may not exist):",e.message)}await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:a.donorId,title:"\ud83c\udf89 Final Medical Approval Completed!",message:"Congratulations! Your medical evaluation has been finally approved by admin. You are now an active donor in our system.",type:"approval",subtype:"final_approval",read:!1,createdAt:t,priority:"high",metadata:{documentId:a.id,approvalDate:t,approvalType:"final",donorName:a.donorName}}),console.log("\u2705 Donor notification sent"),a.doctorId&&(await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:a.doctorId,title:"Donor Final Approval Completed",message:"Medical evaluation for donor ".concat(a.donorName||"Unknown"," has received final approval from admin."),type:"approval",subtype:"final_approval",read:!1,createdAt:t,metadata:{documentId:a.id,donorId:a.donorId,donorName:a.donorName,approvalDate:t}}),console.log("\u2705 Doctor notification sent")),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{documentId:a.id,donorId:a.donorId,doctorId:a.doctorId,action:"final_approval",status:cn.J2.FINAL_APPROVED,comment:"Medical evaluation approved. Donor is finally approved.",processedBy:"admin",processedAt:t,donorName:a.donorName,doctorName:a.doctorName,organToDonate:a.organToDonate}),console.log("\u2705 Approval history recorded"),Jn.success("\ud83c\udf89 Donor has been finally approved! All records updated."),s&&await s(a.id),r()}catch(e){console.error("\u274c Error in final approval:",e),Jn.error("Failed to process final approval: ".concat(e.message))}else Jn.error("Cannot approve a donor who is medically unfit")},processing:o})]})}),(0,wt.jsx)(_h,{showRejectModal:l,rejectionReason:d,setRejectionReason:u,setShowRejectModal:c,handleRejectWithReason:async()=>{if(d.trim())try{console.log("\ud83d\udeab Starting final rejection process for document:",a.id);const t=(0,bt.serverTimestamp)(),n=(0,bt.doc)(xt.db,"medicalDocuments",a.id);if(await(0,bt.updateDoc)(n,{status:cn.J2.FINAL_REJECTED,adminActionDate:t,rejectionReason:d,adminComment:"Medical evaluation rejected: ".concat(d),finalRejectionDate:t,progressStatus:0}),console.log("\u2705 Medical document updated with rejection"),a.donorId){const e=(0,bt.doc)(xt.db,"medicalRecords",a.donorId);await(0,bt.updateDoc)(e,{requestStatus:cn.J2.FINAL_REJECTED,status:cn.J2.FINAL_REJECTED,medicalEvaluationStatus:"rejected",finalAdminRejected:!0,finalRejectionReason:d,finalAdminComment:"Medical evaluation rejected: ".concat(d),finalEvaluationDate:t,progressPercentage:0,adminActionDate:t}),console.log("\u2705 Donor record updated with rejection")}if(a.donorId)try{const e=(0,bt.doc)(xt.db,"users",a.donorId);await(0,bt.updateDoc)(e,{donorStatus:cn.J2.FINAL_REJECTED,rejectionReason:d,lastStatusUpdate:t}),console.log("\u2705 Donor user status updated with rejection")}catch(e){console.log("\u2139\ufe0f Could not update user status (user may not exist):",e.message)}await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:a.donorId,title:"Medical Evaluation Result",message:"Your medical evaluation has been reviewed. Unfortunately, it was not approved. Reason: ".concat(d),type:"rejection",subtype:"final_rejection",read:!1,createdAt:t,priority:"high",metadata:{documentId:a.id,rejectionDate:t,rejectionReason:d,donorName:a.donorName}}),console.log("\u2705 Donor rejection notification sent"),a.doctorId&&(await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:a.doctorId,title:"Donor Medical Evaluation Rejected",message:"Medical evaluation for donor ".concat(a.donorName||"Unknown"," has been rejected by admin. Reason: ").concat(d),type:"rejection",subtype:"final_rejection",read:!1,createdAt:t,metadata:{documentId:a.id,donorId:a.donorId,donorName:a.donorName,rejectionDate:t,rejectionReason:d}}),console.log("\u2705 Doctor rejection notification sent")),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{documentId:a.id,donorId:a.donorId,doctorId:a.doctorId,action:"final_rejection",status:cn.J2.FINAL_REJECTED,comment:"Medical evaluation rejected: ".concat(d),rejectionReason:d,processedBy:"admin",processedAt:t,donorName:a.donorName,doctorName:a.doctorName,organToDonate:a.organToDonate}),console.log("\u2705 Rejection history recorded"),Jn.success("Rejection processed successfully. All records updated."),i&&await i(a.id,d),c(!1),u(""),r()}catch(e){console.error("\u274c Error in final rejection:",e),Jn.error("Failed to process rejection: ".concat(e.message))}else Jn.error("Please provide a rejection reason")}}),(0,wt.jsx)(Th,{showImageModal:h,fileUrl:null===a||void 0===a?void 0:a.fileUrl,setShowImageModal:p})]})},Dh=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)({}),[m,f]=(0,t.useState)(""),[g,v]=(0,t.useState)("all"),y=(0,t.useCallback)((async()=>{try{o(!0);const e=(0,bt.P)((0,bt.rJ)(xt.db,"donorUploadDocuments"),(0,bt.My)("createdAt","desc")),t=(await(0,bt.GG)(e)).docs.map((e=>(0,i.A)({id:e.id},e.data())));n(t),a(t)}catch(e){console.error("Error fetching documents:",e),Jn.error("Failed to load medical documents")}finally{o(!1)}}),[]);(0,t.useEffect)((()=>{let t=e;"all"!==g&&(t=t.filter((e=>e.status===g))),m&&(t=t.filter((e=>{var t,n,r;return(null===(t=e.donorName)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(n=e.organToDonate)||void 0===n?void 0:n.toLowerCase().includes(m.toLowerCase()))||(null===(r=e.doctorName)||void 0===r?void 0:r.toLowerCase().includes(m.toLowerCase()))}))),a(t)}),[e,m,g]);const x=async t=>{try{p((e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0})));const n=e.find((e=>e.id===t));if(!n)return void Jn.error("Document not found");const r=(0,bt.doc)(xt.db,"donorUploadDocuments",t);if(await(0,bt.updateDoc)(r,{status:"Final Admin Approved",adminAction:"approved",adminActionDate:(0,bt.serverTimestamp)(),finalDecision:"donor_approved"}),n.donorId){const e=(0,bt.doc)(xt.db,"medicalRecords",n.donorId);await(0,bt.updateDoc)(e,{requestStatus:"Final Admin Approved",status:"Final Admin Approved",finalAdminDecision:"approved",finalAdminDecisionDate:(0,bt.serverTimestamp)(),finalAdminNotes:"Medically fit - approved after medical evaluation",medicalEvaluationCompleted:!0,finalApprovalCompleted:!0,progressStage:"final_approved",finalDecision:"donor_approved"})}Jn.success("Donor approved successfully! Final approval completed."),y()}catch(n){console.error("Error approving document:",n),Jn.error("Failed to approve donor")}finally{p((e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1})))}},b=async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{p((e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0})));const r=e.find((e=>e.id===t));if(!r)return void Jn.error("Document not found");const a=(0,bt.doc)(xt.db,"donorUploadDocuments",t);if(await(0,bt.updateDoc)(a,{status:"Final Admin Rejected",adminAction:"rejected",adminActionDate:(0,bt.serverTimestamp)(),finalDecision:"donor_rejected",rejectionReason:n||"Medical unfitness confirmed by admin"}),r.donorId){const e=(0,bt.doc)(xt.db,"medicalRecords",r.donorId);await(0,bt.updateDoc)(e,{requestStatus:"Final Admin Rejected",status:"Final Admin Rejected",finalAdminDecision:"rejected",finalAdminDecisionDate:(0,bt.serverTimestamp)(),finalAdminNotes:n||"Medically unfit - rejected after medical evaluation",medicalEvaluationCompleted:!0,finalApprovalCompleted:!0,rejectionReason:n||"Medical unfitness confirmed by admin",progressStage:"final_rejected",finalDecision:"donor_rejected"})}Jn.success("Donor rejected permanently. Final decision completed."),y()}catch(r){console.error("Error rejecting document:",r),Jn.error("Failed to reject donor")}finally{p((e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1})))}},w=e=>{if(!e)return"N/A";try{return"function"===typeof e.toDate?e.toDate().toLocaleDateString():new Date(e).toLocaleDateString()}catch(t){return"Invalid date"}},N=e=>{const t={pending_admin_review:{color:"bg-yellow-100 text-yellow-800",text:"Pending Review"},"Final Admin Approved":{color:"bg-green-100 text-green-800",text:"Final Admin Approved"},"Final Admin Rejected":{color:"bg-red-100 text-red-800",text:"Final Admin Rejected"}}[e]||{color:"bg-gray-100 text-gray-800",text:e};return(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t.color),children:t.text})};return(0,t.useEffect)((()=>{y()}),[y]),s?(0,wt.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,wt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,wt.jsxs)("div",{className:"p-6",children:[(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Medical Document Review"}),(0,wt.jsx)("p",{className:"text-gray-600",children:"Review and take action on medical documents submitted by doctors"})]}),(0,wt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,wt.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,wt.jsx)("div",{className:"flex-1",children:(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,wt.jsx)("input",{type:"text",placeholder:"Search by donor name, organ, or doctor...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:m,onChange:e=>f(e.target.value)})]})}),(0,wt.jsx)("div",{className:"md:w-48",children:(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),"              ",(0,wt.jsxs)("select",{className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:g,onChange:e=>v(e.target.value),children:[(0,wt.jsx)("option",{value:"all",children:"All Status"}),(0,wt.jsx)("option",{value:"pending_admin_review",children:"Pending Review"}),(0,wt.jsx)("option",{value:"Final Admin Approved",children:"Final Admin Approved"}),(0,wt.jsx)("option",{value:"Final Admin Rejected",children:"Final Admin Rejected"})]})]})})]})}),(0,wt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,wt.jsx)("div",{className:"overflow-x-auto",children:(0,wt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,wt.jsx)("thead",{className:"bg-gray-50",children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Donor Details"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medical Status"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Submitted"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,wt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===r.length?(0,wt.jsx)("tr",{children:(0,wt.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No medical documents found"})}):r.map((e=>{return(0,wt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,wt.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,wt.jsx)(tn,{className:"text-blue-600"})})}),(0,wt.jsxs)("div",{className:"ml-4",children:[(0,wt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.donorName}),(0,wt.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,wt.jsx)(Qt,{className:"mr-1"}),e.organToDonate]})]})]})}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(t=e.medicalStatus,"medically_fit"===t?(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Medically Fit"}):(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Medically Unfit"}))}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wt.jsx)("div",{className:"text-sm text-gray-900",children:e.doctorName})}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)(Ut,{className:"mr-1"}),w(e.createdAt)]})}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:N(e.status)}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,wt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wt.jsx)("button",{onClick:()=>(e=>{c(e),u(!0)})(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-100 transition-colors",title:"View Details",children:(0,wt.jsx)(Jt,{})}),"pending_admin_review"===e.status&&(0,wt.jsxs)(wt.Fragment,{children:["medically_fit"===e.medicalStatus&&(0,wt.jsx)("button",{onClick:()=>x(e.id),disabled:h[e.id],className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-100 transition-colors disabled:opacity-50",title:"Approve Donor",children:h[e.id]?(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-green-600"}):(0,wt.jsx)(qt,{})}),(0,wt.jsx)("button",{onClick:()=>b(e.id),disabled:h[e.id],className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-100 transition-colors disabled:opacity-50",title:"Reject Donor",children:h[e.id]?(0,wt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-red-600"}):(0,wt.jsx)($t,{})})]})]})})]},e.id);var t}))})]})})}),(0,wt.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,wt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,wt.jsx)(Ht,{className:"text-yellow-600"})}),(0,wt.jsxs)("div",{className:"ml-4",children:[(0,wt.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,wt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter((e=>"pending_admin_review"===e.status)).length})]})]})}),(0,wt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,wt.jsx)(qt,{className:"text-green-600"})}),(0,wt.jsxs)("div",{className:"ml-4",children:[(0,wt.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Final Admin Approved"}),(0,wt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter((e=>"Final Admin Approved"===e.status)).length})]})]})}),(0,wt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,wt.jsx)($t,{className:"text-red-600"})}),(0,wt.jsxs)("div",{className:"ml-4",children:[(0,wt.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Final Admin Rejected"}),(0,wt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter((e=>"Final Admin Rejected"===e.status)).length})]})]})}),(0,wt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,wt.jsx)(tn,{className:"text-blue-600"})}),(0,wt.jsxs)("div",{className:"ml-4",children:[(0,wt.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Documents"}),(0,wt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})})]}),(0,wt.jsx)(Ch,{isOpen:d,onClose:()=>u(!1),document:l,onApprove:x,onReject:b,processing:h})]})},kh=()=>(0,wt.jsxs)("div",{className:"mt-12",children:[(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Medical Document Review"}),(0,wt.jsx)("p",{className:"text-gray-600",children:"Review and approve medical documents submitted by doctors"})]}),(0,wt.jsx)(Dh,{})]});const Ph=function(){const[e,r]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)("pending"),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[x,b]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>(console.log("DonorManagement component mounted"),j(o),()=>console.log("DonorManagement unmounting"))),[o]);const j=async e=>{try{console.log("\u23f3 Fetching donors with status:",e),s(!0),m(null);let n=[],a=[];"pending"===e?(a=["pending","doctor-approved","initial-doctor-approved","pending-initial-admin-approval"],cn.J2.PENDING&&a.push(cn.J2.PENDING),cn.J2.DOCTOR_APPROVED&&a.push(cn.J2.DOCTOR_APPROVED),cn.J2.INITIAL_DOCTOR_APPROVED&&a.push(cn.J2.INITIAL_DOCTOR_APPROVED),cn.J2.PENDING_INITIAL_ADMIN_APPROVAL&&a.push(cn.J2.PENDING_INITIAL_ADMIN_APPROVAL)):"approved"===e?(a=["admin-approved","approved","initially-approved"],cn.J2.ADMIN_APPROVED&&a.push(cn.J2.ADMIN_APPROVED),cn.J2.FINAL_APPROVED&&a.push(cn.J2.FINAL_APPROVED),cn.J2.INITIALLY_APPROVED&&a.push(cn.J2.INITIALLY_APPROVED)):"rejected"===e&&(a=["doctor-rejected","admin-rejected","rejected","initial-doctor-rejected","initial-admin-rejected"],cn.J2.DOCTOR_REJECTED&&a.push(cn.J2.DOCTOR_REJECTED),cn.J2.ADMIN_REJECTED&&a.push(cn.J2.ADMIN_REJECTED),cn.J2.FINAL_REJECTED&&a.push(cn.J2.FINAL_REJECTED),cn.J2.INITIAL_DOCTOR_REJECTED&&a.push(cn.J2.INITIAL_DOCTOR_REJECTED),cn.J2.INITIAL_ADMIN_REJECTED&&a.push(cn.J2.INITIAL_ADMIN_REJECTED)),console.log("Query filters:",a);for(const e of a){const t=(0,bt.P)((0,bt.rJ)(xt.db,"medicalRecords"),(0,bt._M)("requestStatus","==",e),(0,bt.AB)(50)),r=await(0,bt.GG)(t);console.log("\ud83d\udccb Found ".concat(r.size," donors with requestStatus=").concat(e));const a=r.docs.map((e=>(0,i.A)({id:e.id},e.data())));n=[...n,...a];const s=(0,bt.P)((0,bt.rJ)(xt.db,"medicalRecords"),(0,bt._M)("status","==",e),(0,bt.AB)(50)),o=await(0,bt.GG)(s);console.log("\ud83d\udccb Found ".concat(o.size," donors with status=").concat(e));const l=new Set(n.map((e=>e.id)));o.forEach((e=>{l.has(e.id)||(n.push((0,i.A)({id:e.id},e.data())),l.add(e.id))}))}console.log("\ud83e\uddd1 Fetching user data for ".concat(n.length," donors"));let o=0,l=0;for(const e of n)if(e.donorId)try{const t=(0,bt.doc)(xt.db,"users",e.donorId),n=await(0,bt.x7)(t);n.exists()?(e.userData=n.data(),o++):(console.warn("\u26a0\ufe0f User document not found for donor ".concat(e.id," (donorId: ").concat(e.donorId,")")),l++)}catch(t){console.warn("\u26a0\ufe0f Error fetching user data for donor ".concat(e.id,":"),t),l++}else console.warn("\u26a0\ufe0f No donorId found for donor ".concat(e.id)),l++;console.log("\u2705 User data fetch summary: ".concat(o," successful, ").concat(l," failed")),console.log("\u2705 Total donors loaded: ".concat(n.length)),r(n)}catch(p){console.error("\u274c Error fetching donors:",p),console.error("\u274c Error details:",{code:p.code,message:p.message,stack:p.stack});let t="Failed to load donors";"permission-denied"===p.code?t="Access denied. Please check your permissions.":"unavailable"===p.code?t="Service temporarily unavailable. Please try again.":p.message&&(t="Error loading donors: ".concat(p.message)),m(t),Ku.error(t)}finally{s(!1)}},E=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var r,a;if(console.log("\ud83d\udd04 Updating donor ".concat(e," to status ").concat(t,", override: ").concat(n)),N(!0),t===cn.J2.ADMIN_APPROVED&&!f.trim()&&!n)return Ku.error("Please provide a comment for approval"),N(!1),!1;let s="";if(t===cn.J2.ADMIN_REJECTED&&!n&&(s=prompt("Please provide a reason for rejection:"),!s||!s.trim()))return Ku.error("Rejection reason is required"),N(!1),!1;const i=(0,bt.doc)(xt.db,"medicalRecords",e),l=await(0,bt.x7)(i);if(!l.exists())return Ku.error("Donor record not found"),N(!1),!1;const c=l.data(),d=c.requestStatus||c.status,u={requestStatus:t,status:t,updatedAt:(0,bt.serverTimestamp)(),adminReviewed:!0,adminId:(null===(r=xt.j2.currentUser)||void 0===r?void 0:r.uid)||"admin"};return t===cn.J2.ADMIN_APPROVED?(u.adminComment=n?"Admin confirmed doctor's approval":f,u.adminApprovalDate=(0,bt.serverTimestamp)()):t===cn.J2.ADMIN_REJECTED&&(u.adminComment=n?"Admin confirmed doctor's rejection":s,u.rejectionReason=n?"Admin confirmed doctor's rejection":s,u.rejectionDate=(0,bt.serverTimestamp)()),console.log("\ud83d\udcdd Update data:",u),await(0,bt.updateDoc)(i,u),console.log("\u2705 Database updated successfully"),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{recordId:e,recordType:"donor",previousStatus:d,newStatus:t,changedBy:(null===(a=xt.j2.currentUser)||void 0===a?void 0:a.uid)||"admin",timestamp:(0,bt.serverTimestamp)(),reason:u.adminComment||u.rejectionReason||"",userRole:"admin",isOverride:n}),console.log("\ud83d\udccb Approval history created"),Ku.success(n?"Confirmed doctor's ".concat(t===cn.J2.ADMIN_APPROVED?"approval":"rejection"):"Donor has been ".concat(t.replace("-"," "))),await j(o),N(!1),!0}catch(p){return console.error("\u274c Error updating donor status:",p),Ku.error("Failed to update donor: "+p.message),N(!1),!1}},A=async(e,t)=>{try{N(!0);const a=(0,bt.doc)(xt.db,"medicalRecords",e),s=await(0,bt.x7)(a);if(!s.exists())return Ku.error("Donor record not found"),N(!1),!1;const i=s.data(),l=i.requestStatus||i.status,c=l===cn.J2.DOCTOR_APPROVED,d=l===cn.J2.DOCTOR_REJECTED;if(c&&!t||d&&t){var n,r;const s=prompt("Please provide a reason for overriding the doctor's ".concat(c?"approval":"rejection",":"));if(!s||!s.trim())return Ku.error("Override reason is required"),N(!1),!1;const i=t?cn.J2.ADMIN_APPROVED:cn.J2.ADMIN_REJECTED,d={requestStatus:i,status:i,updatedAt:(0,bt.serverTimestamp)(),adminReviewed:!0,adminId:(null===(n=xt.j2.currentUser)||void 0===n?void 0:n.uid)||"admin",adminComment:s,adminOverride:!0,overrideReason:s};return t?d.adminApprovalDate=(0,bt.serverTimestamp)():(d.rejectionReason=s,d.rejectionDate=(0,bt.serverTimestamp)()),await(0,bt.updateDoc)(a,d),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{recordId:e,recordType:"donor",previousStatus:l,newStatus:i,changedBy:(null===(r=xt.j2.currentUser)||void 0===r?void 0:r.uid)||"admin",timestamp:(0,bt.serverTimestamp)(),reason:s,userRole:"admin",isOverride:!0,overrideAction:"Admin overrode doctor's ".concat(c?"approval":"rejection")}),Ku.success("Successfully overrode doctor's ".concat(c?"approval":"rejection")),await j(o),N(!1),!0}return Ku.error("Invalid override action"),N(!1),!1}catch(p){return console.error("\u274c Error overriding status:",p),Ku.error("Failed to override: "+p.message),N(!1),!1}},S=(e,t)=>{d(t),b(e),y(!0)},I=()=>{y(!1),b(null)},_=async e=>{try{var t,r;N(!0);const{createApprovalNotification:a}=await Promise.resolve().then(n.bind(n,109)),s=(0,bt.doc)(xt.db,"medicalRecords",e),i=await(0,bt.x7)(s);if(!i.exists())return Ku.error("Donor record not found"),N(!1),!1;const l=i.data(),c=l.requestStatus||l.status,d={requestStatus:cn.J2.INITIALLY_APPROVED,status:cn.J2.INITIALLY_APPROVED,updatedAt:(0,bt.serverTimestamp)(),adminReviewed:!0,adminId:(null===(t=xt.j2.currentUser)||void 0===t?void 0:t.uid)||"admin",adminComment:"Administration initially approved your request",initialAdminApprovalDate:(0,bt.serverTimestamp)(),eligibleForAppointments:!0};return await(0,bt.updateDoc)(s,d),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{recordId:e,recordType:"donor",previousStatus:c,newStatus:cn.J2.INITIALLY_APPROVED,changedBy:(null===(r=xt.j2.currentUser)||void 0===r?void 0:r.uid)||"admin",timestamp:(0,bt.serverTimestamp)(),reason:"Initial admin approval granted",userRole:"admin",action:"initialApprove"}),l.donorId&&await a(l.donorId,cn.J2.INITIALLY_APPROVED),Ku.success("Donor initially approved successfully"),await j(o),N(!1),!0}catch(p){return console.error("Error in initial approval:",p),Ku.error("Failed to initially approve donor: "+p.message),N(!1),!1}},T=async e=>{try{var t,r;N(!0);const a=prompt("Please provide a reason for initial rejection:");if(!a||!a.trim())return Ku.error("Rejection reason is required"),N(!1),!1;const{createApprovalNotification:s}=await Promise.resolve().then(n.bind(n,109)),i=(0,bt.doc)(xt.db,"medicalRecords",e),l=await(0,bt.x7)(i);if(!l.exists())return Ku.error("Donor record not found"),N(!1),!1;const c=l.data(),d=c.requestStatus||c.status,u={requestStatus:cn.J2.INITIAL_ADMIN_REJECTED,status:cn.J2.INITIAL_ADMIN_REJECTED,updatedAt:(0,bt.serverTimestamp)(),adminReviewed:!0,adminId:(null===(t=xt.j2.currentUser)||void 0===t?void 0:t.uid)||"admin",adminComment:a,rejectionReason:a,initialAdminRejectionDate:(0,bt.serverTimestamp)(),eligibleForAppointments:!1};return await(0,bt.updateDoc)(i,u),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{recordId:e,recordType:"donor",previousStatus:d,newStatus:cn.J2.INITIAL_ADMIN_REJECTED,changedBy:(null===(r=xt.j2.currentUser)||void 0===r?void 0:r.uid)||"admin",timestamp:(0,bt.serverTimestamp)(),reason:a,userRole:"admin",action:"initialReject"}),c.donorId&&await s(c.donorId,cn.J2.INITIAL_ADMIN_REJECTED),Ku.success("Donor initially rejected"),await j(o),N(!1),!0}catch(p){return console.error("Error in initial rejection:",p),Ku.error("Failed to initially reject donor: "+p.message),N(!1),!1}},C=()=>{h(!1),d(null),g("")},D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return n;if(Array.isArray(t)){for(const r of t){const t=k(e,r);if(t!==n)return t}return n}return k(e,t,n)},k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return n;const r=t.split(".");let a=e;for(const s of r){if(void 0===a||null===a)return n;a=a[s]}return void 0===a||null===a||""===a?n:a},P=e=>{const t=D(e,"donorName");return"N/A"!==t?t:D(e,["userData.name","userData.fullName","userData.displayName"])};return(0,wt.jsxs)("div",{className:"p-6",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Donor Management"}),(0,wt.jsx)(mh,{activeTab:o,setActiveTab:l}),p&&(0,wt.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",children:(0,wt.jsx)("p",{children:p})}),a?(0,wt.jsx)("div",{className:"text-center p-4",children:(0,wt.jsx)("p",{className:"text-gray-600",children:"Loading donors..."})}):(0,wt.jsx)(fh,{donors:e,getStatusBadgeColor:cn.Z9,getStatusDisplay:cn.Pd,getSafeValue:D,getDonorName:P,formatDate:e=>e?"object"===typeof e&&e.seconds?new Date(1e3*e.seconds).toLocaleDateString():e instanceof Date?e.toLocaleDateString():"string"===typeof e?new Date(e).toLocaleDateString():"N/A":"N/A",viewDonorDetails:e=>{d(e),g(""),h(!0)},openConfirmationModal:S}),u&&(0,wt.jsx)(gh,{selectedDonor:c,closeDetailModal:C,adminComment:f,setAdminComment:g,openConfirmationModal:S,actionInProgress:w,updateDonorStatus:E,getStatusBadgeColor:cn.Z9,getStatusDisplay:cn.Pd,getDonorName:P}),(0,wt.jsx)(vh,{confirmationModalOpen:v,selectedDonor:c,confirmationAction:x,closeConfirmationModal:I,handleConfirmation:async()=>{let e=!1;"confirmApproval"===x?e=await E(c.id,cn.J2.ADMIN_APPROVED,!0):"confirmRejection"===x?e=await E(c.id,cn.J2.ADMIN_REJECTED,!0):"overrideApproval"===x?e=await A(c.id,!1):"overrideRejection"===x?e=await A(c.id,!0):"initialApprove"===x?e=await _(c.id):"initialReject"===x&&(e=await T(c.id)),e&&(I(),u&&C())},actionInProgress:w,getDonorName:P}),(0,wt.jsx)(kh,{})]})},Rh=e=>{try{return e?"string"===typeof e?new Date(e).toLocaleDateString():e.seconds?new Date(1e3*e.seconds).toLocaleDateString():e.toDate&&"function"===typeof e.toDate?e.toDate().toLocaleDateString():"Invalid date format":"Unknown date"}catch(t){return console.error("Error formatting date:",t),"Date error"}};function Oh(e){let{title:t,icon:n,linkTo:r,status:a,statusColor:s,color:i,hoverColor:o}=e;return(0,wt.jsxs)(ut,{to:r,className:"group block bg-white rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 relative overflow-hidden",children:[(0,wt.jsx)("div",{className:"h-1 w-full bg-gradient-to-r ".concat(i.replace("from-","from-").replace("to-","to-"))}),(0,wt.jsxs)("div",{className:"p-4",children:[(0,wt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,wt.jsx)("div",{className:"p-2 rounded-md ".concat(i.replace("from-","bg-").split(" ")[0]," bg-opacity-20"),children:(0,wt.jsx)("span",{className:"text-".concat(i.split("-")[1],"-600 text-lg"),children:n})}),(0,wt.jsx)("h3",{className:"ml-3 font-medium text-gray-700 text-sm",children:t}),(0,wt.jsx)("div",{className:"ml-auto text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,wt.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,wt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,wt.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s.replace("text-","bg-"))}),(0,wt.jsx)("p",{className:"text-xs ".concat(s," ml-2 font-medium tracking-wide"),children:a})]})]})]})}const Lh=function(){var e;const{user:n}=(0,t.useContext)(Nt),[r,a]=(0,t.useState)(null),[s,o]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)({waitTime:"N/A",matchProgress:0,healthScore:"N/A",compatibilityMatches:0}),[h,p]=(0,t.useState)(!0),[m,f]=(0,t.useState)({isComplete:!1,missingFields:[]}),[g,v]=(0,t.useState)("not-submitted"),[y,x]=(0,t.useState)(""),[b,w]=(0,t.useState)(""),[N,j]=(0,t.useState)(null),[E,A]=(0,t.useState)("pending"),[S,I]=(0,t.useState)("pending"),[_,T]=(0,t.useState)("pending");(0,t.useEffect)((()=>{(async()=>{if(n)try{const e=(0,bt.rJ)(xt.db,"recipients"),t=(0,bt.P)(e,(0,bt._M)("userId","==",n.uid)),r=await(0,bt.GG)(t);if(!r.empty){const e=r.docs[0].data();a(e),v(e.requestStatus||"not-submitted"),x(e.doctorComment||""),w(e.adminComment||""),j(e.requestSubmissionDate?e.requestSubmissionDate.toDate():null),A(e.medicalEvaluationStatus||"pending"),I(e.waitingListStatus||"pending"),T(e.matchedStatus||"pending"),C(e)}const s=(0,bt.P)((0,bt.rJ)(xt.db,"organRequests"),(0,bt._M)("recipientId","==",n.uid)),l=(await(0,bt.GG)(s)).docs.map((e=>(0,i.A)({id:e.id},e.data())));o(l);const d=(0,bt.P)((0,bt.rJ)(xt.db,"appointments"),(0,bt._M)("recipientId","==",n.uid)),h=(await(0,bt.GG)(d)).docs.map((e=>(0,i.A)({id:e.id},e.data())));c(h),l.length>0&&u({waitTime:"3 months",matchProgress:65,healthScore:"Good",compatibilityMatches:2}),p(!1)}catch(e){console.error("Error fetching recipient data:",e),p(!1)}})()}),[n]);const C=e=>{const t=[{name:"fullName",label:"Full Name"},{name:"email",label:"Email"},{name:"phone",label:"Phone Number"},{name:"address",label:"Address"},{name:"city",label:"City"},{name:"state",label:"State/Province"},{name:"zipCode",label:"Zip/Postal Code"},{name:"dateOfBirth",label:"Date of Birth"},{name:"gender",label:"Gender"},{name:"bloodType",label:"Blood Type"},{name:"nationalId",label:"National ID"},{name:"diagnosedCondition",label:"Medical Condition"},{name:"hospitalAssociation",label:"Hospital"}].filter((t=>!e[t.name]||""===e[t.name]));f({isComplete:0===t.length,missingFields:t})};if(h)return(0,wt.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:(0,wt.jsxs)("div",{className:"relative",children:[(0,wt.jsx)("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-[#973131] rounded-full animate-spin"}),(0,wt.jsx)("div",{className:"mt-4 text-[#973131] font-medium",children:"Loading..."})]})});const D=s.find((e=>["Pending","Approved","In Progress","Matched"].includes(e.status))),k=l.find((e=>"Confirmed"===e.status&&new Date(e.date.toDate())>new Date));return(0,wt.jsx)("div",{className:"min-h-screen bg-gray-50 py-6",children:(0,wt.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,wt.jsxs)("header",{className:"mb-6 bg-white rounded-lg shadow-sm p-5",children:[(0,wt.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h1",{className:"text-2xl font-bold text-[#973131] mb-1",children:"Recipient Dashboard"}),(0,wt.jsxs)("p",{className:"text-sm text-gray-600",children:["Welcome back",null!==r&&void 0!==r&&r.fullName?", ".concat(r.fullName):"","! Monitor your organ requests and health status"]})]}),(0,wt.jsx)("div",{className:"mt-4 md:mt-0 flex items-center space-x-4",children:m.isComplete?(0,wt.jsxs)("div",{className:"flex items-center bg-green-50 text-green-700 px-3 py-1.5 rounded-md text-sm",children:[(0,wt.jsx)(Vt,{className:"mr-2 text-xs"}),(0,wt.jsx)("span",{children:"Profile Complete"})]}):(0,wt.jsxs)(ut,{to:"/recipient/profile",className:"flex items-center bg-yellow-50 text-yellow-700 px-3 py-1.5 text-sm rounded-md hover:bg-yellow-100 transition-colors",children:[(0,wt.jsx)(Bt,{className:"mr-2 text-xs"}),(0,wt.jsx)("span",{children:"Complete Profile"})]})})]}),"        "]}),"not-submitted"!==g&&(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-5 mb-6",children:[(0,wt.jsxs)("h2",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[(0,wt.jsx)(Vt,{className:"mr-2 text-[#973131]"}),"Medical Form Application Status"]}),(0,wt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,wt.jsx)("span",{className:"text-sm font-medium mr-2",children:"Status:"}),(0,wt.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat((0,cn.qY)(g)),children:(0,cn.Pd)(g)})]}),N&&(0,wt.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Submitted on:"})," ",N.toLocaleDateString()]}),(0,wt.jsxs)("div",{className:"mb-4",children:[(()=>{const{stages:e,currentStage:t,progressPercentage:n}=(()=>{let e=0,t=0;return"pending"===g?(e=0,t=20):"doctor-approved"===g?(e=1,t=40):"admin-approved"===g?(e=2,t=60,"completed"===E&&(e=3,t=80,"active"===S&&(e=4,t=100,"matched"===_&&(e=5,t=100)))):"rejected"===g&&(t=0),{stages:[{key:"doctor-approval",label:"Doctor Approval",status:g},{key:"admin-approval",label:"Admin Approval",status:g},{key:"medical-evaluation",label:"Medical Evaluation",status:E},{key:"waiting-list",label:"Waiting List",status:S},{key:"matched",label:"Matched",status:_}],currentStage:e,progressPercentage:t}})();return(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Transplant Journey Progress"}),(0,wt.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[n,"%"]})]}),(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("div",{className:"flex items-center justify-between mb-3",children:e.map(((n,r)=>(0,wt.jsxs)("div",{className:"flex flex-col items-center relative",style:{width:"18%"},children:[(0,wt.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ".concat(r<=t?"bg-teal-600 text-white":r===t+1&&"rejected"!==g?"bg-yellow-500 text-white":"bg-gray-300 text-gray-600"),children:r<t?(0,wt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):r+1}),(0,wt.jsx)("span",{className:"text-xs mt-2 text-center leading-tight ".concat(r<=t?"text-teal-600 font-medium":"text-gray-500"),children:n.label}),r<e.length-1&&(0,wt.jsx)("div",{className:"absolute top-4 left-8 w-full h-0.5 ".concat(r<t?"bg-teal-600":"bg-gray-300"),style:{width:"calc(100% + 2rem)"}})]},n.key)))}),(0,wt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-4",children:(0,wt.jsx)("div",{className:"bg-teal-600 h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(n,"%")}})})]})]})})(),"pending"===g&&(0,wt.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-r-md",children:[(0,wt.jsx)("p",{className:"text-yellow-800 font-medium",children:"Your application is under review by the medical team."}),(0,wt.jsx)("p",{className:"text-yellow-700 mt-1 text-sm",children:"You cannot edit your information while your application is being reviewed."})]}),"doctor-approved"===g&&(0,wt.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-r-md",children:[(0,wt.jsx)("p",{className:"text-blue-800 font-medium",children:"Congratulations! Your application has been approved by the medical team."}),y&&(0,wt.jsxs)("div",{className:"mt-3 bg-white p-3 rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800 text-sm",children:"Medical Team Note:"}),(0,wt.jsx)("p",{className:"italic text-blue-700 text-sm mt-1",children:y})]}),(0,wt.jsx)("p",{className:"mt-2 text-blue-700 text-sm",children:"The medical team will contact you soon to schedule your appointment."})]}),"              ","admin-approved"===g&&(0,wt.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-400 p-3 rounded-r-md",children:[(0,wt.jsx)("p",{className:"text-green-800 font-medium",children:"Congratulations! Your application has been fully approved!"}),b&&(0,wt.jsxs)("div",{className:"mt-3 bg-white p-3 rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800 text-sm",children:"Approval Note:"}),(0,wt.jsx)("p",{className:"italic text-green-700 text-sm mt-1",children:b})]}),(0,wt.jsxs)("div",{className:"mt-3",children:[(0,wt.jsxs)("p",{className:"text-green-700 text-sm",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital:"})," ",(null===r||void 0===r?void 0:r.hospitalAssociation)||"N/A"]}),(0,wt.jsx)("p",{className:"text-green-700 mt-1 text-sm",children:"Your transplant center will contact you shortly to schedule your initial consultation."})]})]}),"admin-approved"===g&&"pending"===E&&(0,wt.jsxs)("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 rounded-r-md mt-3",children:[(0,wt.jsx)("p",{className:"text-purple-800 font-medium",children:"Next Step: Medical Evaluation"}),(0,wt.jsx)("p",{className:"text-purple-700 mt-1 text-sm",children:"Your medical evaluation is being scheduled. This comprehensive assessment will determine your transplant candidacy."})]}),"in-progress"===E&&(0,wt.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-r-md mt-3",children:[(0,wt.jsx)("p",{className:"text-blue-800 font-medium",children:"Medical Evaluation in Progress"}),(0,wt.jsx)("p",{className:"text-blue-700 mt-1 text-sm",children:"Your medical evaluation is currently underway. Please complete all required tests and appointments."})]}),"completed"===E&&(0,wt.jsxs)("div",{className:"bg-teal-50 border-l-4 border-teal-400 p-3 rounded-r-md mt-3",children:[(0,wt.jsx)("p",{className:"text-teal-800 font-medium",children:"Medical Evaluation Completed"}),(0,wt.jsx)("p",{className:"text-teal-700 mt-1 text-sm",children:"Your medical evaluation has been completed successfully. You are now eligible for the waiting list."})]}),"completed"===E&&"pending"===S&&(0,wt.jsxs)("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-3 rounded-r-md mt-3",children:[(0,wt.jsx)("p",{className:"text-orange-800 font-medium",children:"Waiting List Registration Pending"}),(0,wt.jsx)("p",{className:"text-orange-700 mt-1 text-sm",children:"Your application is being processed for waiting list registration."})]}),"active"===S&&(0,wt.jsxs)("div",{className:"bg-indigo-50 border-l-4 border-indigo-400 p-3 rounded-r-md mt-3",children:[(0,wt.jsx)("p",{className:"text-indigo-800 font-medium",children:"Active on Waiting List"}),(0,wt.jsx)("p",{className:"text-indigo-700 mt-1 text-sm",children:"You are now actively on the organ waiting list. We will contact you immediately when a compatible organ becomes available."}),(0,wt.jsx)("div",{className:"mt-2 bg-white p-2 rounded border border-indigo-200",children:(0,wt.jsxs)("p",{className:"text-xs text-indigo-600",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Important:"})," Keep your contact information updated and stay healthy while waiting."]})})]}),"matched"===_&&(0,wt.jsxs)("div",{className:"bg-emerald-50 border-l-4 border-emerald-400 p-3 rounded-r-md mt-3",children:[(0,wt.jsx)("p",{className:"text-emerald-800 font-medium",children:"\ud83c\udf89 Organ Match Found!"}),(0,wt.jsx)("p",{className:"text-emerald-700 mt-1 text-sm",children:"Congratulations! A compatible organ has been found. Please contact your transplant center immediately."}),(0,wt.jsxs)("div",{className:"mt-3 bg-white p-3 rounded border border-emerald-200",children:[(0,wt.jsx)("p",{className:"text-emerald-800 font-medium text-sm",children:"Next Steps:"}),(0,wt.jsxs)("ul",{className:"text-xs text-emerald-700 mt-1 space-y-1",children:[(0,wt.jsx)("li",{children:"\u2022 Contact your transplant coordinator immediately"}),(0,wt.jsx)("li",{children:"\u2022 Prepare for pre-transplant procedures"}),(0,wt.jsx)("li",{children:"\u2022 Follow all pre-surgery instructions"})]})]})]}),"rejected"===g&&(0,wt.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-r-md",children:[(0,wt.jsx)("p",{className:"text-red-800 font-medium",children:"We're sorry, your application has been declined."}),y&&(0,wt.jsxs)("div",{className:"mt-3 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800 text-sm",children:"Message from Medical Team:"}),(0,wt.jsx)("p",{className:"italic text-red-700 text-sm mt-1",children:y})]})]})]})]}),!m.isComplete&&(0,wt.jsx)("div",{className:"bg-white border-l-4 border-yellow-400 p-4 mb-6 rounded-lg shadow-sm",children:(0,wt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center",children:[(0,wt.jsxs)("div",{className:"flex items-center mb-4 md:mb-0",children:[(0,wt.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 rounded-full p-1.5",children:(0,wt.jsx)(Bt,{className:"h-5 w-5 text-yellow-600"})}),(0,wt.jsxs)("div",{className:"ml-3",children:[(0,wt.jsx)("p",{className:"font-medium text-gray-800 text-base",children:"Profile Incomplete"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:"Please complete your profile to access all features."})]})]}),m.missingFields.length>0&&(0,wt.jsx)("div",{className:"md:ml-auto mt-4 md:mt-0",children:(0,wt.jsxs)("div",{className:"bg-gray-50 rounded-md p-2 text-sm",children:[(0,wt.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Missing information:"}),(0,wt.jsxs)("ul",{className:"text-xs text-gray-600 space-y-0.5",children:[m.missingFields.slice(0,3).map(((e,t)=>(0,wt.jsxs)("li",{className:"flex items-center",children:[(0,wt.jsx)("span",{className:"mr-1.5",children:"\u2022"})," ",e.label]},t))),m.missingFields.length>3&&(0,wt.jsxs)("li",{className:"flex items-center",children:[(0,wt.jsx)("span",{className:"mr-1.5",children:"\u2022"})," And ",m.missingFields.length-3," more..."]})]})]})}),(0,wt.jsxs)(ut,{to:"/recipient/profile",className:"mt-4 md:mt-0 md:ml-4 inline-flex items-center px-3 py-1.5 text-sm bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-colors shadow-sm",children:["Complete Profile",(0,wt.jsx)("svg",{className:"ml-1.5 h-3.5 w-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-5 mb-6",children:[(0,wt.jsxs)("h2",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[(0,wt.jsx)(zt,{className:"mr-2 text-[#973131]"}),"Organ Request Status"]}),D?(0,wt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,wt.jsxs)("div",{className:"bg-gray-50 p-3.5 rounded-md border border-gray-100",children:[(0,wt.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Request"}),(0,wt.jsxs)("p",{className:"font-medium text-gray-800",children:[D.organType," Transplant"]})]}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-3.5 rounded-md border border-gray-100",children:[(0,wt.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Status"}),(0,wt.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded-full ".concat("Approved"===D.status?"bg-green-100 text-green-800":"Pending"===D.status?"bg-yellow-100 text-yellow-800":"Matched"===D.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:D.status})]}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-3.5 rounded-md border border-gray-100",children:[(0,wt.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Waiting since"}),(0,wt.jsx)("p",{className:"font-medium text-gray-800",children:null===(e=D.createdAt)||void 0===e?void 0:e.toDate().toLocaleDateString()})]}),(0,wt.jsx)("div",{className:"bg-gray-50 p-3.5 rounded-md border border-gray-100 flex items-center",children:(0,wt.jsxs)(ut,{to:"/recipient/request-details/".concat(D.id),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center group",children:["View details",(0,wt.jsx)("svg",{className:"ml-1 h-3.5 w-3.5 transform group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7-7 7"})})]})})]}):(0,wt.jsxs)("div",{className:"bg-gray-50 p-6 rounded-md text-center border border-gray-100",children:[(0,wt.jsx)("div",{className:"inline-block p-2.5 bg-gray-100 rounded-full mb-2.5",children:(0,wt.jsx)(zt,{size:20,className:"text-gray-400"})}),(0,wt.jsx)("p",{className:"text-gray-600 text-sm mb-3.5",children:"You don't have any active organ requests"}),(0,wt.jsxs)(ut,{to:"/recipient/request-organ",className:"inline-flex items-center bg-[#973131] text-white px-3.5 py-1.5 text-sm rounded-md hover:bg-opacity-90 transition-all duration-300",children:[(0,wt.jsx)("svg",{className:"h-3.5 w-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Start a new request"]})]})]}),(0,wt.jsxs)("div",{className:"mb-6",children:[(0,wt.jsx)("h2",{className:"text-base font-medium text-gray-700 mb-3 px-1",children:"Quick Access"}),(0,wt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,wt.jsx)(Oh,{title:"My Profile",icon:(0,wt.jsx)(en,{size:18}),linkTo:"/recipient/profile",status:m.isComplete?"Complete":"Incomplete",statusColor:m.isComplete?"text-green-600":"text-red-600",color:"from-pink-50 to-red-50",hoverColor:"group-hover:from-pink-100 group-hover:to-red-100"}),(0,wt.jsx)(Oh,{title:"Organ Requests",icon:(0,wt.jsx)(zt,{size:18}),linkTo:"/recipient/request-organ",status:D?D.status:"No requests",statusColor:D?"Approved"===D.status?"text-green-600":"Pending"===D.status?"text-yellow-600":"Matched"===D.status?"text-blue-600":"text-gray-600":"text-gray-600",color:"from-yellow-50 to-amber-50",hoverColor:"group-hover:from-yellow-100 group-hover:to-amber-100"}),(0,wt.jsx)(Oh,{title:"Medical Documents",icon:(0,wt.jsx)(Gt,{size:18}),linkTo:"/recipient/medical-documents",status:null!==r&&void 0!==r&&r.documentsUploaded?"Uploaded":"Needed",statusColor:null!==r&&void 0!==r&&r.documentsUploaded?"text-green-600":"text-red-600",color:"from-blue-50 to-indigo-50",hoverColor:"group-hover:from-blue-100 group-hover:to-indigo-100"}),(0,wt.jsx)(Oh,{title:"Appointments",icon:(0,wt.jsx)(Ft,{size:18}),linkTo:"/recipient/appointments",status:k?"Next: ".concat(Rh(k.date)):"No upcoming",statusColor:k?"text-blue-600":"text-gray-600",color:"from-green-50 to-emerald-50",hoverColor:"group-hover:from-green-100 group-hover:to-emerald-100"})]})]})]})})},Mh=()=>{const e=de(),[n,r]=(0,t.useState)(!0),[a,s]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{if(!xt.j2.currentUser)return void e("/login");s([{id:"test1",date:"2025-03-15",testType:"Blood Test",doctor:"Dr. Smith",hospital:"General Hospital",status:"completed",results:"Normal",notes:"All values within normal range"},{id:"test2",date:"2025-03-22",testType:"Kidney Function",doctor:"Dr. Johnson",hospital:"Medical Center",status:"pending_review",results:null,notes:"Results pending doctor review"},{id:"test3",date:"2025-02-10",testType:"Liver Function",doctor:"Dr. Williams",hospital:"City Hospital",status:"completed",results:"Abnormal",notes:"Some values outside normal range, follow-up recommended"}]),r(!1)}catch(t){console.error("Error fetching test results:",t),r(!1)}})()}),[e]);const i=e=>{const t={completed:{color:"bg-green-200 text-green-800",label:"Completed"},pending_review:{color:"bg-yellow-200 text-yellow-800",label:"Pending Review"},scheduled:{color:"bg-blue-200 text-blue-800",label:"Scheduled"},cancelled:{color:"bg-red-200 text-red-800",label:"Cancelled"}}[e]||{color:"bg-gray-200 text-gray-800",label:e};return(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(t.color),children:t.label})},o=e=>{if(!e)return null;const t={Normal:{color:"bg-green-200 text-green-800"},Abnormal:{color:"bg-red-200 text-red-800"},Inconclusive:{color:"bg-yellow-200 text-yellow-800"}}[e]||{color:"bg-gray-200 text-gray-800"};return(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(t.color),children:e})};return n?(0,wt.jsx)("div",{className:"text-center p-5",children:"Loading..."}):(0,wt.jsxs)("div",{className:"container mx-auto p-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Test Results"}),a.length>0?(0,wt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,wt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,wt.jsx)("thead",{className:"bg-gray-50",children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Type"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),(0,wt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,wt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((t=>(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(t.date).toLocaleDateString()}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.testType}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.doctor}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:i(t.status)}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.results?o(t.results):"N/A"}),(0,wt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wt.jsx)("button",{onClick:()=>e("/recipient/test-results/".concat(t.id)),className:"text-blue-600 hover:text-blue-800",children:"View Details"})})]},t.id)))})]})}):(0,wt.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:(0,wt.jsx)("p",{className:"text-gray-500",children:"No test results found."})}),(0,wt.jsx)("div",{className:"mt-6",children:(0,wt.jsx)("button",{onClick:()=>e("/recipient/dashboard"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:"Back to Dashboard"})})]})},Fh=()=>{const e=de(),[n,r]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),[i,o]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const t=xt.j2.currentUser;if(!t)return void e("/login");const n=(0,bt.doc)(xt.db,"medicalForms",t.uid),a=await(0,bt.x7)(n);if(!a.exists())return void e("/recipient/medical-form");o(a.data());const i={status:"on_waiting_list",position:12,organNeeded:a.data().organNeeded,listedDate:"2025-03-01",estimatedWaitTime:"6-12 months",urgencyLevel:a.data().urgencyLevel,notes:"Regular check-ups required during waiting period"};s(i),r(!1)}catch(t){console.error("Error fetching waiting list status:",t),r(!1)}})()}),[e]);if(n)return(0,wt.jsx)("div",{className:"text-center p-5",children:"Loading..."});const l={on_waiting_list:{color:"bg-green-100 border-green-500",icon:"\u2713",iconColor:"text-green-500",title:"On Waiting List",description:"You are currently on the waiting list for organ transplantation."},pending_approval:{color:"bg-yellow-100 border-yellow-500",icon:"\u231b",iconColor:"text-yellow-500",title:"Pending Approval",description:"Your application is being reviewed for placement on the waiting list."},not_eligible:{color:"bg-red-100 border-red-500",icon:"\u2717",iconColor:"text-red-500",title:"Not Eligible",description:"Based on medical evaluation, you are currently not eligible for the waiting list."},initial_review:{color:"bg-blue-100 border-blue-500",icon:"\ud83d\udd0d",iconColor:"text-blue-500",title:"Initial Review",description:"Your application is undergoing initial review by medical staff."},testing_phase:{color:"bg-purple-100 border-purple-500",icon:"\ud83e\uddea",iconColor:"text-purple-500",title:"Testing Phase",description:"Additional medical tests are being conducted to determine eligibility."}}[a.status]||{color:"bg-gray-100 border-gray-500",icon:"?",iconColor:"text-gray-500",title:"Unknown Status",description:"Status information is not available."};return(0,wt.jsxs)("div",{className:"container mx-auto p-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Waiting List Status"}),(0,wt.jsx)("div",{className:"border-l-4 ".concat(l.color," p-4 mb-8"),children:(0,wt.jsxs)("div",{className:"flex items-center",children:[(0,wt.jsx)("div",{className:"text-2xl ".concat(l.iconColor," mr-3"),children:l.icon}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold",children:l.title}),(0,wt.jsx)("p",{className:"text-gray-600",children:l.description})]})]})}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Waiting List Details"}),(0,wt.jsxs)("div",{className:"space-y-3",children:[(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Organ Needed:"}),(0,wt.jsx)("span",{className:"font-medium capitalize",children:a.organNeeded})]}),"on_waiting_list"===a.status&&(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Current Position:"}),(0,wt.jsx)("span",{className:"font-medium",children:a.position})]}),(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Listed Date:"}),(0,wt.jsx)("span",{className:"font-medium",children:a.listedDate})]}),(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Urgency Level:"}),(0,wt.jsx)("span",{className:"font-medium capitalize",children:a.urgencyLevel})]}),a.estimatedWaitTime&&(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Estimated Wait Time:"}),(0,wt.jsx)("span",{className:"font-medium",children:a.estimatedWaitTime})]})]})]}),(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Medical Form Status"}),(0,wt.jsxs)("div",{className:"space-y-3",children:[(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Form Status:"}),(0,wt.jsx)("span",{className:"font-medium capitalize",children:i.status.replace(/_/g," ")})]}),(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Submitted Date:"}),(0,wt.jsx)("span",{className:"font-medium",children:i.submittedAt?new Date(i.submittedAt).toLocaleDateString():"N/A"})]}),(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,wt.jsx)("span",{className:"font-medium",children:i.updatedAt?new Date(i.updatedAt).toLocaleDateString():"N/A"})]})]}),(0,wt.jsx)("button",{onClick:()=>e("/recipient/medical-form"),className:"mt-4 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Medical Form"})]})]}),(0,wt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Next Steps"}),"on_waiting_list"===a.status&&(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsx)("p",{children:"While you're on the waiting list, please:"}),(0,wt.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,wt.jsx)("li",{children:"Attend all scheduled appointments"}),(0,wt.jsx)("li",{children:"Complete any additional tests as requested"}),(0,wt.jsx)("li",{children:"Keep your contact information up to date"}),(0,wt.jsx)("li",{children:"Stay within 4 hours of the transplant center"}),(0,wt.jsx)("li",{children:"Maintain your health as advised by your doctor"})]})]}),"pending_approval"===a.status&&(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsx)("p",{children:"To complete your waiting list application:"}),(0,wt.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,wt.jsx)("li",{children:"Attend your upcoming evaluation appointments"}),(0,wt.jsx)("li",{children:"Submit any additional documentation requested"}),(0,wt.jsx)("li",{children:"Complete all required medical tests"}),(0,wt.jsx)("li",{children:"Ensure all insurance information is up to date"})]})]}),"not_eligible"===a.status&&(0,wt.jsxs)("div",{className:"space-y-4",children:[(0,wt.jsx)("p",{children:"Based on your current evaluation:"}),(0,wt.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,wt.jsx)("li",{children:"Schedule a consultation with your doctor to discuss the results"}),(0,wt.jsx)("li",{children:"Ask about alternative treatments or therapies"}),(0,wt.jsx)("li",{children:"Inquire about steps to improve eligibility in the future"})]})]}),a.notes&&(0,wt.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:[(0,wt.jsx)("p",{className:"font-medium",children:"Additional Notes:"}),(0,wt.jsx)("p",{className:"text-gray-600",children:a.notes})]})]}),(0,wt.jsxs)("div",{className:"flex justify-between",children:[(0,wt.jsx)("button",{onClick:()=>e("/recipient/dashboard"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:"Back to Dashboard"}),(0,wt.jsx)("button",{onClick:()=>e("/recipient/appointments"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"View Appointments"})]})]})},Uh=()=>{const{user:e}=(0,t.useContext)(Nt),[n,r]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(e&&e.uid)try{console.log("Fetching appointments for user:",e.uid);const t=(0,bt.rJ)(xt.db,"recipientAppointments"),n=(0,bt.P)(t,(0,bt._M)("recipientId","==",e.uid),(0,bt.My)("date","desc")),a=await(0,bt.GG)(n),o=[];a.forEach((e=>{const t=e.data();o.push((0,i.A)({id:e.id},t))})),console.log("Found appointments:",o.length),r(o),s(!1)}catch(t){console.error("Error fetching appointments:",t),l("Failed to fetch your appointments. Please try again later."),s(!1)}else s(!1)})()}),[e]);const c=e=>{if(!e)return"N/A";try{return e.toDate().toLocaleDateString()}catch(du){return"Invalid Date"}},d=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"rescheduled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},u=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,wt.jsxs)("div",{className:"container mx-auto p-4 sm:p-6",children:[(0,wt.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-4 text-gray-800",children:"Your Appointments"}),(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md mb-6 border-l-4 border-blue-400",children:[(0,wt.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Appointment Information"}),(0,wt.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:"Appointments are an essential part of your treatment process. Our medical staff will guide you through each step and answer any questions you may have."}),(0,wt.jsxs)("p",{className:"text-sm text-blue-700 font-medium",children:[(0,wt.jsx)("strong",{children:"Important:"})," Only medical staff can schedule appointments for you. You cannot create or schedule appointments yourself. If you need to reschedule or have questions about your appointments, please contact your assigned doctor directly."]})]}),a?(0,wt.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,wt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?(0,wt.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:(0,wt.jsx)("div",{className:"flex",children:(0,wt.jsx)("div",{className:"ml-3",children:(0,wt.jsx)("p",{className:"text-sm text-red-700",children:o})})})}):0===n.length?(0,wt.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,wt.jsx)("div",{className:"flex",children:(0,wt.jsx)("div",{className:"ml-3",children:(0,wt.jsx)("p",{className:"text-sm text-yellow-700",children:"You don't have any appointments scheduled yet."})})})}):(0,wt.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,wt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,wt.jsx)("thead",{className:"bg-gray-50",children:(0,wt.jsxs)("tr",{children:[(0,wt.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment Details"}),(0,wt.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,wt.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hospital"}),(0,wt.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,wt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e=>(0,wt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,wt.jsx)("td",{className:"px-4 py-4",children:(0,wt.jsxs)("div",{className:"flex flex-col",children:[(0,wt.jsx)("span",{className:"font-medium text-gray-900",children:e.purpose||"Medical Appointment"}),(0,wt.jsxs)("span",{className:"text-sm text-gray-500",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Date:"})," ",c(e.date)]}),(0,wt.jsxs)("span",{className:"text-sm text-gray-500",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Time:"})," ",e.time||"N/A"]}),e.organType&&(0,wt.jsxs)("span",{className:"text-sm text-gray-500",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Organ:"})," ",e.organType]}),e.bloodType&&(0,wt.jsxs)("span",{className:"text-sm text-gray-500",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Blood Type:"})," ",e.bloodType]}),e.urgencyLevel&&(0,wt.jsx)("span",{className:"inline-flex mt-1",children:(0,wt.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(u(e.urgencyLevel)),children:e.urgencyLevel})})]})}),(0,wt.jsx)("td",{className:"px-4 py-4",children:(0,wt.jsxs)("div",{className:"flex flex-col",children:["                      ",(0,wt.jsx)("span",{className:"font-medium text-gray-900",children:e.doctorName||"Not Assigned"}),(0,wt.jsx)("span",{className:"text-sm text-gray-500",children:e.doctorScheduled?"Scheduled by doctor":"Scheduled by medical staff"})]})}),(0,wt.jsx)("td",{className:"px-4 py-4",children:(0,wt.jsx)("span",{className:"text-sm text-gray-900",children:e.hospitalName||"Not specified"})}),(0,wt.jsxs)("td",{className:"px-4 py-4",children:[(0,wt.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(d(e.status)),children:e.status||"Unknown"}),e.notes&&(0,wt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:e.notes})]})]},e.id)))})]})})]})},Vh=["password"],qh=["Punjab","Sindh","Balochistan","Khyber Pakhtunkhwa","Gilgit Baltistan"],zh=()=>{const[e,n]=(0,t.useState)({hospitalName:"",address:"",contactNumber:"",email:"",password:"",licenseNumber:"",doctorName:"",doctorSpecialization:"",licenseFile:null,province:"",city:""}),[r,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)({}),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[p,m]=(0,t.useState)(!1),f=(0,sn.xI)();(0,t.useEffect)((()=>{(async()=>{const e=f.currentUser;if(!e)return void a(!1);const t=(0,bt.rJ)(xt.db,"hospitals"),n=(0,bt.P)(t,(0,bt._M)("userId","==",e.uid));(await(0,bt.GG)(n)).empty||m(!0),a(!1)})()}),[f]);const g=t=>{const{name:r,value:a}=t.target;n((0,i.A)((0,i.A)({},e),{},{[r]:a}))},v=t=>{const r=t.target.files[0];r&&n((0,i.A)((0,i.A)({},e),{},{licenseFile:r}))};return p?(0,wt.jsx)("div",{className:"container mt-5",children:(0,wt.jsx)("h2",{className:"text-danger",children:"You have already submitted an application."})}):r?(0,wt.jsx)("div",{className:"container text-center d-flex align-items-center justify-content-center ",style:{height:"500px"},children:(0,wt.jsx)(ri,{})}):(0,wt.jsxs)("div",{className:"container mt-5",children:[(0,wt.jsx)("h2",{className:"mb-4",children:"Hospital Registration"}),u&&(0,wt.jsx)("div",{className:"alert alert-success",children:u}),o.submit&&(0,wt.jsx)("div",{className:"alert alert-danger",children:o.submit}),(0,wt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return e.hospitalName.trim()||(t.hospitalName="Hospital name is required"),e.address.trim()||(t.address="Address is required"),e.contactNumber.trim()||(t.contactNumber="Contact number is required"),e.email.trim()&&/\S+@\S+\.\S+/.test(e.email)||(t.email="Valid email is required"),e.password.trim()||(t.password="Password is required"),e.password.trim().length<6&&(t.password="Password must be at least 6 characters"),e.licenseNumber.trim()||(t.licenseNumber="License number is required"),e.doctorName.trim()||(t.doctorName="Doctor name is required"),e.doctorSpecialization.trim()||(t.doctorSpecialization="Doctor specialization is required"),e.licenseFile||(t.licenseFile="License file is required"),e.province||(t.province="Province is required"),e.city.trim()||(t.city="City is required"),l(t),0===Object.keys(t).length})()){d(!0);try{const t=await(0,sn.eJ)(f,e.email,e.password);await(async(e,t)=>{try{await(0,bt.BN)((0,bt.doc)(xt.db,"users",t),{email:e,role:"doctor",createdAt:new Date}),console.log("Hospital user added successfully")}catch(n){console.log("Failed to register: "+n.message)}})(e.email,t.user.uid);const r=await Cs(e.licenseFile),{password:a}=e,o=s(e,Vh),l=(0,i.A)((0,i.A)({},o),{},{licenseFile:r,verificationStatus:"Pending",userId:t.user.uid,createdAt:(new Date).toISOString()});await(0,bt.gS)((0,bt.rJ)(xt.db,"hospitals"),l),h("Hospital registered successfully! Pending verification."),n({hospitalName:"",address:"",contactNumber:"",email:"",password:"",licenseNumber:"",doctorName:"",doctorSpecialization:"",licenseFile:null,province:"",city:""})}catch(r){l({submit:"auth/email-already-in-use"===r.code?"This email is already registered.":"Failed to register hospital."})}finally{d(!1)}}},className:"row g-3",children:[Object.keys(e).map((t=>"licenseFile"===t?(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"License File:"}),(0,wt.jsx)("input",{type:"file",name:"licenseFile",onChange:v,className:"form-control"}),o.licenseFile&&(0,wt.jsx)("div",{className:"text-danger",children:o.licenseFile})]},t):"province"===t?(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsx)("label",{className:"form-label",children:"Province:"}),(0,wt.jsxs)("select",{name:"province",value:e.province,onChange:g,className:"form-control",children:[(0,wt.jsx)("option",{value:"",children:"Select Province"}),qh.map((e=>(0,wt.jsx)("option",{value:e,children:e},e)))]}),o.province&&(0,wt.jsx)("div",{className:"text-danger",children:o.province})]},t):(0,wt.jsxs)("div",{className:"col-md-6",children:[(0,wt.jsxs)("label",{className:"form-label",children:[t.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase())),":"]}),(0,wt.jsx)("input",{type:"email"===t?"email":"password"===t?"password":"text",name:t,value:e[t],onChange:g,className:"form-control"}),o[t]&&(0,wt.jsx)("div",{className:"text-danger",children:o[t]})]},t))),(0,wt.jsx)("div",{className:"col-12",children:(0,wt.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Submitting...":"Register"})})]})]})},Bh=()=>(0,wt.jsx)(wt.Fragment,{children:(0,wt.jsx)(zh,{})}),Jh=()=>(0,wt.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh",backgroundColor:"#292929",backgroundImage:"url(https://via.placeholder.com/1200x800?text=404+Image)",backgroundSize:"cover",backgroundPosition:"center"},children:(0,wt.jsxs)("div",{className:"text-center text-light p-4 rounded d-flex flex-column gap-4",children:[(0,wt.jsx)("h1",{className:"display-3 fw-bold mb-0",children:"404"}),(0,wt.jsx)("p",{className:"lead",children:"Oops! The page you\u2019re looking for doesn\u2019t exist."}),(0,wt.jsx)("p",{children:(0,wt.jsx)(ut,{to:"/",className:"btn btn-primary btn-lg",children:"Go Back Home"})})]})}),Hh=()=>(0,wt.jsx)("div",{className:"custom-hero-section container-fluid  d-sm-flex align-items-center justify-content-between",children:(0,wt.jsxs)("div",{className:"row ",children:[(0,wt.jsxs)("div",{className:"custom-hero-headline col-lg-5 col-12 d-flex flex-column align-items-lg-start justify-content-lg-start justify-content-center align-items-center ",children:[(0,wt.jsxs)("div",{className:"custom-hero-content ",children:[(0,wt.jsx)("span",{className:"custom-hero-subheadline",children:"Save Lives, Donate Organs"}),(0,wt.jsxs)("h1",{className:"custom-hero-title",children:["Become a Hero",(0,wt.jsxs)("span",{className:"highlight",children:[" ","and ",(0,wt.jsx)("br",{})," Save a Life"]})]})]}),(0,wt.jsx)("p",{children:"Orglink is an innovative organ donation system designed to connect donors and recipients seamlessly. It aims to save lives by ensuring a transparent, efficient, and secure platform for organ matching and transplantation. Join us in making a difference today."}),(0,wt.jsx)("p",{children:"Join As a"}),(0,wt.jsxs)("div",{className:"btn-join-parent",children:[(0,wt.jsx)(ut,{to:"#",className:"custom-hero-button w-50 mt-2  mx-0 text-center py-2 rounded-pill",children:"Donner"}),(0,wt.jsx)(ut,{to:"#",className:"custom-hero-button w-50 mt-2  mx-0 text-center py-2 rounded-pill",children:"Hospital"}),(0,wt.jsx)(ut,{to:"#",className:"custom-hero-button w-50 mt-2 mx-0 text-center py-2 rounded-pill",children:"Receipient"})]})]}),(0,wt.jsx)("div",{className:"custom-hero-image col-lg-7 col-12  clipped",children:(0,wt.jsx)("div",{id:"video-overlay",className:"video-overlay"})})]})});var Gh=n(988),Wh=n.n(Gh);const Yh=n.p+"static/media/heart-6873709_1280.f8307ecf20dc35868007.jpg",Kh=()=>((0,t.useEffect)((()=>{Wh().init({duration:400,easing:"ease-in-out",once:!0,offset:100})}),[]),(0,wt.jsx)("div",{className:"set-alignment-container",children:(0,wt.jsx)("div",{className:"parent-organ-donation-section",children:(0,wt.jsx)("section",{className:"transform-section",children:(0,wt.jsx)("div",{className:"container-fluid",children:(0,wt.jsxs)("div",{className:"equal-columns",children:[(0,wt.jsx)("div",{className:"equal-column","data-aos":"fade-right","data-aos-duration":"1000",children:(0,wt.jsx)("div",{className:"img-container",children:(0,wt.jsx)("img",{src:Yh,alt:"Organ Donation Image"})})}),(0,wt.jsx)("div",{className:"equal-column","data-aos":"fade-left","data-aos-duration":"1000",children:(0,wt.jsxs)("div",{className:"content-wrapper",children:[(0,wt.jsx)("h3",{className:"section-title","data-aos":"zoom-in-up","data-aos-duration":"900",children:"Transform Lives Through Organ Donation"}),(0,wt.jsx)("p",{className:"section-text","data-aos":"fade-up","data-aos-duration":"1000",children:"Every organ donation is a powerful act of kindness that can save multiple lives. By pledging to become a donor, you ensure a second chance at life for those who need it most. Together, we can create a future where no one has to wait for the gift of life."}),(0,wt.jsxs)("ul",{className:"steps-list",children:[(0,wt.jsxs)("li",{className:"step-item","data-aos":"fade-up","data-aos-delay":"200",children:[(0,wt.jsx)("span",{className:"step-number",children:"1"}),(0,wt.jsx)("span",{className:"step-text",children:"Sign up to become a donor"})]}),(0,wt.jsxs)("li",{className:"step-item","data-aos":"fade-up","data-aos-delay":"400",children:[(0,wt.jsx)("span",{className:"step-number",children:"2"}),(0,wt.jsx)("span",{className:"step-text",children:"Learn about the process"})]}),(0,wt.jsxs)("li",{className:"step-item","data-aos":"fade-up","data-aos-delay":"600",children:[(0,wt.jsx)("span",{className:"step-number",children:"3"}),(0,wt.jsx)("span",{className:"step-text",children:"Make an informed decision"})]}),(0,wt.jsxs)("li",{className:"step-item","data-aos":"fade-up","data-aos-delay":"800",children:[(0,wt.jsx)("span",{className:"step-number",children:"4"}),(0,wt.jsx)("span",{className:"step-text",children:"Stay connected"})]})]})]})})]})})})})})),Qh=()=>(0,wt.jsx)("div",{className:"parent-work-section",children:(0,wt.jsx)("section",{className:"od-section ",children:(0,wt.jsxs)("div",{className:"container-fluid",children:[(0,wt.jsxs)("ul",{className:"od-nav__list",id:"odTabs",role:"tablist",children:[(0,wt.jsx)("li",{className:"od-nav__item",role:"presentation",children:(0,wt.jsxs)("a",{className:"od-nav__link active",id:"od-donor-tab","data-bs-toggle":"pill",href:"#od-donor",role:"tab","aria-controls":"od-donor","aria-selected":"true",children:[(0,wt.jsx)("i",{className:"fa-solid fa-heart-circle-plus"})," Become a Donor"]})}),(0,wt.jsx)("li",{className:"od-nav__item",role:"presentation",children:(0,wt.jsxs)("a",{className:"od-nav__link",id:"od-hospital-tab","data-bs-toggle":"pill",href:"#od-hospital",role:"tab","aria-controls":"od-hospital","aria-selected":"false",children:[(0,wt.jsx)("i",{className:"fa-solid fa-user-doctor"})," Become a Hospital"]})}),(0,wt.jsx)("li",{className:"od-nav__item",role:"presentation",children:(0,wt.jsxs)("a",{className:"od-nav__link",id:"od-recipient-tab","data-bs-toggle":"pill",href:"#od-recipient",role:"tab","aria-controls":"od-recipient","aria-selected":"false",children:[(0,wt.jsx)("i",{className:"fa-solid fa-heart-pulse"})," Become a Recipient"]})})]}),(0,wt.jsxs)("div",{className:"tab-content",id:"odTabContent",children:[(0,wt.jsx)("div",{className:"tab-pane fade show active",id:"od-donor",role:"tabpanel","aria-labelledby":"od-donor-tab",children:(0,wt.jsxs)("div",{className:"od-grid",children:[(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-clipboard-list od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 1: Register"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Sign up to become a donor and help save lives."})]}),(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-search-plus od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 2: Match"}),(0,wt.jsx)("p",{className:"od-card__text",children:"We match you with a recipient in need of your organ."})]}),(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-hand-holding-heart od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 3: Donation"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Your donation is processed to save lives."})]})]})}),(0,wt.jsx)("div",{className:"tab-pane fade",id:"od-recipient",role:"tabpanel","aria-labelledby":"od-recipient-tab",children:(0,wt.jsxs)("div",{className:"od-grid",children:[(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-clipboard-list od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 1: Register"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Sign up to be a recipient and wait for the match."})]}),(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-heartbeat od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 2: Wait for a Match"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Our system will notify you when an organ match is found."})]}),(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-hand-holding-medical od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 3: Receive Organ"}),(0,wt.jsx)("p",{className:"od-card__text",children:"The transplant procedure is performed to save your life."})]})]})}),(0,wt.jsx)("div",{className:"tab-pane fade",id:"od-hospital",role:"tabpanel","aria-labelledby":"od-hospital-tab",children:(0,wt.jsxs)("div",{className:"od-grid",children:[(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-building od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 1: Apply"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Fill out an application to join our network of hospitals."})]}),(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-hospital od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 2: Verify"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Undergo a verification process to ensure you meet our standards."})]}),(0,wt.jsxs)("div",{className:"od-card",children:[(0,wt.jsx)("i",{className:"fas fa-hand-holding-medical od-card__icon"}),(0,wt.jsx)("h4",{className:"od-card__title",children:"Step 3: Start Transplants"}),(0,wt.jsx)("p",{className:"od-card__text",children:"Begin performing organ transplants and save lives."})]})]})})]})]})})}),Xh=()=>{const e=(0,t.useRef)([]);return(0,t.useEffect)((()=>{e.current.forEach((e=>{const t=()=>{const n=+e.getAttribute("data-target"),r=+e.innerText,a=n/200;r<n?(e.innerText=Math.ceil(r+a),setTimeout(t,10)):e.innerText=n};t()}))}),[]),(0,wt.jsx)("section",{id:"statistic",className:"statistic-section one-page-section",children:(0,wt.jsx)("div",{className:"container-fluid",children:(0,wt.jsxs)("div",{className:"row text-center d-flex justify-content-between align-items-center",children:[(0,wt.jsx)("div",{className:"col-xs-12 col-md-3",children:(0,wt.jsxs)("div",{className:"counter",children:[(0,wt.jsx)("i",{className:"fa fa-heartbeat fa-2x stats-icon"}),(0,wt.jsx)("h2",{className:"timer count-title count-number","data-target":"5000",ref:t=>e.current[0]=t,children:"0"}),(0,wt.jsx)("div",{className:"stats-line-black"}),(0,wt.jsx)("p",{className:"stats-text",children:"Donors Registered"})]})}),(0,wt.jsx)("div",{className:"col-xs-12 col-md-3",children:(0,wt.jsxs)("div",{className:"counter",children:[(0,wt.jsx)("i",{className:"fa fa-users fa-2x stats-icon"}),(0,wt.jsx)("h2",{className:"timer count-title count-number","data-target":"2500",ref:t=>e.current[1]=t,children:"0"}),(0,wt.jsx)("div",{className:"stats-line-black"}),(0,wt.jsx)("p",{className:"stats-text",children:"Recipients Waiting"})]})}),(0,wt.jsx)("div",{className:"col-xs-12 col-md-3",children:(0,wt.jsxs)("div",{className:"counter",children:[(0,wt.jsx)("i",{className:"fa fa-check-circle fa-2x stats-icon"}),(0,wt.jsx)("h2",{className:"timer count-title count-number","data-target":"1500",ref:t=>e.current[2]=t,children:"0"}),(0,wt.jsx)("div",{className:"stats-line-black"}),(0,wt.jsx)("p",{className:"stats-text",children:"Successful Transplants"})]})}),(0,wt.jsx)("div",{className:"col-xs-12 col-md-3",children:(0,wt.jsxs)("div",{className:"counter",children:[(0,wt.jsx)("i",{className:"fa fa-hospital fa-2x stats-icon"}),(0,wt.jsx)("h2",{className:"timer count-title count-number","data-target":"50",ref:t=>e.current[3]=t,children:"0"}),(0,wt.jsx)("div",{className:"stats-line-black"}),(0,wt.jsx)("p",{className:"stats-text",children:"Hospitals Partnered"})]})})]})})})},Zh=n.p+"static/media/gallery-1.a4e08ed2d623b0b459ae.webp",$h=n.p+"static/media/gallery-2.d7915ca20d2dba7c6deb.webp",ep=n.p+"static/media/gallery-3.b65dc8ee0c9db6660921.png",tp=n.p+"static/media/gallery-4.0b4fb3fa12f6b2c8ec55.png",np=n.p+"static/media/gallery-5.69c1805770cab43d4c97.webp",rp=n.p+"static/media/gallery-6.85ef29a69ff9407dc9ae.webp",ap=()=>(0,wt.jsx)("div",{className:"set-alignment-container",children:(0,wt.jsx)("section",{className:"gallery",children:(0,wt.jsxs)("div",{className:"container-fluid",children:[(0,wt.jsxs)("div",{className:"gallery__header",children:[(0,wt.jsx)("div",{className:"gallery__subtitle",children:"Our Success Stories"}),(0,wt.jsx)("h2",{className:"gallery__title",children:"Lives Transformed Through Generosity"})]}),(0,wt.jsxs)("div",{className:"gallery__grid",children:[(0,wt.jsx)("div",{className:"gallery__item",children:(0,wt.jsxs)("div",{className:"gallery__image-wrapper",children:[(0,wt.jsx)("img",{src:Zh,alt:"Donor and Recipient Meeting",className:"gallery__image"}),(0,wt.jsxs)("div",{className:"gallery__overlay",children:[(0,wt.jsx)("h3",{className:"gallery__caption",children:"A New Beginning"}),(0,wt.jsx)("p",{className:"gallery__description",children:"A young Pakistani patient celebrates recovery after a life-saving kidney transplant."})]})]})}),(0,wt.jsx)("div",{className:"gallery__item",children:(0,wt.jsxs)("div",{className:"gallery__image-wrapper",children:[(0,wt.jsx)("img",{src:$h,alt:"Successful Organ Transplant",className:"gallery__image"}),(0,wt.jsxs)("div",{className:"gallery__overlay",children:[(0,wt.jsx)("h3",{className:"gallery__caption",children:"Hope Restored"}),(0,wt.jsx)("p",{className:"gallery__description",children:"A mother regains her health after receiving a liver transplant."})]})]})}),(0,wt.jsx)("div",{className:"gallery__item",children:(0,wt.jsxs)("div",{className:"gallery__image-wrapper",children:[(0,wt.jsx)("img",{src:ep,alt:"Donor's Legacy",className:"gallery__image"}),(0,wt.jsxs)("div",{className:"gallery__overlay",children:[(0,wt.jsx)("h3",{className:"gallery__caption",children:"Legacy of Love"}),(0,wt.jsx)("p",{className:"gallery__description",children:"Honoring a donor whose organ gave the gift of life to others in Pakistan."})]})]})}),(0,wt.jsx)("div",{className:"gallery__item",children:(0,wt.jsxs)("div",{className:"gallery__image-wrapper",children:[(0,wt.jsx)("img",{src:tp,alt:"Community Awareness Event",className:"gallery__image"}),(0,wt.jsxs)("div",{className:"gallery__overlay",children:[(0,wt.jsx)("h3",{className:"gallery__caption",children:"Raising Awareness"}),(0,wt.jsx)("p",{className:"gallery__description",children:"A community event promoting organ donation in local areas."})]})]})}),(0,wt.jsx)("div",{className:"gallery__item",children:(0,wt.jsxs)("div",{className:"gallery__image-wrapper",children:[(0,wt.jsx)("img",{src:np,alt:"Child's Recovery Story",className:"gallery__image"}),(0,wt.jsxs)("div",{className:"gallery__overlay",children:[(0,wt.jsx)("h3",{className:"gallery__caption",children:"A Second Chance"}),(0,wt.jsx)("p",{className:"gallery__description",children:"A child celebrates a successful kidney transplant, living a healthier life."})]})]})}),(0,wt.jsx)("div",{className:"gallery__item",children:(0,wt.jsxs)("div",{className:"gallery__image-wrapper",children:[(0,wt.jsx)("img",{src:rp,alt:"Donor Celebration",className:"gallery__image"}),(0,wt.jsxs)("div",{className:"gallery__overlay",children:[(0,wt.jsx)("h3",{className:"gallery__caption",children:"Celebrating Heroes"}),(0,wt.jsx)("p",{className:"gallery__description",children:"A gathering honoring the heroes who donated their organs to save lives."})]})]})})]})]})})});function sp(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function ip(e,t){void 0===e&&(e={}),void 0===t&&(t={});const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:sp(t[n])&&sp(e[n])&&Object.keys(t[n]).length>0&&ip(e[n],t[n])}))}const op={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function lp(){const e="undefined"!==typeof document?document:{};return ip(e,op),e}const cp={document:op,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function dp(){const e="undefined"!==typeof window?window:{};return ip(e,cp),e}function up(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function hp(){return Date.now()}function pp(e,t){void 0===t&&(t="x");const n=dp();let r,a,s;const i=function(e){const t=dp();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(a=i.transform||i.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map((e=>e.replace(",","."))).join(", ")),s=new n.WebKitCSSMatrix("none"===a?"":a)):(s=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),"x"===t&&(a=n.WebKitCSSMatrix?s.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(a=n.WebKitCSSMatrix?s.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),a||0}function mp(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function fp(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const a=r<0||arguments.length<=r?void 0:arguments[r];if(void 0!==a&&null!==a&&(n=a,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?n instanceof HTMLElement:n&&(1===n.nodeType||11===n.nodeType)))){const n=Object.keys(Object(a)).filter((e=>t.indexOf(e)<0));for(let t=0,r=n.length;t<r;t+=1){const r=n[t],s=Object.getOwnPropertyDescriptor(a,r);void 0!==s&&s.enumerable&&(mp(e[r])&&mp(a[r])?a[r].__swiper__?e[r]=a[r]:fp(e[r],a[r]):!mp(e[r])&&mp(a[r])?(e[r]={},a[r].__swiper__?e[r]=a[r]:fp(e[r],a[r])):e[r]=a[r])}}}var n;return e}function gp(e,t,n){e.style.setProperty(t,n)}function vp(e){let{swiper:t,targetPosition:n,side:r}=e;const a=dp(),s=-t.translate;let i,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(t.cssModeFrameID);const c=n>s?"next":"prev",d=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,u=()=>{i=(new Date).getTime(),null===o&&(o=i);const e=Math.max(Math.min((i-o)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let h=s+c*(n-s);if(d(h,n)&&(h=n),t.wrapperEl.scrollTo({[r]:h}),d(h,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:h})})),void a.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=a.requestAnimationFrame(u)};u()}function yp(e,t){void 0===t&&(t="");const n=dp(),r=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&r.push(...e.assignedElements()),t?r.filter((e=>e.matches(t))):r}function xp(e){try{return void console.warn(e)}catch(t){}}function bp(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),n}function wp(e,t){return dp().getComputedStyle(e,null).getPropertyValue(t)}function Np(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function jp(e,t){const n=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&n.push(r):n.push(r),r=r.parentElement;return n}function Ep(e,t,n){const r=dp();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Ap(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}function Sp(e,t){void 0===t&&(t=""),"undefined"!==typeof trustedTypes?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:e=>e}).createHTML(t):e.innerHTML=t}let Ip,_p,Tp;function Cp(){return Ip||(Ip=function(){const e=dp(),t=lp();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),Ip}function Dp(e){return void 0===e&&(e={}),_p||(_p=function(e){let{userAgent:t}=void 0===e?{}:e;const n=Cp(),r=dp(),a=r.navigator.platform,s=t||r.navigator.userAgent,i={ios:!1,android:!1},o=r.screen.width,l=r.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const u=s.match(/(iPod)(.*OS\s([\d_]+))?/),h=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===a;let m="MacIntel"===a;return!d&&m&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(o,"x").concat(l))>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),m=!1),c&&!p&&(i.os="android",i.android=!0),(d||h||u)&&(i.os="ios",i.ios=!0),i}(e)),_p}function kp(){return Tp||(Tp=function(){const e=dp(),t=Dp();let n=!1;function r(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(r()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,r]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));n=e<16||16===e&&r<2}}const a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),s=r();return{isSafari:n||s,needPerspectiveFix:n,need3dFix:s||a&&t.ios,isWebView:a}}()),Tp}var Pp={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;const a=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][a](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function a(){r.off(e,a),a.__emitterProxy&&delete a.__emitterProxy;for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];t.apply(r,s)}return a.__emitterProxy=t,r.on(e,a,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,a)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(a,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,r;for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];"string"===typeof s[0]||Array.isArray(s[0])?(t=s[0],n=s.slice(1,s.length),r=e):(t=s[0].events,n=s[0].data,r=s[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(r,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(r,n)}))})),e}};const Rp=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const Op=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const Lp=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){let t=n.querySelector(".".concat(e.params.lazyPreloaderClass));!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame((()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)),t&&t.remove())}))),t&&t.remove()}},Mp=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Fp=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),a=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=a,s=[n-t];return s.push(...Array.from({length:t}).map(((e,t)=>n+r+t))),void e.slides.forEach(((t,n)=>{s.includes(t.column)&&Mp(e,n)}))}const s=a+r-1;if(e.params.rewind||e.params.loop)for(let i=a-t;i<=s+t;i+=1){const t=(i%n+n)%n;(t<a||t>s)&&Mp(e,t)}else for(let i=Math.max(a-t,0);i<=Math.min(s+t,n-1);i+=1)i!==a&&(i>s||i<a)&&Mp(e,i)};var Up={updateSize:function(){const e=this;let t,n;const r=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:r.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:r.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(wp(r,"padding-left")||0,10)-parseInt(wp(r,"padding-right")||0,10),n=n-parseInt(wp(r,"padding-top")||0,10)-parseInt(wp(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:r,slidesEl:a,size:s,rtlTranslate:i,wrongRTL:o}=e,l=e.virtual&&n.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=yp(a,".".concat(e.params.slideClass,", swiper-slide")),u=l?e.virtual.slides.length:d.length;let h=[];const p=[],m=[];let f=n.slidesOffsetBefore;"function"===typeof f&&(f=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"===typeof g&&(g=n.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let x=n.spaceBetween,b=-f,w=0,N=0;if("undefined"===typeof s)return;"string"===typeof x&&x.indexOf("%")>=0?x=parseFloat(x.replace("%",""))/100*s:"string"===typeof x&&(x=parseFloat(x)),e.virtualSize=-x,d.forEach((e=>{i?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),n.centeredSlides&&n.cssMode&&(gp(r,"--swiper-centered-offset-before",""),gp(r,"--swiper-centered-offset-after",""));const j=n.grid&&n.grid.rows>1&&e.grid;let E;j?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const A="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter((e=>"undefined"!==typeof n.breakpoints[e].slidesPerView)).length>0;for(let S=0;S<u;S+=1){let r;if(E=0,d[S]&&(r=d[S]),j&&e.grid.updateSlide(S,r,d),!d[S]||"none"!==wp(r,"display")){if("auto"===n.slidesPerView){A&&(d[S].style[e.getDirectionLabel("width")]="");const a=getComputedStyle(r),s=r.style.transform,i=r.style.webkitTransform;if(s&&(r.style.transform="none"),i&&(r.style.webkitTransform="none"),n.roundLengths)E=e.isHorizontal()?Ep(r,"width",!0):Ep(r,"height",!0);else{const e=t(a,"width"),n=t(a,"padding-left"),s=t(a,"padding-right"),i=t(a,"margin-left"),o=t(a,"margin-right"),l=a.getPropertyValue("box-sizing");if(l&&"border-box"===l)E=e+i+o;else{const{clientWidth:t,offsetWidth:a}=r;E=e+n+s+i+o+(a-t)}}s&&(r.style.transform=s),i&&(r.style.webkitTransform=i),n.roundLengths&&(E=Math.floor(E))}else E=(s-(n.slidesPerView-1)*x)/n.slidesPerView,n.roundLengths&&(E=Math.floor(E)),d[S]&&(d[S].style[e.getDirectionLabel("width")]="".concat(E,"px"));d[S]&&(d[S].swiperSlideSize=E),m.push(E),n.centeredSlides?(b=b+E/2+w/2+x,0===w&&0!==S&&(b=b-s/2-x),0===S&&(b=b-s/2-x),Math.abs(b)<.001&&(b=0),n.roundLengths&&(b=Math.floor(b)),N%n.slidesPerGroup===0&&h.push(b),p.push(b)):(n.roundLengths&&(b=Math.floor(b)),(N-Math.min(e.params.slidesPerGroupSkip,N))%e.params.slidesPerGroup===0&&h.push(b),p.push(b),b=b+E+x),e.virtualSize+=E+x,w=E,N+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,i&&o&&("slide"===n.effect||"coverflow"===n.effect)&&(r.style.width="".concat(e.virtualSize+x,"px")),n.setWrapperSize&&(r.style[e.getDirectionLabel("width")]="".concat(e.virtualSize+x,"px")),j&&e.grid.updateWrapperSize(E,h),!n.centeredSlides){const t=[];for(let r=0;r<h.length;r+=1){let a=h[r];n.roundLengths&&(a=Math.floor(a)),h[r]<=e.virtualSize-s&&t.push(a)}h=t,Math.floor(e.virtualSize-s)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-s)}if(l&&n.loop){const t=m[0]+x;if(n.slidesPerGroup>1){const r=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),a=t*n.slidesPerGroup;for(let e=0;e<r;e+=1)h.push(h[h.length-1]+a)}for(let r=0;r<e.virtual.slidesBefore+e.virtual.slidesAfter;r+=1)1===n.slidesPerGroup&&h.push(h[h.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===h.length&&(h=[0]),0!==x){const t=e.isHorizontal()&&i?"marginLeft":e.getDirectionLabel("marginRight");d.filter(((e,t)=>!(n.cssMode&&!n.loop)||t!==d.length-1)).forEach((e=>{e.style[t]="".concat(x,"px")}))}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;m.forEach((t=>{e+=t+(x||0)})),e-=x;const t=e>s?e-s:0;h=h.map((e=>e<=0?-f:e>t?t+g:e))}if(n.centerInsufficientSlides){let e=0;m.forEach((t=>{e+=t+(x||0)})),e-=x;const t=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(e+t<s){const n=(s-e-t)/2;h.forEach(((e,t)=>{h[t]=e-n})),p.forEach(((e,t)=>{p[t]=e+n}))}}if(Object.assign(e,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){gp(r,"--swiper-centered-offset-before","".concat(-h[0],"px")),gp(r,"--swiper-centered-offset-after","".concat(e.size/2-m[m.length-1]/2,"px"));const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(u!==c&&e.emit("slidesLengthChange"),h.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!l&&!n.cssMode&&("slide"===n.effect||"fade"===n.effect)){const t="".concat(n.containerModifierClass,"backface-hidden"),r=e.el.classList.contains(t);u<=n.maxBackfaceHiddenSlides?r||e.el.classList.add(t):r&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let a,s=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const i=e=>r?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{n.push(e)}));else for(a=0;a<Math.ceil(t.params.slidesPerView);a+=1){const e=t.activeIndex+a;if(e>t.slides.length&&!r)break;n.push(i(e))}else n.push(i(t.activeIndex));for(a=0;a<n.length;a+=1)if("undefined"!==typeof n[a]){const e=n[a].offsetHeight;s=e>s?e:s}(s||0===s)&&(t.wrapperEl.style.height="".concat(s,"px"))},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:a,snapGrid:s}=t;if(0===r.length)return;"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();let i=-e;a&&(i=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=n.spaceBetween;"string"===typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"===typeof o&&(o=parseFloat(o));for(let l=0;l<r.length;l+=1){const e=r[l];let c=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=r[0].swiperSlideOffset);const d=(i+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+o),u=(i-s[0]+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+o),h=-(i-c),p=h+t.slidesSizesGrid[l],m=h>=0&&h<=t.size-t.slidesSizesGrid[l],f=h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size;f&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l)),Rp(e,f,n.slideVisibleClass),Rp(e,m,n.slideFullyVisibleClass),e.progress=a?-d:d,e.originalProgress=a?-u:u}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:a,isBeginning:s,isEnd:i,progressLoop:o}=t;const l=s,c=i;if(0===r)a=0,s=!0,i=!0;else{a=(e-t.minTranslate())/r;const n=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;s=n||a<=0,i=o||a>=1,n&&(a=0),o&&(a=1)}if(n.loop){const n=t.getSlideIndexByData(0),r=t.getSlideIndexByData(t.slides.length-1),a=t.slidesGrid[n],s=t.slidesGrid[r],i=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=a?(l-a)/i:(l+i-s)/i,o>1&&(o-=1)}Object.assign(t,{progress:a,progressLoop:o,isBeginning:s,isEnd:i}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),i&&!c&&t.emit("reachEnd toEdge"),(l&&!s||c&&!i)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:r,activeIndex:a}=e,s=e.virtual&&n.virtual.enabled,i=e.grid&&n.grid&&n.grid.rows>1,o=e=>yp(r,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0];let l,c,d;if(s)if(n.loop){let t=a-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=o('[data-swiper-slide-index="'.concat(t,'"]'))}else l=o('[data-swiper-slide-index="'.concat(a,'"]'));else i?(l=t.find((e=>e.column===a)),d=t.find((e=>e.column===a+1)),c=t.find((e=>e.column===a-1))):l=t[a];l&&(i||(d=function(e,t){const n=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(l,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&!d&&(d=t[0]),c=function(e,t){const n=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(l,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&0===!c&&(c=t[t.length-1]))),t.forEach((e=>{Op(e,e===l,n.slideActiveClass),Op(e,e===d,n.slideNextClass),Op(e,e===c,n.slidePrevClass)})),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:a,activeIndex:s,realIndex:i,snapIndex:o}=t;let l,c=e;const d=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof c&&(c=function(e){const{slidesGrid:t,params:n}=e,r=e.rtlTranslate?e.translate:-e.translate;let a;for(let s=0;s<t.length;s+=1)"undefined"!==typeof t[s+1]?r>=t[s]&&r<t[s+1]-(t[s+1]-t[s])/2?a=s:r>=t[s]&&r<t[s+1]&&(a=s+1):r>=t[s]&&(a=s);return n.normalizeSlideIndex&&(a<0||"undefined"===typeof a)&&(a=0),a}(t)),r.indexOf(n)>=0)l=r.indexOf(n);else{const e=Math.min(a.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/a.slidesPerGroup)}if(l>=r.length&&(l=r.length-1),c===s&&!t.params.loop)return void(l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===s&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(c));const u=t.grid&&a.grid&&a.grid.rows>1;let h;if(t.virtual&&a.virtual.enabled&&a.loop)h=d(c);else if(u){const e=t.slides.find((e=>e.column===c));let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),h=Math.floor(n/a.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");h=e?parseInt(e,10):c}else h=c;Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:i,realIndex:h,previousIndex:s,activeIndex:c}),t.initialized&&Fp(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(i!==h&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,r=n.params;let a=e.closest(".".concat(r.slideClass,", swiper-slide"));!a&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!a&&e.matches&&e.matches(".".concat(r.slideClass,", swiper-slide"))&&(a=e)}));let s,i=!1;if(a)for(let o=0;o<n.slides.length;o+=1)if(n.slides[o]===a){i=!0,s=o;break}if(!a||!i)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=a,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(a.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=s,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var Vp={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,wrapperEl:a}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let s=pp(a,e);return s+=this.cssOverflowAdjustment(),n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:a,wrapperEl:s,progress:i}=n;let o,l=0,c=0;n.isHorizontal()?l=r?-e:e:c=e,a.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,a.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:a.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),s.style.transform="translate3d(".concat(l,"px, ").concat(c,"px, ").concat(0,"px)"));const d=n.maxTranslate()-n.minTranslate();o=0===d?0:(e-n.minTranslate())/d,o!==i&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const s=this,{params:i,wrapperEl:o}=s;if(s.animating&&i.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(d=r&&e>l?l:r&&e<c?c:e,s.updateProgress(d),i.cssMode){const e=s.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return vp({swiper:s,targetPosition:-d,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}};function qp(e){let{swiper:t,runCallbacks:n,direction:r,step:a}=e;const{activeIndex:s,previousIndex:i}=t;let o=r;o||(o=s>i?"next":s<i?"prev":"reset"),t.emit("transition".concat(a)),n&&"reset"===o?t.emit("slideResetTransition".concat(a)):n&&s!==i&&(t.emit("slideChangeTransition".concat(a)),"next"===o?t.emit("slideNextTransition".concat(a)):t.emit("slidePrevTransition".concat(a)))}var zp={setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms"),n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),qp({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),qp({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var Bp={slideTo:function(e,t,n,r,a){void 0===e&&(e=0),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const s=this;let i=e;i<0&&(i=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:p,enabled:m}=s;if(!m&&!r&&!a||s.destroyed||s.animating&&o.preventInteractionOnTransition)return!1;"undefined"===typeof t&&(t=s.params.speed);const f=Math.min(s.params.slidesPerGroupSkip,i);let g=f+Math.floor((i-f)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const v=-l[g];if(o.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const e=-Math.floor(100*v),t=Math.floor(100*c[w]),n=Math.floor(100*c[w+1]);"undefined"!==typeof c[w+1]?e>=t&&e<n-(n-t)/2?i=w:e>=t&&e<n&&(i=w+1):e>=t&&(i=w)}if(s.initialized&&i!==u){if(!s.allowSlideNext&&(h?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate()))return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(u||0)!==i)return!1}let y;i!==(d||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(v),y=i>u?"next":i<u?"prev":"reset";const x=s.virtual&&s.params.virtual.enabled;if(!(x&&a)&&(h&&-v===s.translate||!h&&v===s.translate))return s.updateActiveIndex(i),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(v),"reset"!==y&&(s.transitionStart(n,y),s.transitionEnd(n,y)),!1;if(o.cssMode){const e=s.isHorizontal(),n=h?v:-v;if(0===t)x&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),x&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{p[e?"scrollLeft":"scrollTop"]=n}))):p[e?"scrollLeft":"scrollTop"]=n,x&&requestAnimationFrame((()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1}));else{if(!s.support.smoothScroll)return vp({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}const b=kp().isSafari;return x&&!a&&b&&s.isElement&&s.virtual.update(!1,!1,i),s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(i),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,y),0===t?s.transitionEnd(n,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){if(void 0===e&&(e=0),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const a=this;if(a.destroyed)return;"undefined"===typeof t&&(t=a.params.speed);const s=a.grid&&a.params.grid&&a.params.grid.rows>1;let i=e;if(a.params.loop)if(a.virtual&&a.params.virtual.enabled)i+=a.virtual.slidesBefore;else{let e;if(s){const t=i*a.params.grid.rows;e=a.slides.find((e=>1*e.getAttribute("data-swiper-slide-index")===t)).column}else e=a.getSlideIndexByData(i);const t=s?Math.ceil(a.slides.length/a.params.grid.rows):a.slides.length,{centeredSlides:n}=a.params;let o=a.params.slidesPerView;"auto"===o?o=a.slidesPerViewDynamic():(o=Math.ceil(parseFloat(a.params.slidesPerView,10)),n&&o%2===0&&(o+=1));let l=t-e<o;if(n&&(l=l||e<Math.ceil(o/2)),r&&n&&"auto"!==a.params.slidesPerView&&!s&&(l=!1),l){const r=n?e<a.activeIndex?"prev":"next":e-a.activeIndex-1<a.params.slidesPerView?"next":"prev";a.loopFix({direction:r,slideTo:!0,activeSlideIndex:"next"===r?e+1:e-t+1,slideRealIndex:"next"===r?a.realIndex:void 0})}if(s){const e=i*a.params.grid.rows;i=a.slides.find((t=>1*t.getAttribute("data-swiper-slide-index")===e)).column}else i=a.getSlideIndexByData(i)}return requestAnimationFrame((()=>{a.slideTo(i,t,n,r)})),a},slideNext:function(e,t,n){void 0===t&&(t=!0);const r=this,{enabled:a,params:s,animating:i}=r;if(!a||r.destroyed)return r;"undefined"===typeof e&&(e=r.params.speed);let o=s.slidesPerGroup;"auto"===s.slidesPerView&&1===s.slidesPerGroup&&s.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:o,c=r.virtual&&s.virtual.enabled;if(s.loop){if(i&&!c&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame((()=>{r.slideTo(r.activeIndex+l,e,t,n)})),!0}return s.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===t&&(t=!0);const r=this,{params:a,snapGrid:s,slidesGrid:i,rtlTranslate:o,enabled:l,animating:c}=r;if(!l||r.destroyed)return r;"undefined"===typeof e&&(e=r.params.speed);const d=r.virtual&&a.virtual.enabled;if(a.loop){if(c&&!d&&a.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const h=u(o?r.translate:-r.translate),p=s.map((e=>u(e))),m=a.freeMode&&a.freeMode.enabled;let f=s[p.indexOf(h)-1];if("undefined"===typeof f&&(a.cssMode||m)){let e;s.forEach(((t,n)=>{h>=t&&(e=n)})),"undefined"!==typeof e&&(f=m?s[e]:s[e>0?e-1:e])}let g=0;if("undefined"!==typeof f&&(g=i.indexOf(f),g<0&&(g=r.activeIndex-1),"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(g=g-r.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),a.rewind&&r.isBeginning){const a=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(a,e,t,n)}return a.loop&&0===r.activeIndex&&a.cssMode?(requestAnimationFrame((()=>{r.slideTo(g,e,t,n)})),!0):r.slideTo(g,e,t,n)},slideReset:function(e,t,n){void 0===t&&(t=!0);const r=this;if(!r.destroyed)return"undefined"===typeof e&&(e=r.params.speed),r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===t&&(t=!0),void 0===r&&(r=.5);const a=this;if(a.destroyed)return;"undefined"===typeof e&&(e=a.params.speed);let s=a.activeIndex;const i=Math.min(a.params.slidesPerGroupSkip,s),o=i+Math.floor((s-i)/a.params.slidesPerGroup),l=a.rtlTranslate?a.translate:-a.translate;if(l>=a.snapGrid[o]){const e=a.snapGrid[o];l-e>(a.snapGrid[o+1]-e)*r&&(s+=a.params.slidesPerGroup)}else{const e=a.snapGrid[o-1];l-e<=(a.snapGrid[o]-e)*r&&(s-=a.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,a.slidesGrid.length-1),a.slideTo(s,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let a,s=e.clickedIndex;const i=e.isElement?"swiper-slide":".".concat(t.slideClass);if(t.loop){if(e.animating)return;a=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex(yp(n,"".concat(i,'[data-swiper-slide-index="').concat(a,'"]'))[0]),up((()=>{e.slideTo(s)}))):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex(yp(n,"".concat(i,'[data-swiper-slide-index="').concat(a,'"]'))[0]),up((()=>{e.slideTo(s)}))):e.slideTo(s)}else e.slideTo(s)}};var Jp={loopCreate:function(e,t){const n=this,{params:r,slidesEl:a}=n;if(!r.loop||n.virtual&&n.params.virtual.enabled)return;const s=()=>{yp(a,".".concat(r.slideClass,", swiper-slide")).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},i=n.grid&&r.grid&&r.grid.rows>1,o=r.slidesPerGroup*(i?r.grid.rows:1),l=n.slides.length%o!==0,c=i&&n.slides.length%r.grid.rows!==0,d=e=>{for(let t=0;t<e;t+=1){const e=n.isElement?bp("swiper-slide",[r.slideBlankClass]):bp("div",[r.slideClass,r.slideBlankClass]);n.slidesEl.append(e)}};if(l){if(r.loopAddBlankSlides){d(o-n.slides.length%o),n.recalcSlides(),n.updateSlides()}else xp("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(c){if(r.loopAddBlankSlides){d(r.grid.rows-n.slides.length%r.grid.rows),n.recalcSlides(),n.updateSlides()}else xp("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();n.loopFix({slideRealIndex:e,direction:r.centeredSlides?void 0:"next",initial:t})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:r,setTranslate:a,activeSlideIndex:s,initial:o,byController:l,byMousewheel:c}=void 0===e?{}:e;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:u,allowSlidePrev:h,allowSlideNext:p,slidesEl:m,params:f}=d,{centeredSlides:g,initialSlide:v}=f;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&f.virtual.enabled)return n&&(f.centeredSlides||0!==d.snapIndex?f.centeredSlides&&d.snapIndex<f.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0):d.slideTo(d.virtual.slides.length,0,!1,!0)),d.allowSlidePrev=h,d.allowSlideNext=p,void d.emit("loopFix");let y=f.slidesPerView;"auto"===y?y=d.slidesPerViewDynamic():(y=Math.ceil(parseFloat(f.slidesPerView,10)),g&&y%2===0&&(y+=1));const x=f.slidesPerGroupAuto?y:f.slidesPerGroup;let b=x;b%x!==0&&(b+=x-b%x),b+=f.loopAdditionalSlides,d.loopedSlides=b;const w=d.grid&&f.grid&&f.grid.rows>1;u.length<y+b||"cards"===d.params.effect&&u.length<y+2*b?xp("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):w&&"row"===f.grid.fill&&xp("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const N=[],j=[],E=w?Math.ceil(u.length/f.grid.rows):u.length,A=o&&E-v<y&&!g;let S=A?v:d.activeIndex;"undefined"===typeof s?s=d.getSlideIndex(u.find((e=>e.classList.contains(f.slideActiveClass)))):S=s;const I="next"===r||!r,_="prev"===r||!r;let T=0,C=0;const D=(w?u[s].column:s)+(g&&"undefined"===typeof a?-y/2+.5:0);if(D<b){T=Math.max(b-D,x);for(let e=0;e<b-D;e+=1){const t=e-Math.floor(e/E)*E;if(w){const e=E-t-1;for(let t=u.length-1;t>=0;t-=1)u[t].column===e&&N.push(t)}else N.push(E-t-1)}}else if(D+y>E-b){C=Math.max(D-(E-2*b),x),A&&(C=Math.max(C,y-E+v+1));for(let e=0;e<C;e+=1){const t=e-Math.floor(e/E)*E;w?u.forEach(((e,n)=>{e.column===t&&j.push(n)})):j.push(t)}}if(d.__preventObserver__=!0,requestAnimationFrame((()=>{d.__preventObserver__=!1})),"cards"===d.params.effect&&u.length<y+2*b&&(j.includes(s)&&j.splice(j.indexOf(s),1),N.includes(s)&&N.splice(N.indexOf(s),1)),_&&N.forEach((e=>{u[e].swiperLoopMoveDOM=!0,m.prepend(u[e]),u[e].swiperLoopMoveDOM=!1})),I&&j.forEach((e=>{u[e].swiperLoopMoveDOM=!0,m.append(u[e]),u[e].swiperLoopMoveDOM=!1})),d.recalcSlides(),"auto"===f.slidesPerView?d.updateSlides():w&&(N.length>0&&_||j.length>0&&I)&&d.slides.forEach(((e,t)=>{d.grid.updateSlide(t,e,d.slides)})),f.watchSlidesProgress&&d.updateSlidesOffset(),n)if(N.length>0&&_){if("undefined"===typeof t){const e=d.slidesGrid[S],t=d.slidesGrid[S+T]-e;c?d.setTranslate(d.translate-t):(d.slideTo(S+Math.ceil(T),0,!1,!0),a&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-t,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-t))}else if(a){const e=w?N.length/f.grid.rows:N.length;d.slideTo(d.activeIndex+e,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(j.length>0&&I)if("undefined"===typeof t){const e=d.slidesGrid[S],t=d.slidesGrid[S-C]-e;c?d.setTranslate(d.translate-t):(d.slideTo(S-C,0,!1,!0),a&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-t,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-t))}else{const e=w?j.length/f.grid.rows:j.length;d.slideTo(d.activeIndex-e,0,!1,!0)}if(d.allowSlidePrev=h,d.allowSlideNext=p,d.controller&&d.controller.control&&!l){const e={slideRealIndex:t,direction:r,setTranslate:a,activeSlideIndex:s,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix((0,i.A)((0,i.A)({},e),{},{slideTo:t.params.slidesPerView===f.slidesPerView&&n}))})):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix((0,i.A)((0,i.A)({},e),{},{slideTo:d.controller.control.params.slidesPerView===f.slidesPerView&&n}))}d.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach((e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;r[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),r.forEach((e=>{n.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};var Hp={setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}};function Gp(e,t,n){const r=dp(),{params:a}=e,s=a.edgeSwipeDetection,i=a.edgeSwipeThreshold;return!s||!(n<=i||n>=r.innerWidth-i)||"prevent"===s&&(t.preventDefault(),!0)}function Wp(e){const t=this,n=lp();let r=e;r.originalEvent&&(r=r.originalEvent);const a=t.touchEventsData;if("pointerdown"===r.type){if(null!==a.pointerId&&a.pointerId!==r.pointerId)return;a.pointerId=r.pointerId}else"touchstart"===r.type&&1===r.targetTouches.length&&(a.touchId=r.targetTouches[0].identifier);if("touchstart"===r.type)return void Gp(t,r,r.targetTouches[0].pageX);const{params:s,touches:i,enabled:o}=t;if(!o)return;if(!s.simulateTouch&&"mouse"===r.pointerType)return;if(t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=r.target;if("wrapper"===s.touchEventsTarget&&!function(e,t){const n=dp();let r=t.contains(e);!r&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(r=[...t.assignedElements()].includes(e),r||(r=function(e,t){const n=[t];for(;n.length>0;){const t=n.shift();if(e===t)return!0;n.push(...t.children,...t.shadowRoot?t.shadowRoot.children:[],...t.assignedElements?t.assignedElements():[])}}(e,t)));return r}(l,t.wrapperEl))return;if("which"in r&&3===r.which)return;if("button"in r&&r.button>0)return;if(a.isTouched&&a.isMoved)return;const c=!!s.noSwipingClass&&""!==s.noSwipingClass,d=r.composedPath?r.composedPath():r.path;c&&r.target&&r.target.shadowRoot&&d&&(l=d[0]);const u=s.noSwipingSelector?s.noSwipingSelector:".".concat(s.noSwipingClass),h=!(!r.target||!r.target.shadowRoot);if(s.noSwiping&&(h?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===lp()||n===dp())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(u,l):l.closest(u)))return void(t.allowClick=!0);if(s.swipeHandler&&!l.closest(s.swipeHandler))return;i.currentX=r.pageX,i.currentY=r.pageY;const p=i.currentX,m=i.currentY;if(!Gp(t,r,p))return;Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),i.startX=p,i.startY=m,a.touchStartTime=hp(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(a.allowThresholdMove=!1);let f=!0;l.matches(a.focusableElements)&&(f=!1,"SELECT"===l.nodeName&&(a.isTouched=!1)),n.activeElement&&n.activeElement.matches(a.focusableElements)&&n.activeElement!==l&&("mouse"===r.pointerType||"mouse"!==r.pointerType&&!l.matches(a.focusableElements))&&n.activeElement.blur();const g=f&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!g||l.isContentEditable||r.preventDefault(),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",r)}function Yp(e){const t=lp(),n=this,r=n.touchEventsData,{params:a,touches:s,rtlTranslate:i,enabled:o}=n;if(!o)return;if(!a.simulateTouch&&"mouse"===e.pointerType)return;let l,c=e;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==r.touchId)return;if(c.pointerId!==r.pointerId)return}if("touchmove"===c.type){if(l=[...c.changedTouches].find((e=>e.identifier===r.touchId)),!l||l.identifier!==r.touchId)return}else l=c;if(!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",c));const d=l.pageX,u=l.pageY;if(c.preventedByNestedSwiper)return s.startX=d,void(s.startY=u);if(!n.allowTouchMove)return c.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(s,{startX:d,startY:u,currentX:d,currentY:u}),r.touchStartTime=hp()));if(a.touchReleaseOnEdges&&!a.loop)if(n.isVertical()){if(u<s.startY&&n.translate<=n.maxTranslate()||u>s.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else{if(i&&(d>s.startX&&-n.translate<=n.maxTranslate()||d<s.startX&&-n.translate>=n.minTranslate()))return;if(!i&&(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==c.target&&"mouse"!==c.pointerType&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);r.allowTouchCallbacks&&n.emit("touchMove",c),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=u;const h=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if("undefined"===typeof r.isScrolling){let e;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:h*h+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?e>a.touchAngle:90-e>a.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",c),"undefined"===typeof r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling||"touchmove"===c.type&&r.preventTouchMoveFromPointerMove)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!a.cssMode&&c.cancelable&&c.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&c.stopPropagation();let m=n.isHorizontal()?h:p,f=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;a.oneWayMovement&&(m=Math.abs(m)*(i?1:-1),f=Math.abs(f)*(i?1:-1)),s.diff=m,m*=a.touchRatio,i&&(m=-m,f=-f);const g=n.touchesDirection;n.swipeDirection=m>0?"prev":"next",n.touchesDirection=f>0?"prev":"next";const v=n.params.loop&&!a.cssMode,y="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!r.isMoved){if(v&&y&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,!a.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}if((new Date).getTime(),!1!==a._loopSwapReset&&r.isMoved&&r.allowThresholdMove&&g!==n.touchesDirection&&v&&y&&Math.abs(m)>=1)return Object.assign(s,{startX:d,startY:u,currentX:d,currentY:u,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,void(r.startTranslate=r.currentTranslate);n.emit("sliderMove",c),r.isMoved=!0,r.currentTranslate=m+r.startTranslate;let x=!0,b=a.resistanceRatio;if(a.touchReleaseOnEdges&&(b=0),m>0?(v&&y&&r.allowThresholdMove&&r.currentTranslate>(a.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-("auto"!==a.slidesPerView&&n.slides.length-a.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(x=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+m)**b))):m<0&&(v&&y&&r.allowThresholdMove&&r.currentTranslate<(a.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+("auto"!==a.slidesPerView&&n.slides.length-a.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===a.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(x=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-m)**b))),x&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),a.threshold>0){if(!(Math.abs(m)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&n.freeMode||a.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function Kp(e){const t=this,n=t.touchEventsData;let r,a=e;a.originalEvent&&(a=a.originalEvent);if("touchend"===a.type||"touchcancel"===a.type){if(r=[...a.changedTouches].find((e=>e.identifier===n.touchId)),!r||r.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(a.pointerId!==n.pointerId)return;r=a}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(a.type)){if(!(["pointercancel","contextmenu"].includes(a.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:s,touches:i,rtlTranslate:o,slidesGrid:l,enabled:c}=t;if(!c)return;if(!s.simulateTouch&&"mouse"===a.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",a),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&s.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);s.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const d=hp(),u=d-n.touchStartTime;if(t.allowClick){const e=a.path||a.composedPath&&a.composedPath();t.updateClickedSlide(e&&e[0]||a.target,e),t.emit("tap click",a),u<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",a)}if(n.lastClickTime=hp(),up((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let h;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,h=s.followFinger?o?t.translate:-t.translate:-n.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:h});const p=h>=-t.maxTranslate()&&!t.params.loop;let m=0,f=t.slidesSizesGrid[0];for(let b=0;b<l.length;b+=b<s.slidesPerGroupSkip?1:s.slidesPerGroup){const e=b<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;"undefined"!==typeof l[b+e]?(p||h>=l[b]&&h<l[b+e])&&(m=b,f=l[b+e]-l[b]):(p||h>=l[b])&&(m=b,f=l[l.length-1]-l[l.length-2])}let g=null,v=null;s.rewind&&(t.isBeginning?v=s.virtual&&s.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const y=(h-l[m])/f,x=m<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(u>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(y>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?g:m+x):t.slideTo(m)),"prev"===t.swipeDirection&&(y>1-s.longSwipesRatio?t.slideTo(m+x):null!==v&&y<0&&Math.abs(y)>s.longSwipesRatio?t.slideTo(v):t.slideTo(m))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(a.target===t.navigation.nextEl||a.target===t.navigation.prevEl)?a.target===t.navigation.nextEl?t.slideTo(m+x):t.slideTo(m):("next"===t.swipeDirection&&t.slideTo(null!==g?g:m+x),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:m))}}function Qp(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:a,snapGrid:s}=e,i=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=i&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!i?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=a,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function Xp(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Zp(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let a;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const s=e.maxTranslate()-e.minTranslate();a=0===s?0:(e.translate-e.minTranslate())/s,a!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function $p(e){const t=this;Lp(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function em(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const tm=(e,t)=>{const n=lp(),{params:r,el:a,wrapperEl:s,device:i}=e,o=!!r.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;a&&"string"!==typeof a&&(n[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),a[l]("touchstart",e.onTouchStart,{passive:!1}),a[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),n[l]("touchend",e.onTouchEnd,{passive:!0}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("touchcancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),n[l]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&a[l]("click",e.onClick,!0),r.cssMode&&s[l]("scroll",e.onScroll),r.updateOnWindowResize?e[c](i.ios||i.android?"resize orientationchange observerUpdate":"resize observerUpdate",Qp,!0):e[c]("observerUpdate",Qp,!0),a[l]("load",e.onLoad,{capture:!0}))};var nm={attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=Wp.bind(e),e.onTouchMove=Yp.bind(e),e.onTouchEnd=Kp.bind(e),e.onDocumentTouchStart=em.bind(e),t.cssMode&&(e.onScroll=Zp.bind(e)),e.onClick=Xp.bind(e),e.onLoad=$p.bind(e),tm(e,"on")},detachEvents:function(){tm(this,"off")}};const rm=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var am={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:r,el:a}=e,s=r.breakpoints;if(!s||s&&0===Object.keys(s).length)return;const i=lp(),o="window"!==r.breakpointsBase&&r.breakpointsBase?"container":r.breakpointsBase,l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?e.el:i.querySelector(r.breakpointsBase),c=e.getBreakpoint(s,o,l);if(!c||e.currentBreakpoint===c)return;const d=(c in s?s[c]:void 0)||e.originalParams,u=rm(e,r),h=rm(e,d),p=e.params.grabCursor,m=d.grabCursor,f=r.enabled;u&&!h?(a.classList.remove("".concat(r.containerModifierClass,"grid"),"".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()):!u&&h&&(a.classList.add("".concat(r.containerModifierClass,"grid")),(d.grid.fill&&"column"===d.grid.fill||!d.grid.fill&&"column"===r.grid.fill)&&a.classList.add("".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()),p&&!m?e.unsetGrabCursor():!p&&m&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach((t=>{if("undefined"===typeof d[t])return;const n=r[t]&&r[t].enabled,a=d[t]&&d[t].enabled;n&&!a&&e[t].disable(),!n&&a&&e[t].enable()}));const g=d.direction&&d.direction!==r.direction,v=r.loop&&(d.slidesPerView!==r.slidesPerView||g),y=r.loop;g&&n&&e.changeDirection(),fp(e.params,d);const x=e.params.enabled,b=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),f&&!x?e.disable():!f&&x&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",d),n&&(v?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!y&&b?(e.loopCreate(t),e.updateSlides()):y&&!b&&e.loopDestroy()),e.emit("breakpoint",d)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const a=dp(),s="window"===t?a.innerHeight:n.clientHeight,i=Object.keys(e).map((e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}}));i.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let o=0;o<i.length;o+=1){const{point:e,value:s}=i[o];"window"===t?a.matchMedia("(min-width: ".concat(s,"px)")).matches&&(r=e):s<=n.clientWidth&&(r=e)}return r||"max"}};var sm={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,el:a,device:s}=e,i=function(e,t){const n=[];return e.forEach((e=>{"object"===typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...i),a.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!==typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}};var im={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},om={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function lm(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],a=n[r];"object"===typeof a&&null!==a?(!0===e[r]&&(e[r]={enabled:!0}),"navigation"===r&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),r in e&&"enabled"in a?("object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),fp(t,n)):fp(t,n)):fp(t,n)}}const cm={eventsEmitter:Pp,update:Up,translate:Vp,transition:zp,slide:Bp,loop:Jp,grabCursor:Hp,events:nm,breakpoints:am,checkOverflow:im,classes:sm},dm={};class um{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=fp({},t),e&&!t.el&&(t.el=e);const s=lp();if(t.el&&"string"===typeof t.el&&s.querySelectorAll(t.el).length>1){const e=[];return s.querySelectorAll(t.el).forEach((n=>{const r=fp({},t,{el:n});e.push(new um(r))})),e}const i=this;i.__swiper__=!0,i.support=Cp(),i.device=Dp({userAgent:t.userAgent}),i.browser=kp(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],t.modules&&Array.isArray(t.modules)&&i.modules.push(...t.modules);const o={};i.modules.forEach((e=>{e({params:t,swiper:i,extendParams:lm(t,o),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})}));const l=fp({},om,o);return i.params=fp({},l,dm,t),i.originalParams=fp({},i.params),i.passedParams=fp({},t),i.params&&i.params.on&&Object.keys(i.params.on).forEach((e=>{i.on(e,i.params.on[e])})),i.params&&i.params.onAny&&i.onAny(i.params.onAny),Object.assign(i,{enabled:i.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===i.params.direction,isVertical:()=>"vertical"===i.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=Np(yp(t,".".concat(n.slideClass,", swiper-slide"))[0]);return Np(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find((t=>1*t.getAttribute("data-swiper-slide-index")===e)))}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=yp(e,".".concat(t.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),a=(n.maxTranslate()-r)*e+r;n.translateTo(a,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:a,slidesSizesGrid:s,size:i,activeIndex:o}=this;let l=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=r[o]?Math.ceil(r[o].swiperSlideSize):0;for(let n=o+1;n<r.length;n+=1)r[n]&&!e&&(t+=Math.ceil(r[n].swiperSlideSize),l+=1,t>i&&(e=!0));for(let n=o-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>i&&(e=!0))}else if("current"===e)for(let c=o+1;c<r.length;c+=1){(t?a[c]+s[c]-a[o]<i:a[c]-a[o]<i)&&(l+=1)}else for(let c=o-1;c>=0;c-=1){a[o]-a[c]<i&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&Lp(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(t.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(r)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let a=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return yp(n,r())[0]})();return!a&&t.params.createElements&&(a=bp("div",t.params.wrapperClass),n.append(a),yp(n,".".concat(t.params.slideClass)).forEach((e=>{a.append(e)}))),Object.assign(t,{el:n,wrapperEl:a,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:a,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===wp(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===wp(n,"direction")),wrongRTL:"-webkit-box"===wp(a,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach((e=>{e.complete?Lp(t,e):e.addEventListener("load",(e=>{Lp(t,e.target)}))})),Fp(t),t.initialized=!0,Fp(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:r,el:a,wrapperEl:s,slides:i}=n;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),a&&"string"!==typeof a&&a.removeAttribute("style"),s&&s.removeAttribute("style"),i&&i.length&&i.forEach((e=>{e.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.el&&"string"!==typeof n.el&&(n.el.swiper=null),function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(du){}try{delete t[e]}catch(du){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){fp(dm,e)}static get extendedDefaults(){return dm}static get defaults(){return om}static installModule(e){um.prototype.__modules__||(um.prototype.__modules__=[]);const t=um.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>um.installModule(e))),um):(um.installModule(e),um)}}Object.keys(cm).forEach((e=>{Object.keys(cm[e]).forEach((t=>{um.prototype[t]=cm[e][t]}))})),um.use([function(e){let{swiper:t,on:n,emit:r}=e;const a=dp();let s=null,i=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(()=>{t.params.resizeObserver&&"undefined"!==typeof a.ResizeObserver?t&&!t.destroyed&&t.initialized&&(s=new ResizeObserver((e=>{i=a.requestAnimationFrame((()=>{const{width:n,height:r}=t;let a=n,s=r;e.forEach((e=>{let{contentBoxSize:n,contentRect:r,target:i}=e;i&&i!==t.el||(a=r?r.width:(n[0]||n).inlineSize,s=r?r.height:(n[0]||n).blockSize)})),a===n&&s===r||o()}))})),s.observe(t.el)):(a.addEventListener("resize",o),a.addEventListener("orientationchange",l))})),n("destroy",(()=>{i&&a.cancelAnimationFrame(i),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null),a.removeEventListener("resize",o),a.removeEventListener("orientationchange",l)}))},function(e){let{swiper:t,extendParams:n,on:r,emit:a}=e;const s=[],i=dp(),o=function(e,n){void 0===n&&(n={});const r=new(i.MutationObserver||i.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void a("observerUpdate",e[0]);const n=function(){a("observerUpdate",e[0])};i.requestAnimationFrame?i.requestAnimationFrame(n):i.setTimeout(n,0)}));r.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:t.isElement||("undefined"===typeof n.childList||n).childList,characterData:"undefined"===typeof n.characterData||n.characterData}),s.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=jp(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}})),r("destroy",(()=>{s.forEach((e=>{e.disconnect()})),s.splice(0,s.length)}))}]);const hm=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function pm(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function mm(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:pm(t[n])&&pm(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:mm(e[n],t[n]):e[n]=t[n]}))}function fm(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function gm(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function vm(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function ym(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}function xm(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}const bm=["className","tag","wrapperTag","children","onSwiper"],wm=["tag","children","className","swiper","zoom","lazy","virtualIndex","swiperSlideIndex"];function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nm.apply(this,arguments)}function jm(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function Em(e){const n=[];return t.Children.toArray(e).forEach((e=>{jm(e)?n.push(e):e.props&&e.props.children&&Em(e.props.children).forEach((e=>n.push(e)))})),n}function Am(e){const n=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return t.Children.toArray(e).forEach((e=>{if(jm(e))n.push(e);else if(e.props&&e.props.slot&&r[e.props.slot])r[e.props.slot].push(e);else if(e.props&&e.props.children){const t=Em(e.props.children);t.length>0?t.forEach((e=>n.push(e))):r["container-end"].push(e)}else r["container-end"].push(e)})),{slides:n,slots:r}}function Sm(e,n){return"undefined"===typeof window?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)}const Im=(0,t.createContext)(null),_m=(0,t.createContext)(null),Tm=(0,t.forwardRef)((function(e,n){let r=void 0===e?{}:e,{className:a,tag:o="div",wrapperTag:l="div",children:c,onSwiper:d}=r,u=s(r,bm),h=!1;const[p,m]=(0,t.useState)("swiper"),[f,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1),x=(0,t.useRef)(!1),b=(0,t.useRef)(null),w=(0,t.useRef)(null),N=(0,t.useRef)(null),j=(0,t.useRef)(null),E=(0,t.useRef)(null),A=(0,t.useRef)(null),S=(0,t.useRef)(null),I=(0,t.useRef)(null),{params:_,passedParams:T,rest:C,events:D}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},r={},a={};mm(n,om),n._emitClasses=!0,n.init=!1;const s={},i=hm.map((e=>e.replace(/_/,""))),o=Object.assign({},e);return Object.keys(o).forEach((o=>{"undefined"!==typeof e[o]&&(i.indexOf(o)>=0?pm(e[o])?(n[o]={},a[o]={},mm(n[o],e[o]),mm(a[o],e[o])):(n[o]=e[o],a[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"===typeof e[o]?t?r["".concat(o[2].toLowerCase()).concat(o.substr(3))]=e[o]:n.on["".concat(o[2].toLowerCase()).concat(o.substr(3))]=e[o]:s[o]=e[o])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:a,rest:s,events:r}}(u),{slides:k,slots:P}=Am(c),R=()=>{y(!v)};Object.assign(_.on,{_containerClasses(e,t){m(t)}});const O=()=>{Object.assign(_.on,D),h=!0;const e=(0,i.A)({},_);if(delete e.wrapperClass,w.current=new um(e),w.current.virtual&&w.current.params.virtual.enabled){w.current.virtual.slides=k;const e={cache:!1,slides:k,renderExternal:g,renderExternalUpdate:!1};mm(w.current.params.virtual,e),mm(w.current.originalParams.virtual,e)}};b.current||O(),w.current&&w.current.on("_beforeBreakpoint",R);return(0,t.useEffect)((()=>()=>{w.current&&w.current.off("_beforeBreakpoint",R)})),(0,t.useEffect)((()=>{!x.current&&w.current&&(w.current.emitSlidesClasses(),x.current=!0)})),Sm((()=>{if(n&&(n.current=b.current),b.current)return w.current.destroyed&&O(),function(e,t){let{el:n,nextEl:r,prevEl:a,paginationEl:s,scrollbarEl:i,swiper:o}=e;fm(t)&&r&&a&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=a,o.originalParams.navigation.prevEl=a),gm(t)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),vm(t)&&i&&(o.params.scrollbar.el=i,o.originalParams.scrollbar.el=i),o.init(n)}({el:b.current,nextEl:E.current,prevEl:A.current,paginationEl:S.current,scrollbarEl:I.current,swiper:w.current},_),d&&!w.current.destroyed&&d(w.current),()=>{w.current&&!w.current.destroyed&&w.current.destroy(!0,!1)}}),[]),Sm((()=>{!h&&D&&w.current&&Object.keys(D).forEach((e=>{w.current.on(e,D[e])}));const e=function(e,t,n,r,a){const s=[];if(!t)return s;const i=e=>{s.indexOf(e)<0&&s.push(e)};if(n&&r){const e=r.map(a),t=n.map(a);e.join("")!==t.join("")&&i("children"),r.length!==n.length&&i("children")}return hm.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(pm(e[n])&&pm(t[n])){const r=Object.keys(e[n]),a=Object.keys(t[n]);r.length!==a.length?i(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&i(n)})),a.forEach((r=>{e[n][r]!==t[n][r]&&i(n)})))}else e[n]!==t[n]&&i(n)})),s}(T,N.current,k,j.current,(e=>e.key));return N.current=T,j.current=k,e.length&&w.current&&!w.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:r,changedParams:a,nextEl:s,prevEl:i,scrollbarEl:o,paginationEl:l}=e;const c=a.filter((e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e)),{params:d,pagination:u,navigation:h,scrollbar:p,virtual:m,thumbs:f}=t;let g,v,y,x,b,w,N,j;a.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&d.thumbs&&(!d.thumbs.swiper||d.thumbs.swiper.destroyed)&&(g=!0),a.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(v=!0),a.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(d.pagination||!1===d.pagination)&&u&&!u.el&&(y=!0),a.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(d.scrollbar||!1===d.scrollbar)&&p&&!p.el&&(x=!0),a.includes("navigation")&&r.navigation&&(r.navigation.prevEl||i)&&(r.navigation.nextEl||s)&&(d.navigation||!1===d.navigation)&&h&&!h.prevEl&&!h.nextEl&&(b=!0);const E=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),d[e].prevEl=void 0,d[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),d[e].el=void 0,t[e].el=void 0))};a.includes("loop")&&t.isElement&&(d.loop&&!r.loop?w=!0:!d.loop&&r.loop?N=!0:j=!0),c.forEach((e=>{if(pm(d[e])&&pm(r[e]))Object.assign(d[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||E(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?d[e]=r[e]:!1===t&&E(e)}})),c.includes("controller")&&!v&&t.controller&&t.controller.control&&d.controller&&d.controller.control&&(t.controller.control=d.controller.control),a.includes("children")&&n&&m&&d.virtual.enabled?(m.slides=n,m.update(!0)):a.includes("virtual")&&m&&d.virtual.enabled&&(n&&(m.slides=n),m.update(!0)),a.includes("children")&&n&&d.loop&&(j=!0),g&&f.init()&&f.update(!0);v&&(t.controller.control=d.controller.control),y&&(!t.isElement||l&&"string"!==typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(d.pagination.el=l),u.init(),u.render(),u.update()),x&&(!t.isElement||o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(d.scrollbar.el=o),p.init(),p.updateSize(),p.setTranslate()),b&&(t.isElement&&(s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-button-next"),Sp(s,t.hostEl.constructor.nextButtonSvg),s.part.add("button-next"),t.el.appendChild(s)),i&&"string"!==typeof i||(i=document.createElement("div"),i.classList.add("swiper-button-prev"),Sp(i,t.hostEl.constructor.prevButtonSvg),i.part.add("button-prev"),t.el.appendChild(i))),s&&(d.navigation.nextEl=s),i&&(d.navigation.prevEl=i),h.init(),h.update()),a.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),a.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),a.includes("direction")&&t.changeDirection(r.direction,!1),(w||j)&&t.loopDestroy(),(N||j)&&t.loopCreate(),t.update()}({swiper:w.current,slides:k,passedParams:T,changedParams:e,nextEl:E.current,prevEl:A.current,scrollbarEl:I.current,paginationEl:S.current}),()=>{D&&w.current&&Object.keys(D).forEach((e=>{w.current.off(e,D[e])}))}})),Sm((()=>{(e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())})(w.current)}),[f]),t.createElement(o,Nm({ref:b,className:ym("".concat(p).concat(a?" ".concat(a):""))},C),t.createElement(_m.Provider,{value:w.current},P["container-start"],t.createElement(l,{className:xm(_.wrapperClass)},P["wrapper-start"],_.virtual?function(e,n,r){if(!r)return null;const a=e=>{let t=e;return e<0?t=n.length+e:t>=n.length&&(t-=n.length),t},s=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:"".concat(r.offset,"px")}:{top:"".concat(r.offset,"px")},{from:i,to:o}=r,l=e.params.loop?-n.length:0,c=e.params.loop?2*n.length:n.length,d=[];for(let t=l;t<c;t+=1)t>=i&&t<=o&&d.push(n[a(t)]);return d.map(((n,r)=>t.cloneElement(n,{swiper:e,style:s,key:n.props.virtualIndex||n.key||"slide-".concat(r)})))}(w.current,k,f):k.map(((e,n)=>t.cloneElement(e,{swiper:w.current,swiperSlideIndex:n}))),P["wrapper-end"]),fm(_)&&t.createElement(t.Fragment,null,t.createElement("div",{ref:A,className:"swiper-button-prev"}),t.createElement("div",{ref:E,className:"swiper-button-next"})),vm(_)&&t.createElement("div",{ref:I,className:"swiper-scrollbar"}),gm(_)&&t.createElement("div",{ref:S,className:"swiper-pagination"}),P["container-end"]))}));Tm.displayName="Swiper";const Cm=(0,t.forwardRef)((function(e,n){let r=void 0===e?{}:e,{tag:a="div",children:i,className:o="",swiper:l,zoom:c,lazy:d,virtualIndex:u,swiperSlideIndex:h}=r,p=s(r,wm);const m=(0,t.useRef)(null),[f,g]=(0,t.useState)("swiper-slide"),[v,y]=(0,t.useState)(!1);function x(e,t,n){t===m.current&&g(n)}Sm((()=>{if("undefined"!==typeof h&&(m.current.swiperSlideIndex=h),n&&(n.current=m.current),m.current&&l){if(!l.destroyed)return l.on("_slideClass",x),()=>{l&&l.off("_slideClass",x)};"swiper-slide"!==f&&g("swiper-slide")}})),Sm((()=>{l&&m.current&&!l.destroyed&&g(l.getSlideClasses(m.current))}),[l]);const b={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},w=()=>"function"===typeof i?i(b):i;return t.createElement(a,Nm({ref:m,className:ym("".concat(f).concat(o?" ".concat(o):"")),"data-swiper-slide-index":u,onLoad:()=>{y(!0)}},p),c&&t.createElement(Im.Provider,{value:b},t.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof c?c:void 0},w(),d&&!v&&t.createElement("div",{className:"swiper-lazy-preloader"}))),!c&&t.createElement(Im.Provider,{value:b},w(),d&&!v&&t.createElement("div",{className:"swiper-lazy-preloader"})))}));function Dm(e){return void 0===e&&(e=""),".".concat(e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,"."))}function km(e){let{swiper:t,extendParams:n,on:r,emit:a}=e;const s="swiper-pagination";let i;n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:"".concat(s,"-bullet"),bulletActiveClass:"".concat(s,"-bullet-active"),modifierClass:"".concat(s,"-"),currentClass:"".concat(s,"-current"),totalClass:"".concat(s,"-total"),hiddenClass:"".concat(s,"-hidden"),progressbarFillClass:"".concat(s,"-progressbar-fill"),progressbarOppositeClass:"".concat(s,"-progressbar-opposite"),clickableClass:"".concat(s,"-clickable"),lockClass:"".concat(s,"-lock"),horizontalClass:"".concat(s,"-horizontal"),verticalClass:"".concat(s,"-vertical"),paginationDisabledClass:"".concat(s,"-disabled")}}),t.pagination={el:null,bullets:[]};let o=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,n){const{bulletActiveClass:r}=t.params.pagination;e&&(e=e["".concat("prev"===n?"previous":"next","ElementSibling")])&&(e.classList.add("".concat(r,"-").concat(n)),(e=e["".concat("prev"===n?"previous":"next","ElementSibling")])&&e.classList.add("".concat(r,"-").concat(n,"-").concat(n)))}function d(e){const n=e.target.closest(Dm(t.params.pagination.bulletClass));if(!n)return;e.preventDefault();const r=Np(n)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===r)return;const e=(a=t.realIndex,s=r,i=t.slides.length,(s%=i)===1+(a%=i)?"next":s===a-1?"previous":void 0);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(r)}else t.slideTo(r);var a,s,i}function u(){const e=t.rtl,n=t.params.pagination;if(l())return;let r,s,d=t.pagination.el;d=Ap(d);const u=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,h=t.params.loop?Math.ceil(u/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(s=t.previousRealIndex||0,r=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):"undefined"!==typeof t.snapIndex?(r=t.snapIndex,s=t.previousSnapIndex):(s=t.previousIndex||0,r=t.activeIndex||0),"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const a=t.pagination.bullets;let l,u,h;if(n.dynamicBullets&&(i=Ep(a[0],t.isHorizontal()?"width":"height",!0),d.forEach((e=>{e.style[t.isHorizontal()?"width":"height"]="".concat(i*(n.dynamicMainBullets+4),"px")})),n.dynamicMainBullets>1&&void 0!==s&&(o+=r-(s||0),o>n.dynamicMainBullets-1?o=n.dynamicMainBullets-1:o<0&&(o=0)),l=Math.max(r-o,0),u=l+(Math.min(a.length,n.dynamicMainBullets)-1),h=(u+l)/2),a.forEach((e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>"".concat(n.bulletActiveClass).concat(e)))].map((e=>"string"===typeof e&&e.includes(" ")?e.split(" "):e)).flat();e.classList.remove(...t)})),d.length>1)a.forEach((e=>{const a=Np(e);a===r?e.classList.add(...n.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),n.dynamicBullets&&(a>=l&&a<=u&&e.classList.add(..."".concat(n.bulletActiveClass,"-main").split(" ")),a===l&&c(e,"prev"),a===u&&c(e,"next"))}));else{const e=a[r];if(e&&e.classList.add(...n.bulletActiveClass.split(" ")),t.isElement&&a.forEach(((e,t)=>{e.setAttribute("part",t===r?"bullet-active":"bullet")})),n.dynamicBullets){const e=a[l],t=a[u];for(let r=l;r<=u;r+=1)a[r]&&a[r].classList.add(..."".concat(n.bulletActiveClass,"-main").split(" "));c(e,"prev"),c(t,"next")}}if(n.dynamicBullets){const r=Math.min(a.length,n.dynamicMainBullets+4),s=(i*r-i)/2-h*i,o=e?"right":"left";a.forEach((e=>{e.style[t.isHorizontal()?o:"top"]="".concat(s,"px")}))}}d.forEach(((e,s)=>{if("fraction"===n.type&&(e.querySelectorAll(Dm(n.currentClass)).forEach((e=>{e.textContent=n.formatFractionCurrent(r+1)})),e.querySelectorAll(Dm(n.totalClass)).forEach((e=>{e.textContent=n.formatFractionTotal(h)}))),"progressbar"===n.type){let a;a=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const s=(r+1)/h;let i=1,o=1;"horizontal"===a?i=s:o=s,e.querySelectorAll(Dm(n.progressbarFillClass)).forEach((e=>{e.style.transform="translate3d(0,0,0) scaleX(".concat(i,") scaleY(").concat(o,")"),e.style.transitionDuration="".concat(t.params.speed,"ms")}))}"custom"===n.type&&n.renderCustom?(Sp(e,n.renderCustom(t,r+1,h)),0===s&&a("paginationRender",e)):(0===s&&a("paginationRender",e),a("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](n.lockClass)}))}function h(){const e=t.params.pagination;if(l())return;const n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let r=t.pagination.el;r=Ap(r);let s="";if("bullets"===e.type){let r=t.params.loop?Math.ceil(n/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&r>n&&(r=n);for(let n=0;n<r;n+=1)e.renderBullet?s+=e.renderBullet.call(t,n,e.bulletClass):s+="<".concat(e.bulletElement," ").concat(t.isElement?'part="bullet"':"",' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">")}"fraction"===e.type&&(s=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>')),"progressbar"===e.type&&(s=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>')),t.pagination.bullets=[],r.forEach((n=>{"custom"!==e.type&&Sp(n,s||""),"bullets"===e.type&&t.pagination.bullets.push(...n.querySelectorAll(Dm(e.bulletClass)))})),"custom"!==e.type&&a("paginationRender",r[0])}function p(){t.params.pagination=function(e,t,n,r){return e.params.createElements&&Object.keys(r).forEach((a=>{if(!n[a]&&!0===n.auto){let s=yp(e.el,".".concat(r[a]))[0];s||(s=bp("div",r[a]),s.className=r[a],e.el.append(s)),n[a]=s,t[a]=s}})),n}(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let n;"string"===typeof e.el&&t.isElement&&(n=t.el.querySelector(e.el)),n||"string"!==typeof e.el||(n=[...document.querySelectorAll(e.el)]),n||(n=e.el),n&&0!==n.length&&(t.params.uniqueNavElements&&"string"===typeof e.el&&Array.isArray(n)&&n.length>1&&(n=[...t.el.querySelectorAll(e.el)],n.length>1&&(n=n.find((e=>jp(e,".swiper")[0]===t.el)))),Array.isArray(n)&&1===n.length&&(n=n[0]),Object.assign(t.pagination,{el:n}),n=Ap(n),n.forEach((n=>{"bullets"===e.type&&e.clickable&&n.classList.add(...(e.clickableClass||"").split(" ")),n.classList.add(e.modifierClass+e.type),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(n.classList.add("".concat(e.modifierClass).concat(e.type,"-dynamic")),o=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.classList.add(e.progressbarOppositeClass),e.clickable&&n.addEventListener("click",d),t.enabled||n.classList.add(e.lockClass)})))}function m(){const e=t.params.pagination;if(l())return;let n=t.pagination.el;n&&(n=Ap(n),n.forEach((n=>{n.classList.remove(e.hiddenClass),n.classList.remove(e.modifierClass+e.type),n.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(n.classList.remove(...(e.clickableClass||"").split(" ")),n.removeEventListener("click",d))}))),t.pagination.bullets&&t.pagination.bullets.forEach((t=>t.classList.remove(...e.bulletActiveClass.split(" "))))}r("changeDirection",(()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:n}=t.pagination;n=Ap(n),n.forEach((n=>{n.classList.remove(e.horizontalClass,e.verticalClass),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)}))})),r("init",(()=>{!1===t.params.pagination.enabled?f():(p(),h(),u())})),r("activeIndexChange",(()=>{"undefined"===typeof t.snapIndex&&u()})),r("snapIndexChange",(()=>{u()})),r("snapGridLengthChange",(()=>{h(),u()})),r("destroy",(()=>{m()})),r("enable disable",(()=>{let{el:e}=t.pagination;e&&(e=Ap(e),e.forEach((e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass))))})),r("lock unlock",(()=>{u()})),r("click",((e,n)=>{const r=n.target,s=Ap(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&s&&s.length>0&&!r.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&r===t.navigation.nextEl||t.navigation.prevEl&&r===t.navigation.prevEl))return;const e=s[0].classList.contains(t.params.pagination.hiddenClass);a(!0===e?"paginationShow":"paginationHide"),s.forEach((e=>e.classList.toggle(t.params.pagination.hiddenClass)))}}));const f=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Ap(e),e.forEach((e=>e.classList.add(t.params.pagination.paginationDisabledClass)))),m()};Object.assign(t.pagination,{enable:()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Ap(e),e.forEach((e=>e.classList.remove(t.params.pagination.paginationDisabledClass)))),p(),h(),u()},disable:f,render:h,update:u,init:p,destroy:m})}function Pm(e){let t,n,{swiper:r,extendParams:a,on:s,emit:i,params:o}=e;r.autoplay={running:!1,paused:!1,timeLeft:0},a({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,d,u,h,p,m,f,g=o&&o.autoplay?o.autoplay.delay:3e3,v=o&&o.autoplay?o.autoplay.delay:3e3,y=(new Date).getTime();function x(e){r&&!r.destroyed&&r.wrapperEl&&e.target===r.wrapperEl&&(r.wrapperEl.removeEventListener("transitionend",x),f||e.detail&&e.detail.bySwiperTouchMove||A())}const b=()=>{if(r.destroyed||!r.autoplay.running)return;r.autoplay.paused?c=!0:c&&(v=l,c=!1);const e=r.autoplay.paused?l:y+v-(new Date).getTime();r.autoplay.timeLeft=e,i("autoplayTimeLeft",e,e/g),n=requestAnimationFrame((()=>{b()}))},w=e=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(n),b();let a="undefined"===typeof e?r.params.autoplay.delay:e;g=r.params.autoplay.delay,v=r.params.autoplay.delay;const s=(()=>{let e;if(e=r.virtual&&r.params.virtual.enabled?r.slides.find((e=>e.classList.contains("swiper-slide-active"))):r.slides[r.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(s)&&s>0&&"undefined"===typeof e&&(a=s,g=s,v=s),l=a;const o=r.params.speed,c=()=>{r&&!r.destroyed&&(r.params.autoplay.reverseDirection?!r.isBeginning||r.params.loop||r.params.rewind?(r.slidePrev(o,!0,!0),i("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(r.slides.length-1,o,!0,!0),i("autoplay")):!r.isEnd||r.params.loop||r.params.rewind?(r.slideNext(o,!0,!0),i("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(0,o,!0,!0),i("autoplay")),r.params.cssMode&&(y=(new Date).getTime(),requestAnimationFrame((()=>{w()}))))};return a>0?(clearTimeout(t),t=setTimeout((()=>{c()}),a)):requestAnimationFrame((()=>{c()})),a},N=()=>{y=(new Date).getTime(),r.autoplay.running=!0,w(),i("autoplayStart")},j=()=>{r.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),i("autoplayStop")},E=(e,n)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(t),e||(m=!0);const a=()=>{i("autoplayPause"),r.params.autoplay.waitForTransition?r.wrapperEl.addEventListener("transitionend",x):A()};if(r.autoplay.paused=!0,n)return p&&(l=r.params.autoplay.delay),p=!1,void a();const s=l||r.params.autoplay.delay;l=s-((new Date).getTime()-y),r.isEnd&&l<0&&!r.params.loop||(l<0&&(l=0),a())},A=()=>{r.isEnd&&l<0&&!r.params.loop||r.destroyed||!r.autoplay.running||(y=(new Date).getTime(),m?(m=!1,w(l)):w(),r.autoplay.paused=!1,i("autoplayResume"))},S=()=>{if(r.destroyed||!r.autoplay.running)return;const e=lp();"hidden"===e.visibilityState&&(m=!0,E(!0)),"visible"===e.visibilityState&&A()},I=e=>{"mouse"===e.pointerType&&(m=!0,f=!0,r.animating||r.autoplay.paused||E(!0))},_=e=>{"mouse"===e.pointerType&&(f=!1,r.autoplay.paused&&A())};s("init",(()=>{r.params.autoplay.enabled&&(r.params.autoplay.pauseOnMouseEnter&&(r.el.addEventListener("pointerenter",I),r.el.addEventListener("pointerleave",_)),lp().addEventListener("visibilitychange",S),N())})),s("destroy",(()=>{r.el&&"string"!==typeof r.el&&(r.el.removeEventListener("pointerenter",I),r.el.removeEventListener("pointerleave",_)),lp().removeEventListener("visibilitychange",S),r.autoplay.running&&j()})),s("_freeModeStaticRelease",(()=>{(u||m)&&A()})),s("_freeModeNoMomentumRelease",(()=>{r.params.autoplay.disableOnInteraction?j():E(!0,!0)})),s("beforeTransitionStart",((e,t,n)=>{!r.destroyed&&r.autoplay.running&&(n||!r.params.autoplay.disableOnInteraction?E(!0,!0):j())})),s("sliderFirstMove",(()=>{!r.destroyed&&r.autoplay.running&&(r.params.autoplay.disableOnInteraction?j():(d=!0,u=!1,m=!1,h=setTimeout((()=>{m=!0,u=!0,E(!0)}),200)))})),s("touchEnd",(()=>{if(!r.destroyed&&r.autoplay.running&&d){if(clearTimeout(h),clearTimeout(t),r.params.autoplay.disableOnInteraction)return u=!1,void(d=!1);u&&r.params.cssMode&&A(),u=!1,d=!1}})),s("slideChange",(()=>{!r.destroyed&&r.autoplay.running&&(p=!0)})),Object.assign(r.autoplay,{start:N,stop:j,pause:E,resume:A})}Cm.displayName="SwiperSlide";const Rm=()=>(0,wt.jsx)("div",{className:"set-alignment-container",children:(0,wt.jsx)("div",{className:"testimonial-section",children:(0,wt.jsxs)("div",{className:"container-fluid",children:[(0,wt.jsxs)("div",{className:"gallery__header",children:[(0,wt.jsx)("div",{className:"gallery__subtitle",children:"Voices of Hope"}),(0,wt.jsx)("h2",{className:"gallery__title",children:"Orglink: Transforming Lives Through Organ Donation"})]}),(0,wt.jsxs)("div",{className:"row align-items-center",children:[(0,wt.jsx)("div",{className:"col-lg-6",children:(0,wt.jsxs)(Tm,{modules:[km,Pm],spaceBetween:30,slidesPerView:1,pagination:{clickable:!0},autoplay:{delay:5e3},loop:!0,children:[(0,wt.jsxs)(Cm,{children:[(0,wt.jsx)("div",{className:"quote-icon",children:'"'}),(0,wt.jsx)("h2",{className:"testimonial-heading",children:"A Second Chance at Life"}),(0,wt.jsx)("p",{className:"testimonial-text",children:"Thanks to Orglink, I received a life-saving transplant. Their mission gives hope to countless individuals in need."}),(0,wt.jsx)("div",{className:"author-name",children:"Michael Anderson"}),(0,wt.jsx)("div",{className:"author-title",children:"Recipient"})]}),(0,wt.jsxs)(Cm,{children:[(0,wt.jsx)("div",{className:"quote-icon",children:'"'}),(0,wt.jsx)("h2",{className:"testimonial-heading",children:"Giving the Gift of Life"}),(0,wt.jsx)("p",{className:"testimonial-text",children:"Becoming a donor through Orglink was the best decision I ever made. Knowing I could help someone live on is truly rewarding."}),(0,wt.jsx)("div",{className:"author-name",children:"Linda Roberts"}),(0,wt.jsx)("div",{className:"author-title",children:"Donor"})]}),(0,wt.jsxs)(Cm,{children:[(0,wt.jsx)("div",{className:"quote-icon",children:'"'}),(0,wt.jsx)("h2",{className:"testimonial-heading",children:"Empowering Organ Donations"}),(0,wt.jsx)("p",{className:"testimonial-text",children:"Orglink connects donors and recipients seamlessly, making organ donation accessible and efficient."}),(0,wt.jsx)("div",{className:"author-name",children:"Dr. Kevin Mitchell"}),(0,wt.jsx)("div",{className:"author-title",children:"Medical Professional"})]})]})}),(0,wt.jsx)("div",{className:"col-lg-6",children:(0,wt.jsx)("div",{className:"video-placeholder",children:(0,wt.jsx)("a",{id:"play-video",className:"video-play-button",href:"#",children:(0,wt.jsx)("span",{})})})})]})]})})}),Om=n.p+"static/media/partner3.7820edce891ad2d08d9a.png",Lm=()=>(0,wt.jsx)("div",{className:"container-fluid mb-0",children:(0,wt.jsxs)("div",{className:"row text-center d-flex align-items-center justify-content-center",children:[(0,wt.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-2",children:(0,wt.jsx)("div",{className:"partner",children:(0,wt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAABMCAYAAAAVx1tzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAh9SURBVHgB7VwtdxU5GH4oCERFBaICEYFArKhAVCBGIBCICgQCcQUCuT9nxYoKBGJFBaJiRcSKCgQCgUBEICoQFYgKxN7nTt7eMM3Hm/m6s+fsc06YnpncSfLkzfuVDHcwPg7W5b4vgut1ufLXuTBbP+5gGNjBw3V5vC4G246nwM67dfnir1cYDyYoh4p+XAZ9ucQA9CXRoCXuCPnOluDW5ZMvfcC2j30Z0g9OpkXPia0lkZJ2gpbEMSGD0JI5FnkxXPiiJlNLIjvaoO30lCCJFvkBGLQTeYDpUDWpdxV12NnXaJfv1BD9ykF8jzxv0BI4tvR1cd/3g9dv6/IzV7lEIgf1BtPOehfs+G/+bxfc40QeYV489H2h8Ula9ByJ7DA7fg+7gUFLHiWSE3mI3UCkMklkSieywyvULRtxXxy2/lj4PkqzwTxkOLRuy2WnHwe+/UPUG0e+5w9EiIyRyIZW0C9hh617oAHf22D8pcnBiWXVONN9BIWG5qx7M0biW+ikhbN8Dj15XYxJpoWePGn7FepWBcd7CoUkNr6UwA6fYxyQxOfoZ3G5xN6jLuKoXWlAhkDibuflmsHYdfkb44Ed/IytS6GFQzuwmgiDbdBY7lf8hu//E0rrTAIN8rC+jA12kNZPSyRXwl8o+G8dPPelxtsggafr8qNzn2rggX9+Q6KEczmw42NKYBckkor7EfKSYiv6wQl5inZsj1AHIbAr6WKQSOImohESHyMfkfBFtTPfB3w/l3aKSAvdShDyXvp31epbTiiXcJdAid72/d+Odfb8w1JMbDFfLpDtnOK2sbAoEygx/u/+2jc8pBsTI3CFXw2S4T/3sHVAU+DL+qaq+kKIXKHtm0WaQIkoWG9oag6+nS+RNla4bdHZniWJBuWX7gJCJAmKTSIHxBU0BnECkmcj918h7hJtktAkseRwOuwOYmxCpNJy18HzPuCKi/m+nCST+Z0pkXiFcVP4Y4ARFSVAYnWSLDGyQbvs+sAiPlaHPA5EJ6awNAKJC38leaH00QcsGcgUxE+NocTB4X+ZRIHB8Ex3Nl+Ilofk+0ve+xJJDNHg11ifBBvUp9u+FJ7nCD7YVcJ1KGT5SgaIk32G7QZWLWoSGLdAEq+RtmhDlshU6KaxKEVnwf1adBPIMWT3sPeQF9Wx/K+xIFEDCWS/6ZK8D+5Lf0nKReT31tcPx6yRwqzd2Cu8xGBZ4PLlgCQ5QKK6GWqHNo0f5gKu/T2LVnIvoEdJv17dQ16U7wedXgLErZFrl0BJ31NfivTEYvHw71JOwBSeX5YkkTjCciDLNEYg75PAY2yNSyqZEaIklY8Lzzcklsx7Xwd2SogREQLPfZF9GyJHoEgpJ8Uh347JPOe7bwyLy1RkR5ckjcQK29DvFK00dY0L76ckUNSTQx5N4fkmrpd8Ykka+24kTQWSIJtHzt8LMy3nyC9h/qYkPAZl4dnwJpltnjJ4gnQEw/v7KJM9FygBH7Hd++Bgn/i/7br8U/i9ZNAvEc/Wd9VFDA5en4okysZ3Duxog91DkrAhjL+m8oExUJpTlvkE5UDDyh/hbh9nJSeNhPFXh91AMswGrSQKJBV2juEggSWLzMm6kfaQxJ++lHbFjL86TAODdhDfIs+e+Wcfffv0HHhy62uifg3k5FmJQOIdAine6zy8gI6cBtMtbfp/x4k2eV/O21BixjJ4oYSXYNEJPvYilc6gi1AatIMYGykCWdgvi3bARxjnMAF131vo0mdRnRsjUc63lMIhggMuWbEaHOC2Qm+wJZATLAO2vrAPfScztg2agrR/C6lDnnQdqGd4SrSUc+RJgEe+vob4HDgYGjeZFOqnp/5v55+xDpczFTs354992w514ES8hp7AU9w+TrJB6eB7Nz7VNDQkWUHSSjnBT76c+H6do35f3EC/gorjKp3ZJvPaE1viv5X2K3KgpD0s1HHr8sK3QSv5FXWgLiWBmqw+XSceJ/mRq6T5eqDmxJYQ6UoNJ/AC5TZIMpczzwZROrhaJENfQgO9/nTouDIpaEgE6omkLv2O+GcUKRjoMkZcul99Xxq0OvOboq0GereMbdC4qg5w9fmiKtzfKIH6SpNFJvFvUb+nw8FalPVwzZ60RaXbpJVEASWSOvKBLyVI9OMK9WhlS7oQwbssWnfjM8p7RFQRT6CDRQ+/s5ZEQjIg7KBm4MZfXeJ5A90gHVriLNLZlxAShWgPd3LVlLI/UQzZd2ajlIJGUTe1/BvoEp8sDnrUqB2OgZPTO83XRxJDOH81mTqUmpiSpo56lvkdB/cBOp0XQqIQjbqRzLjDAAwlEdh+IxzLfkj2uau36Ku9QBp8Xx8fsDaMow9Y40FEMQaJBMlyaIkUFSGd7BIo4VYKEiHUDq6WwFOMtBU8FokEO0TJoSKXZRL7dGGFtC7uO7iaOJgT/g4jEUgM/T8gYgi3I0OU4vAhBK6gi4NT6mUQpiAxhtJS60uggT6RQAt/hgkwx9G6Gl1VAxqnE2XdyQgkxtSJKWj8tdoMUA2BDDs/YELMQSKJKX1qRmiJrCHQYtpP6TaYg0QJEzXxdolIPnsJHSxm+gZnDhIJIZJ6se/S5u+0yVSLGT9imotEAYnREmnQEv/T/+YNdFa4dyKhL+YmkZBA3xTq7ftC324F3YfetMAfMTN2QSLh/NUU6lFiubQ17hEJrN2wGgW7IpFw0C/tEriEZ5dAwS5JJLQ6MgeLmXVgF7smkXDQ+ZExWOzuU+IbLIFEcX+4Q1hzHIWRyOSOtAZ7WAYkdabNrjBRYbEQLEESBSRQcz6S9YqnEubEkkgkuAlPI5MLD5lMcFgQlrKcQ9DfSy1rWvOd+II5LJFEEmgTz86xQCyRRCJ27NlioR+xL5VEIpS6RVnjLpZMIhMPchjK4n/0Bp3vBgvHv4OcJ2H2npgfAAAAAElFTkSuQmCC",alt:"Partner 1",className:"partner-img"})})}),(0,wt.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-2",children:(0,wt.jsx)("div",{className:"partner",children:(0,wt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABmCAYAAABLEIbUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAloSURBVHgB7Z2tdxw3FMVvUwODAoMCgwIBg4CCQIMCgYKAAoOCgACDgsD+KYEBBQsCCgoCCgIKBAoMAhYEGAQIBBgUGAQsKOhczzxbq5Fm50Mf05P8zpHX3p3d1dx5897Tk2YMfEE4RkYe4QsnTXuKL2SDFqyb9gKt2Fn5Cp8n52hF3jVt07RbZOZzE1o17QKtBVPcDQqITNYu9InTgP4pTpF2TruJfI5Ca8HKed8GhUQmaxGa/vLUaQrz/SbFpoC2e3zctCfO68VFJjWFprgUgEKcInN61UGrf4XCIpMjlIfCMhgplKVY4AtRyqJpreddK2G5PiLyDSqRW+jaApPqIpOcQkuuWktgsgqRSQ6hFdoh7SnqshqRSWqhdddqUyWFGyKV0Mx5OeJSqM/qRCYphFZNe4a6vljIITKNiPu2yAV9jWUw4P2MOvm4D4V4jfQiXzbtB7Q+/yNmskRo3bQfsQ62TfujaZ+QDlrx86Z92/191j1azGCu0BrrCHrkqml/Nu1fpOUX9DMn1T1aTGSO0BrrEflt0wzSw8B+FnlNdY8WE5gqtMa60rdrpEejjT1DKEz02VOEZjHoJ9THIl/6pjHekM7wUIo9yFihGX0ZGGpmF7Zpb9C6itT+mNCKpwZ3Gt97tNY9yJg8mtG3yARmAO7AVdcO7swCKNgzzIMWzRr3YP/GWDSP8hnKwk7/jTZl+4A8FiwsPVuPu/d+GNro0IdzBuRQYEgNrdcgrwULMiBZOqqlRgzMNrbB1wc6cYFyQ2uL1ge/Q14LFrhfzJVTuUSFduAU7PuQRZ8jv1+WSdQtZo64FiDLDlLBz9Joc/seRwNvyuUyLNrTjOKWcA8hNNoAmBpqRtfXS/mOBjqSEgq6jXWiMIw7GvngmbLxnwwJfYL9dRBLocAG66gPl1jQqLpm3SdDwTDVNJRFG9xy58BT4HjgG+SHB3TrPnEU2CCFNRuEiz2yIkkWzbjLvTbIGxCfoNygS+Fhfd8dvtAaadgGvliWZoXSRUZqi7yUHg9wX4384QutkAaNNrNwrTcEZ0XeIP9MtUL5WXnJQO7cpit0ylPrCYZdkNQwDMqQMriPRdyk5R/upRU58soQtF4WYQzKoVAHLb+4Fl1CaFrx28hrPPqy3jklCnUqj0RWye4eOZ3JzVuERVZN+xVtmTJHGqhQD3Ef9xad05pppQx4NvAac3YGDVm3nAOFulBbK0Ir5IH++Hf0R4X+yqYN8o0ca68BVPxBoe/NOzHMpekqdoEvdlc25UzvjlF/BdWdnz5CHpEN+lmFXNfnDhwo8jbyGezXoQMgbmfoM9bASQ6hpYi090Vordj9rpjIPCAX3bYvEcb/vBOUTRencsqsI3Xq44tHMS4xTmT2hYUfBpANwpwEPk8jbDC10jqfU1p06s64PlGhv9LUICyyHBBuS98eCo4icqjPCitZdB7gWIJhSpiySfFIea8ZhE9xbicHRCYIfIZEJiGLrh0IhSwW7ZY+XQzCIvOgXHS/30a2OSQyCQ12zrEOslh0CIOwgBRCZjxi1wGOEZn4bqNk/fkQRYQ2CIussV//5ja+yHQHdClzBKtRsYtxnPvGKAbhfJquQnvb+X5ZUrg5Iofig8Azx6IwORcthvxtKJ+2ke0uMU3k08jvLtdoU8td9/kKhcgptB+cQuJJwcnnAtMt+ZDQ8l27SP+y8ijjF3JnZbWTRnhF6gZ9v8xtFcLsEC8+Ked9vtCycH3n9a8Uu6Puy3MFxKeIr6NgvuyLJpc1x+BAhqd/6KARuiWLftnXryBq7/3MWAxaHZ4ivR67nBZ9CD/40cKeHniPzMBcRV6nQL7IPDhu6sfXtfM3D/gGD8vUcowubx+h3rDVPcASJA8hfbUYh8H+QZE6uPu667ePkSf3vncdNZA5QoVxwY8iTwlkfhVRgrG4BVq6exCOMT3TGcsNha5l0TJHONYf+qIMYdBPGemWTrrvpM+23uddIl+ArCo0GSsyLd+t+A1ZnUFfZI3WN0v2cev14RJ5s5A7Hy0BZs1Y7+/YATLoi0wBNeIX5F/iQeRd9/4N0mpyIz6aVq2wXnxxrgPbGMRHojGRZSYHgW34HU+wHMsfUuuo6T7m4Kd4BvHClayMCoksQtrANgppuNNWhuA8eudYL6HTWPJjimMj77tC2IhckQ32D5IMWlJlH3dnnwhtkXeEuJTYsHuLYYZEDi3sCRW9lnBfKXSLSql8Ug5ukQaNdh8t2hTPr33MLcvGuI8lrtBbrFNoCdZL4b7RPfoDFWB/picl92ecK7TFOt2HRRp4VrxE39/L+r/U7MUOf4blCuvjGmmw6NdXXiBfErDX77ULTWFSCe2i0Yp8Gvi+VKnunpZHgS9ak6+myClHaLGswmL/al53CcQcerX2o8hGaxHaIB1udY4i3HStJwqWZx7GfyJ2YxQ3oa/F0GUYuVBYfkErD9wb/8nY5KxBW+2qlYGEZtBzQgumwI+xHBN6MiY0d5QWpVEeWbFUoqKoMDwZPBWDyOBqaLkBha6xrIqnXaqRoA/PUO6T6lrKM3bwLDx08yqFNoCUwiCPywhdbZAaDoaiBnLo5lV8Izv5HfJjkF5k9p03cOWNahXyYXAg3x+zUomRXyHvVA87aZAOCnyOMv9bQNaEDDL2/tGh5VypYEc3SBP82D8pHpXImGIzNz3GCk3cSx9SMbqjI8hVHIpBw3iFxLfMJJ+6liLXJKlElmH19ygLb374cezGU++2K4tYzrAMfsZvWC4yz7LnKH89IVPQ91PeMOf+0XIUFeZDkf/BMuiLmU2UuEeSC0XeTn3T3DuiW8y3bHb0A5ah0frk0nf/nSUyWXKPf1o2XQnFHrvDTBXfYRka5UsDNKrXWFAbX/pfK3j601eNKUAZtHfQXYJGeZEZR+jqFk0ILBWayCzI0F0SDJYPSFi6LZm+EboJzpYv/m8YKYQmIjYfOVx3XYlBGpFL1se5H391Lcmdf6cMWMbCvFbj4b5vBssoLbJFhgpiDqEFheVLBUqKHFq5lIycQi+llMhSR56Vto2ldB46FrlDQk4sWnGzCiysUWiNfNmFLKdg4LYoyNpch0b6PJmu4RoVxHVZk9Aay0WW9RryaJFv/nESaxFaY19ki4eF5id4mHDwJx7oCm4xfOnyKliD0BoPImdNsWpSOxgy6GmU+1dN1agpNNM3pnEMUnQTqz71/6+w2sdlswpfyIasFvqs+A8zZjdweUpxtgAAAABJRU5ErkJggg==",alt:"Partner 2",className:"partner-img"})})}),(0,wt.jsx)("div",{className:"col-lg-3 col-md-3 col-sm-4 col-2 d-flex justify-content-center align-items-center",children:(0,wt.jsx)("div",{className:"partner w-100",children:(0,wt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAABPCAYAAACqNJiGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEaSURBVHgB7dyxDcJAEAXRb0Tg0CW4NJdASZRAKZTgkJDQIXdAAzDyCqR50qa2NNJFd9ohdebU2NrcUuCYGlObJTWubS4pcIi+ZjzAeIDxAOMBxgOMBxgPMB5gPMB4gPEA4wHGA4wHGA8wHmA8wHiA8QDjAcYDjAf0e9vxPXuaUmcs+F+/WN+GvG7yl+gTa5uzxxYwHmA8wHiA8QDjAcYDjAcYDzAeYDzAeIDxAOMBxgOMBxgPMB5gPMB4gPEA4wHGA4wHGA/ozy3604E1+5tTo2LHwPP7Q2r0tyOn1HDHwD8wHmA8wHiA8QDjAcYDjAcYDzAeYDzAeIDxAOMBxgOMBxgPMB5gPMB4gPEA4wHGA6p2w3f31Nii3/cARWQRYuECpVwAAAAASUVORK5CYII=",alt:"Partner 3",className:"partner-img"})})}),(0,wt.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-2",children:(0,wt.jsx)("div",{className:"partner",children:(0,wt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABvCAYAAAAe0LWqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUnSURBVHgB7Z2/M2RBFIXblkBGRkZGRkZmMjIyoRX5e4SyFQqFMjIyMjIyMjKZdXr2otTYZefc7vOm71f1dna3atfM++bevv3619jz8/PPlNJqCpQ4GH/5pfdybadAidMfKZAkxIgSYkQJMaKEGFFCjCghRpQQI0qIESXEiBJiRAkxooQYUUKMKCFGlBAjynjqMA8PD+nu7i5fj4+P+fXp6Sn//SCmpqbyNTExkaanp9Pc3FyamZnJf1Zj7GVo+VfqyAgmbjpu/vX1dbq6uvpUwHeBHEian5/PrwLsdELMzc1NlnFxcZHleIKIgpzV1dX8+0poi4GQ09PT/FoDE1QhinYk2xiIODo6oqWqYd4HLohZW1vLKa8UUhEDERBSK0L+xdLSUqkUpxMxZ2dnOW15tyEGbu7k5OTrTbbKDD///XV/f//6b9DG4UsDOZDkSXUxpaJkdnY2LSws5HT03RIZ7w3VIF5vb2/z+8Ur0ptXqV01leHDHh4eurUlJgPfbuYNROSgXEc0bW9ve6S2eqkMHw7fPA8WFxezDK9qCv83Lnyh8DksEplUEXNycpLbEzboIK6vrxfrf+Dn9Hq9LAjtETMqi4vxkIIbtLGxUa3X7vFFKCrGKi8mKysruUpSfN41DMXEoKE/Pj5OTFAVQcwoUkQMcjCqLxaIDlRDJXvipSkihlkSI587lahSuA+UobFHGmNgkTLqUoCrGEQJs7FvRQpwFcNsV9BfGOU25SNuYtAjZqUw9ORREreEmxhWCrPedWu4iEG0sKqwykO81XARw4oWPGLxHvdQhS4GYxasaMHzr1ahi7m8vEwMEC0tpjCDLgYDSAxaq8I+QhUDKYwxe5vb1TJUMZiUxwAjgq1DFcPsULYOTYzNKx4WpLGWHr18Bk0MK1owCz8QFNN6o2/IiYk01ocmBguHGIzapIr/hdr4M4iI6SMlJqLlDanFsSHmjVi1LEqIEUVKTO2lfUrQxLDah1IrytShiWENaoWYPjQxWM/IgPUEoevIRQzWNgZEMawee0RMH0kx0c6QqzLGI3vWgFvXofZjsHybAWvuQJehimENcpXYZUkduhhGRxNSIKdl6I9klpeXE4Pz8/PUMnQxrFXEtutEq9DFsKozUHI3JjVcni6z5h0jalpNaS5iEDGsqGGueu4SbuMxzNn6WGTbWkpzE4OIYVVoSGns7U7UcR3BxKJW1lNnVGgeW2mp4ioGFRpzuZ7XPmeKuI/5M1MaaEVOkckY2HWPOcOyBTnFZslsbW1RF7tCDvbUHNVqrZgYj+2sUBDs7++P5LSnovPKIAWRw5wKCyl7e3sj9/im+IQ/tDW7u7v0NfxIbYieGg8+PSK22obY+DAHBwcuHwrS7RQLr00cbMwI64JQdZJ/Tt1jSqxHz9q0YRDYi8YO7Bk2hb4/WAhS7BAGh1UKGufHlCp/7egrzE34yupoO2oLW8Xb/v628TWEOO5gq3Owj2dq+xu4yR+/8XYSxiAgdXNz03ufG70TlxA92ChIrQQuECXv0TtxCQ8+kbtNUG0gBI07hJRc8SZ9RhmiBoIwn7lGiqsh5A+aZ5QZyOPI58DObPGcDAgBqOA8jzj5Kp05oNTObEGjjAoJkqxiGgY7qNTOgFFZoNu5k2Nx43ATbess61sg1dk1qKqyKspOj4UEO0VWkU4f6QuY06WUiFXLooQYUUKMKCFGlBAjSogRJcSIEmJECTGihBhRQowoIUaUECNKiBElxIgSYkTBZIzey+tcCpQ4+Q37iIqvaPGRiwAAAABJRU5ErkJggg==",alt:"Partner 4",className:"partner-img"})})}),(0,wt.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-2",children:(0,wt.jsx)("div",{className:"partner",children:(0,wt.jsx)("img",{src:Om,alt:"Partner 5",className:"partner-img"})})})]})}),Mm=()=>(0,wt.jsx)("div",{className:"set-alignment-container",children:(0,wt.jsxs)("footer",{className:"container-fluid px-5 py-0",children:[(0,wt.jsxs)("div",{className:"row g-5",children:[(0,wt.jsxs)("div",{className:"col-lg-3 col-md-6",children:[(0,wt.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,wt.jsx)("i",{className:"fas fa-heart-pulse me-2"}),(0,wt.jsx)("span",{className:"logo-text",children:"Organ Donation"})]}),(0,wt.jsx)("p",{className:"description",children:"Connecting donors with recipients, saving lives through organ donation. Join us in our mission to give the gift of life and create hope for those in need."}),(0,wt.jsxs)("div",{className:"contact-info",children:[(0,wt.jsxs)("p",{className:"mb-1",children:[(0,wt.jsx)("span",{className:"contact-label",children:"Emergency Hotline: "}),(0,wt.jsx)("a",{href:"tel:1-800-555-0123",className:"contact-link",children:"1-800-555-0123"})]}),(0,wt.jsxs)("p",{className:"mb-1",children:[(0,wt.jsx)("span",{className:"contact-label",children:"Address: "})," 123 Life Care Avenue"]}),(0,wt.jsx)("p",{className:"contact-label mb-0",children:"Medical District, NY 10001"})]})]}),(0,wt.jsxs)("div",{className:"col-lg-3 col-md-6",children:[(0,wt.jsx)("h3",{className:"section-title-footer",children:"About Us"}),(0,wt.jsxs)("ul",{className:"footer-links",children:[(0,wt.jsx)("li",{children:(0,wt.jsx)("a",{href:"#",children:"Our Mission"})}),(0,wt.jsx)("li",{children:(0,wt.jsx)("a",{href:"#",children:"Donation Process"})}),(0,wt.jsx)("li",{children:(0,wt.jsx)("a",{href:"#",children:"Contact Us"})})]})]}),(0,wt.jsxs)("div",{className:"col-lg-3 col-md-6 ",children:[(0,wt.jsx)("h3",{className:"section-title-footer",children:"Useful Links"}),(0,wt.jsxs)("ul",{className:"footer-links",children:[(0,wt.jsx)("li",{children:(0,wt.jsx)("a",{href:"#",children:"Donor Registration"})}),(0,wt.jsx)("li",{children:(0,wt.jsx)("a",{href:"#",children:"Success Stories"})}),(0,wt.jsx)("li",{children:(0,wt.jsx)("a",{href:"#",children:"Support Services"})})]})]}),(0,wt.jsxs)("div",{className:"col-lg-3 col-md-6",children:[(0,wt.jsx)("h3",{className:"section-title-footer",children:"Success Stories"}),(0,wt.jsxs)("div",{className:"footer-causes-grid",children:[(0,wt.jsx)("img",{className:"img-fluid footer-cause-image",src:Zh,alt:"Impact Gallery 1"}),(0,wt.jsx)("img",{className:"img-fluid footer-cause-image",src:$h,alt:"Impact Gallery 2"}),(0,wt.jsx)("img",{className:"img-fluid footer-cause-image",src:ep,alt:"Impact Gallery 3"}),(0,wt.jsx)("img",{className:"img-fluid footer-cause-image",src:tp,alt:"Impact Gallery 4"}),(0,wt.jsx)("img",{className:"img-fluid footer-cause-image",src:np,alt:"Impact Gallery 5"}),(0,wt.jsx)("img",{className:"img-fluid footer-cause-image",src:rp,alt:"Impact Gallery 6"})]})]})]}),(0,wt.jsxs)("div",{className:"bottom-section d-flex justify-content-between align-items-center mt-4",children:[(0,wt.jsxs)("div",{className:"social-icons",children:[(0,wt.jsx)("a",{href:"#",className:"social-icon",children:(0,wt.jsx)("i",{className:"fab fa-facebook-f"})}),(0,wt.jsx)("a",{href:"#",className:"social-icon",children:(0,wt.jsx)("i",{className:"fab fa-twitter"})}),(0,wt.jsx)("a",{href:"#",className:"social-icon",children:(0,wt.jsx)("i",{className:"fab fa-instagram"})})]}),(0,wt.jsx)("div",{className:"copyright",children:"\xa9 Copyright Organ Donation 2024. Saving Lives Through Organ Donation."})]})]})}),Fm=()=>{const[e,n]=(0,t.useState)(!1),r=()=>{window.pageYOffset>300?n(!0):n(!1)};(0,t.useEffect)((()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r))),[]);return(0,wt.jsx)("div",{className:"fixed bottom-8 right-8 z-50 transition-all duration-300 ".concat(e?"opacity-100 translate-y-0":"opacity-0 translate-y-12 pointer-events-none"),children:(0,wt.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transform transition-transform hover:scale-110 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Back to top",children:(0,wt.jsx)(Lt,{className:"text-xl"})})})},Um=()=>(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)(Hh,{}),(0,wt.jsx)(Kh,{}),(0,wt.jsx)(Qh,{}),(0,wt.jsx)(Xh,{}),(0,wt.jsx)(ap,{}),"87q",(0,wt.jsx)(Rm,{}),(0,wt.jsx)(Lm,{}),(0,wt.jsx)(Mm,{}),(0,wt.jsx)(Fm,{})]});function Vm(){const[e,n]=(0,t.useState)(null),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(1),[g,v]=(0,t.useState)({}),[y,x]=(0,t.useState)(!1),[b,w]=(0,t.useState)([]),[N,j]=(0,t.useState)([]),[E,A]=(0,t.useState)(!1),[S,I]=(0,t.useState)(!1),[_,T]=(0,t.useState)(!1),[C,D]=(0,t.useState)(!1),[k,P]=(0,t.useState)(""),[R,O]=(0,t.useState)("not-submitted"),[L,M]=(0,t.useState)(""),[F,U]=(0,t.useState)(""),[V,q]=(0,t.useState)(null),[z,B]=(0,t.useState)({fullName:"",email:"",phone:"",address:"",zipCode:"",dateOfBirth:"",gender:"",nationalId:"",bloodType:"",weight:"",height:"",city:"",state:"",hospitalAssociation:"",diagnosedCondition:"",diagnosisDate:"",treatingPhysician:"",physicianContact:"",diagnosisHospital:"",medicalHistory:"",allergies:"",currentMedications:"",previousTransfusions:"no",previousTransfusionDetails:"",immuneSystemIssues:"no",immuneSystemDetails:"",organType:"",urgencyLevel:"normal",requiredQuantity:"",requestReason:"",requestDate:"",estimatedTimeframe:"",matchingCriteria:"",currentlyHospitalized:"no",hospitalizedLocation:"",familyContactName:"",familyContactRelationship:"",familyContactPhone:"",familyContactEmail:"",familyAwareOfCondition:"yes",familyAwareOfRequest:"yes",hasCaregiver:"no",caregiverDetails:"",howDidYouHear:"",additionalNotes:"",occupation:""});(0,t.useEffect)((()=>{(async()=>{if(z.state){A(!0),T(!1);try{const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("province","==",z.state),(0,bt._M)("verificationStatus","==","Approved")),n=await(0,bt.GG)(t),r=new Set;n.forEach((e=>{r.add(e.data().city)}));const a=[...r];if(w(a),j([]),l&&B((e=>(0,i.A)((0,i.A)({},e),{},{city:"",hospitalAssociation:""}))),A(!1),0===a.length){T(!0);const e={Alberta:["Calgary","Edmonton","Red Deer"],"British Columbia":["Vancouver","Victoria","Kelowna"],Manitoba:["Winnipeg","Brandon"],"New Brunswick":["Fredericton","Moncton","Saint John"],"Newfoundland and Labrador":["St. John's","Corner Brook"],"Nova Scotia":["Halifax","Sydney"],Ontario:["Toronto","Ottawa","Hamilton","London","Windsor"],"Prince Edward Island":["Charlottetown","Summerside"],Quebec:["Montreal","Quebec City","Gatineau"],Saskatchewan:["Regina","Saskatoon"],California:["Los Angeles","San Francisco","San Diego"],"New York":["New York City","Buffalo","Albany"],Texas:["Houston","Dallas","Austin"],Florida:["Miami","Orlando","Tampa"],default:["Major City 1","Major City 2","Major City 3"]},t=e[z.state]||e.default;w(t)}}catch(e){console.error("Error fetching cities:",e),A(!1),T(!0),w(["Major City 1","Major City 2","Major City 3"])}}})()}),[z.state,l]),(0,t.useEffect)((()=>{(async()=>{if(z.city){I(!0),D(!1);try{const e=(0,bt.rJ)(xt.db,"hospitals"),t=(0,bt.P)(e,(0,bt._M)("city","==",z.city),(0,bt._M)("verificationStatus","==","Approved")),n=(await(0,bt.GG)(t)).docs.map((e=>({name:e.data().hospitalName,userId:e.data().userId})));j(n),l&&B((e=>(0,i.A)((0,i.A)({},e),{},{hospitalAssociation:""}))),I(!1),0===n.length&&(D(!0),j([{name:"Contact us to add a hospital in this area",userId:"contact_support"}]))}catch(e){console.error("Error fetching hospitals:",e),I(!1),D(!0)}}})()}),[z.city,l]),(0,t.useEffect)((()=>{(async()=>{if(!z.hospitalAssociation)return void P("");const e=N.find((e=>e.name===z.hospitalAssociation));P(e?e.userId:"")})()}),[z.hospitalAssociation,N]),(0,t.useEffect)((()=>{const e=(0,sn.hg)(xt.j2,(e=>{e?(n(e),J(e.uid)):(n(null),a(!1))}));return()=>e()}),[]);const J=async t=>{try{const n=(0,bt.rJ)(xt.db,"recipients"),r=(0,bt.P)(n,(0,bt._M)("userId","==",t)),s=await(0,bt.GG)(r);if(s.empty)u(!1),c(!0),x(!1),e&&e.email&&B((t=>(0,i.A)((0,i.A)({},t),{},{email:e.email})));else{const e=s.docs[0].data();O(e.requestStatus||"not-submitted"),M(e.doctorComment||""),U(e.adminComment||""),q(e.requestSubmissionDate?e.requestSubmissionDate.toDate():null);const t={fullName:e.fullName||"",email:e.email||"",phone:e.phone||"",address:e.address||"",zipCode:e.zipCode||"",dateOfBirth:e.dateOfBirth||"",gender:e.gender||"",nationalId:e.nationalId||"",bloodType:e.bloodType||"",weight:e.weight||"",height:e.height||"",city:e.city||"",state:e.state||"",hospitalAssociation:e.hospitalAssociation||"",diagnosedCondition:e.diagnosedCondition||"",diagnosisDate:e.diagnosisDate||"",treatingPhysician:e.treatingPhysician||"",physicianContact:e.physicianContact||"",diagnosisHospital:e.diagnosisHospital||"",medicalHistory:e.medicalHistory||"",allergies:e.allergies||"",currentMedications:e.currentMedications||"",previousTransfusions:e.previousTransfusions||"no",previousTransfusionDetails:e.previousTransfusionDetails||"",immuneSystemIssues:e.immuneSystemIssues||"no",immuneSystemDetails:e.immuneSystemDetails||"",organType:e.organType||"",urgencyLevel:e.urgencyLevel||"normal",requiredQuantity:e.requiredQuantity||"",requestReason:e.requestReason||"",requestDate:e.requestDate||"",estimatedTimeframe:e.estimatedTimeframe||"",matchingCriteria:e.matchingCriteria||"",currentlyHospitalized:e.currentlyHospitalized||"no",hospitalizedLocation:e.hospitalizedLocation||"",familyContactName:e.familyContactName||"",familyContactRelationship:e.familyContactRelationship||"",familyContactPhone:e.familyContactPhone||"",familyContactEmail:e.familyContactEmail||"",familyAwareOfCondition:e.familyAwareOfCondition||"yes",familyAwareOfRequest:e.familyAwareOfRequest||"yes",hasCaregiver:e.hasCaregiver||"no",caregiverDetails:e.caregiverDetails||"",howDidYouHear:e.howDidYouHear||"",additionalNotes:e.additionalNotes||"",occupation:e.occupation||""};B(t),p(t),u(!0),c(!1),x(!0)}a(!1)}catch(n){console.error("Error fetching recipient profile:",n),alert("Failed to load your profile. Please try again."),a(!1)}},H=e=>{const{name:t,value:n}=e.target;B((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))},G=()=>"not-submitted"===R,W=()=>{G(),l?(B((0,i.A)({},h)),x(!0)):(x(!1),f(1)),c(!l)},Y=e=>{G()?(f(e),x(!1),c(!0)):Jn.warning("You cannot edit your profile while it's under review.")},K=()=>{v((e=>(0,i.A)((0,i.A)({},e),{},{[m]:!0}))),m<4?f(m+1):x(!0)},Q=e=>{switch(e){case 1:return z.fullName&&z.email&&z.phone&&z.address&&z.zipCode&&z.dateOfBirth&&z.gender&&z.nationalId&&z.bloodType&&z.weight&&z.height;case 2:return z.organType&&z.urgencyLevel&&z.requiredQuantity&&z.requestReason&&z.requestDate&&z.estimatedTimeframe&&("yes"!==z.currentlyHospitalized||z.hospitalizedLocation);case 3:return z.diagnosedCondition&&z.diagnosisDate&&z.treatingPhysician&&z.physicianContact&&z.diagnosisHospital&&z.medicalHistory&&z.allergies&&z.currentMedications&&("yes"!==z.previousTransfusions||z.previousTransfusionDetails)&&("yes"!==z.immuneSystemIssues||z.immuneSystemDetails);case 4:return z.state&&z.city&&z.hospitalAssociation;default:return!1}};if(r)return(0,wt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,wt.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})});return(0,wt.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[(0,wt.jsx)(er,{position:"top-right",autoClose:5e3}),(0,wt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,wt.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-teal-700 p-6 text-white",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold",children:"Recipient Profile"}),d&&!l&&!y&&(0,wt.jsxs)("button",{type:"button",className:"px-4 py-2 bg-white text-teal-700 rounded-md font-medium hover:bg-gray-100 transition-colors",onClick:W,children:[(0,wt.jsx)("i",{className:"fas fa-edit mr-2"}),"Edit Profile"]}),d&&l&&(0,wt.jsx)("button",{type:"button",className:"px-4 py-2 bg-white text-teal-700 rounded-md font-medium hover:bg-gray-100 transition-colors",onClick:W,children:"Cancel"})]}),(0,wt.jsx)("p",{className:"mt-2 text-teal-100",children:d?l?"Edit your recipient information below":"View your recipient information and request details":"Please complete your recipient profile information"})]}),!y&&(0,wt.jsxs)("div",{className:"px-6 pt-6",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("div",{className:"flex items-center",children:(0,wt.jsxs)("h4",{className:"text-lg font-semibold text-teal-700",children:["Step ",m," of ",4,": ",(e=>{switch(e){case 1:return"Personal Information";case 2:return"Organ Request";case 3:return"Medical Information";case 4:return"Transplant Center";default:return""}})(m)]})}),(0,wt.jsxs)("div",{className:"text-sm text-gray-600",children:[Math.round(m/4*100),"% Complete"]})]}),(0,wt.jsx)("div",{className:"relative h-2 bg-gray-200 rounded-full mb-6",children:(0,wt.jsx)("div",{className:"absolute top-0 left-0 h-2 bg-teal-600 rounded-full transition-all duration-300",style:{width:"".concat(m/4*100,"%")}})})]}),(0,wt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0);try{if(!e)throw new Error("User not authenticated");const t=(0,bt.rJ)(xt.db,"recipients"),n=(0,bt.P)(t,(0,bt._M)("userId","==",e.uid)),r=await(0,bt.GG)(n),a=(0,i.A)((0,i.A)({},z),{},{hospitalId:k||"",updatedAt:new Date});if(r.empty){const t=(0,bt.doc)((0,bt.rJ)(xt.db,"recipients"));await(0,bt.BN)(t,(0,i.A)((0,i.A)({},a),{},{userId:e.uid,createdAt:new Date,requestStatus:"pending"})),console.log("New recipient profile created successfully!"),alert("Your profile has been created successfully!"),u(!0),c(!1),x(!0)}else{const e=r.docs[0].ref;await(0,bt.updateDoc)(e,a),console.log("Recipient profile updated successfully!"),alert("Your profile has been updated successfully!"),c(!1),x(!0)}p((0,i.A)((0,i.A)({},z),{},{hospitalId:k})),f(1),x(!0)}catch(n){console.error("Error saving recipient profile:",n),alert("Failed to save your profile. Please try again.")}finally{o(!1)}},children:[(0,wt.jsxs)("div",{className:"p-6",children:[y&&(0,wt.jsxs)("div",{className:"space-y-8",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold text-gray-800 border-b pb-2",children:"Profile Summary"}),"not-submitted"!==R&&(0,wt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[(0,wt.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Application Status"}),(0,wt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,wt.jsx)("span",{className:"text-sm font-medium mr-2",children:"Status:"}),(0,wt.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat("pending"===R?"bg-yellow-100 text-yellow-800":"doctor-approved"===R?"bg-blue-100 text-blue-800":"admin-approved"===R?"bg-green-100 text-green-800":"rejected"===R?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"pending"===R?"Pending Review":"doctor-approved"===R||"admin-approved"===R?"Approved":"rejected"===R?"Rejected":"Not Submitted"})]}),V&&(0,wt.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Submitted on:"})," ",V.toLocaleDateString()]}),(0,wt.jsxs)("div",{className:"mb-3",children:[(0,wt.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Approval Progress"}),(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"pending"===R?"0%":"doctor-approved"===R?"50%":"admin-approved"===R?"100%":"0%"})]}),(0,wt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:(0,wt.jsx)("div",{className:"bg-teal-600 h-2.5 rounded-full transition-all duration-500",style:{width:"pending"===R?"5%":"doctor-approved"===R?"50%":"admin-approved"===R?"100%":"0%"}})}),"pending"===R&&(0,wt.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3",children:[(0,wt.jsx)("p",{className:"text-yellow-800 font-medium",children:"Your application is under review by the medical team."}),(0,wt.jsx)("p",{className:"text-yellow-700 mt-1",children:"You cannot edit your information while your application is being reviewed."})]}),"doctor-approved"===R&&(0,wt.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3",children:[(0,wt.jsx)("p",{className:"text-blue-800 font-medium",children:"Congratulations! Your application has been approved by the medical team."}),L&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-blue-200",children:[(0,wt.jsx)("p",{className:"font-medium text-blue-800",children:"Medical Team Note:"}),(0,wt.jsx)("p",{className:"italic",children:L})]}),(0,wt.jsx)("p",{className:"mt-2 text-blue-700",children:"The medical team will contact you soon to schedule your appointment."})]}),"admin-approved"===R&&(0,wt.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-400 p-3",children:[(0,wt.jsx)("p",{className:"text-green-800 font-medium",children:"Congratulations! Your application has been fully approved!"}),F&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-green-200",children:[(0,wt.jsx)("p",{className:"font-medium text-green-800",children:"Approval Note:"}),(0,wt.jsx)("p",{className:"italic",children:F})]}),(0,wt.jsxs)("div",{className:"mt-2",children:[(0,wt.jsxs)("p",{className:"text-green-700",children:[(0,wt.jsx)("span",{className:"font-medium",children:"Hospital:"})," ",z.hospitalAssociation]}),(0,wt.jsx)("p",{className:"text-green-700 mt-1",children:"Your transplant center will contact you shortly to schedule your initial consultation."})]})]}),"rejected"===R&&(0,wt.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3",children:[(0,wt.jsx)("p",{className:"text-red-800 font-medium",children:"We're sorry, your application has been declined."}),L&&(0,wt.jsxs)("div",{className:"mt-2 bg-white p-3 rounded-md border border-red-200",children:[(0,wt.jsx)("p",{className:"font-medium text-red-800",children:"Message from Medical Team:"}),(0,wt.jsx)("p",{className:"italic",children:L})]})]})]})]}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Personal Information"}),G()&&(0,wt.jsxs)("button",{type:"button",className:"text-teal-600 hover:text-teal-800 flex items-center text-sm font-medium",onClick:()=>Y(1),children:[(0,wt.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Full Name"}),(0,wt.jsx)("p",{className:"font-medium",children:z.fullName})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),(0,wt.jsx)("p",{className:"font-medium",children:z.dateOfBirth})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Gender"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:z.gender})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"ID/Insurance Number"}),(0,wt.jsx)("p",{className:"font-medium",children:z.nationalId})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,wt.jsx)("p",{className:"font-medium",children:z.email})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,wt.jsx)("p",{className:"font-medium",children:z.phone})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Address"}),(0,wt.jsx)("p",{className:"font-medium",children:z.address})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Zip/Postal Code"}),(0,wt.jsx)("p",{className:"font-medium",children:z.zipCode})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Weight"}),(0,wt.jsxs)("p",{className:"font-medium",children:[z.weight," kg"]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Height"}),(0,wt.jsxs)("p",{className:"font-medium",children:[z.height," cm"]})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Blood Type"}),(0,wt.jsx)("p",{className:"font-medium",children:z.bloodType})]})]})]}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Organ Request"}),G()&&(0,wt.jsxs)("button",{type:"button",className:"text-teal-600 hover:text-teal-800 flex items-center text-sm font-medium",onClick:()=>Y(2),children:[(0,wt.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]})]}),"                  ",(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Organ Type"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:z.organType})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Required Quantity"}),(0,wt.jsx)("p",{className:"font-medium",children:z.requiredQuantity})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Urgency Level"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:z.urgencyLevel})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Request Date"}),(0,wt.jsx)("p",{className:"font-medium",children:z.requestDate})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Estimated Timeframe"}),(0,wt.jsx)("p",{className:"font-medium",children:z.estimatedTimeframe})]}),(0,wt.jsxs)("div",{className:"md:col-span-2",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Request Reason"}),(0,wt.jsx)("p",{className:"font-medium",children:z.requestReason})]})]})]}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Medical Information"}),G()&&(0,wt.jsxs)("button",{type:"button",className:"text-teal-600 hover:text-teal-800 flex items-center text-sm font-medium",onClick:()=>Y(3),children:[(0,wt.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Diagnosed Condition"}),(0,wt.jsx)("p",{className:"font-medium",children:z.diagnosedCondition})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Diagnosis Date"}),(0,wt.jsx)("p",{className:"font-medium",children:z.diagnosisDate})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Treating Physician"}),(0,wt.jsx)("p",{className:"font-medium",children:z.treatingPhysician})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Physician Contact"}),(0,wt.jsx)("p",{className:"font-medium",children:z.physicianContact})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Diagnosis Hospital"}),(0,wt.jsx)("p",{className:"font-medium",children:z.diagnosisHospital})]}),(0,wt.jsxs)("div",{className:"md:col-span-2",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Medical History"}),(0,wt.jsx)("p",{className:"font-medium",children:z.medicalHistory})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Allergies"}),(0,wt.jsx)("p",{className:"font-medium",children:z.allergies})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Current Medications"}),(0,wt.jsx)("p",{className:"font-medium",children:z.currentMedications})]})]})]}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Transplant Center"}),G()&&(0,wt.jsxs)("button",{type:"button",className:"text-teal-600 hover:text-teal-800 flex items-center text-sm font-medium",onClick:()=>Y(4),children:[(0,wt.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Province/State"}),(0,wt.jsx)("p",{className:"font-medium",children:z.state})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"City"}),(0,wt.jsx)("p",{className:"font-medium",children:z.city})]}),(0,wt.jsxs)("div",{className:"md:col-span-2",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Hospital/Transplant Center"}),(0,wt.jsx)("p",{className:"font-medium",children:z.hospitalAssociation})]})]})]}),y&&"not-submitted"===R&&(0,wt.jsx)("div",{className:"mt-8 flex justify-end",children:(0,wt.jsx)("button",{type:"button",onClick:async()=>{try{if(!e)return void Jn.error("You must be logged in to send a request.");if(!k)return void Jn.error("Please select a valid hospital before submitting your request.");o(!0);const n=["fullName","email","phone","dateOfBirth","gender","nationalId","diagnosedCondition","organType","hospitalAssociation"].filter((e=>!z[e]));if(n.length>0)return Jn.error("Please complete all required fields before submitting: ".concat(n.join(", "))),void o(!1);try{const t=(0,bt.rJ)(xt.db,"recipients"),n=(0,bt.P)(t,(0,bt._M)("userId","==",e.uid)),r=await(0,bt.GG)(n),a=(0,i.A)((0,i.A)({},z),{},{hospitalId:k,reviewingHospitalId:k,updatedAt:new Date});let s;r.empty?(s=(0,bt.doc)((0,bt.rJ)(xt.db,"recipients")),await(0,bt.BN)(s,(0,i.A)((0,i.A)({},a),{},{userId:e.uid,createdAt:new Date,requestStatus:"pending",requestSubmissionDate:new Date,doctorReviewed:!1,adminReviewed:!1,doctorComment:"",adminComment:"",assignedToHospital:k,assignedHospitalName:z.hospitalAssociation})),console.log("New recipient profile created and request submitted to selected hospital!"),Jn.success("Profile created and request submitted successfully to "+z.hospitalAssociation),O("pending"),q(new Date),u(!0),c(!1),x(!0)):(s=r.docs[0].ref,await(0,bt.updateDoc)(s,(0,i.A)((0,i.A)({},a),{},{requestStatus:"pending",requestSubmissionDate:new Date,doctorReviewed:!1,adminReviewed:!1,doctorComment:"",adminComment:"",assignedToHospital:k,assignedHospitalName:z.hospitalAssociation})),console.log("Profile updated and request submitted to "+z.hospitalAssociation),Jn.success("Application sent successfully to ".concat(z.hospitalAssociation,"! Your request is now pending review.")),O("pending"),q(new Date)),p((0,i.A)((0,i.A)({},z),{},{hospitalId:k}))}catch(t){console.error("Database error:",t),Jn.error("Database error: ".concat(t.message||"Unknown error"))}o(!1)}catch(n){console.error("Error sending request:",n),Jn.error("Request failed: ".concat(n.message||"Unknown error")),o(!1)}},disabled:s,className:"px-6 py-3 bg-teal-600 text-white rounded-md font-medium hover:bg-teal-700 transition-colors flex items-center",children:s?(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,wt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,wt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsx)("i",{className:"fas fa-paper-plane mr-2"})," Send Request for Approval"]})})})]}),!y&&(0,wt.jsxs)(wt.Fragment,{children:[1===m&&(0,wt.jsxs)("div",{className:"space-y-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold text-gray-800 border-b pb-2",children:"Personal Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Legal Name*"}),(0,wt.jsx)("input",{id:"fullName",name:"fullName",value:z.fullName,onChange:H,placeholder:"John Doe",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth*"}),(0,wt.jsx)("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:z.dateOfBirth,onChange:H,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Sex/Gender*"}),(0,wt.jsxs)("select",{id:"gender",name:"gender",value:z.gender,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select gender"}),(0,wt.jsx)("option",{value:"male",children:"Male"}),(0,wt.jsx)("option",{value:"female",children:"Female"}),(0,wt.jsx)("option",{value:"other",children:"Other"}),(0,wt.jsx)("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"nationalId",className:"block text-sm font-medium text-gray-700",children:"Government ID/Health Insurance Number*"}),(0,wt.jsx)("input",{id:"nationalId",name:"nationalId",value:z.nationalId,onChange:H,placeholder:"ID Number",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address*"}),(0,wt.jsx)("input",{id:"email",name:"email",type:"email",value:z.email,onChange:H,placeholder:"john.doe@example.com",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number*"}),(0,wt.jsx)("input",{id:"phone",name:"phone",value:z.phone,onChange:H,placeholder:"+1 (555) 123-4567",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Home Address*"}),(0,wt.jsx)("input",{id:"address",name:"address",value:z.address,onChange:H,placeholder:"123 Main St",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"Zip/Postal Code*"}),(0,wt.jsx)("input",{id:"zipCode",name:"zipCode",value:z.zipCode,onChange:H,placeholder:"10001",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]})]}),(0,wt.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mt-8 border-b pb-2",children:"Physical Attributes"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700",children:"Weight (kg)*"}),(0,wt.jsx)("input",{id:"weight",name:"weight",type:"number",value:z.weight,onChange:H,placeholder:"70",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"height",className:"block text-sm font-medium text-gray-700",children:"Height (cm)*"}),(0,wt.jsx)("input",{id:"height",name:"height",type:"number",value:z.height,onChange:H,placeholder:"175",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"bloodType",className:"block text-sm font-medium text-gray-700",children:"Blood Type (ABO and Rh factor)*"}),(0,wt.jsxs)("select",{id:"bloodType",name:"bloodType",value:z.bloodType,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select blood type"}),(0,wt.jsx)("option",{value:"A+",children:"A+"}),(0,wt.jsx)("option",{value:"A-",children:"A-"}),(0,wt.jsx)("option",{value:"B+",children:"B+"}),(0,wt.jsx)("option",{value:"B-",children:"B-"}),(0,wt.jsx)("option",{value:"AB+",children:"AB+"}),(0,wt.jsx)("option",{value:"AB-",children:"AB-"}),(0,wt.jsx)("option",{value:"O+",children:"O+"}),(0,wt.jsx)("option",{value:"O-",children:"O-"})]})]})]})]}),"                ",2===m&&(0,wt.jsxs)("div",{className:"space-y-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold text-gray-800 border-b pb-2",children:"Organ Request"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"organType",className:"block text-sm font-medium text-gray-700",children:"Organ Type*"}),(0,wt.jsxs)("select",{id:"organType",name:"organType",value:z.organType,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select organ"}),(0,wt.jsx)("option",{value:"kidney",children:"Kidney"}),(0,wt.jsx)("option",{value:"liver",children:"Liver"}),(0,wt.jsx)("option",{value:"heart",children:"Heart"}),(0,wt.jsx)("option",{value:"lung",children:"Lung"}),(0,wt.jsx)("option",{value:"pancreas",children:"Pancreas"}),(0,wt.jsx)("option",{value:"intestine",children:"Intestine"}),(0,wt.jsx)("option",{value:"cornea",children:"Cornea"}),(0,wt.jsx)("option",{value:"bone",children:"Bone"}),(0,wt.jsx)("option",{value:"skin",children:"Skin"}),(0,wt.jsx)("option",{value:"heart-valves",children:"Heart Valves"}),(0,wt.jsx)("option",{value:"other",children:"Other"})]})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"urgencyLevel",className:"block text-sm font-medium text-gray-700",children:"Urgency Level*"}),(0,wt.jsxs)("select",{id:"urgencyLevel",name:"urgencyLevel",value:z.urgencyLevel,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"normal",children:"Normal"}),(0,wt.jsx)("option",{value:"urgent",children:"Urgent"}),(0,wt.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"requiredQuantity",className:"block text-sm font-medium text-gray-700",children:"Required Quantity*"}),(0,wt.jsx)("input",{id:"requiredQuantity",name:"requiredQuantity",value:z.requiredQuantity,onChange:H,placeholder:"e.g., 1 kidney",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"requestDate",className:"block text-sm font-medium text-gray-700",children:"Request Date*"}),(0,wt.jsx)("input",{id:"requestDate",name:"requestDate",type:"date",value:z.requestDate,onChange:H,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"estimatedTimeframe",className:"block text-sm font-medium text-gray-700",children:"Estimated Timeframe*"}),(0,wt.jsx)("input",{id:"estimatedTimeframe",name:"estimatedTimeframe",value:z.estimatedTimeframe,onChange:H,placeholder:"e.g., 6 months, 1 year",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,wt.jsx)("label",{htmlFor:"requestReason",className:"block text-sm font-medium text-gray-700",children:"Request Reason*"}),(0,wt.jsx)("textarea",{id:"requestReason",name:"requestReason",value:z.requestReason,onChange:H,rows:3,placeholder:"Explain why you need this organ",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]})]})]}),3===m&&(0,wt.jsxs)("div",{className:"space-y-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold text-gray-800 border-b pb-2",children:"Medical Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"diagnosedCondition",className:"block text-sm font-medium text-gray-700",children:"Diagnosed Condition*"}),(0,wt.jsx)("input",{id:"diagnosedCondition",name:"diagnosedCondition",value:z.diagnosedCondition,onChange:H,placeholder:"e.g., End-stage renal disease",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"diagnosisDate",className:"block text-sm font-medium text-gray-700",children:"Diagnosis Date*"}),(0,wt.jsx)("input",{id:"diagnosisDate",name:"diagnosisDate",type:"date",value:z.diagnosisDate,onChange:H,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"treatingPhysician",className:"block text-sm font-medium text-gray-700",children:"Treating Physician*"}),(0,wt.jsx)("input",{id:"treatingPhysician",name:"treatingPhysician",value:z.treatingPhysician,onChange:H,placeholder:"Dr. John Smith",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"physicianContact",className:"block text-sm font-medium text-gray-700",children:"Physician Contact*"}),(0,wt.jsx)("input",{id:"physicianContact",name:"physicianContact",value:z.physicianContact,onChange:H,placeholder:"Phone number or email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"diagnosisHospital",className:"block text-sm font-medium text-gray-700",children:"Diagnosis Hospital*"}),(0,wt.jsx)("input",{id:"diagnosisHospital",name:"diagnosisHospital",value:z.diagnosisHospital,onChange:H,placeholder:"Hospital where diagnosed",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,wt.jsx)("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700",children:"Medical History*"}),(0,wt.jsx)("textarea",{id:"medicalHistory",name:"medicalHistory",value:z.medicalHistory,onChange:H,rows:3,placeholder:"Brief medical history relevant to your condition",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"allergies",className:"block text-sm font-medium text-gray-700",children:"Allergies*"}),(0,wt.jsx)("textarea",{id:"allergies",name:"allergies",value:z.allergies,onChange:H,rows:2,placeholder:"List any allergies; enter 'None' if none",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"currentMedications",className:"block text-sm font-medium text-gray-700",children:"Current Medications*"}),(0,wt.jsx)("textarea",{id:"currentMedications",name:"currentMedications",value:z.currentMedications,onChange:H,rows:2,placeholder:"List current medications; enter 'None' if none",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:d&&!l})]})]})]}),4===m&&(0,wt.jsxs)("div",{className:"space-y-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-bold text-gray-800 border-b pb-2",children:"Transplant Center"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"Province/State*"}),(0,wt.jsxs)("select",{id:"state",name:"state",value:z.state,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l,children:[(0,wt.jsx)("option",{value:"",children:"Select Province"}),(0,wt.jsx)("option",{value:"Punjab",children:"Punjab"}),(0,wt.jsx)("option",{value:"Sindh",children:"Sindh"}),(0,wt.jsx)("option",{value:"Balochistan",children:"Balochistan"}),(0,wt.jsx)("option",{value:"Khyber Pakhtunkhwa",children:"Khyber Pakhtunkhwa"}),(0,wt.jsx)("option",{value:"Gilgit Baltistan",children:"Gilgit Baltistan"}),(0,wt.jsx)("option",{value:"Islamabad",children:"Islamabad Capital Territory"})]})]}),(0,wt.jsxs)("div",{className:"space-y-2",children:[(0,wt.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City*"}),(0,wt.jsxs)("select",{id:"city",name:"city",value:z.city,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l||!z.state||E,children:[(0,wt.jsx)("option",{value:"",children:"Select City"}),E?(0,wt.jsx)("option",{value:"",disabled:!0,children:"Loading cities..."}):_?(0,wt.jsx)("option",{value:"",disabled:!0,children:"Select from default city list"}):b.map((e=>(0,wt.jsx)("option",{value:e,children:e},e)))]}),"                        ",_&&(0,wt.jsxs)("p",{className:"mt-1 text-sm text-amber-600",children:[(0,wt.jsx)("i",{className:"fas fa-info-circle mr-1"})," Using default city list. Hospitals may need verification."]})]}),(0,wt.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,wt.jsx)("label",{htmlFor:"hospitalAssociation",className:"block text-sm font-medium text-gray-700",children:"Hospital/Transplant Center*"}),(0,wt.jsxs)("select",{id:"hospitalAssociation",name:"hospitalAssociation",value:z.hospitalAssociation,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0,disabled:d&&!l||!z.city||S,children:[(0,wt.jsx)("option",{value:"",children:"Select Hospital"}),S?(0,wt.jsx)("option",{value:"",disabled:!0,children:"Loading hospitals..."}):C?(0,wt.jsx)("option",{value:"",disabled:!0,children:"No hospitals found"}):N.map((e=>(0,wt.jsx)("option",{value:e.name,children:e.name},e.userId)))]}),"                        ",C&&(0,wt.jsxs)("p",{className:"mt-1 text-sm text-amber-600",children:[(0,wt.jsx)("i",{className:"fas fa-info-circle mr-1"})," No approved hospitals found in this city yet. Please select another city or contact support for assistance."]})]}),(0,wt.jsx)("div",{className:"space-y-2 md:col-span-2",children:(0,wt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,wt.jsxs)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:[(0,wt.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Information"]}),(0,wt.jsx)("p",{className:"text-sm text-blue-800",children:"Your selected transplant center will be notified of your request. They will contact you to coordinate your transplant evaluation and waitlist registration."})]})})]})]})]})]}),!y&&(0,wt.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-between",children:[(0,wt.jsxs)("button",{type:"button",onClick:()=>{m>1&&f(m-1)},className:"px-4 py-2 flex items-center text-gray-700 font-medium rounded-md hover:bg-gray-100 transition-colors ".concat(1===m?"invisible":""),disabled:1===m,children:[(0,wt.jsx)("i",{className:"fas fa-chevron-left mr-1"})," Previous"]}),m<4?(0,wt.jsxs)("button",{type:"button",onClick:K,className:"px-6 py-2 bg-teal-600 text-white rounded-md font-medium hover:bg-teal-700 transition-colors flex items-center ".concat(Q(m)?"":"opacity-50 cursor-not-allowed"),disabled:!Q(m),children:["Next ",(0,wt.jsx)("i",{className:"fas fa-chevron-right ml-1"})]}):(0,wt.jsxs)("button",{type:"button",onClick:K,className:"px-6 py-2 bg-teal-600 text-white rounded-md font-medium hover:bg-teal-700 transition-colors flex items-center ".concat(Q(m)?"":"opacity-50 cursor-not-allowed"),disabled:!Q(m),children:["Review ",(0,wt.jsx)("i",{className:"fas fa-chevron-right ml-1"})]})]})]})]})]})}const qm=e=>{let{activeTab:t,setActiveTab:n,actionInProgress:r}=e;return(0,wt.jsx)("div",{className:"mb-6 border-b",children:(0,wt.jsx)("ul",{className:"flex flex-wrap -mb-px",children:[{id:"pending",label:"Pending Requests"},{id:"approved",label:"Approved"},{id:"rejected",label:"Rejected"}].map((e=>(0,wt.jsx)("li",{className:"mr-2",children:(0,wt.jsx)("button",{className:"inline-block p-4 ".concat(t===e.id?"text-teal-600 border-b-2 border-teal-600":"text-gray-500 hover:text-gray-700"),onClick:()=>n(e.id),disabled:r,type:"button",children:e.label})},e.id)))})})},zm=e=>{let{status:t}=e,n="bg-yellow-100 text-yellow-800",r="Pending";return"admin-approved"===t?(n="bg-green-100 text-green-800",r="Approved"):"doctor-approved"===t?(n="bg-blue-100 text-blue-800",r="Doctor Approved"):"rejected"===t&&(n="bg-red-100 text-red-800",r="Rejected"),(0,wt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(n),children:r})},Bm=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return n;const r="string"===typeof t?t.split("."):[t];let a=e;for(const s of r){if(void 0===a||null===a)return n;a=a[s]}return void 0===a||null===a||""===a?n:a},Jm=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return n;if(Array.isArray(t)){for(const r of t){const t=Bm(e,r);if(t!==n)return t}return n}return Bm(e,t,n)},Hm=e=>{if(!e)return"N/A";try{if("object"===typeof e){if(e.seconds)return new Date(1e3*e.seconds).toLocaleDateString();if(e instanceof Date)return e.toLocaleDateString()}if("string"===typeof e)return new Date(e).toLocaleDateString()}catch(t){console.error("Error formatting date:",t,e)}return"N/A"},Gm=e=>Jm(e,["fullName","userData.fullName","userData.name","userData.displayName"]),Wm=e=>{const t=Jm(e,"organType","");return t?t.charAt(0).toUpperCase()+t.slice(1):"N/A"},Ym=e=>{let{recipients:t,activeTab:n,viewRecipientDetails:r,handleAdminDecision:a,actionInProgress:s}=e;return 0===t[n].length?(0,wt.jsx)("div",{className:"bg-white rounded-lg p-8 text-center",children:(0,wt.jsx)("p",{className:"text-gray-500",children:"No recipients found in this category"})}):(0,wt.jsx)("div",{className:"overflow-x-auto",children:(0,wt.jsxs)("table",{className:"min-w-full bg-white",children:[(0,wt.jsx)("thead",{children:(0,wt.jsxs)("tr",{className:"bg-gray-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Recipient Name"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Blood Group"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Age"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Organ Type"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-left",children:"Status"}),(0,wt.jsx)("th",{className:"py-3 px-6 text-center",children:"Actions"})]})}),(0,wt.jsx)("tbody",{className:"text-gray-600 text-sm",children:t[n].map((e=>(0,wt.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)("div",{className:"font-medium",children:Gm(e)})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:Jm(e,"bloodType")}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:Jm(e,"age")}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:Wm(e)}),(0,wt.jsx)("td",{className:"py-3 px-6 text-left",children:(0,wt.jsx)(zm,{status:e.requestStatus})}),(0,wt.jsx)("td",{className:"py-3 px-6 text-center",children:(0,wt.jsxs)("div",{className:"flex item-center justify-center space-x-2",children:[(0,wt.jsx)("button",{onClick:()=>r(e),className:"bg-teal-500 text-white px-3 py-1 rounded hover:bg-teal-600 disabled:bg-gray-300",disabled:s,type:"button",children:"View Details"}),e.doctorReviewed&&!e.adminReviewed&&(0,wt.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to confirm the doctor's ".concat("doctor-approved"===e.requestStatus?"approval":"rejection","?"))&&a(e.id,!0)},className:"text-white px-3 py-1 rounded hover:opacity-90 disabled:bg-gray-300 ".concat("doctor-approved"===e.requestStatus?"bg-green-500":"bg-red-500"),disabled:s,type:"button",children:["Confirm ","doctor-approved"===e.requestStatus?"Approval":"Rejection"]})]})})]},e.id)))})]})})},Km=e=>{let{recipient:t}=e;return(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Personal Information"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Full Name"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"fullName")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"dateOfBirth")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Gender"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:Jm(t,"gender")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"ID/Insurance Number"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"nationalId")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"email")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"phone")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Address"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"address")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Zip/Postal Code"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"zipCode")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Weight"}),(0,wt.jsx)("p",{className:"font-medium",children:"N/A"!==Jm(t,"weight")?"".concat(t.weight," kg"):"N/A"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Height"}),(0,wt.jsx)("p",{className:"font-medium",children:"N/A"!==Jm(t,"height")?"".concat(t.height," cm"):"N/A"})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Blood Type"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"bloodType")})]})]})]})},Qm=e=>{let{recipient:t}=e;return(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Organ Request"}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Request Type"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:Jm(t,"requestType")})]}),"organ"===t.requestType&&(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Organ Type"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:Jm(t,"organType")})]}),"blood"===t.requestType&&(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Blood Product Type"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:Jm(t,"bloodProductType")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Required Quantity"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"requiredQuantity")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Urgency Level"}),(0,wt.jsx)("p",{className:"font-medium capitalize",children:Jm(t,"urgencyLevel")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Request Date"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"requestDate")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Estimated Timeframe"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"estimatedTimeframe")})]}),(0,wt.jsxs)("div",{className:"md:col-span-2",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Request Reason"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"requestReason")})]})]})]})},Xm=e=>{let{recipient:t}=e;return(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Medical Information"}),(0,wt.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Diagnosed Condition"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"diagnosedCondition")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Diagnosis Date"}),(0,wt.jsx)("p",{className:"font-medium",children:Hm(t.diagnosisDate)})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Treating Physician"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"treatingPhysician")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Physician Contact"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"physicianContact")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Diagnosis Hospital"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"diagnosisHospital")})]}),(0,wt.jsxs)("div",{className:"md:col-span-2",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Medical History"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"medicalHistory","None")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Allergies"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"allergies","None")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Current Medications"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"currentMedications","None")})]})]})})]})},Zm=e=>{let{recipient:t}=e;return(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Transplant Center"}),(0,wt.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,wt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Province/State"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"state")})]}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"City"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"city")})]}),(0,wt.jsxs)("div",{className:"md:col-span-2",children:[(0,wt.jsx)("p",{className:"text-sm text-gray-500",children:"Hospital/Transplant Center"}),(0,wt.jsx)("p",{className:"font-medium",children:Jm(t,"hospitalAssociation")})]})]})})]})},$m=e=>{let{recipient:t}=e;return(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Approval Status"}),(0,wt.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wt.jsxs)("div",{className:"mb-3",children:[(0,wt.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Approval Progress"}),(0,wt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(e=>{switch(e){case"pending":case"rejected":default:return"0%";case"doctor-approved":return"50%";case"admin-approved":return"100%"}})(t.requestStatus)})]}),(0,wt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,wt.jsx)("div",{className:"bg-teal-600 h-2.5 rounded-full transition-all duration-500",style:{width:(e=>{switch(e){case"pending":return"5%";case"doctor-approved":return"50%";case"admin-approved":return"100%";default:return"0%"}})(t.requestStatus)}})})]}),(0,wt.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,wt.jsxs)("div",{className:"flex items-start",children:[(0,wt.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full mt-0.5 mr-2 flex items-center justify-center ".concat("pending"===t.requestStatus||"doctor-approved"===t.requestStatus||"admin-approved"===t.requestStatus?"bg-teal-500":"bg-gray-300"),children:(0,wt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"font-medium text-gray-800",children:"Application Submitted"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600",children:t.requestSubmissionDate?"Submitted on: ".concat(Hm(t.requestSubmissionDate)):"Application has been submitted for review"})]})]}),(0,wt.jsxs)("div",{className:"flex items-start",children:[(0,wt.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full mt-0.5 mr-2 flex items-center justify-center ".concat("doctor-approved"===t.requestStatus||"admin-approved"===t.requestStatus?"bg-teal-500":"rejected"===t.requestStatus&&t.doctorReviewed?"bg-red-500":"bg-gray-300"),children:"rejected"===t.requestStatus&&t.doctorReviewed?(0,wt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}):(0,wt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:"doctor-approved"===t.requestStatus||"admin-approved"===t.requestStatus?(0,wt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}):(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"font-medium text-gray-800",children:"Doctor Review"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600",children:"doctor-approved"===t.requestStatus||"admin-approved"===t.requestStatus?"Approved by doctor":"rejected"===t.requestStatus&&t.doctorReviewed?"Rejected by doctor":"Awaiting doctor review"}),t.doctorComment&&(0,wt.jsxs)("p",{className:"mt-1 text-sm italic text-gray-600",children:['"',t.doctorComment,'"']})]})]}),(0,wt.jsxs)("div",{className:"flex items-start",children:[(0,wt.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full mt-0.5 mr-2 flex items-center justify-center ".concat("admin-approved"===t.requestStatus?"bg-teal-500":"rejected"===t.requestStatus&&t.adminReviewed?"bg-red-500":"bg-gray-300"),children:"rejected"===t.requestStatus&&t.adminReviewed?(0,wt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,wt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}):(0,wt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:"admin-approved"===t.requestStatus?(0,wt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}):(0,wt.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),(0,wt.jsxs)("div",{children:[(0,wt.jsx)("p",{className:"font-medium text-gray-800",children:"Admin Approval"}),(0,wt.jsx)("p",{className:"text-sm text-gray-600",children:"admin-approved"===t.requestStatus?"Final approval granted":"doctor-approved"===t.requestStatus?"Awaiting admin approval":"rejected"===t.requestStatus&&t.adminReviewed?"Rejected by admin":"Awaiting final review"}),t.adminComment&&(0,wt.jsxs)("p",{className:"mt-1 text-sm italic text-gray-600",children:['"',t.adminComment,'"']})]})]})]})]})]})},ef=e=>{let{recipient:t,handleAdminDecision:n,closeDetailModal:r,actionInProgress:a}=e;return(0,wt.jsxs)("div",{className:"mt-6 flex justify-end space-x-2",children:[t.doctorReviewed&&!t.adminReviewed&&(0,wt.jsxs)(wt.Fragment,{children:[(0,wt.jsxs)("button",{onClick:()=>{const e=window.prompt("Add a comment (optional):");n(t.id,!0,e)},className:"px-4 py-2 text-white rounded hover:opacity-90 disabled:bg-gray-300 ".concat("doctor-approved"===t.requestStatus?"bg-green-500":"bg-red-500"),disabled:a,type:"button",children:["Confirm ","doctor-approved"===t.requestStatus?"Approval":"Rejection"]}),(0,wt.jsx)("button",{onClick:()=>{const e=window.prompt("Please provide reason for overriding doctor's decision:");e&&n(t.id,!1,e)},className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 disabled:bg-gray-300",disabled:a,type:"button",children:"Override Doctor's Decision"})]}),(0,wt.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",type:"button",children:"Close"})]})},tf=e=>{let{recipient:t,closeDetailModal:n,handleAdminDecision:r,actionInProgress:a}=e;return t?(0,wt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,wt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold",children:"Recipient Details"}),(0,wt.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700","aria-label":"Close modal",type:"button",children:(0,wt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,wt.jsx)(Km,{recipient:t}),(0,wt.jsx)(Qm,{recipient:t}),(0,wt.jsx)(Xm,{recipient:t}),(0,wt.jsx)(Zm,{recipient:t}),(0,wt.jsx)($m,{recipient:t}),t.additionalNotes&&(0,wt.jsxs)("section",{className:"mb-6",children:[(0,wt.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Additional Notes"}),(0,wt.jsx)("p",{children:t.additionalNotes})]}),(0,wt.jsx)(ef,{recipient:t,handleAdminDecision:r,closeDetailModal:n,actionInProgress:a})]})}):null},nf=e=>{let{error:t,clearError:n}=e;return t?(0,wt.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 relative",children:[(0,wt.jsx)("span",{className:"block sm:inline",children:t}),(0,wt.jsx)("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:n,type:"button","aria-label":"Close error message",children:(0,wt.jsx)("svg",{className:"h-6 w-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}):null},rf=()=>(0,wt.jsxs)("div",{className:"text-center py-4",children:[(0,wt.jsx)("div",{className:"w-12 h-12 border-4 border-teal-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,wt.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading..."})]});const af=function(){const[e,n]=(0,t.useState)({pending:[],approved:[],rejected:[]}),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)("pending"),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(!1),g=(0,t.useCallback)((async()=>{try{a(!0);const e=(0,bt.P)((0,bt.rJ)(xt.db,"recipients"),(0,bt.My)("updatedAt","desc")),t=await(0,bt.GG)(e),r={pending:[],approved:[],rejected:[]};t.forEach((e=>{const t=(0,i.A)({id:e.id},e.data());t.adminReviewed?"admin-approved"===t.requestStatus?r.approved.push(t):"rejected"===t.requestStatus&&r.rejected.push(t):t.doctorReviewed&&r.pending.push(t)})),n(r)}catch(h){console.error("Error fetching recipients:",h),p("Failed to load recipients")}finally{a(!1)}}),[]);(0,t.useEffect)((()=>{g()}),[g]);const v=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{f(!0);const a=(0,bt.doc)(xt.db,"recipients",e),s=await(0,bt.x7)(a);if(!s.exists())return void Jn.error("Recipient not found");const i=s.data(),o="doctor-approved"===i.requestStatus;let l;l=t?o?"admin-approved":"rejected":o?"rejected":"admin-approved",await(0,bt.updateDoc)(a,{requestStatus:l,adminReviewed:!0,adminReviewDate:new Date,adminComment:n||(t?"Admin confirmed doctor's ".concat(o?"approval":"rejection"):"Admin overrode doctor's ".concat(o?"approval":"rejection")),updatedAt:new Date}),await(0,bt.gS)((0,bt.rJ)(xt.db,"approvalHistory"),{recipientId:e,previousStatus:i.requestStatus,newStatus:l,timestamp:new Date,updatedBy:xt.j2.currentUser.uid,updatedRole:"admin",hospitalName:i.hospitalAssociation||"Unknown hospital",doctorDecision:i.requestStatus,adminAction:t?"confirmed":"overrode",comment:n||(t?"Admin confirmed doctor's ".concat(o?"approval":"rejection"):"Admin overrode doctor's ".concat(o?"approval":"rejection")),isFinalDecision:!0});try{i.userId&&await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:i.userId,title:"Application Status Update",message:"Your organ/tissue request has been ".concat("admin-approved"===l?"approved":"rejected"),status:"unread",createdAt:new Date}),i.doctorId&&await(0,bt.gS)((0,bt.rJ)(xt.db,"notifications"),{userId:i.doctorId,title:"Application Status Update",message:"The application for ".concat(i.fullName||"a recipient"," has been ").concat(t?"confirmed":"overridden"," by admin"),status:"unread",createdAt:new Date})}catch(r){console.error("Error sending notifications:",r)}Jn.success("Request ".concat("admin-approved"===l?"approved":"rejected"," successfully")),await g(),d&&y()}catch(h){console.error("Error in admin decision:",h),Jn.error("Failed to process admin decision")}finally{f(!1)}},y=()=>{u(!1),setTimeout((()=>c(null)),300)};return(0,wt.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,wt.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recipient Management"}),(0,wt.jsx)(nf,{error:h,clearError:()=>{p(null)}}),(0,wt.jsx)(qm,{activeTab:s,setActiveTab:o,actionInProgress:m}),r?(0,wt.jsx)(rf,{}):(0,wt.jsx)(Ym,{recipients:e,activeTab:s,viewRecipientDetails:e=>{c(e),u(!0)},handleAdminDecision:v,actionInProgress:m}),d&&(0,wt.jsx)(tf,{recipient:l,closeDetailModal:y,handleAdminDecision:v,actionInProgress:m})]})};const sf=function(){return(0,wt.jsx)(jt,{children:(0,wt.jsxs)(ct,{children:[(0,wt.jsx)(an,{}),(0,wt.jsxs)(_e,{children:["          ",(0,wt.jsx)(Se,{path:"*",element:(0,wt.jsx)(Jh,{})}),(0,wt.jsx)(Se,{path:"/",element:(0,wt.jsx)(Um,{})}),"          ",(0,wt.jsx)(Se,{path:"/login",element:(0,wt.jsx)(on,{})}),(0,wt.jsx)(Se,{path:"/register",element:(0,wt.jsx)(ln,{})}),(0,wt.jsx)(Se,{path:"/register-as-hospital",element:(0,wt.jsx)(Bh,{})}),(0,wt.jsx)(Se,{path:"/donor/dashboard",element:(0,wt.jsx)(Et,{role:"donor",children:(0,wt.jsx)(hn,{})})}),(0,wt.jsx)(Se,{path:"/donor/profile",element:(0,wt.jsx)(Et,{role:"donor",children:(0,wt.jsx)(pn,{})})}),(0,wt.jsx)(Se,{path:"/donor/medical-form",element:(0,wt.jsx)(Et,{role:"donor",children:(0,wt.jsx)(nr,{})})}),"          ",(0,wt.jsx)(Se,{path:"/donor/appointments",element:(0,wt.jsx)(Et,{role:"donor",children:(0,wt.jsx)(Js,{})})}),(0,wt.jsx)(Se,{path:"/doctor/dashboard",element:(0,wt.jsx)(Et,{role:"doctor",children:(0,wt.jsx)(ni,{})})}),(0,wt.jsx)(Se,{path:"/doctor/applications",element:(0,wt.jsx)(Et,{role:"doctor",children:(0,wt.jsx)(ai,{})})}),"          ",(0,wt.jsx)(Se,{path:"/doctor/appointments",element:(0,wt.jsx)(Et,{role:"doctor",children:(0,wt.jsx)(vo,{})})}),(0,wt.jsx)(Se,{path:"/doctor/donor-document/:appointmentId",element:(0,wt.jsx)(Et,{role:"doctor",children:(0,wt.jsx)(vo,{})})}),(0,wt.jsx)(Se,{path:"/admin/dashboard",element:(0,wt.jsx)(Et,{role:"admin",children:(0,wt.jsx)(ou,{})})}),(0,wt.jsx)(Se,{path:"/admin/doctor-management",element:(0,wt.jsx)(Et,{role:"admin",children:(0,wt.jsx)(lu,{})})}),"          ",(0,wt.jsx)(Se,{path:"/admin/donor-management",element:(0,wt.jsx)(Et,{role:"admin",children:(0,wt.jsx)(Ph,{})})}),(0,wt.jsx)(Se,{path:"/admin/recipient-management",element:(0,wt.jsx)(Et,{role:"admin",children:(0,wt.jsx)(af,{})})}),(0,wt.jsx)(Se,{path:"/recipient/dashboard",element:(0,wt.jsx)(Et,{role:"recipient",children:(0,wt.jsx)(Lh,{})})}),(0,wt.jsx)(Se,{path:"/recipient/profile",element:(0,wt.jsx)(Et,{role:"recipient",children:(0,wt.jsx)(Vm,{})})}),(0,wt.jsx)(Se,{path:"/recipient/test-results",element:(0,wt.jsx)(Et,{role:"recipient",children:(0,wt.jsx)(Mh,{})})}),(0,wt.jsx)(Se,{path:"/recipient/waiting-list",element:(0,wt.jsx)(Et,{role:"recipient",children:(0,wt.jsx)(Fh,{})})}),"          ",(0,wt.jsx)(Se,{path:"/recipient/appointments",element:(0,wt.jsx)(Et,{role:"recipient",children:(0,wt.jsx)(Uh,{})})})]})]})})},of=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:s,getTTFB:i}=t;n(e),r(e),a(e),s(e),i(e)}))};r.createRoot(document.getElementById("root")).render((0,wt.jsxs)(t.StrictMode,{children:[(0,wt.jsx)(er,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"}),(0,wt.jsx)(sf,{})]})),of()})()})();